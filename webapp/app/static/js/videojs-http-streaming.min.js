<!DOCTYPE html><html lang="en"><head><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-140352188-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-140352188-1');</script><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta name="description" content="The CDN for @videojs/http-streaming"/><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"/><meta name="timestamp" content="2019-10-22T08:56:21.470Z"/><link rel="shortcut icon" href="/favicon.ico"/><title>UNPKG - @videojs/http-streaming</title><script>window.Promise || document.write('\x3Cscript src="/es6-promise@4.2.5/dist/es6-promise.min.js">\x3C/script>\x3Cscript>ES6Promise.polyfill()\x3C/script>')</script><script>window.fetch || document.write('\x3Cscript src="/whatwg-fetch@3.0.0/dist/fetch.umd.js">\x3C/script>')</script><script>window.__DATA__ = {"packageName":"@videojs/http-streaming","packageVersion":"1.11.1","availableVersions":["0.1.0","0.2.0","0.2.1","0.3.0","0.3.1","0.4.0","0.5.0","0.5.1","0.5.2","0.5.3","0.6.1","0.7.0","0.7.1","0.7.2","0.8.0","0.9.0","1.0.0","1.0.1","1.0.2","1.1.0","1.2.0","1.2.1","1.2.2","1.2.3","1.2.4","1.2.5","1.2.6","1.3.0","1.3.1","1.4.0","1.4.1","1.4.2","1.5.0","1.5.1","1.6.0","1.7.0","1.8.0","1.9.0","1.9.1","1.9.2","1.9.3","1.10.0","1.10.1","1.10.2","1.10.3-alpha.0","1.10.3","1.10.4","1.10.5-0","1.10.5-1","1.10.5","1.10.6","1.11.0-0","1.11.0-alpha.0","1.11.0-alpha.1","1.11.0","1.11.1"],"filename":"/dist/videojs-http-streaming.min.js","target":{"path":"/dist/videojs-http-streaming.min.js","type":"file","details":{"contentType":"application/javascript","integrity":"sha384-lpQrCYglJPIFuAMSHWwU3UNkHioYackHYW0jU7sIwpAwlAt55h8ViSO0OWzS+ALE","language":"JavaScript","size":253454,"uri":null,"highlights":["<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * @videojs/http-streaming\n</span>","<span class=\"code-comment\"> * @version 1.11.1\n</span>","<span class=\"code-comment\"> * @copyright 2019 Brightcove, Inc\n</span>","<span class=\"code-comment\"> * @license Apache-2.0\n</span>","<span class=\"code-comment\"> */</span>\n","!<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-string\">\"object\"</span>==<span class=\"code-keyword\">typeof</span> exports&amp;&amp;<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">module</span>?t(exports,<span class=\"code-built_in\">require</span>(<span class=\"code-string\">\"video.js\"</span>)):<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> define&amp;&amp;define.amd?define([<span class=\"code-string\">\"exports\"</span>,<span class=\"code-string\">\"video.js\"</span>],t):t(e.videojsHttpStreaming={},e.videojs)}(<span class=\"code-keyword\">this</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-string\">\"use strict\"</span>;t=t&amp;&amp;t.hasOwnProperty(<span class=\"code-string\">\"default\"</span>)?t.default:t;<span class=\"code-keyword\">var</span> i=<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> globalThis?globalThis:<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">window</span>?<span class=\"code-built_in\">window</span>:<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> global?global:<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> self?self:{};<span class=\"code-keyword\">var</span> n,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==i?i:<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">window</span>?<span class=\"code-built_in\">window</span>:{};<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">document</span>?n=<span class=\"code-built_in\">document</span>:(n=r[<span class=\"code-string\">\"__GLOBAL_DOCUMENT_CACHE@4\"</span>])||(n=r[<span class=\"code-string\">\"__GLOBAL_DOCUMENT_CACHE@4\"</span>]={});<span class=\"code-keyword\">var</span> a,s=n,o=(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a,s;i=<span class=\"code-regexp\">/^((?:[a-zA-Z0-9+\\-.]+:)?)(\\/\\/[^\\/?#]*)?((?:[^\\/\\?#]*\\/)*.*?)??(;.*?)?(\\?.*?)?(#.*?)?$/</span>,n=<span class=\"code-regexp\">/^([^\\/?#]*)(.*)$/</span>,r=<span class=\"code-regexp\">/(?:\\/|^)\\.(?=\\/)/g</span>,a=<span class=\"code-regexp\">/(?:\\/|^)\\.\\.\\/(?!\\.\\.\\/).*?(?=\\/)/g</span>,s={<span class=\"code-attr\">buildAbsoluteURL</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(i=i||{},e=e.trim(),!(t=t.trim())){<span class=\"code-keyword\">if</span>(!i.alwaysNormalize)<span class=\"code-keyword\">return</span> e;<span class=\"code-keyword\">var</span> r=s.parseURL(e);<span class=\"code-keyword\">if</span>(!r)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Error trying to parse base URL.\"</span>);<span class=\"code-keyword\">return</span> r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}<span class=\"code-keyword\">var</span> a=s.parseURL(t);<span class=\"code-keyword\">if</span>(!a)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Error trying to parse relative URL.\"</span>);<span class=\"code-keyword\">if</span>(a.scheme)<span class=\"code-keyword\">return</span> i.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;<span class=\"code-keyword\">var</span> o=s.parseURL(e);<span class=\"code-keyword\">if</span>(!o)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Error trying to parse base URL.\"</span>);<span class=\"code-keyword\">if</span>(!o.netLoc&amp;&amp;o.path&amp;&amp;<span class=\"code-string\">\"/\"</span>!==o.path[<span class=\"code-number\">0</span>]){<span class=\"code-keyword\">var</span> u=n.exec(o.path);o.netLoc=u[<span class=\"code-number\">1</span>],o.path=u[<span class=\"code-number\">2</span>]}o.netLoc&amp;&amp;!o.path&amp;&amp;(o.path=<span class=\"code-string\">\"/\"</span>);<span class=\"code-keyword\">var</span> d={<span class=\"code-attr\">scheme</span>:o.scheme,<span class=\"code-attr\">netLoc</span>:a.netLoc,<span class=\"code-attr\">path</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">params</span>:a.params,<span class=\"code-attr\">query</span>:a.query,<span class=\"code-attr\">fragment</span>:a.fragment};<span class=\"code-keyword\">if</span>(!a.netLoc&amp;&amp;(d.netLoc=o.netLoc,<span class=\"code-string\">\"/\"</span>!==a.path[<span class=\"code-number\">0</span>]))<span class=\"code-keyword\">if</span>(a.path){<span class=\"code-keyword\">var</span> l=o.path,h=l.substring(<span class=\"code-number\">0</span>,l.lastIndexOf(<span class=\"code-string\">\"/\"</span>)+<span class=\"code-number\">1</span>)+a.path;d.path=s.normalizePath(h)}<span class=\"code-keyword\">else</span> d.path=o.path,a.params||(d.params=o.params,a.query||(d.query=o.query));<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>===d.path&amp;&amp;(d.path=i.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(d)},<span class=\"code-attr\">parseURL</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=i.exec(e);<span class=\"code-keyword\">return</span> t?{<span class=\"code-attr\">scheme</span>:t[<span class=\"code-number\">1</span>]||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">netLoc</span>:t[<span class=\"code-number\">2</span>]||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">path</span>:t[<span class=\"code-number\">3</span>]||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">params</span>:t[<span class=\"code-number\">4</span>]||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">query</span>:t[<span class=\"code-number\">5</span>]||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">fragment</span>:t[<span class=\"code-number\">6</span>]||<span class=\"code-string\">\"\"</span>}:<span class=\"code-literal\">null</span>},<span class=\"code-attr\">normalizePath</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(e=e.split(<span class=\"code-string\">\"\"</span>).reverse().join(<span class=\"code-string\">\"\"</span>).replace(r,<span class=\"code-string\">\"\"</span>);e.length!==(e=e.replace(a,<span class=\"code-string\">\"\"</span>)).length;);<span class=\"code-keyword\">return</span> e.split(<span class=\"code-string\">\"\"</span>).reverse().join(<span class=\"code-string\">\"\"</span>)},<span class=\"code-attr\">buildURLFromParts</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s}(a={<span class=\"code-attr\">exports</span>:{}},a.exports),a.exports),u=<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">window</span>?<span class=\"code-built_in\">window</span>:<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==i?i:<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> self?self:{},d=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-regexp\">/^[a-z]+:/i</span>.test(t)?t:(<span class=\"code-regexp\">/\\/\\//i</span>.test(e)||(e=o.buildAbsoluteURL(u.location.href,e)),o.buildAbsoluteURL(e,t))},l=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> e&amp;&amp;i.responseURL&amp;&amp;t!==i.responseURL?i.responseURL:t};\n","<span class=\"code-comment\">/*! @name m3u8-parser @version 4.4.0 @license Apache-2.0 */</span>\n","<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">h</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span>(h=<span class=\"code-built_in\">Object</span>.assign||<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">1</span>;t&lt;<span class=\"code-built_in\">arguments</span>.length;t++){<span class=\"code-keyword\">var</span> i=<span class=\"code-built_in\">arguments</span>[t];<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> i)<span class=\"code-built_in\">Object</span>.prototype.hasOwnProperty.call(i,n)&amp;&amp;(e[n]=i[n])}<span class=\"code-keyword\">return</span> e}).apply(<span class=\"code-keyword\">this</span>,<span class=\"code-built_in\">arguments</span>)}<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">c</span>(<span class=\"code-params\">e,t</span>)</span>{e.prototype=<span class=\"code-built_in\">Object</span>.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}<span class=\"code-keyword\">var</span> f=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.listeners={}}<span class=\"code-keyword\">var</span> t=e.prototype;<span class=\"code-keyword\">return</span> t.on=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.listeners[e]||(<span class=\"code-keyword\">this</span>.listeners[e]=[]),<span class=\"code-keyword\">this</span>.listeners[e].push(t)},t.off=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.listeners[e])<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.listeners[e].indexOf(t);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.listeners[e].splice(i,<span class=\"code-number\">1</span>),i&gt;<span class=\"code-number\">-1</span>},t.trigger=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n,r=<span class=\"code-keyword\">this</span>.listeners[e];<span class=\"code-keyword\">if</span>(r)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">2</span>===<span class=\"code-built_in\">arguments</span>.length)<span class=\"code-keyword\">for</span>(i=r.length,t=<span class=\"code-number\">0</span>;t&lt;i;++t)r[t].call(<span class=\"code-keyword\">this</span>,<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">for</span>(n=<span class=\"code-built_in\">Array</span>.prototype.slice.call(<span class=\"code-built_in\">arguments</span>,<span class=\"code-number\">1</span>),i=r.length,t=<span class=\"code-number\">0</span>;t&lt;i;++t)r[t].apply(<span class=\"code-keyword\">this</span>,n)},t.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.listeners={}},t.pipe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.push(t)})},e}(),p=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">return</span>(t=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>).buffer=<span class=\"code-string\">\"\"</span>,t}<span class=\"code-keyword\">return</span> c(t,e),t.prototype.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">this</span>.buffer+=e,t=<span class=\"code-keyword\">this</span>.buffer.indexOf(<span class=\"code-string\">\"\\n\"</span>);t&gt;<span class=\"code-number\">-1</span>;t=<span class=\"code-keyword\">this</span>.buffer.indexOf(<span class=\"code-string\">\"\\n\"</span>))<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,<span class=\"code-keyword\">this</span>.buffer.substring(<span class=\"code-number\">0</span>,t)),<span class=\"code-keyword\">this</span>.buffer=<span class=\"code-keyword\">this</span>.buffer.substring(t+<span class=\"code-number\">1</span>)},t}(f),m=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t,i=e.split(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">RegExp</span>(<span class=\"code-string\">'(?:^|,)((?:[^=]*)=(?:\"[^\"]*\"|[^,]*))'</span>)),n={},r=i.length;r--;)<span class=\"code-string\">\"\"</span>!==i[r]&amp;&amp;((t=<span class=\"code-regexp\">/([^=]*)=(.*)/</span>.exec(i[r]).slice(<span class=\"code-number\">1</span>))[<span class=\"code-number\">0</span>]=t[<span class=\"code-number\">0</span>].replace(<span class=\"code-regexp\">/^\\s+|\\s+$/g</span>,<span class=\"code-string\">\"\"</span>),t[<span class=\"code-number\">1</span>]=t[<span class=\"code-number\">1</span>].replace(<span class=\"code-regexp\">/^\\s+|\\s+$/g</span>,<span class=\"code-string\">\"\"</span>),t[<span class=\"code-number\">1</span>]=t[<span class=\"code-number\">1</span>].replace(<span class=\"code-regexp\">/^['\"](.*)['\"]$/g</span>,<span class=\"code-string\">\"$1\"</span>),n[t[<span class=\"code-number\">0</span>]]=t[<span class=\"code-number\">1</span>]);<span class=\"code-keyword\">return</span> n},g=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">return</span>(t=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>).customParsers=[],t.tagMappers=[],t}c(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=<span class=\"code-keyword\">this</span>;<span class=\"code-number\">0</span>!==(e=e.trim()).length&amp;&amp;(<span class=\"code-string\">\"#\"</span>===e[<span class=\"code-number\">0</span>]?<span class=\"code-keyword\">this</span>.tagMappers.reduce(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=i(e);<span class=\"code-keyword\">return</span> n===e?t:t.concat([n])},[e]).forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;n.customParsers.length;r++)<span class=\"code-keyword\">if</span>(n.customParsers[r].call(n,e))<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===e.indexOf(<span class=\"code-string\">\"#EXT\"</span>))<span class=\"code-keyword\">if</span>(e=e.replace(<span class=\"code-string\">\"\\r\"</span>,<span class=\"code-string\">\"\"</span>),t=<span class=\"code-regexp\">/^#EXTM3U/</span>.exec(e))n.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"m3u\"</span>});<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXTINF:?([0-9\\.]*)?,?(.*)?$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"inf\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.duration=<span class=\"code-built_in\">parseFloat</span>(t[<span class=\"code-number\">1</span>])),t[<span class=\"code-number\">2</span>]&amp;&amp;(i.title=t[<span class=\"code-number\">2</span>]),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-TARGETDURATION:?([0-9.]*)?/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"targetduration\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.duration=<span class=\"code-built_in\">parseInt</span>(t[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>)),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"totalduration\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.duration=<span class=\"code-built_in\">parseInt</span>(t[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>)),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-VERSION:?([0-9.]*)?/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"version\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.version=<span class=\"code-built_in\">parseInt</span>(t[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>)),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-MEDIA-SEQUENCE:?(\\-?[0-9.]*)?/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"media-sequence\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.number=<span class=\"code-built_in\">parseInt</span>(t[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>)),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\\-?[0-9.]*)?/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"discontinuity-sequence\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.number=<span class=\"code-built_in\">parseInt</span>(t[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>)),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"playlist-type\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.playlistType=t[<span class=\"code-number\">1</span>]),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"byterange\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.length=<span class=\"code-built_in\">parseInt</span>(t[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>)),t[<span class=\"code-number\">2</span>]&amp;&amp;(i.offset=<span class=\"code-built_in\">parseInt</span>(t[<span class=\"code-number\">2</span>],<span class=\"code-number\">10</span>)),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"allow-cache\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.allowed=!<span class=\"code-regexp\">/NO/</span>.test(t[<span class=\"code-number\">1</span>])),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-MAP:?(.*)$/</span>.exec(e)){<span class=\"code-keyword\">if</span>(i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"map\"</span>},t[<span class=\"code-number\">1</span>]){<span class=\"code-keyword\">var</span> a=m(t[<span class=\"code-number\">1</span>]);<span class=\"code-keyword\">if</span>(a.URI&amp;&amp;(i.uri=a.URI),a.BYTERANGE){<span class=\"code-keyword\">var</span> s=a.BYTERANGE.split(<span class=\"code-string\">\"@\"</span>),o=s[<span class=\"code-number\">0</span>],u=s[<span class=\"code-number\">1</span>];i.byterange={},o&amp;&amp;(i.byterange.length=<span class=\"code-built_in\">parseInt</span>(o,<span class=\"code-number\">10</span>)),u&amp;&amp;(i.byterange.offset=<span class=\"code-built_in\">parseInt</span>(u,<span class=\"code-number\">10</span>))}}n.trigger(<span class=\"code-string\">\"data\"</span>,i)}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-STREAM-INF:?(.*)$/</span>.exec(e)){<span class=\"code-keyword\">if</span>(i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"stream-inf\"</span>},t[<span class=\"code-number\">1</span>]){<span class=\"code-keyword\">if</span>(i.attributes=m(t[<span class=\"code-number\">1</span>]),i.attributes.RESOLUTION){<span class=\"code-keyword\">var</span> d=i.attributes.RESOLUTION.split(<span class=\"code-string\">\"x\"</span>),l={};d[<span class=\"code-number\">0</span>]&amp;&amp;(l.width=<span class=\"code-built_in\">parseInt</span>(d[<span class=\"code-number\">0</span>],<span class=\"code-number\">10</span>)),d[<span class=\"code-number\">1</span>]&amp;&amp;(l.height=<span class=\"code-built_in\">parseInt</span>(d[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>)),i.attributes.RESOLUTION=l}i.attributes.BANDWIDTH&amp;&amp;(i.attributes.BANDWIDTH=<span class=\"code-built_in\">parseInt</span>(i.attributes.BANDWIDTH,<span class=\"code-number\">10</span>)),i.attributes[<span class=\"code-string\">\"PROGRAM-ID\"</span>]&amp;&amp;(i.attributes[<span class=\"code-string\">\"PROGRAM-ID\"</span>]=<span class=\"code-built_in\">parseInt</span>(i.attributes[<span class=\"code-string\">\"PROGRAM-ID\"</span>],<span class=\"code-number\">10</span>))}n.trigger(<span class=\"code-string\">\"data\"</span>,i)}<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-MEDIA:?(.*)$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"media\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.attributes=m(t[<span class=\"code-number\">1</span>])),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-ENDLIST/</span>.exec(e))n.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"endlist\"</span>});<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-DISCONTINUITY/</span>.exec(e))n.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"discontinuity\"</span>});<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"program-date-time\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.dateTimeString=t[<span class=\"code-number\">1</span>],i.dateTimeObject=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Date</span>(t[<span class=\"code-number\">1</span>])),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-KEY:?(.*)$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"key\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.attributes=m(t[<span class=\"code-number\">1</span>]),i.attributes.IV&amp;&amp;(<span class=\"code-string\">\"0x\"</span>===i.attributes.IV.substring(<span class=\"code-number\">0</span>,<span class=\"code-number\">2</span>).toLowerCase()&amp;&amp;(i.attributes.IV=i.attributes.IV.substring(<span class=\"code-number\">2</span>)),i.attributes.IV=i.attributes.IV.match(<span class=\"code-regexp\">/.{8}/g</span>),i.attributes.IV[<span class=\"code-number\">0</span>]=<span class=\"code-built_in\">parseInt</span>(i.attributes.IV[<span class=\"code-number\">0</span>],<span class=\"code-number\">16</span>),i.attributes.IV[<span class=\"code-number\">1</span>]=<span class=\"code-built_in\">parseInt</span>(i.attributes.IV[<span class=\"code-number\">1</span>],<span class=\"code-number\">16</span>),i.attributes.IV[<span class=\"code-number\">2</span>]=<span class=\"code-built_in\">parseInt</span>(i.attributes.IV[<span class=\"code-number\">2</span>],<span class=\"code-number\">16</span>),i.attributes.IV[<span class=\"code-number\">3</span>]=<span class=\"code-built_in\">parseInt</span>(i.attributes.IV[<span class=\"code-number\">3</span>],<span class=\"code-number\">16</span>),i.attributes.IV=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>(i.attributes.IV))),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-START:?(.*)$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"start\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.attributes=m(t[<span class=\"code-number\">1</span>]),i.attributes[<span class=\"code-string\">\"TIME-OFFSET\"</span>]=<span class=\"code-built_in\">parseFloat</span>(i.attributes[<span class=\"code-string\">\"TIME-OFFSET\"</span>]),i.attributes.PRECISE=<span class=\"code-regexp\">/YES/</span>.test(i.attributes.PRECISE)),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-CUE-OUT-CONT:?(.*)?$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"cue-out-cont\"</span>},t[<span class=\"code-number\">1</span>]?i.data=t[<span class=\"code-number\">1</span>]:i.data=<span class=\"code-string\">\"\"</span>,<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-CUE-OUT:?(.*)?$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"cue-out\"</span>},t[<span class=\"code-number\">1</span>]?i.data=t[<span class=\"code-number\">1</span>]:i.data=<span class=\"code-string\">\"\"</span>,<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-CUE-IN:?(.*)?$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"cue-in\"</span>},t[<span class=\"code-number\">1</span>]?i.data=t[<span class=\"code-number\">1</span>]:i.data=<span class=\"code-string\">\"\"</span>,<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);n.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">data</span>:e.slice(<span class=\"code-number\">4</span>)})}}}<span class=\"code-keyword\">else</span> n.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"comment\"</span>,<span class=\"code-attr\">text</span>:e.slice(<span class=\"code-number\">1</span>)})}):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"uri\"</span>,<span class=\"code-attr\">uri</span>:e}))},i.addParser=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>,i=e.expression,n=e.customType,r=e.dataParser,a=e.segment;<span class=\"code-string\">\"function\"</span>!=<span class=\"code-keyword\">typeof</span> r&amp;&amp;(r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e}),<span class=\"code-keyword\">this</span>.customParsers.push(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(i.exec(e))<span class=\"code-keyword\">return</span> t.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"custom\"</span>,<span class=\"code-attr\">data</span>:r(e),<span class=\"code-attr\">customType</span>:n,<span class=\"code-attr\">segment</span>:a}),!<span class=\"code-number\">0</span>})},i.addTagMapper=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.expression,i=e.map;<span class=\"code-keyword\">this</span>.tagMappers.push(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t.test(e)?i(e):e})},t}(f);<span class=\"code-keyword\">var</span> y=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t;(t=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>).lineStream=<span class=\"code-keyword\">new</span> p,t.parseStream=<span class=\"code-keyword\">new</span> g,t.lineStream.pipe(t.parseStream);<span class=\"code-keyword\">var</span> i,n,r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">ReferenceError</span>(<span class=\"code-string\">\"this hasn't been initialised - super() hasn't been called\"</span>);<span class=\"code-keyword\">return</span> e}(t),a=[],s={},o={<span class=\"code-attr\">AUDIO</span>:{},<span class=\"code-attr\">VIDEO</span>:{},<span class=\"code-string\">\"CLOSED-CAPTIONS\"</span>:{},<span class=\"code-attr\">SUBTITLES</span>:{}},d=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> t.manifest={<span class=\"code-attr\">allowCache</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">discontinuityStarts</span>:[],<span class=\"code-attr\">segments</span>:[]},t.parseStream.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,l;({<span class=\"code-attr\">tag</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{(({<span class=\"code-string\">\"allow-cache\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.manifest.allowCache=e.allowed,<span class=\"code-string\">\"allowed\"</span><span class=\"code-keyword\">in</span> e||(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"info\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"defaulting allowCache to YES\"</span>}),<span class=\"code-keyword\">this</span>.manifest.allowCache=!<span class=\"code-number\">0</span>)},<span class=\"code-attr\">byterange</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t={};<span class=\"code-string\">\"length\"</span><span class=\"code-keyword\">in</span> e&amp;&amp;(s.byterange=t,t.length=e.length,<span class=\"code-string\">\"offset\"</span><span class=\"code-keyword\">in</span> e||(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"info\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"defaulting offset to zero\"</span>}),e.offset=<span class=\"code-number\">0</span>)),<span class=\"code-string\">\"offset\"</span><span class=\"code-keyword\">in</span> e&amp;&amp;(s.byterange=t,t.offset=e.offset)},<span class=\"code-attr\">endlist</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.manifest.endList=!<span class=\"code-number\">0</span>},<span class=\"code-attr\">inf</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-string\">\"mediaSequence\"</span><span class=\"code-keyword\">in</span> <span class=\"code-keyword\">this</span>.manifest||(<span class=\"code-keyword\">this</span>.manifest.mediaSequence=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"info\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"defaulting media sequence to zero\"</span>})),<span class=\"code-string\">\"discontinuitySequence\"</span><span class=\"code-keyword\">in</span> <span class=\"code-keyword\">this</span>.manifest||(<span class=\"code-keyword\">this</span>.manifest.discontinuitySequence=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"info\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"defaulting discontinuity sequence to zero\"</span>})),e.duration&gt;<span class=\"code-number\">0</span>&amp;&amp;(s.duration=e.duration),<span class=\"code-number\">0</span>===e.duration&amp;&amp;(s.duration=<span class=\"code-number\">.01</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"info\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"updating zero segment duration to a small value\"</span>})),<span class=\"code-keyword\">this</span>.manifest.segments=a},<span class=\"code-attr\">key</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(e.attributes)<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"NONE\"</span>!==e.attributes.METHOD)<span class=\"code-keyword\">if</span>(e.attributes.URI){<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed\"</span>===e.attributes.KEYFORMAT){<span class=\"code-keyword\">return</span><span class=\"code-number\">-1</span>===[<span class=\"code-string\">\"SAMPLE-AES\"</span>,<span class=\"code-string\">\"SAMPLE-AES-CTR\"</span>,<span class=\"code-string\">\"SAMPLE-AES-CENC\"</span>].indexOf(e.attributes.METHOD)?<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"invalid key method provided for Widevine\"</span>}):(<span class=\"code-string\">\"SAMPLE-AES-CENC\"</span>===e.attributes.METHOD&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead\"</span>}),<span class=\"code-string\">\"data:text/plain;base64,\"</span>!==e.attributes.URI.substring(<span class=\"code-number\">0</span>,<span class=\"code-number\">23</span>)?<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"invalid key URI provided for Widevine\"</span>}):e.attributes.KEYID&amp;&amp;<span class=\"code-string\">\"0x\"</span>===e.attributes.KEYID.substring(<span class=\"code-number\">0</span>,<span class=\"code-number\">2</span>)?<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.manifest.contentProtection={<span class=\"code-string\">\"com.widevine.alpha\"</span>:{<span class=\"code-attr\">attributes</span>:{<span class=\"code-attr\">schemeIdUri</span>:e.attributes.KEYFORMAT,<span class=\"code-attr\">keyId</span>:e.attributes.KEYID.substring(<span class=\"code-number\">2</span>)},<span class=\"code-attr\">pssh</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=u.atob(e||<span class=\"code-string\">\"\"</span>),i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(t.length),n=<span class=\"code-number\">0</span>;n&lt;t.length;n++)i[n]=t.charCodeAt(n);<span class=\"code-keyword\">return</span> i}(e.attributes.URI.split(<span class=\"code-string\">\",\"</span>)[<span class=\"code-number\">1</span>])}}):<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"invalid key ID provided for Widevine\"</span>}))}e.attributes.METHOD||<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"defaulting key method to AES-128\"</span>}),n={<span class=\"code-attr\">method</span>:e.attributes.METHOD||<span class=\"code-string\">\"AES-128\"</span>,<span class=\"code-attr\">uri</span>:e.attributes.URI},<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e.attributes.IV&amp;&amp;(n.iv=e.attributes.IV)}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring key declaration without URI\"</span>});<span class=\"code-keyword\">else</span> n=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring key declaration without attribute list\"</span>})},<span class=\"code-string\">\"media-sequence\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-built_in\">isFinite</span>(e.number)?<span class=\"code-keyword\">this</span>.manifest.mediaSequence=e.number:<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring invalid media sequence: \"</span>+e.number})},<span class=\"code-string\">\"discontinuity-sequence\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-built_in\">isFinite</span>(e.number)?(<span class=\"code-keyword\">this</span>.manifest.discontinuitySequence=e.number,d=e.number):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring invalid discontinuity sequence: \"</span>+e.number})},<span class=\"code-string\">\"playlist-type\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{/VOD|EVENT/.test(e.playlistType)?<span class=\"code-keyword\">this</span>.manifest.playlistType=e.playlistType:<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring unknown playlist type: \"</span>+e.playlist})},<span class=\"code-attr\">map</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i={},e.uri&amp;&amp;(i.uri=e.uri),e.byterange&amp;&amp;(i.byterange=e.byterange)},<span class=\"code-string\">\"stream-inf\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.manifest.playlists=a,<span class=\"code-keyword\">this</span>.manifest.mediaGroups=<span class=\"code-keyword\">this</span>.manifest.mediaGroups||o,e.attributes?(s.attributes||(s.attributes={}),h(s.attributes,e.attributes)):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring empty stream-inf attributes\"</span>})},<span class=\"code-attr\">media</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.manifest.mediaGroups=<span class=\"code-keyword\">this</span>.manifest.mediaGroups||o,e.attributes&amp;&amp;e.attributes.TYPE&amp;&amp;e.attributes[<span class=\"code-string\">\"GROUP-ID\"</span>]&amp;&amp;e.attributes.NAME){<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.manifest.mediaGroups[e.attributes.TYPE];i[e.attributes[<span class=\"code-string\">\"GROUP-ID\"</span>]]=i[e.attributes[<span class=\"code-string\">\"GROUP-ID\"</span>]]||{},t=i[e.attributes[<span class=\"code-string\">\"GROUP-ID\"</span>]],(l={<span class=\"code-attr\">default</span>:<span class=\"code-regexp\">/yes/i</span>.test(e.attributes.DEFAULT)}).default?l.autoselect=!<span class=\"code-number\">0</span>:l.autoselect=<span class=\"code-regexp\">/yes/i</span>.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&amp;&amp;(l.language=e.attributes.LANGUAGE),e.attributes.URI&amp;&amp;(l.uri=e.attributes.URI),e.attributes[<span class=\"code-string\">\"INSTREAM-ID\"</span>]&amp;&amp;(l.instreamId=e.attributes[<span class=\"code-string\">\"INSTREAM-ID\"</span>]),e.attributes.CHARACTERISTICS&amp;&amp;(l.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&amp;&amp;(l.forced=<span class=\"code-regexp\">/yes/i</span>.test(e.attributes.FORCED)),t[e.attributes.NAME]=l}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring incomplete or missing media group\"</span>})},<span class=\"code-attr\">discontinuity</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{d+=<span class=\"code-number\">1</span>,s.discontinuity=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.manifest.discontinuityStarts.push(a.length)},<span class=\"code-string\">\"program-date-time\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.manifest.dateTimeString&amp;&amp;(<span class=\"code-keyword\">this</span>.manifest.dateTimeString=e.dateTimeString,<span class=\"code-keyword\">this</span>.manifest.dateTimeObject=e.dateTimeObject),s.dateTimeString=e.dateTimeString,s.dateTimeObject=e.dateTimeObject},<span class=\"code-attr\">targetduration</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{!<span class=\"code-built_in\">isFinite</span>(e.duration)||e.duration&lt;<span class=\"code-number\">0</span>?<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring invalid target duration: \"</span>+e.duration}):<span class=\"code-keyword\">this</span>.manifest.targetDuration=e.duration},<span class=\"code-attr\">totalduration</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{!<span class=\"code-built_in\">isFinite</span>(e.duration)||e.duration&lt;<span class=\"code-number\">0</span>?<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring invalid total duration: \"</span>+e.duration}):<span class=\"code-keyword\">this</span>.manifest.totalDuration=e.duration},<span class=\"code-attr\">start</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.attributes&amp;&amp;!<span class=\"code-built_in\">isNaN</span>(e.attributes[<span class=\"code-string\">\"TIME-OFFSET\"</span>])?<span class=\"code-keyword\">this</span>.manifest.start={<span class=\"code-attr\">timeOffset</span>:e.attributes[<span class=\"code-string\">\"TIME-OFFSET\"</span>],<span class=\"code-attr\">precise</span>:e.attributes.PRECISE}:<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring start declaration without appropriate attribute list\"</span>})},<span class=\"code-string\">\"cue-out\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{s.cueOut=e.data},<span class=\"code-string\">\"cue-out-cont\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{s.cueOutCont=e.data},<span class=\"code-string\">\"cue-in\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{s.cueIn=e.data}})[e.tagType]||<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{}).call(r)},<span class=\"code-attr\">uri</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{s.uri=e.uri,a.push(s),!<span class=\"code-keyword\">this</span>.manifest.targetDuration||<span class=\"code-string\">\"duration\"</span><span class=\"code-keyword\">in</span> s||(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"defaulting segment duration to the target duration\"</span>}),s.duration=<span class=\"code-keyword\">this</span>.manifest.targetDuration),n&amp;&amp;(s.key=n),s.timeline=d,i&amp;&amp;(s.map=i),s={}},<span class=\"code-attr\">comment</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{},<span class=\"code-attr\">custom</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.segment?(s.custom=s.custom||{},s.custom[e.customType]=e.data):(<span class=\"code-keyword\">this</span>.manifest.custom=<span class=\"code-keyword\">this</span>.manifest.custom||{},<span class=\"code-keyword\">this</span>.manifest.custom[e.customType]=e.data)}})[e.type].call(r)}),t}c(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.lineStream.push(e)},i.end=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.lineStream.push(<span class=\"code-string\">\"\\n\"</span>)},i.addParser=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.parseStream.addParser(e)},i.addTagMapper=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.parseStream.addTagMapper(e)},t}(f),_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!(e <span class=\"code-keyword\">instanceof</span> t))<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">TypeError</span>(<span class=\"code-string\">\"Cannot call a class as a function\"</span>)},v=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;t.length;i++){<span class=\"code-keyword\">var</span> n=t[i];n.enumerable=n.enumerable||!<span class=\"code-number\">1</span>,n.configurable=!<span class=\"code-number\">0</span>,<span class=\"code-string\">\"value\"</span><span class=\"code-keyword\">in</span> n&amp;&amp;(n.writable=!<span class=\"code-number\">0</span>),<span class=\"code-built_in\">Object</span>.defineProperty(e,n.key,n)}}<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i,n</span>)</span>{<span class=\"code-keyword\">return</span> i&amp;&amp;e(t.prototype,i),n&amp;&amp;e(t,n),t}}(),b=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"function\"</span>!=<span class=\"code-keyword\">typeof</span> t&amp;&amp;<span class=\"code-literal\">null</span>!==t)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">TypeError</span>(<span class=\"code-string\">\"Super expression must either be null or a function, not \"</span>+<span class=\"code-keyword\">typeof</span> t);e.prototype=<span class=\"code-built_in\">Object</span>.create(t&amp;&amp;t.prototype,{<span class=\"code-attr\">constructor</span>:{<span class=\"code-attr\">value</span>:e,<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">1</span>,<span class=\"code-attr\">writable</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">configurable</span>:!<span class=\"code-number\">0</span>}}),t&amp;&amp;(<span class=\"code-built_in\">Object</span>.setPrototypeOf?<span class=\"code-built_in\">Object</span>.setPrototypeOf(e,t):e.__proto__=t)},T=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">ReferenceError</span>(<span class=\"code-string\">\"this hasn't been initialised - super() hasn't been called\"</span>);<span class=\"code-keyword\">return</span>!t||<span class=\"code-string\">\"object\"</span>!=<span class=\"code-keyword\">typeof</span> t&amp;&amp;<span class=\"code-string\">\"function\"</span>!=<span class=\"code-keyword\">typeof</span> t?e:t},S=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-built_in\">Array</span>.isArray(e))<span class=\"code-keyword\">return</span> e;<span class=\"code-keyword\">if</span>(<span class=\"code-built_in\">Symbol</span>.iterator <span class=\"code-keyword\">in</span> <span class=\"code-built_in\">Object</span>(e))<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=[],n=!<span class=\"code-number\">0</span>,r=!<span class=\"code-number\">1</span>,a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">try</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> s,o=e[<span class=\"code-built_in\">Symbol</span>.iterator]();!(n=(s=o.next()).done)&amp;&amp;(i.push(s.value),!t||i.length!==t);n=!<span class=\"code-number\">0</span>);}<span class=\"code-keyword\">catch</span>(e){r=!<span class=\"code-number\">0</span>,a=e}<span class=\"code-keyword\">finally</span>{<span class=\"code-keyword\">try</span>{!n&amp;&amp;o.return&amp;&amp;o.return()}<span class=\"code-keyword\">finally</span>{<span class=\"code-keyword\">if</span>(r)<span class=\"code-keyword\">throw</span> a}}<span class=\"code-keyword\">return</span> i}(e,t);<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">TypeError</span>(<span class=\"code-string\">\"Invalid attempt to destructure non-iterable instance\"</span>)}}(),k=t.mergeOptions,w=t.EventTarget,L=t.log,E=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{[<span class=\"code-string\">\"AUDIO\"</span>,<span class=\"code-string\">\"SUBTITLES\"</span>].forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> e.mediaGroups[i])<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r <span class=\"code-keyword\">in</span> e.mediaGroups[i][n]){<span class=\"code-keyword\">var</span> a=e.mediaGroups[i][n][r];t(a,i,n,r)}})},U=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=k(e,{}),n=i.playlists[t.uri];<span class=\"code-keyword\">if</span>(!n)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(n.segments&amp;&amp;t.segments&amp;&amp;n.segments.length===t.segments.length&amp;&amp;n.endList===t.endList&amp;&amp;n.mediaSequence===t.mediaSequence)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> r=k(n,t);n.segments&amp;&amp;(r.segments=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=t.slice();i=i||<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-built_in\">Math</span>.min(e.length,t.length+i),a=i;a&lt;r;a++)n[a-i]=k(e[a],n[a-i]);<span class=\"code-keyword\">return</span> n}(n.segments,t.segments,t.mediaSequence-n.mediaSequence)),r.segments.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{!<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{e.resolvedUri||(e.resolvedUri=d(t,e.uri)),e.key&amp;&amp;!e.key.resolvedUri&amp;&amp;(e.key.resolvedUri=d(t,e.key.uri)),e.map&amp;&amp;!e.map.resolvedUri&amp;&amp;(e.map.resolvedUri=d(t,e.map.uri))}(e,r.resolvedUri)});<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a=<span class=\"code-number\">0</span>;a&lt;i.playlists.length;a++)i.playlists[a].uri===t.uri&amp;&amp;(i.playlists[a]=r);<span class=\"code-keyword\">return</span> i.playlists[t.uri]=r,i},I=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=e.playlists.length;t--;){<span class=\"code-keyword\">var</span> i=e.playlists[t];e.playlists[i.uri]=i,i.resolvedUri=d(e.uri,i.uri),i.id=t,i.attributes||(i.attributes={},L.warn(<span class=\"code-string\">\"Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.\"</span>))}},A=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{E(e,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{t.uri&amp;&amp;(t.resolvedUri=d(e.uri,t.uri))})},O=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.segments[e.segments.length<span class=\"code-number\">-1</span>];<span class=\"code-keyword\">return</span> t&amp;&amp;i&amp;&amp;i.duration?<span class=\"code-number\">1e3</span>*i.duration:<span class=\"code-number\">500</span>*(e.targetDuration||<span class=\"code-number\">10</span>)},C=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-built_in\">arguments</span>.length&gt;<span class=\"code-number\">2</span>&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">2</span>]?<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">2</span>]:{};_(<span class=\"code-keyword\">this</span>,t);<span class=\"code-keyword\">var</span> r=T(<span class=\"code-keyword\">this</span>,(t.__proto__||<span class=\"code-built_in\">Object</span>.getPrototypeOf(t)).call(<span class=\"code-keyword\">this</span>)),a=n.withCredentials,s=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==a&amp;&amp;a,o=n.handleManifestRedirects,u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==o&amp;&amp;o;r.srcUrl=e,r.hls_=i,r.withCredentials=s,r.handleManifestRedirects=u;<span class=\"code-keyword\">var</span> l=i.options_;<span class=\"code-keyword\">if</span>(r.customTagParsers=l&amp;&amp;l.customTagParsers||[],r.customTagMappers=l&amp;&amp;l.customTagMappers||[],!r.srcUrl)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"A non-empty playlist URL is required\"</span>);<span class=\"code-keyword\">return</span> r.state=<span class=\"code-string\">\"HAVE_NOTHING\"</span>,r.on(<span class=\"code-string\">\"mediaupdatetimeout\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-string\">\"HAVE_METADATA\"</span>===r.state&amp;&amp;(r.state=<span class=\"code-string\">\"HAVE_CURRENT_METADATA\"</span>,r.request=r.hls_.xhr({<span class=\"code-attr\">uri</span>:d(r.master.uri,r.media().uri),<span class=\"code-attr\">withCredentials</span>:r.withCredentials},<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(r.request)<span class=\"code-keyword\">return</span> e?r.playlistRequestError(r.request,r.media().uri,<span class=\"code-string\">\"HAVE_METADATA\"</span>):<span class=\"code-keyword\">void</span> r.haveMetadata(r.request,r.media().uri)}))}),r}<span class=\"code-keyword\">return</span> b(t,w),v(t,[{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"playlistRequestError\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">this</span>.request=<span class=\"code-literal\">null</span>,i&amp;&amp;(<span class=\"code-keyword\">this</span>.state=i),<span class=\"code-keyword\">this</span>.error={<span class=\"code-attr\">playlist</span>:<span class=\"code-keyword\">this</span>.master.playlists[t],<span class=\"code-attr\">status</span>:e.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"HLS playlist request error at URL: \"</span>+t+<span class=\"code-string\">\".\"</span>,<span class=\"code-attr\">responseText</span>:e.responseText,<span class=\"code-attr\">code</span>:e.status&gt;=<span class=\"code-number\">500</span>?<span class=\"code-number\">4</span>:<span class=\"code-number\">2</span>},<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"error\"</span>)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"haveMetadata\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.request=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_METADATA\"</span>;<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">new</span> y;<span class=\"code-keyword\">this</span>.customTagParsers.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> n.addParser(e)}),<span class=\"code-keyword\">this</span>.customTagMappers.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> n.addTagMapper(e)}),n.push(e.responseText),n.end(),n.manifest.uri=t,n.manifest.attributes=n.manifest.attributes||{};<span class=\"code-keyword\">var</span> r=U(<span class=\"code-keyword\">this</span>.master,n.manifest);<span class=\"code-keyword\">this</span>.targetDuration=n.manifest.targetDuration,r?(<span class=\"code-keyword\">this</span>.master=r,<span class=\"code-keyword\">this</span>.media_=<span class=\"code-keyword\">this</span>.master.playlists[n.manifest.uri]):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"playlistunchanged\"</span>),<span class=\"code-keyword\">this</span>.media().endList||(u.clearTimeout(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout),<span class=\"code-keyword\">this</span>.mediaUpdateTimeout=u.setTimeout(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i.trigger(<span class=\"code-string\">\"mediaupdatetimeout\"</span>)},O(<span class=\"code-keyword\">this</span>.media(),!!r))),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedplaylist\"</span>)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"dispose\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.stopRequest(),u.clearTimeout(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout),u.clearTimeout(<span class=\"code-keyword\">this</span>.finalRenditionTimeout)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"stopRequest\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.request){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.request;<span class=\"code-keyword\">this</span>.request=<span class=\"code-literal\">null</span>,e.onreadystatechange=<span class=\"code-literal\">null</span>,e.abort()}}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"media\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.media_;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"HAVE_NOTHING\"</span>===<span class=\"code-keyword\">this</span>.state)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Cannot switch media playlist from \"</span>+<span class=\"code-keyword\">this</span>.state);<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"string\"</span>==<span class=\"code-keyword\">typeof</span> e){<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.master.playlists[e])<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Unknown playlist URI: \"</span>+e);e=<span class=\"code-keyword\">this</span>.master.playlists[e]}<span class=\"code-keyword\">if</span>(u.clearTimeout(<span class=\"code-keyword\">this</span>.finalRenditionTimeout),t){<span class=\"code-keyword\">var</span> n=e.targetDuration/<span class=\"code-number\">2</span>*<span class=\"code-number\">1e3</span>||<span class=\"code-number\">5e3</span>;<span class=\"code-keyword\">this</span>.finalRenditionTimeout=u.setTimeout(<span class=\"code-keyword\">this</span>.media.bind(<span class=\"code-keyword\">this</span>,e,!<span class=\"code-number\">1</span>),n)}<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">this</span>.state,a=!<span class=\"code-keyword\">this</span>.media_||e.uri!==<span class=\"code-keyword\">this</span>.media_.uri;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.master.playlists[e.uri].endList)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.request&amp;&amp;(<span class=\"code-keyword\">this</span>.request.onreadystatechange=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.request.abort(),<span class=\"code-keyword\">this</span>.request=<span class=\"code-literal\">null</span>),<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_METADATA\"</span>,<span class=\"code-keyword\">this</span>.media_=e,<span class=\"code-keyword\">void</span>(a&amp;&amp;(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediachanging\"</span>),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediachange\"</span>)));<span class=\"code-keyword\">if</span>(a){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"SWITCHING_MEDIA\"</span>,<span class=\"code-keyword\">this</span>.request){<span class=\"code-keyword\">if</span>(e.resolvedUri===<span class=\"code-keyword\">this</span>.request.url)<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">this</span>.request.onreadystatechange=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.request.abort(),<span class=\"code-keyword\">this</span>.request=<span class=\"code-literal\">null</span>}<span class=\"code-keyword\">this</span>.media_&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediachanging\"</span>),<span class=\"code-keyword\">this</span>.request=<span class=\"code-keyword\">this</span>.hls_.xhr({<span class=\"code-attr\">uri</span>:e.resolvedUri,<span class=\"code-attr\">withCredentials</span>:<span class=\"code-keyword\">this</span>.withCredentials},<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,n</span>)</span>{<span class=\"code-keyword\">if</span>(i.request){<span class=\"code-keyword\">if</span>(e.resolvedUri=l(i.handleManifestRedirects,e.resolvedUri,n),t)<span class=\"code-keyword\">return</span> i.playlistRequestError(i.request,e.uri,r);i.haveMetadata(n,e.uri),<span class=\"code-string\">\"HAVE_MASTER\"</span>===r?i.trigger(<span class=\"code-string\">\"loadedmetadata\"</span>):i.trigger(<span class=\"code-string\">\"mediachange\"</span>)}})}}}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"pause\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.stopRequest(),u.clearTimeout(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout),<span class=\"code-string\">\"HAVE_NOTHING\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;(<span class=\"code-keyword\">this</span>.started=!<span class=\"code-number\">1</span>),<span class=\"code-string\">\"SWITCHING_MEDIA\"</span>===<span class=\"code-keyword\">this</span>.state?<span class=\"code-keyword\">this</span>.media_?<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_METADATA\"</span>:<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_MASTER\"</span>:<span class=\"code-string\">\"HAVE_CURRENT_METADATA\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;(<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_METADATA\"</span>)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"load\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;u.clearTimeout(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout);<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.media();<span class=\"code-keyword\">if</span>(e){<span class=\"code-keyword\">var</span> n=i?i.targetDuration/<span class=\"code-number\">2</span>*<span class=\"code-number\">1e3</span>:<span class=\"code-number\">5e3</span>;<span class=\"code-keyword\">this</span>.mediaUpdateTimeout=u.setTimeout(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.load()},n)}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.started?i&amp;&amp;!i.endList?<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediaupdatetimeout\"</span>):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedplaylist\"</span>):<span class=\"code-keyword\">this</span>.start()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"start\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.started=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.request=<span class=\"code-keyword\">this</span>.hls_.xhr({<span class=\"code-attr\">uri</span>:<span class=\"code-keyword\">this</span>.srcUrl,<span class=\"code-attr\">withCredentials</span>:<span class=\"code-keyword\">this</span>.withCredentials},<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">if</span>(e.request){<span class=\"code-keyword\">if</span>(e.request=<span class=\"code-literal\">null</span>,t)<span class=\"code-keyword\">return</span> e.error={<span class=\"code-attr\">status</span>:i.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"HLS playlist request error at URL: \"</span>+e.srcUrl+<span class=\"code-string\">\".\"</span>,<span class=\"code-attr\">responseText</span>:i.responseText,<span class=\"code-attr\">code</span>:<span class=\"code-number\">2</span>},<span class=\"code-string\">\"HAVE_NOTHING\"</span>===e.state&amp;&amp;(e.started=!<span class=\"code-number\">1</span>),e.trigger(<span class=\"code-string\">\"error\"</span>);<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">new</span> y;<span class=\"code-keyword\">return</span> e.customTagParsers.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> n.addParser(e)}),e.customTagMappers.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> n.addTagMapper(e)}),n.push(i.responseText),n.end(),e.state=<span class=\"code-string\">\"HAVE_MASTER\"</span>,e.srcUrl=l(e.handleManifestRedirects,e.srcUrl,i),n.manifest.uri=e.srcUrl,n.manifest.playlists?(e.master=n.manifest,I(e.master),A(e.master),e.trigger(<span class=\"code-string\">\"loadedplaylist\"</span>),<span class=\"code-keyword\">void</span>(e.request||e.media(n.manifest.playlists[<span class=\"code-number\">0</span>]))):(e.master={<span class=\"code-attr\">mediaGroups</span>:{<span class=\"code-attr\">AUDIO</span>:{},<span class=\"code-attr\">VIDEO</span>:{},<span class=\"code-string\">\"CLOSED-CAPTIONS\"</span>:{},<span class=\"code-attr\">SUBTITLES</span>:{}},<span class=\"code-attr\">uri</span>:u.location.href,<span class=\"code-attr\">playlists</span>:[{<span class=\"code-attr\">uri</span>:e.srcUrl,<span class=\"code-attr\">id</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">resolvedUri</span>:e.srcUrl,<span class=\"code-attr\">attributes</span>:{}}]},e.master.playlists[e.srcUrl]=e.master.playlists[<span class=\"code-number\">0</span>],e.haveMetadata(i,e.srcUrl),e.trigger(<span class=\"code-string\">\"loadedmetadata\"</span>))}})}}]),t}(),P=t.createTimeRange,D=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r;<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t=e.mediaSequence+e.segments.length),t&lt;e.mediaSequence?<span class=\"code-number\">0</span>:(n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>,n=t-e.mediaSequence,r=e.segments[n];<span class=\"code-keyword\">if</span>(r){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==r.start)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:r.start,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">0</span>};<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==r.end)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:r.end-r.duration,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">0</span>}}<span class=\"code-keyword\">for</span>(;n--;){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==(r=e.segments[n]).end)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:i+r.end,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">0</span>};<span class=\"code-keyword\">if</span>(i+=r.duration,<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==r.start)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:i+r.start,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">0</span>}}<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:i,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">1</span>}}(e,t)).precise?n.result:(r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,r=t-e.mediaSequence;r&lt;e.segments.length;r++){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==(n=e.segments[r]).start)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:n.start-i,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">0</span>};<span class=\"code-keyword\">if</span>(i+=n.duration,<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==n.end)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:n.end-i,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">0</span>}}<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:<span class=\"code-number\">-1</span>,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">1</span>}}(e,t)).precise?r.result:n.result+i},R=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> i&amp;&amp;(i=<span class=\"code-number\">0</span>),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t){<span class=\"code-keyword\">if</span>(e.totalDuration)<span class=\"code-keyword\">return</span> e.totalDuration;<span class=\"code-keyword\">if</span>(!e.endList)<span class=\"code-keyword\">return</span> u.Infinity}<span class=\"code-keyword\">return</span> D(e,t,i)},x=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(t&gt;i){<span class=\"code-keyword\">var</span> r=[i,t];t=r[<span class=\"code-number\">0</span>],i=r[<span class=\"code-number\">1</span>]}<span class=\"code-keyword\">if</span>(t&lt;<span class=\"code-number\">0</span>){<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a=t;a&lt;<span class=\"code-built_in\">Math</span>.min(<span class=\"code-number\">0</span>,i);a++)n+=e.targetDuration;t=<span class=\"code-number\">0</span>}<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> s=t;s&lt;i;s++)n+=e.segments[s].duration;<span class=\"code-keyword\">return</span> n},M=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!e.segments.length)<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=e.segments.length<span class=\"code-number\">-1</span>,i=e.segments[t].duration||e.targetDuration,n=i+<span class=\"code-number\">2</span>*e.targetDuration;t--&amp;&amp;!((i+=e.segments[t].duration)&gt;=n););<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Math</span>.max(<span class=\"code-number\">0</span>,t)},B=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(!e||!e.segments)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(e.endList)<span class=\"code-keyword\">return</span> R(e);<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>===t)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;t=t||<span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> n=i?M(e):e.segments.length;<span class=\"code-keyword\">return</span> D(e,e.mediaSequence+n,t)},N=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e-<span class=\"code-built_in\">Math</span>.floor(e)==<span class=\"code-number\">0</span>},q=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(N(t))<span class=\"code-keyword\">return</span> t+<span class=\"code-number\">.1</span>*e;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=t.toString().split(<span class=\"code-string\">\".\"</span>)[<span class=\"code-number\">1</span>].length,n=<span class=\"code-number\">1</span>;n&lt;=i;n++){<span class=\"code-keyword\">var</span> r=<span class=\"code-built_in\">Math</span>.pow(<span class=\"code-number\">10</span>,n),a=t*r;<span class=\"code-keyword\">if</span>(N(a)||n===i)<span class=\"code-keyword\">return</span>(a+e)/r}},F=q.bind(<span class=\"code-literal\">null</span>,<span class=\"code-number\">1</span>),H=q.bind(<span class=\"code-literal\">null</span>,<span class=\"code-number\">-1</span>),G=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.excludeUntil&amp;&amp;e.excludeUntil&gt;<span class=\"code-built_in\">Date</span>.now()},j=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.excludeUntil&amp;&amp;e.excludeUntil===<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>},V=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=G(e);<span class=\"code-keyword\">return</span>!e.disabled&amp;&amp;!t},W=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> t.attributes&amp;&amp;t.attributes[e]},z=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-number\">1</span>===e.playlists.length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> i=t.attributes.BANDWIDTH||<span class=\"code-built_in\">Number</span>.MAX_VALUE;<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>===e.playlists.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!!V(e)&amp;&amp;(e.attributes.BANDWIDTH||<span class=\"code-number\">0</span>)&lt;i}).length},X={<span class=\"code-attr\">duration</span>:R,<span class=\"code-attr\">seekable</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=t||<span class=\"code-number\">0</span>,n=B(e,t,!<span class=\"code-number\">0</span>);<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>===n?P():P(i,n)},<span class=\"code-attr\">safeLiveIndex</span>:M,<span class=\"code-attr\">getMediaInfoForTime</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,s=e.segments.length,o=t-n;<span class=\"code-keyword\">if</span>(o&lt;<span class=\"code-number\">0</span>){<span class=\"code-keyword\">if</span>(i&gt;<span class=\"code-number\">0</span>)<span class=\"code-keyword\">for</span>(r=i<span class=\"code-number\">-1</span>;r&gt;=<span class=\"code-number\">0</span>;r--)<span class=\"code-keyword\">if</span>(a=e.segments[r],(o+=H(a.duration))&gt;<span class=\"code-number\">0</span>)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">mediaIndex</span>:r,<span class=\"code-attr\">startTime</span>:n-x(e,i,r)};<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">mediaIndex</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">startTime</span>:t}}<span class=\"code-keyword\">if</span>(i&lt;<span class=\"code-number\">0</span>){<span class=\"code-keyword\">for</span>(r=i;r&lt;<span class=\"code-number\">0</span>;r++)<span class=\"code-keyword\">if</span>((o-=e.targetDuration)&lt;<span class=\"code-number\">0</span>)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">mediaIndex</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">startTime</span>:t};i=<span class=\"code-number\">0</span>}<span class=\"code-keyword\">for</span>(r=i;r&lt;s;r++)<span class=\"code-keyword\">if</span>(a=e.segments[r],(o-=F(a.duration))&lt;<span class=\"code-number\">0</span>)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">mediaIndex</span>:r,<span class=\"code-attr\">startTime</span>:n+x(e,i,r)};<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">mediaIndex</span>:s<span class=\"code-number\">-1</span>,<span class=\"code-attr\">startTime</span>:t}},<span class=\"code-attr\">isEnabled</span>:V,<span class=\"code-attr\">isDisabled</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.disabled},<span class=\"code-attr\">isBlacklisted</span>:G,<span class=\"code-attr\">isIncompatible</span>:j,<span class=\"code-attr\">playlistEnd</span>:B,<span class=\"code-attr\">isAes</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>;t&lt;e.segments.length;t++)<span class=\"code-keyword\">if</span>(e.segments[t].key)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>},<span class=\"code-attr\">isFmp4</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>;t&lt;e.segments.length;t++)<span class=\"code-keyword\">if</span>(e.segments[t].map)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>},<span class=\"code-attr\">hasAttribute</span>:W,<span class=\"code-attr\">estimateSegmentRequestTime</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-built_in\">arguments</span>.length&gt;<span class=\"code-number\">3</span>&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">3</span>]?<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">3</span>]:<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> W(<span class=\"code-string\">\"BANDWIDTH\"</span>,i)?(e*i.attributes.BANDWIDTH<span class=\"code-number\">-8</span>*n)/t:<span class=\"code-literal\">NaN</span>},<span class=\"code-attr\">isLowestEnabledRendition</span>:z},Y=t.xhr,K=t.mergeOptions,$=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">i,n</span>)</span>{i=K({<span class=\"code-attr\">timeout</span>:<span class=\"code-number\">45e3</span>},i);<span class=\"code-keyword\">var</span> r=e.beforeRequest||t.Hls.xhr.beforeRequest;<span class=\"code-keyword\">if</span>(r&amp;&amp;<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> r){<span class=\"code-keyword\">var</span> a=r(i);a&amp;&amp;(i=a)}<span class=\"code-keyword\">var</span> s=Y(i,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=s.response;!e&amp;&amp;i&amp;&amp;(s.responseTime=<span class=\"code-built_in\">Date</span>.now(),s.roundTripTime=s.responseTime-s.requestTime,s.bytesReceived=i.byteLength||i.length,s.bandwidth||(s.bandwidth=<span class=\"code-built_in\">Math</span>.floor(s.bytesReceived/s.roundTripTime*<span class=\"code-number\">8</span>*<span class=\"code-number\">1e3</span>))),t.headers&amp;&amp;(s.responseHeaders=t.headers),e&amp;&amp;<span class=\"code-string\">\"ETIMEDOUT\"</span>===e.code&amp;&amp;(s.timedout=!<span class=\"code-number\">0</span>),e||s.aborted||<span class=\"code-number\">200</span>===t.statusCode||<span class=\"code-number\">206</span>===t.statusCode||<span class=\"code-number\">0</span>===t.statusCode||(e=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"XHR Failed with a response of: \"</span>+(s&amp;&amp;(i||s.responseText)))),n(e,s)}),o=s.abort;<span class=\"code-keyword\">return</span> s.abort=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> s.aborted=!<span class=\"code-number\">0</span>,o.apply(s,<span class=\"code-built_in\">arguments</span>)},s.uri=i.uri,s.requestTime=<span class=\"code-built_in\">Date</span>.now(),s}},Q=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n={};<span class=\"code-keyword\">return</span> e.byterange&amp;&amp;(n.Range=(t=e.byterange,i=t.offset+t.length<span class=\"code-number\">-1</span>,<span class=\"code-string\">\"bytes=\"</span>+t.offset+<span class=\"code-string\">\"-\"</span>+i)),n};<span class=\"code-keyword\">var</span> J=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!(e <span class=\"code-keyword\">instanceof</span> t))<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">TypeError</span>(<span class=\"code-string\">\"Cannot call a class as a function\"</span>)},Z=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;t.length;i++){<span class=\"code-keyword\">var</span> n=t[i];n.enumerable=n.enumerable||!<span class=\"code-number\">1</span>,n.configurable=!<span class=\"code-number\">0</span>,<span class=\"code-string\">\"value\"</span><span class=\"code-keyword\">in</span> n&amp;&amp;(n.writable=!<span class=\"code-number\">0</span>),<span class=\"code-built_in\">Object</span>.defineProperty(e,n.key,n)}}<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i,n</span>)</span>{<span class=\"code-keyword\">return</span> i&amp;&amp;e(t.prototype,i),n&amp;&amp;e(t,n),t}}(),ee=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">ReferenceError</span>(<span class=\"code-string\">\"this hasn't been initialised - super() hasn't been called\"</span>);<span class=\"code-keyword\">return</span>!t||<span class=\"code-string\">\"object\"</span>!=<span class=\"code-keyword\">typeof</span> t&amp;&amp;<span class=\"code-string\">\"function\"</span>!=<span class=\"code-keyword\">typeof</span> t?e:t},te=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[<span class=\"code-number\">0</span>],i=e[<span class=\"code-number\">1</span>],n=t[<span class=\"code-number\">4</span>],r=i[<span class=\"code-number\">4</span>],a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,s=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,o=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,u=[],d=[],l=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,h=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,c=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,f=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,p=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(a=<span class=\"code-number\">0</span>;a&lt;<span class=\"code-number\">256</span>;a++)d[(u[a]=a&lt;&lt;<span class=\"code-number\">1</span>^<span class=\"code-number\">283</span>*(a&gt;&gt;<span class=\"code-number\">7</span>))^a]=a;<span class=\"code-keyword\">for</span>(s=o=<span class=\"code-number\">0</span>;!n[s];s^=l||<span class=\"code-number\">1</span>,o=d[o]||<span class=\"code-number\">1</span>)<span class=\"code-keyword\">for</span>(c=(c=o^o&lt;&lt;<span class=\"code-number\">1</span>^o&lt;&lt;<span class=\"code-number\">2</span>^o&lt;&lt;<span class=\"code-number\">3</span>^o&lt;&lt;<span class=\"code-number\">4</span>)&gt;&gt;<span class=\"code-number\">8</span>^<span class=\"code-number\">255</span>&amp;c^<span class=\"code-number\">99</span>,n[s]=c,r[c]=s,p=<span class=\"code-number\">16843009</span>*u[h=u[l=u[s]]]^<span class=\"code-number\">65537</span>*h^<span class=\"code-number\">257</span>*l^<span class=\"code-number\">16843008</span>*s,f=<span class=\"code-number\">257</span>*u[c]^<span class=\"code-number\">16843008</span>*c,a=<span class=\"code-number\">0</span>;a&lt;<span class=\"code-number\">4</span>;a++)t[a][s]=f=f&lt;&lt;<span class=\"code-number\">24</span>^f&gt;&gt;&gt;<span class=\"code-number\">8</span>,i[a][c]=p=p&lt;&lt;<span class=\"code-number\">24</span>^p&gt;&gt;&gt;<span class=\"code-number\">8</span>;<span class=\"code-keyword\">for</span>(a=<span class=\"code-number\">0</span>;a&lt;<span class=\"code-number\">5</span>;a++)t[a]=t[a].slice(<span class=\"code-number\">0</span>),i[a]=i[a].slice(<span class=\"code-number\">0</span>);<span class=\"code-keyword\">return</span> e},ie=<span class=\"code-literal\">null</span>,ne=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t</span>)</span>{J(<span class=\"code-keyword\">this</span>,e),ie||(ie=te()),<span class=\"code-keyword\">this</span>._tables=[[ie[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>].slice(),ie[<span class=\"code-number\">0</span>][<span class=\"code-number\">1</span>].slice(),ie[<span class=\"code-number\">0</span>][<span class=\"code-number\">2</span>].slice(),ie[<span class=\"code-number\">0</span>][<span class=\"code-number\">3</span>].slice(),ie[<span class=\"code-number\">0</span>][<span class=\"code-number\">4</span>].slice()],[ie[<span class=\"code-number\">1</span>][<span class=\"code-number\">0</span>].slice(),ie[<span class=\"code-number\">1</span>][<span class=\"code-number\">1</span>].slice(),ie[<span class=\"code-number\">1</span>][<span class=\"code-number\">2</span>].slice(),ie[<span class=\"code-number\">1</span>][<span class=\"code-number\">3</span>].slice(),ie[<span class=\"code-number\">1</span>][<span class=\"code-number\">4</span>].slice()]];<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,s=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,o=<span class=\"code-keyword\">this</span>._tables[<span class=\"code-number\">0</span>][<span class=\"code-number\">4</span>],u=<span class=\"code-keyword\">this</span>._tables[<span class=\"code-number\">1</span>],d=t.length,l=<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">4</span>!==d&amp;&amp;<span class=\"code-number\">6</span>!==d&amp;&amp;<span class=\"code-number\">8</span>!==d)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Invalid aes key size\"</span>);<span class=\"code-keyword\">for</span>(a=t.slice(<span class=\"code-number\">0</span>),s=[],<span class=\"code-keyword\">this</span>._key=[a,s],i=d;i&lt;<span class=\"code-number\">4</span>*d+<span class=\"code-number\">28</span>;i++)r=a[i<span class=\"code-number\">-1</span>],(i%d==<span class=\"code-number\">0</span>||<span class=\"code-number\">8</span>===d&amp;&amp;i%d==<span class=\"code-number\">4</span>)&amp;&amp;(r=o[r&gt;&gt;&gt;<span class=\"code-number\">24</span>]&lt;&lt;<span class=\"code-number\">24</span>^o[r&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]&lt;&lt;<span class=\"code-number\">16</span>^o[r&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]&lt;&lt;<span class=\"code-number\">8</span>^o[<span class=\"code-number\">255</span>&amp;r],i%d==<span class=\"code-number\">0</span>&amp;&amp;(r=r&lt;&lt;<span class=\"code-number\">8</span>^r&gt;&gt;&gt;<span class=\"code-number\">24</span>^l&lt;&lt;<span class=\"code-number\">24</span>,l=l&lt;&lt;<span class=\"code-number\">1</span>^<span class=\"code-number\">283</span>*(l&gt;&gt;<span class=\"code-number\">7</span>))),a[i]=a[i-d]^r;<span class=\"code-keyword\">for</span>(n=<span class=\"code-number\">0</span>;i;n++,i--)r=a[<span class=\"code-number\">3</span>&amp;n?i:i<span class=\"code-number\">-4</span>],s[n]=i&lt;=<span class=\"code-number\">4</span>||n&lt;<span class=\"code-number\">4</span>?r:u[<span class=\"code-number\">0</span>][o[r&gt;&gt;&gt;<span class=\"code-number\">24</span>]]^u[<span class=\"code-number\">1</span>][o[r&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]]^u[<span class=\"code-number\">2</span>][o[r&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]]^u[<span class=\"code-number\">3</span>][o[<span class=\"code-number\">255</span>&amp;r]]}<span class=\"code-keyword\">return</span> e.prototype.decrypt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r,a</span>)</span>{<span class=\"code-keyword\">var</span> s=<span class=\"code-keyword\">this</span>._key[<span class=\"code-number\">1</span>],o=e^s[<span class=\"code-number\">0</span>],u=n^s[<span class=\"code-number\">1</span>],d=i^s[<span class=\"code-number\">2</span>],l=t^s[<span class=\"code-number\">3</span>],h=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,c=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,f=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,p=s.length/<span class=\"code-number\">4</span><span class=\"code-number\">-2</span>,m=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,g=<span class=\"code-number\">4</span>,y=<span class=\"code-keyword\">this</span>._tables[<span class=\"code-number\">1</span>],_=y[<span class=\"code-number\">0</span>],v=y[<span class=\"code-number\">1</span>],b=y[<span class=\"code-number\">2</span>],T=y[<span class=\"code-number\">3</span>],S=y[<span class=\"code-number\">4</span>];<span class=\"code-keyword\">for</span>(m=<span class=\"code-number\">0</span>;m&lt;p;m++)h=_[o&gt;&gt;&gt;<span class=\"code-number\">24</span>]^v[u&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]^b[d&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]^T[<span class=\"code-number\">255</span>&amp;l]^s[g],c=_[u&gt;&gt;&gt;<span class=\"code-number\">24</span>]^v[d&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]^b[l&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]^T[<span class=\"code-number\">255</span>&amp;o]^s[g+<span class=\"code-number\">1</span>],f=_[d&gt;&gt;&gt;<span class=\"code-number\">24</span>]^v[l&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]^b[o&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]^T[<span class=\"code-number\">255</span>&amp;u]^s[g+<span class=\"code-number\">2</span>],l=_[l&gt;&gt;&gt;<span class=\"code-number\">24</span>]^v[o&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]^b[u&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]^T[<span class=\"code-number\">255</span>&amp;d]^s[g+<span class=\"code-number\">3</span>],g+=<span class=\"code-number\">4</span>,o=h,u=c,d=f;<span class=\"code-keyword\">for</span>(m=<span class=\"code-number\">0</span>;m&lt;<span class=\"code-number\">4</span>;m++)r[(<span class=\"code-number\">3</span>&amp;-m)+a]=S[o&gt;&gt;&gt;<span class=\"code-number\">24</span>]&lt;&lt;<span class=\"code-number\">24</span>^S[u&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]&lt;&lt;<span class=\"code-number\">16</span>^S[d&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]&lt;&lt;<span class=\"code-number\">8</span>^S[<span class=\"code-number\">255</span>&amp;l]^s[g++],h=o,o=u,u=d,d=l,l=h},e}(),re=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\"></span>)</span>{J(<span class=\"code-keyword\">this</span>,e),<span class=\"code-keyword\">this</span>.listeners={}}<span class=\"code-keyword\">return</span> e.prototype.on=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.listeners[e]||(<span class=\"code-keyword\">this</span>.listeners[e]=[]),<span class=\"code-keyword\">this</span>.listeners[e].push(t)},e.prototype.off=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.listeners[e])<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.listeners[e].indexOf(t);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.listeners[e].splice(i,<span class=\"code-number\">1</span>),i&gt;<span class=\"code-number\">-1</span>},e.prototype.trigger=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.listeners[e];<span class=\"code-keyword\">if</span>(t)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">2</span>===<span class=\"code-built_in\">arguments</span>.length)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=t.length,n=<span class=\"code-number\">0</span>;n&lt;i;++n)t[n].call(<span class=\"code-keyword\">this</span>,<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-built_in\">Array</span>.prototype.slice.call(<span class=\"code-built_in\">arguments</span>,<span class=\"code-number\">1</span>),a=t.length,s=<span class=\"code-number\">0</span>;s&lt;a;++s)t[s].apply(<span class=\"code-keyword\">this</span>,r)},e.prototype.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.listeners={}},e.prototype.pipe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.push(t)})},e}(),ae=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\"></span>)</span>{J(<span class=\"code-keyword\">this</span>,t);<span class=\"code-keyword\">var</span> i=ee(<span class=\"code-keyword\">this</span>,e.call(<span class=\"code-keyword\">this</span>,re));<span class=\"code-keyword\">return</span> i.jobs=[],i.delay=<span class=\"code-number\">1</span>,i.timeout_=<span class=\"code-literal\">null</span>,i}<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"function\"</span>!=<span class=\"code-keyword\">typeof</span> t&amp;&amp;<span class=\"code-literal\">null</span>!==t)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">TypeError</span>(<span class=\"code-string\">\"Super expression must either be null or a function, not \"</span>+<span class=\"code-keyword\">typeof</span> t);e.prototype=<span class=\"code-built_in\">Object</span>.create(t&amp;&amp;t.prototype,{<span class=\"code-attr\">constructor</span>:{<span class=\"code-attr\">value</span>:e,<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">1</span>,<span class=\"code-attr\">writable</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">configurable</span>:!<span class=\"code-number\">0</span>}}),t&amp;&amp;(<span class=\"code-built_in\">Object</span>.setPrototypeOf?<span class=\"code-built_in\">Object</span>.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.processJob_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.jobs.shift()(),<span class=\"code-keyword\">this</span>.jobs.length?<span class=\"code-keyword\">this</span>.timeout_=setTimeout(<span class=\"code-keyword\">this</span>.processJob_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.delay):<span class=\"code-keyword\">this</span>.timeout_=<span class=\"code-literal\">null</span>},t.prototype.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.jobs.push(e),<span class=\"code-keyword\">this</span>.timeout_||(<span class=\"code-keyword\">this</span>.timeout_=setTimeout(<span class=\"code-keyword\">this</span>.processJob_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.delay))},t}(re),se=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&lt;&lt;<span class=\"code-number\">24</span>|(<span class=\"code-number\">65280</span>&amp;e)&lt;&lt;<span class=\"code-number\">8</span>|(<span class=\"code-number\">16711680</span>&amp;e)&gt;&gt;<span class=\"code-number\">8</span>|e&gt;&gt;&gt;<span class=\"code-number\">24</span>},oe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Int32Array</span>(e.buffer,e.byteOffset,e.byteLength&gt;&gt;<span class=\"code-number\">2</span>),r=<span class=\"code-keyword\">new</span> ne(<span class=\"code-built_in\">Array</span>.prototype.slice.call(t)),a=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.byteLength),s=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Int32Array</span>(a.buffer),o=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,d=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,l=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,h=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,c=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,f=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,p=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,m=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(o=i[<span class=\"code-number\">0</span>],u=i[<span class=\"code-number\">1</span>],d=i[<span class=\"code-number\">2</span>],l=i[<span class=\"code-number\">3</span>],m=<span class=\"code-number\">0</span>;m&lt;n.length;m+=<span class=\"code-number\">4</span>)h=se(n[m]),c=se(n[m+<span class=\"code-number\">1</span>]),f=se(n[m+<span class=\"code-number\">2</span>]),p=se(n[m+<span class=\"code-number\">3</span>]),r.decrypt(h,c,f,p,s,m),s[m]=se(s[m]^o),s[m+<span class=\"code-number\">1</span>]=se(s[m+<span class=\"code-number\">1</span>]^u),s[m+<span class=\"code-number\">2</span>]=se(s[m+<span class=\"code-number\">2</span>]^d),s[m+<span class=\"code-number\">3</span>]=se(s[m+<span class=\"code-number\">3</span>]^l),o=h,u=c,d=f,l=p;<span class=\"code-keyword\">return</span> a},ue=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i,n,r</span>)</span>{J(<span class=\"code-keyword\">this</span>,e);<span class=\"code-keyword\">var</span> a=e.STEP,s=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Int32Array</span>(t.buffer),o=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(t.byteLength),u=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">this</span>.asyncStream_=<span class=\"code-keyword\">new</span> ae,<span class=\"code-keyword\">this</span>.asyncStream_.push(<span class=\"code-keyword\">this</span>.decryptChunk_(s.subarray(u,u+a),i,n,o)),u=a;u&lt;s.length;u+=a)n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>([se(s[u<span class=\"code-number\">-4</span>]),se(s[u<span class=\"code-number\">-3</span>]),se(s[u<span class=\"code-number\">-2</span>]),se(s[u<span class=\"code-number\">-1</span>])]),<span class=\"code-keyword\">this</span>.asyncStream_.push(<span class=\"code-keyword\">this</span>.decryptChunk_(s.subarray(u,u+a),i,n,o));<span class=\"code-keyword\">this</span>.asyncStream_.push(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e;r(<span class=\"code-literal\">null</span>,(e=o).subarray(<span class=\"code-number\">0</span>,e.byteLength-e[e.byteLength<span class=\"code-number\">-1</span>]))})}<span class=\"code-keyword\">return</span> e.prototype.decryptChunk_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> r=oe(e,t,i);n.set(r,e.byteOffset)}},Z(e,<span class=\"code-literal\">null</span>,[{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"STEP\"</span>,<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">32e3</span>}}]),e}(),de=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.start(t)+<span class=\"code-string\">\"-\"</span>+e.end(t)},le=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.toString(<span class=\"code-number\">16</span>);<span class=\"code-keyword\">return</span><span class=\"code-string\">\"00\"</span>.substring(<span class=\"code-number\">0</span>,<span class=\"code-number\">2</span>-i.length)+i+(t%<span class=\"code-number\">2</span>?<span class=\"code-string\">\" \"</span>:<span class=\"code-string\">\"\"</span>)},he=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&gt;=<span class=\"code-number\">32</span>&amp;&amp;e&lt;<span class=\"code-number\">126</span>?<span class=\"code-built_in\">String</span>.fromCharCode(e):<span class=\"code-string\">\".\"</span>},ce=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t={};<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Object</span>.keys(e).forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n=e[i];<span class=\"code-built_in\">ArrayBuffer</span>.isView(n)?t[i]={<span class=\"code-attr\">bytes</span>:n.buffer,<span class=\"code-attr\">byteOffset</span>:n.byteOffset,<span class=\"code-attr\">byteLength</span>:n.byteLength}:t[i]=n}),t},fe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.byterange||{<span class=\"code-attr\">length</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>,<span class=\"code-attr\">offset</span>:<span class=\"code-number\">0</span>};<span class=\"code-keyword\">return</span>[t.length,t.offset,e.resolvedUri].join(<span class=\"code-string\">\",\"</span>)},pe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.resolvedUri},me=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-built_in\">Array</span>.prototype.slice.call(e),i=<span class=\"code-string\">\"\"</span>,n=<span class=\"code-number\">0</span>;n&lt;t.length/<span class=\"code-number\">16</span>;n++)i+=t.slice(<span class=\"code-number\">16</span>*n,<span class=\"code-number\">16</span>*n+<span class=\"code-number\">16</span>).map(le).join(<span class=\"code-string\">\"\"</span>)+<span class=\"code-string\">\" \"</span>+t.slice(<span class=\"code-number\">16</span>*n,<span class=\"code-number\">16</span>*n+<span class=\"code-number\">16</span>).map(he).join(<span class=\"code-string\">\"\"</span>)+<span class=\"code-string\">\"\\n\"</span>;<span class=\"code-keyword\">return</span> i},ge=<span class=\"code-built_in\">Object</span>.freeze({<span class=\"code-attr\">createTransferableMessage</span>:ce,<span class=\"code-attr\">initSegmentId</span>:fe,<span class=\"code-attr\">segmentKeyId</span>:pe,<span class=\"code-attr\">hexDump</span>:me,<span class=\"code-attr\">tagDump</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.bytes;<span class=\"code-keyword\">return</span> me(t)},<span class=\"code-attr\">textRanges</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-string\">\"\"</span>,i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">0</span>;i&lt;e.length;i++)t+=de(e,i)+<span class=\"code-string\">\" \"</span>;<span class=\"code-keyword\">return</span> t}}),ye=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.playlist,i=e.time,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i?<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>:i,r=e.callback;<span class=\"code-keyword\">if</span>(!r)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"getProgramTime: callback must be provided\"</span>);<span class=\"code-keyword\">if</span>(!t||<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n)<span class=\"code-keyword\">return</span> r({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"getProgramTime: playlist and time must be provided\"</span>});<span class=\"code-keyword\">var</span> a=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!t||!t.segments||<span class=\"code-number\">0</span>===t.segments.length)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,r=<span class=\"code-number\">0</span>;r&lt;t.segments.length&amp;&amp;!(e&lt;=(i=(n=t.segments[r]).videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:i+n.duration));r++);<span class=\"code-keyword\">var</span> a=t.segments[t.segments.length<span class=\"code-number\">-1</span>];<span class=\"code-keyword\">if</span>(a.videoTimingInfo&amp;&amp;a.videoTimingInfo.transmuxedPresentationEnd&lt;e)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(e&gt;i){<span class=\"code-keyword\">if</span>(e&gt;i+<span class=\"code-number\">.25</span>*a.duration)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;n=a}<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">segment</span>:n,<span class=\"code-attr\">estimatedStart</span>:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:i-n.duration,<span class=\"code-attr\">type</span>:n.videoTimingInfo?<span class=\"code-string\">\"accurate\"</span>:<span class=\"code-string\">\"estimate\"</span>}}(n,t);<span class=\"code-keyword\">if</span>(!a)<span class=\"code-keyword\">return</span> r({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"valid programTime was not found\"</span>});<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"estimate\"</span>===a.type)<span class=\"code-keyword\">return</span> r({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Accurate programTime could not be determined. Please seek to e.seekTime and try again\"</span>,<span class=\"code-attr\">seekTime</span>:a.estimatedStart});<span class=\"code-keyword\">var</span> s={<span class=\"code-attr\">mediaSeconds</span>:n},o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!t.dateTimeObject)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i=t.videoTimingInfo.transmuxerPrependedSeconds,n=e-(t.videoTimingInfo.transmuxedPresentationStart+i);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Date</span>(t.dateTimeObject.getTime()+<span class=\"code-number\">1e3</span>*n)}(n,a.segment);<span class=\"code-keyword\">return</span> o&amp;&amp;(s.programDateTime=o.toISOString()),r(<span class=\"code-literal\">null</span>,s)},_e=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.programTime,n=t.playlist,r=t.retryCount,a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===r?<span class=\"code-number\">2</span>:r,s=t.seekTo,o=t.pauseAfterSeek,u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===o||o,d=t.tech,l=t.callback;<span class=\"code-keyword\">if</span>(!l)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"seekToProgramTime: callback must be provided\"</span>);<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i||!n||!s)<span class=\"code-keyword\">return</span> l({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"seekToProgramTime: programTime, seekTo and playlist must be provided\"</span>});<span class=\"code-keyword\">if</span>(!n.endList&amp;&amp;!d.hasStarted_)<span class=\"code-keyword\">return</span> l({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"player must be playing a live stream to start buffering\"</span>});<span class=\"code-keyword\">if</span>(!<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!e.segments||<span class=\"code-number\">0</span>===e.segments.length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>;t&lt;e.segments.length;t++)<span class=\"code-keyword\">if</span>(!e.segments[t].dateTimeObject)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>}(n))<span class=\"code-keyword\">return</span> l({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"programDateTime tags must be provided in the manifest \"</span>+n.resolvedUri});<span class=\"code-keyword\">var</span> h=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">try</span>{i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Date</span>(e)}<span class=\"code-keyword\">catch</span>(e){<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}<span class=\"code-keyword\">if</span>(!t||!t.segments||<span class=\"code-number\">0</span>===t.segments.length)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> n=t.segments[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(i&lt;n.dateTimeObject)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;t.segments.length<span class=\"code-number\">-1</span>&amp;&amp;(n=t.segments[r],!(i&lt;t.segments[r+<span class=\"code-number\">1</span>].dateTimeObject));r++);<span class=\"code-keyword\">var</span> a,s=t.segments[t.segments.length<span class=\"code-number\">-1</span>],o=s.dateTimeObject,u=s.videoTimingInfo?(a=s.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:s.duration+<span class=\"code-number\">.25</span>*s.duration;<span class=\"code-keyword\">return</span> i&gt;<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Date</span>(o.getTime()+<span class=\"code-number\">1e3</span>*u)?<span class=\"code-literal\">null</span>:(i&gt;o&amp;&amp;(n=s),{<span class=\"code-attr\">segment</span>:n,<span class=\"code-attr\">estimatedStart</span>:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:X.duration(t,t.mediaSequence+t.segments.indexOf(n)),<span class=\"code-attr\">type</span>:n.videoTimingInfo?<span class=\"code-string\">\"accurate\"</span>:<span class=\"code-string\">\"estimate\"</span>})}(i,n);<span class=\"code-keyword\">if</span>(!h)<span class=\"code-keyword\">return</span> l({<span class=\"code-attr\">message</span>:i+<span class=\"code-string\">\" was not found in the stream\"</span>});<span class=\"code-keyword\">var</span> c=h.segment,f=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">try</span>{i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Date</span>(e),n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Date</span>(t)}<span class=\"code-keyword\">catch</span>(e){}<span class=\"code-keyword\">var</span> r=i.getTime();<span class=\"code-keyword\">return</span>(n.getTime()-r)/<span class=\"code-number\">1e3</span>}(c.dateTimeObject,i);<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"estimate\"</span>===h.type)<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>===a?l({<span class=\"code-attr\">message</span>:i+<span class=\"code-string\">\" is not buffered yet. Try again\"</span>}):(s(h.estimatedStart+f),<span class=\"code-keyword\">void</span> d.one(<span class=\"code-string\">\"seeked\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e({<span class=\"code-attr\">programTime</span>:i,<span class=\"code-attr\">playlist</span>:n,<span class=\"code-attr\">retryCount</span>:a<span class=\"code-number\">-1</span>,<span class=\"code-attr\">seekTo</span>:s,<span class=\"code-attr\">pauseAfterSeek</span>:u,<span class=\"code-attr\">tech</span>:d,<span class=\"code-attr\">callback</span>:l})}));<span class=\"code-keyword\">var</span> p=c.start+f;d.one(<span class=\"code-string\">\"seeked\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> l(<span class=\"code-literal\">null</span>,d.currentTime())}),u&amp;&amp;d.pause(),s(p)},ve=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">var</span> n=[],r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(e&amp;&amp;e.length)<span class=\"code-keyword\">for</span>(r=<span class=\"code-number\">0</span>;r&lt;e.length;r++)i(e.start(r),e.end(r))&amp;&amp;n.push([e.start(r),e.end(r)]);<span class=\"code-keyword\">return</span> t.createTimeRanges(n)},be=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> ve(e,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">return</span> e<span class=\"code-number\">-.1</span>&lt;=t&amp;&amp;i+<span class=\"code-number\">.1</span>&gt;=t})},Te=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> ve(e,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e<span class=\"code-number\">-1</span>/<span class=\"code-number\">30</span>&gt;=t})},Se=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=[];<span class=\"code-keyword\">if</span>(!e||!e.length)<span class=\"code-keyword\">return</span><span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;e.length;i++)t.push(e.start(i)+<span class=\"code-string\">\" =&gt; \"</span>+e.end(i));<span class=\"code-keyword\">return</span> t.join(<span class=\"code-string\">\", \"</span>)},ke=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=[],i=<span class=\"code-number\">0</span>;i&lt;e.length;i++)t.push({<span class=\"code-attr\">start</span>:e.start(i),<span class=\"code-attr\">end</span>:e.end(i)});<span class=\"code-keyword\">return</span> t},we=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(i&amp;&amp;i.cues)<span class=\"code-keyword\">for</span>(n=i.cues.length;n--;)(r=i.cues[n]).startTime&lt;=t&amp;&amp;r.endTime&gt;=e&amp;&amp;i.removeCue(r)},Le=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">isNaN</span>(e)||<span class=\"code-built_in\">Math</span>.abs(e)===<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>?<span class=\"code-built_in\">Number</span>.MAX_VALUE:e},Ee=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i,n</span>)</span>{<span class=\"code-keyword\">var</span> r=u.WebKitDataCue||u.VTTCue;<span class=\"code-keyword\">if</span>(i&amp;&amp;i.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.stream;<span class=\"code-keyword\">this</span>.inbandTextTracks_[t].addCue(<span class=\"code-keyword\">new</span> r(e.startTime+<span class=\"code-keyword\">this</span>.timestampOffset,e.endTime+<span class=\"code-keyword\">this</span>.timestampOffset,e.text))},e),n){<span class=\"code-keyword\">var</span> a=Le(e.mediaSource_.duration);<span class=\"code-keyword\">if</span>(n.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=e.cueTime+<span class=\"code-keyword\">this</span>.timestampOffset;!(<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> i||u.isNaN(i)||i&lt;<span class=\"code-number\">0</span>)&amp;&amp;i&lt;<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>&amp;&amp;e.frames.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">new</span> r(i,i,e.value||e.url||e.data||<span class=\"code-string\">\"\"</span>);n.frame=e,n.value=e,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-built_in\">Object</span>.defineProperties(e.frame,{<span class=\"code-attr\">id</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.log.warn(<span class=\"code-string\">\"cue.frame.id is deprecated. Use cue.value.key instead.\"</span>),e.value.key}},<span class=\"code-attr\">value</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.log.warn(<span class=\"code-string\">\"cue.frame.value is deprecated. Use cue.value.data instead.\"</span>),e.value.data}},<span class=\"code-attr\">privateData</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.log.warn(<span class=\"code-string\">\"cue.frame.privateData is deprecated. Use cue.value.data instead.\"</span>),e.value.data}}})}(n),<span class=\"code-keyword\">this</span>.metadataTrack_.addCue(n)},<span class=\"code-keyword\">this</span>)},e),e.metadataTrack_&amp;&amp;e.metadataTrack_.cues&amp;&amp;e.metadataTrack_.cues.length){<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> s=e.metadataTrack_.cues,o=[],d=<span class=\"code-number\">0</span>;d&lt;s.length;d++)s[d]&amp;&amp;o.push(s[d]);<span class=\"code-keyword\">var</span> l=o.reduce(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e[t.startTime]||[];<span class=\"code-keyword\">return</span> i.push(t),e[t.startTime]=i,e},{}),h=<span class=\"code-built_in\">Object</span>.keys(l).sort(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Number</span>(e)-<span class=\"code-built_in\">Number</span>(t)});h.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=l[e],n=<span class=\"code-built_in\">Number</span>(h[t+<span class=\"code-number\">1</span>])||a;i.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.endTime=n})})}}},Ue=<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">window</span>?<span class=\"code-built_in\">window</span>:{},Ie=<span class=\"code-string\">\"undefined\"</span>==<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">Symbol</span>?<span class=\"code-string\">\"__target\"</span>:<span class=\"code-built_in\">Symbol</span>(),Ae=<span class=\"code-string\">\"application/javascript\"</span>,Oe=Ue.BlobBuilder||Ue.WebKitBlobBuilder||Ue.MozBlobBuilder||Ue.MSBlobBuilder,Ce=Ue.URL||Ue.webkitURL||Ce&amp;&amp;Ce.msURL,Pe=Ue.Worker;<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">De</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(!t)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">new</span> Pe(e);<span class=\"code-keyword\">if</span>(Pe&amp;&amp;!i){<span class=\"code-keyword\">var</span> r=Be(t.toString().replace(<span class=\"code-regexp\">/^function.+?{/</span>,<span class=\"code-string\">\"\"</span>).slice(<span class=\"code-number\">0</span>,<span class=\"code-number\">-1</span>));<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>[Ie]=<span class=\"code-keyword\">new</span> Pe(r),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!e||!t)<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">var</span> i=e.terminate;e.objURL=t,e.terminate=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.objURL&amp;&amp;Ce.revokeObjectURL(e.objURL),i.call(e)}}(<span class=\"code-keyword\">this</span>[Ie],r),<span class=\"code-keyword\">this</span>[Ie]}<span class=\"code-keyword\">var</span> a={<span class=\"code-attr\">postMessage</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{n.onmessage&amp;&amp;setTimeout(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n.onmessage({<span class=\"code-attr\">data</span>:e,<span class=\"code-attr\">target</span>:a})})}};t.call(a),<span class=\"code-keyword\">this</span>.postMessage=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{setTimeout(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{a.onmessage({<span class=\"code-attr\">data</span>:e,<span class=\"code-attr\">target</span>:n})})},<span class=\"code-keyword\">this</span>.isThisThread=!<span class=\"code-number\">0</span>}}<span class=\"code-keyword\">if</span>(Pe){<span class=\"code-keyword\">var</span> Re,xe=Be(<span class=\"code-string\">\"self.onmessage = function () {}\"</span>),Me=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(<span class=\"code-number\">1</span>);<span class=\"code-keyword\">try</span>{(Re=<span class=\"code-keyword\">new</span> Pe(xe)).postMessage(Me,[Me.buffer])}<span class=\"code-keyword\">catch</span>(e){Pe=<span class=\"code-literal\">null</span>}<span class=\"code-keyword\">finally</span>{Ce.revokeObjectURL(xe),Re&amp;&amp;Re.terminate()}}<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">Be</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">try</span>{<span class=\"code-keyword\">return</span> Ce.createObjectURL(<span class=\"code-keyword\">new</span> Blob([e],{<span class=\"code-attr\">type</span>:Ae}))}<span class=\"code-keyword\">catch</span>(i){<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">new</span> Oe;<span class=\"code-keyword\">return</span> t.append(e),Ce.createObjectURL(t.getBlob(type))}}<span class=\"code-keyword\">var</span> Ne=<span class=\"code-keyword\">new</span> De(<span class=\"code-string\">\"./transmuxer-worker.worker.js\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>;!<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.init=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e={};<span class=\"code-keyword\">this</span>.on=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{e[t]||(e[t]=[]),e[t]=e[t].concat(i)},<span class=\"code-keyword\">this</span>.off=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n;<span class=\"code-keyword\">return</span>!!e[t]&amp;&amp;(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,<span class=\"code-number\">1</span>),n&gt;<span class=\"code-number\">-1</span>)},<span class=\"code-keyword\">this</span>.trigger=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a;<span class=\"code-keyword\">if</span>(i=e[t])<span class=\"code-keyword\">if</span>(<span class=\"code-number\">2</span>===<span class=\"code-built_in\">arguments</span>.length)<span class=\"code-keyword\">for</span>(r=i.length,n=<span class=\"code-number\">0</span>;n&lt;r;++n)i[n].call(<span class=\"code-keyword\">this</span>,<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]);<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">for</span>(a=[],n=<span class=\"code-built_in\">arguments</span>.length,n=<span class=\"code-number\">1</span>;n&lt;<span class=\"code-built_in\">arguments</span>.length;++n)a.push(<span class=\"code-built_in\">arguments</span>[n]);<span class=\"code-keyword\">for</span>(r=i.length,n=<span class=\"code-number\">0</span>;n&lt;r;++n)i[n].apply(<span class=\"code-keyword\">this</span>,a)}},<span class=\"code-keyword\">this</span>.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e={}}}};e.prototype.pipe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.push(t)}),<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"done\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.flush(t)}),<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"partialdone\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.partialFlush(t)}),<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"endedtimeline\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.endTimeline(t)}),<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"reset\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.reset(t)}),e},e.prototype.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,e)},e.prototype.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>,e)},e.prototype.partialFlush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"partialdone\"</span>,e)},e.prototype.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>,e)},e.prototype.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>,e)};<span class=\"code-keyword\">var</span> t,n,r,a,s,o,u,d,l,h,c,f,p,m,g,y,_,v,b,T,S,k,w,L,E,U,I,A,O,C,P,D,R,x,M,B,N,q,F,H,G=e,j=<span class=\"code-built_in\">Math</span>.pow(<span class=\"code-number\">2</span>,<span class=\"code-number\">32</span>)<span class=\"code-number\">-1</span>;!<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e;<span class=\"code-keyword\">if</span>(k={<span class=\"code-attr\">avc1</span>:[],<span class=\"code-attr\">avcC</span>:[],<span class=\"code-attr\">btrt</span>:[],<span class=\"code-attr\">dinf</span>:[],<span class=\"code-attr\">dref</span>:[],<span class=\"code-attr\">esds</span>:[],<span class=\"code-attr\">ftyp</span>:[],<span class=\"code-attr\">hdlr</span>:[],<span class=\"code-attr\">mdat</span>:[],<span class=\"code-attr\">mdhd</span>:[],<span class=\"code-attr\">mdia</span>:[],<span class=\"code-attr\">mfhd</span>:[],<span class=\"code-attr\">minf</span>:[],<span class=\"code-attr\">moof</span>:[],<span class=\"code-attr\">moov</span>:[],<span class=\"code-attr\">mp4a</span>:[],<span class=\"code-attr\">mvex</span>:[],<span class=\"code-attr\">mvhd</span>:[],<span class=\"code-attr\">pasp</span>:[],<span class=\"code-attr\">sdtp</span>:[],<span class=\"code-attr\">smhd</span>:[],<span class=\"code-attr\">stbl</span>:[],<span class=\"code-attr\">stco</span>:[],<span class=\"code-attr\">stsc</span>:[],<span class=\"code-attr\">stsd</span>:[],<span class=\"code-attr\">stsz</span>:[],<span class=\"code-attr\">stts</span>:[],<span class=\"code-attr\">styp</span>:[],<span class=\"code-attr\">tfdt</span>:[],<span class=\"code-attr\">tfhd</span>:[],<span class=\"code-attr\">traf</span>:[],<span class=\"code-attr\">trak</span>:[],<span class=\"code-attr\">trun</span>:[],<span class=\"code-attr\">trex</span>:[],<span class=\"code-attr\">tkhd</span>:[],<span class=\"code-attr\">vmhd</span>:[]},<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">Uint8Array</span>){<span class=\"code-keyword\">for</span>(e <span class=\"code-keyword\">in</span> k)k.hasOwnProperty(e)&amp;&amp;(k[e]=[e.charCodeAt(<span class=\"code-number\">0</span>),e.charCodeAt(<span class=\"code-number\">1</span>),e.charCodeAt(<span class=\"code-number\">2</span>),e.charCodeAt(<span class=\"code-number\">3</span>)]);w=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-string\">\"i\"</span>.charCodeAt(<span class=\"code-number\">0</span>),<span class=\"code-string\">\"s\"</span>.charCodeAt(<span class=\"code-number\">0</span>),<span class=\"code-string\">\"o\"</span>.charCodeAt(<span class=\"code-number\">0</span>),<span class=\"code-string\">\"m\"</span>.charCodeAt(<span class=\"code-number\">0</span>)]),E=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-string\">\"a\"</span>.charCodeAt(<span class=\"code-number\">0</span>),<span class=\"code-string\">\"v\"</span>.charCodeAt(<span class=\"code-number\">0</span>),<span class=\"code-string\">\"c\"</span>.charCodeAt(<span class=\"code-number\">0</span>),<span class=\"code-string\">\"1\"</span>.charCodeAt(<span class=\"code-number\">0</span>)]),L=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>]),U=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">118</span>,<span class=\"code-number\">105</span>,<span class=\"code-number\">100</span>,<span class=\"code-number\">101</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">86</span>,<span class=\"code-number\">105</span>,<span class=\"code-number\">100</span>,<span class=\"code-number\">101</span>,<span class=\"code-number\">111</span>,<span class=\"code-number\">72</span>,<span class=\"code-number\">97</span>,<span class=\"code-number\">110</span>,<span class=\"code-number\">100</span>,<span class=\"code-number\">108</span>,<span class=\"code-number\">101</span>,<span class=\"code-number\">114</span>,<span class=\"code-number\">0</span>]),I=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">115</span>,<span class=\"code-number\">111</span>,<span class=\"code-number\">117</span>,<span class=\"code-number\">110</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">83</span>,<span class=\"code-number\">111</span>,<span class=\"code-number\">117</span>,<span class=\"code-number\">110</span>,<span class=\"code-number\">100</span>,<span class=\"code-number\">72</span>,<span class=\"code-number\">97</span>,<span class=\"code-number\">110</span>,<span class=\"code-number\">100</span>,<span class=\"code-number\">108</span>,<span class=\"code-number\">101</span>,<span class=\"code-number\">114</span>,<span class=\"code-number\">0</span>]),A={<span class=\"code-attr\">video</span>:U,<span class=\"code-attr\">audio</span>:I},P=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">12</span>,<span class=\"code-number\">117</span>,<span class=\"code-number\">114</span>,<span class=\"code-number\">108</span>,<span class=\"code-number\">32</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>]),C=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>]),D=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>]),R=D,x=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>]),M=D,O=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>])}}(),t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=[],r=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">1</span>;t&lt;<span class=\"code-built_in\">arguments</span>.length;t++)n.push(<span class=\"code-built_in\">arguments</span>[t]);<span class=\"code-keyword\">for</span>(t=n.length;t--;)r+=n[t].byteLength;<span class=\"code-keyword\">for</span>(i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(r+<span class=\"code-number\">8</span>),<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(i.buffer,i.byteOffset,i.byteLength).setUint32(<span class=\"code-number\">0</span>,i.byteLength),i.set(e,<span class=\"code-number\">4</span>),t=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">8</span>;t&lt;n.length;t++)i.set(n[t],r),r+=n[t].byteLength;<span class=\"code-keyword\">return</span> i},n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t(k.dinf,t(k.dref,P))},r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(k.esds,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">3</span>,<span class=\"code-number\">25</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">4</span>,<span class=\"code-number\">17</span>,<span class=\"code-number\">64</span>,<span class=\"code-number\">21</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">6</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">218</span>,<span class=\"code-number\">192</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">218</span>,<span class=\"code-number\">192</span>,<span class=\"code-number\">5</span>,<span class=\"code-number\">2</span>,e.audioobjecttype&lt;&lt;<span class=\"code-number\">3</span>|e.samplingfrequencyindex&gt;&gt;&gt;<span class=\"code-number\">1</span>,e.samplingfrequencyindex&lt;&lt;<span class=\"code-number\">7</span>|e.channelcount&lt;&lt;<span class=\"code-number\">3</span>,<span class=\"code-number\">6</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">2</span>]))},g=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(k.hdlr,A[e])},m=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">2</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">3</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">95</span>,<span class=\"code-number\">144</span>,e.duration&gt;&gt;&gt;<span class=\"code-number\">24</span>&amp;<span class=\"code-number\">255</span>,e.duration&gt;&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>,e.duration&gt;&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>,<span class=\"code-number\">255</span>&amp;e.duration,<span class=\"code-number\">85</span>,<span class=\"code-number\">196</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>]);<span class=\"code-keyword\">return</span> e.samplerate&amp;&amp;(i[<span class=\"code-number\">12</span>]=e.samplerate&gt;&gt;&gt;<span class=\"code-number\">24</span>&amp;<span class=\"code-number\">255</span>,i[<span class=\"code-number\">13</span>]=e.samplerate&gt;&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>,i[<span class=\"code-number\">14</span>]=e.samplerate&gt;&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>,i[<span class=\"code-number\">15</span>]=<span class=\"code-number\">255</span>&amp;e.samplerate),t(k.mdhd,i)},p=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(k.mdia,m(e),g(e.type),o(e))},s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(k.mfhd,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">4278190080</span>&amp;e)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;e)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;e)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e]))},o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(k.minf,<span class=\"code-string\">\"video\"</span>===e.type?t(k.vmhd,O):t(k.smhd,C),n(),_(e))},u=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=[],r=i.length;r--;)n[r]=b(i[r]);<span class=\"code-keyword\">return</span> t.apply(<span class=\"code-literal\">null</span>,[k.moof,s(e)].concat(n))},d=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=e.length,n=[];i--;)n[i]=c(e[i]);<span class=\"code-keyword\">return</span> t.apply(<span class=\"code-literal\">null</span>,[k.moov,h(<span class=\"code-number\">4294967295</span>)].concat(n).concat(l(e)))},l=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=e.length,n=[];i--;)n[i]=T(e[i]);<span class=\"code-keyword\">return</span> t.apply(<span class=\"code-literal\">null</span>,[k.mvex].concat(n))},h=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">2</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">95</span>,<span class=\"code-number\">144</span>,(<span class=\"code-number\">4278190080</span>&amp;e)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;e)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;e)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">64</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">255</span>]);<span class=\"code-keyword\">return</span> t(k.mvhd,i)},y=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r=e.samples||[],a=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(<span class=\"code-number\">4</span>+r.length);<span class=\"code-keyword\">for</span>(n=<span class=\"code-number\">0</span>;n&lt;r.length;n++)i=r[n].flags,a[n+<span class=\"code-number\">4</span>]=i.dependsOn&lt;&lt;<span class=\"code-number\">4</span>|i.isDependedOn&lt;&lt;<span class=\"code-number\">2</span>|i.hasRedundancy;<span class=\"code-keyword\">return</span> t(k.sdtp,a)},_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(k.stbl,v(e),t(k.stts,M),t(k.stsc,R),t(k.stsz,x),t(k.stco,D))},v=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(k.stsd,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>]),<span class=\"code-string\">\"video\"</span>===e.type?B(e):N(e))},B=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r=e.sps||[],a=e.pps||[],s=[],o=[];<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">0</span>;i&lt;r.length;i++)s.push((<span class=\"code-number\">65280</span>&amp;r[i].byteLength)&gt;&gt;&gt;<span class=\"code-number\">8</span>),s.push(<span class=\"code-number\">255</span>&amp;r[i].byteLength),s=s.concat(<span class=\"code-built_in\">Array</span>.prototype.slice.call(r[i]));<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">0</span>;i&lt;a.length;i++)o.push((<span class=\"code-number\">65280</span>&amp;a[i].byteLength)&gt;&gt;&gt;<span class=\"code-number\">8</span>),o.push(<span class=\"code-number\">255</span>&amp;a[i].byteLength),o=o.concat(<span class=\"code-built_in\">Array</span>.prototype.slice.call(a[i]));<span class=\"code-keyword\">if</span>(n=[k.avc1,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">65280</span>&amp;e.width)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.width,(<span class=\"code-number\">65280</span>&amp;e.height)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.height,<span class=\"code-number\">0</span>,<span class=\"code-number\">72</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">72</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">19</span>,<span class=\"code-number\">118</span>,<span class=\"code-number\">105</span>,<span class=\"code-number\">100</span>,<span class=\"code-number\">101</span>,<span class=\"code-number\">111</span>,<span class=\"code-number\">106</span>,<span class=\"code-number\">115</span>,<span class=\"code-number\">45</span>,<span class=\"code-number\">99</span>,<span class=\"code-number\">111</span>,<span class=\"code-number\">110</span>,<span class=\"code-number\">116</span>,<span class=\"code-number\">114</span>,<span class=\"code-number\">105</span>,<span class=\"code-number\">98</span>,<span class=\"code-number\">45</span>,<span class=\"code-number\">104</span>,<span class=\"code-number\">108</span>,<span class=\"code-number\">115</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">24</span>,<span class=\"code-number\">17</span>,<span class=\"code-number\">17</span>]),t(k.avcC,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">1</span>,e.profileIdc,e.profileCompatibility,e.levelIdc,<span class=\"code-number\">255</span>].concat([r.length],s,[a.length],o))),t(k.btrt,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">28</span>,<span class=\"code-number\">156</span>,<span class=\"code-number\">128</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">45</span>,<span class=\"code-number\">198</span>,<span class=\"code-number\">192</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">45</span>,<span class=\"code-number\">198</span>,<span class=\"code-number\">192</span>]))],e.sarRatio){<span class=\"code-keyword\">var</span> u=e.sarRatio[<span class=\"code-number\">0</span>],d=e.sarRatio[<span class=\"code-number\">1</span>];n.push(t(k.pasp,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([(<span class=\"code-number\">4278190080</span>&amp;u)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;u)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;u)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;u,(<span class=\"code-number\">4278190080</span>&amp;d)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;d)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;d)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;d])))}<span class=\"code-keyword\">return</span> t.apply(<span class=\"code-literal\">null</span>,n)},N=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(k.mp4a,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">65280</span>&amp;e.channelcount)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.channelcount,(<span class=\"code-number\">65280</span>&amp;e.samplesize)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.samplesize,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">65280</span>&amp;e.samplerate)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.samplerate,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>]),r(e))},f=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">7</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">4278190080</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.id,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">4278190080</span>&amp;e.duration)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;e.duration)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;e.duration)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.duration,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">64</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">65280</span>&amp;e.width)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.width,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">65280</span>&amp;e.height)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.height,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>]);<span class=\"code-keyword\">return</span> t(k.tkhd,i)},b=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a,s,o;<span class=\"code-keyword\">return</span> i=t(k.tfhd,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">58</span>,(<span class=\"code-number\">4278190080</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.id,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>])),s=<span class=\"code-built_in\">Math</span>.floor(e.baseMediaDecodeTime/(j+<span class=\"code-number\">1</span>)),o=<span class=\"code-built_in\">Math</span>.floor(e.baseMediaDecodeTime%(j+<span class=\"code-number\">1</span>)),n=t(k.tfdt,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,s&gt;&gt;&gt;<span class=\"code-number\">24</span>&amp;<span class=\"code-number\">255</span>,s&gt;&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>,s&gt;&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>,<span class=\"code-number\">255</span>&amp;s,o&gt;&gt;&gt;<span class=\"code-number\">24</span>&amp;<span class=\"code-number\">255</span>,o&gt;&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>,o&gt;&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>,<span class=\"code-number\">255</span>&amp;o])),<span class=\"code-number\">92</span>,<span class=\"code-string\">\"audio\"</span>===e.type?(r=S(e,<span class=\"code-number\">92</span>),t(k.traf,i,n,r)):(a=y(e),r=S(e,a.length+<span class=\"code-number\">92</span>),t(k.traf,i,n,r,a))},c=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.duration=e.duration||<span class=\"code-number\">4294967295</span>,t(k.trak,f(e),p(e))},T=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">4278190080</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.id,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>]);<span class=\"code-keyword\">return</span><span class=\"code-string\">\"video\"</span>!==e.type&amp;&amp;(i[i.length<span class=\"code-number\">-1</span>]=<span class=\"code-number\">0</span>),t(k.trex,i)},H=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>,n=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">0</span>,a=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> e.length&amp;&amp;(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e[<span class=\"code-number\">0</span>].duration&amp;&amp;(i=<span class=\"code-number\">1</span>),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e[<span class=\"code-number\">0</span>].size&amp;&amp;(n=<span class=\"code-number\">2</span>),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e[<span class=\"code-number\">0</span>].flags&amp;&amp;(r=<span class=\"code-number\">4</span>),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e[<span class=\"code-number\">0</span>].compositionTimeOffset&amp;&amp;(a=<span class=\"code-number\">8</span>)),[<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,i|n|r|a,<span class=\"code-number\">1</span>,(<span class=\"code-number\">4278190080</span>&amp;e.length)&gt;&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;e.length)&gt;&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;e.length)&gt;&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.length,(<span class=\"code-number\">4278190080</span>&amp;t)&gt;&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;t)&gt;&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;t)&gt;&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;t]},F=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a,s;<span class=\"code-keyword\">for</span>(i+=<span class=\"code-number\">20</span>+<span class=\"code-number\">16</span>*(r=e.samples||[]).length,n=H(r,i),s=<span class=\"code-number\">0</span>;s&lt;r.length;s++)a=r[s],n=n.concat([(<span class=\"code-number\">4278190080</span>&amp;a.duration)&gt;&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;a.duration)&gt;&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;a.duration)&gt;&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;a.duration,(<span class=\"code-number\">4278190080</span>&amp;a.size)&gt;&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;a.size)&gt;&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;a.size)&gt;&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;a.size,a.flags.isLeading&lt;&lt;<span class=\"code-number\">2</span>|a.flags.dependsOn,a.flags.isDependedOn&lt;&lt;<span class=\"code-number\">6</span>|a.flags.hasRedundancy&lt;&lt;<span class=\"code-number\">4</span>|a.flags.paddingValue&lt;&lt;<span class=\"code-number\">1</span>|a.flags.isNonSyncSample,<span class=\"code-number\">61440</span>&amp;a.flags.degradationPriority,<span class=\"code-number\">15</span>&amp;a.flags.degradationPriority,(<span class=\"code-number\">4278190080</span>&amp;a.compositionTimeOffset)&gt;&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;a.compositionTimeOffset)&gt;&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;a.compositionTimeOffset)&gt;&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;a.compositionTimeOffset]);<span class=\"code-keyword\">return</span> t(k.trun,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(n))},q=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a,s;<span class=\"code-keyword\">for</span>(i+=<span class=\"code-number\">20</span>+<span class=\"code-number\">8</span>*(r=e.samples||[]).length,n=H(r,i),s=<span class=\"code-number\">0</span>;s&lt;r.length;s++)a=r[s],n=n.concat([(<span class=\"code-number\">4278190080</span>&amp;a.duration)&gt;&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;a.duration)&gt;&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;a.duration)&gt;&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;a.duration,(<span class=\"code-number\">4278190080</span>&amp;a.size)&gt;&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;a.size)&gt;&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;a.size)&gt;&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;a.size]);<span class=\"code-keyword\">return</span> t(k.trun,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(n))},S=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"audio\"</span>===e.type?q(e,t):F(e,t)};a=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t(k.ftyp,w,L,w,E)};<span class=\"code-keyword\">var</span> V,W,z,X,Y,K=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(k.mdat,e)},$=u,Q=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=a(),n=d(e);<span class=\"code-keyword\">return</span>(t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(i.byteLength+n.byteLength)).set(i),t.set(n,i.byteLength),t},J=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i={<span class=\"code-attr\">size</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">flags</span>:{<span class=\"code-attr\">isLeading</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">dependsOn</span>:<span class=\"code-number\">1</span>,<span class=\"code-attr\">isDependedOn</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">hasRedundancy</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">degradationPriority</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">isNonSyncSample</span>:<span class=\"code-number\">1</span>}};<span class=\"code-keyword\">return</span> i.dataOffset=t,i.compositionTimeOffset=e.pts-e.dts,i.duration=e.duration,i.size=<span class=\"code-number\">4</span>*e.length,i.size+=e.byteLength,e.keyFrame&amp;&amp;(i.flags.dependsOn=<span class=\"code-number\">2</span>,i.flags.isNonSyncSample=<span class=\"code-number\">0</span>),i},Z=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=[],r=[];<span class=\"code-keyword\">for</span>(r.byteLength=<span class=\"code-number\">0</span>,r.nalCount=<span class=\"code-number\">0</span>,r.duration=<span class=\"code-number\">0</span>,n.byteLength=<span class=\"code-number\">0</span>,t=<span class=\"code-number\">0</span>;t&lt;e.length;t++)<span class=\"code-string\">\"access_unit_delimiter_rbsp\"</span>===(i=e[t]).nalUnitType?(n.length&amp;&amp;(n.duration=i.dts-n.dts,r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):(<span class=\"code-string\">\"slice_layer_without_partitioning_rbsp_idr\"</span>===i.nalUnitType&amp;&amp;(n.keyFrame=!<span class=\"code-number\">0</span>),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));<span class=\"code-keyword\">return</span> r.length&amp;&amp;(!n.duration||n.duration&lt;=<span class=\"code-number\">0</span>)&amp;&amp;(n.duration=r[r.length<span class=\"code-number\">-1</span>].duration),r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n),r},ee=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=[],r=[];<span class=\"code-keyword\">for</span>(n.byteLength=<span class=\"code-number\">0</span>,n.nalCount=<span class=\"code-number\">0</span>,n.duration=<span class=\"code-number\">0</span>,n.pts=e[<span class=\"code-number\">0</span>].pts,n.dts=e[<span class=\"code-number\">0</span>].dts,r.byteLength=<span class=\"code-number\">0</span>,r.nalCount=<span class=\"code-number\">0</span>,r.duration=<span class=\"code-number\">0</span>,r.pts=e[<span class=\"code-number\">0</span>].pts,r.dts=e[<span class=\"code-number\">0</span>].dts,t=<span class=\"code-number\">0</span>;t&lt;e.length;t++)(i=e[t]).keyFrame?(n.length&amp;&amp;(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));<span class=\"code-keyword\">return</span> r.length&amp;&amp;n.duration&lt;=<span class=\"code-number\">0</span>&amp;&amp;(n.duration=r[r.length<span class=\"code-number\">-1</span>].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r},te=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">return</span>!e[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>].keyFrame&amp;&amp;e.length&gt;<span class=\"code-number\">1</span>&amp;&amp;(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>].dts=t.dts,e[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>].pts=t.pts,e[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>].duration+=t.duration),e},ie=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a,s,o=t||<span class=\"code-number\">0</span>,u=[];<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">0</span>;i&lt;e.length;i++)<span class=\"code-keyword\">for</span>(a=e[i],n=<span class=\"code-number\">0</span>;n&lt;a.length;n++)s=a[n],o+=(r=J(s,o)).size,u.push(r);<span class=\"code-keyword\">return</span> u},ne=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n,r,a,s,o=<span class=\"code-number\">0</span>,u=e.byteLength,d=e.nalCount,l=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(u+<span class=\"code-number\">4</span>*d),h=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(l.buffer);<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">0</span>;t&lt;e.length;t++)<span class=\"code-keyword\">for</span>(r=e[t],i=<span class=\"code-number\">0</span>;i&lt;r.length;i++)<span class=\"code-keyword\">for</span>(a=r[i],n=<span class=\"code-number\">0</span>;n&lt;a.length;n++)s=a[n],h.setUint32(o,s.data.byteLength),o+=<span class=\"code-number\">4</span>,l.set(s.data,o),o+=s.data.byteLength;<span class=\"code-keyword\">return</span> l},re=[<span class=\"code-number\">33</span>,<span class=\"code-number\">16</span>,<span class=\"code-number\">5</span>,<span class=\"code-number\">32</span>,<span class=\"code-number\">164</span>,<span class=\"code-number\">27</span>],ae=[<span class=\"code-number\">33</span>,<span class=\"code-number\">65</span>,<span class=\"code-number\">108</span>,<span class=\"code-number\">84</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">2</span>,<span class=\"code-number\">4</span>,<span class=\"code-number\">8</span>,<span class=\"code-number\">168</span>,<span class=\"code-number\">2</span>,<span class=\"code-number\">4</span>,<span class=\"code-number\">8</span>,<span class=\"code-number\">17</span>,<span class=\"code-number\">191</span>,<span class=\"code-number\">252</span>],se=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=[];e--;)t.push(<span class=\"code-number\">0</span>);<span class=\"code-keyword\">return</span> t},oe={<span class=\"code-number\">96000</span>:[re,[<span class=\"code-number\">227</span>,<span class=\"code-number\">64</span>],se(<span class=\"code-number\">154</span>),[<span class=\"code-number\">56</span>]],<span class=\"code-number\">88200</span>:[re,[<span class=\"code-number\">231</span>],se(<span class=\"code-number\">170</span>),[<span class=\"code-number\">56</span>]],<span class=\"code-number\">64000</span>:[re,[<span class=\"code-number\">248</span>,<span class=\"code-number\">192</span>],se(<span class=\"code-number\">240</span>),[<span class=\"code-number\">56</span>]],<span class=\"code-number\">48000</span>:[re,[<span class=\"code-number\">255</span>,<span class=\"code-number\">192</span>],se(<span class=\"code-number\">268</span>),[<span class=\"code-number\">55</span>,<span class=\"code-number\">148</span>,<span class=\"code-number\">128</span>],se(<span class=\"code-number\">54</span>),[<span class=\"code-number\">112</span>]],<span class=\"code-number\">44100</span>:[re,[<span class=\"code-number\">255</span>,<span class=\"code-number\">192</span>],se(<span class=\"code-number\">268</span>),[<span class=\"code-number\">55</span>,<span class=\"code-number\">163</span>,<span class=\"code-number\">128</span>],se(<span class=\"code-number\">84</span>),[<span class=\"code-number\">112</span>]],<span class=\"code-number\">32000</span>:[re,[<span class=\"code-number\">255</span>,<span class=\"code-number\">192</span>],se(<span class=\"code-number\">268</span>),[<span class=\"code-number\">55</span>,<span class=\"code-number\">234</span>],se(<span class=\"code-number\">226</span>),[<span class=\"code-number\">112</span>]],<span class=\"code-number\">24000</span>:[re,[<span class=\"code-number\">255</span>,<span class=\"code-number\">192</span>],se(<span class=\"code-number\">268</span>),[<span class=\"code-number\">55</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">128</span>],se(<span class=\"code-number\">268</span>),[<span class=\"code-number\">111</span>,<span class=\"code-number\">112</span>],se(<span class=\"code-number\">126</span>),[<span class=\"code-number\">224</span>]],<span class=\"code-number\">16000</span>:[re,[<span class=\"code-number\">255</span>,<span class=\"code-number\">192</span>],se(<span class=\"code-number\">268</span>),[<span class=\"code-number\">55</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">128</span>],se(<span class=\"code-number\">268</span>),[<span class=\"code-number\">111</span>,<span class=\"code-number\">255</span>],se(<span class=\"code-number\">269</span>),[<span class=\"code-number\">223</span>,<span class=\"code-number\">108</span>],se(<span class=\"code-number\">195</span>),[<span class=\"code-number\">1</span>,<span class=\"code-number\">192</span>]],<span class=\"code-number\">12000</span>:[ae,se(<span class=\"code-number\">268</span>),[<span class=\"code-number\">3</span>,<span class=\"code-number\">127</span>,<span class=\"code-number\">248</span>],se(<span class=\"code-number\">268</span>),[<span class=\"code-number\">6</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">240</span>],se(<span class=\"code-number\">268</span>),[<span class=\"code-number\">13</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">224</span>],se(<span class=\"code-number\">268</span>),[<span class=\"code-number\">27</span>,<span class=\"code-number\">253</span>,<span class=\"code-number\">128</span>],se(<span class=\"code-number\">259</span>),[<span class=\"code-number\">56</span>]],<span class=\"code-number\">11025</span>:[ae,se(<span class=\"code-number\">268</span>),[<span class=\"code-number\">3</span>,<span class=\"code-number\">127</span>,<span class=\"code-number\">248</span>],se(<span class=\"code-number\">268</span>),[<span class=\"code-number\">6</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">240</span>],se(<span class=\"code-number\">268</span>),[<span class=\"code-number\">13</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">224</span>],se(<span class=\"code-number\">268</span>),[<span class=\"code-number\">27</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">192</span>],se(<span class=\"code-number\">268</span>),[<span class=\"code-number\">55</span>,<span class=\"code-number\">175</span>,<span class=\"code-number\">128</span>],se(<span class=\"code-number\">108</span>),[<span class=\"code-number\">112</span>]],<span class=\"code-number\">8000</span>:[ae,se(<span class=\"code-number\">268</span>),[<span class=\"code-number\">3</span>,<span class=\"code-number\">121</span>,<span class=\"code-number\">16</span>],se(<span class=\"code-number\">47</span>),[<span class=\"code-number\">7</span>]]},ue=(V=oe,<span class=\"code-built_in\">Object</span>.keys(V).reduce(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e[t]=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(V[t].reduce(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.concat(t)},[])),e},{})),de=<span class=\"code-number\">9e4</span>,le=(W=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">9e4</span>*e},z=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e*t},X=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e/<span class=\"code-number\">9e4</span>},Y=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e/t},<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> W(Y(e,t))}),he=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> z(X(e),t)},ce=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> X(i?e:e-t)},fe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">var</span> r,a,s,o,u,d=<span class=\"code-number\">0</span>,l=<span class=\"code-number\">0</span>,h=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(t.length&amp;&amp;(r=le(e.baseMediaDecodeTime,e.samplerate),a=<span class=\"code-built_in\">Math</span>.ceil(de/(e.samplerate/<span class=\"code-number\">1024</span>)),i&amp;&amp;n&amp;&amp;(d=r-<span class=\"code-built_in\">Math</span>.max(i,n),h=(l=<span class=\"code-built_in\">Math</span>.floor(d/a))*a),!(l&lt;<span class=\"code-number\">1</span>||h&gt;de/<span class=\"code-number\">2</span>))){<span class=\"code-keyword\">for</span>((s=ue[e.samplerate])||(s=t[<span class=\"code-number\">0</span>].data),o=<span class=\"code-number\">0</span>;o&lt;l;o++)u=t[<span class=\"code-number\">0</span>],t.splice(<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,{<span class=\"code-attr\">data</span>:s,<span class=\"code-attr\">dts</span>:u.dts-a,<span class=\"code-attr\">pts</span>:u.pts-a});e.baseMediaDecodeTime-=<span class=\"code-built_in\">Math</span>.floor(he(h,e.samplerate))}},pe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> t.minSegmentDts&gt;=i?e:(t.minSegmentDts=<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>,e.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.dts&gt;=i&amp;&amp;(t.minSegmentDts=<span class=\"code-built_in\">Math</span>.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!<span class=\"code-number\">0</span>)}))},me=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=[];<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">0</span>;t&lt;e.length;t++)i=e[t],n.push({<span class=\"code-attr\">size</span>:i.data.byteLength,<span class=\"code-attr\">duration</span>:<span class=\"code-number\">1024</span>});<span class=\"code-keyword\">return</span> n},ge=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=<span class=\"code-number\">0</span>,r=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">0</span>;t&lt;e.length;t++)i+=e[t].data.byteLength;<span class=\"code-keyword\">return</span> i}(e));<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">0</span>;t&lt;e.length;t++)i=e[t],r.set(i.data,n),n+=i.data.byteLength;<span class=\"code-keyword\">return</span> r},ye=de,_e=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">delete</span> e.minSegmentDts,<span class=\"code-keyword\">delete</span> e.maxSegmentDts,<span class=\"code-keyword\">delete</span> e.minSegmentPts,<span class=\"code-keyword\">delete</span> e.maxSegmentPts},ve=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n=e.minSegmentDts;<span class=\"code-keyword\">return</span> t||(n-=e.timelineStartInfo.dts),i=e.timelineStartInfo.baseMediaDecodeTime,i+=n,i=<span class=\"code-built_in\">Math</span>.max(<span class=\"code-number\">0</span>,i),<span class=\"code-string\">\"audio\"</span>===e.type&amp;&amp;(i*=e.samplerate/ye,i=<span class=\"code-built_in\">Math</span>.floor(i)),i},be=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> t.pts&amp;&amp;(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.timelineStartInfo.pts&amp;&amp;(e.timelineStartInfo.pts=t.pts),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=<span class=\"code-built_in\">Math</span>.min(e.minSegmentPts,t.pts),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=<span class=\"code-built_in\">Math</span>.max(e.maxSegmentPts,t.pts)),<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> t.dts&amp;&amp;(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.timelineStartInfo.dts&amp;&amp;(e.timelineStartInfo.dts=t.dts),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=<span class=\"code-built_in\">Math</span>.min(e.minSegmentDts,t.dts),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=<span class=\"code-built_in\">Math</span>.max(e.maxSegmentDts,t.dts))},Te=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>,i={<span class=\"code-attr\">payloadType</span>:<span class=\"code-number\">-1</span>,<span class=\"code-attr\">payloadSize</span>:<span class=\"code-number\">0</span>},n=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">0</span>;t&lt;e.byteLength&amp;&amp;<span class=\"code-number\">128</span>!==e[t];){<span class=\"code-keyword\">for</span>(;<span class=\"code-number\">255</span>===e[t];)n+=<span class=\"code-number\">255</span>,t++;<span class=\"code-keyword\">for</span>(n+=e[t++];<span class=\"code-number\">255</span>===e[t];)r+=<span class=\"code-number\">255</span>,t++;<span class=\"code-keyword\">if</span>(r+=e[t++],!i.payload&amp;&amp;<span class=\"code-number\">4</span>===n){i.payloadType=n,i.payloadSize=r,i.payload=e.subarray(t,t+r);<span class=\"code-keyword\">break</span>}t+=r,n=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">0</span>}<span class=\"code-keyword\">return</span> i},Se=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">181</span>!==e.payload[<span class=\"code-number\">0</span>]?<span class=\"code-literal\">null</span>:<span class=\"code-number\">49</span>!=(e.payload[<span class=\"code-number\">1</span>]&lt;&lt;<span class=\"code-number\">8</span>|e.payload[<span class=\"code-number\">2</span>])?<span class=\"code-literal\">null</span>:<span class=\"code-string\">\"GA94\"</span>!==<span class=\"code-built_in\">String</span>.fromCharCode(e.payload[<span class=\"code-number\">3</span>],e.payload[<span class=\"code-number\">4</span>],e.payload[<span class=\"code-number\">5</span>],e.payload[<span class=\"code-number\">6</span>])?<span class=\"code-literal\">null</span>:<span class=\"code-number\">3</span>!==e.payload[<span class=\"code-number\">7</span>]?<span class=\"code-literal\">null</span>:e.payload.subarray(<span class=\"code-number\">8</span>,e.payload.length<span class=\"code-number\">-1</span>)},ke=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a,s=[];<span class=\"code-keyword\">if</span>(!(<span class=\"code-number\">64</span>&amp;t[<span class=\"code-number\">0</span>]))<span class=\"code-keyword\">return</span> s;<span class=\"code-keyword\">for</span>(n=<span class=\"code-number\">31</span>&amp;t[<span class=\"code-number\">0</span>],i=<span class=\"code-number\">0</span>;i&lt;n;i++)a={<span class=\"code-attr\">type</span>:<span class=\"code-number\">3</span>&amp;t[<span class=\"code-number\">2</span>+(r=<span class=\"code-number\">3</span>*i)],<span class=\"code-attr\">pts</span>:e},<span class=\"code-number\">4</span>&amp;t[r+<span class=\"code-number\">2</span>]&amp;&amp;(a.ccData=t[r+<span class=\"code-number\">3</span>]&lt;&lt;<span class=\"code-number\">8</span>|t[r+<span class=\"code-number\">4</span>],s.push(a));<span class=\"code-keyword\">return</span> s},we=<span class=\"code-number\">4</span>,Le=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\"></span>)</span>{e.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.captionPackets_=[],<span class=\"code-keyword\">this</span>.ccStreams_=[<span class=\"code-keyword\">new</span> Oe(<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>),<span class=\"code-keyword\">new</span> Oe(<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>),<span class=\"code-keyword\">new</span> Oe(<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>),<span class=\"code-keyword\">new</span> Oe(<span class=\"code-number\">1</span>,<span class=\"code-number\">1</span>)],<span class=\"code-keyword\">this</span>.reset(),<span class=\"code-keyword\">this</span>.ccStreams_.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"data\"</span>)),e.on(<span class=\"code-string\">\"partialdone\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"partialdone\"</span>)),e.on(<span class=\"code-string\">\"done\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"done\"</span>))},<span class=\"code-keyword\">this</span>)};(Le.prototype=<span class=\"code-keyword\">new</span> G).push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"sei_rbsp\"</span>===e.nalUnitType&amp;&amp;(t=Te(e.escapedRBSP)).payloadType===we&amp;&amp;(i=Se(t)))<span class=\"code-keyword\">if</span>(e.dts&lt;<span class=\"code-keyword\">this</span>.latestDts_)<span class=\"code-keyword\">this</span>.ignoreNextEqualDts_=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(e.dts===<span class=\"code-keyword\">this</span>.latestDts_&amp;&amp;<span class=\"code-keyword\">this</span>.ignoreNextEqualDts_)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.numSameDts_--,<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.numSameDts_||(<span class=\"code-keyword\">this</span>.ignoreNextEqualDts_=!<span class=\"code-number\">1</span>));n=ke(e.pts,i),<span class=\"code-keyword\">this</span>.captionPackets_=<span class=\"code-keyword\">this</span>.captionPackets_.concat(n),<span class=\"code-keyword\">this</span>.latestDts_!==e.dts&amp;&amp;(<span class=\"code-keyword\">this</span>.numSameDts_=<span class=\"code-number\">0</span>),<span class=\"code-keyword\">this</span>.numSameDts_++,<span class=\"code-keyword\">this</span>.latestDts_=e.dts}},Le.prototype.flushCCStreams=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.ccStreams_.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"flush\"</span>===e?t.flush():t.partialFlush()},<span class=\"code-keyword\">this</span>)},Le.prototype.flushStream=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.captionPackets_.length?(<span class=\"code-keyword\">this</span>.captionPackets_.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{e.presortIndex=t}),<span class=\"code-keyword\">this</span>.captionPackets_.sort(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),<span class=\"code-keyword\">this</span>.captionPackets_.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.type&lt;<span class=\"code-number\">2</span>&amp;&amp;<span class=\"code-keyword\">this</span>.dispatchCea608Packet(e)},<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.captionPackets_.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.flushCCStreams(e)):<span class=\"code-keyword\">this</span>.flushCCStreams(e)},Le.prototype.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.flushStream(<span class=\"code-string\">\"flush\"</span>)},Le.prototype.partialFlush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.flushStream(<span class=\"code-string\">\"partialFlush\"</span>)},Le.prototype.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.latestDts_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.ignoreNextEqualDts_=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.numSameDts_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.activeCea608Channel_=[<span class=\"code-literal\">null</span>,<span class=\"code-literal\">null</span>],<span class=\"code-keyword\">this</span>.ccStreams_.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.reset()})},Le.prototype.dispatchCea608Packet=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.setsTextOrXDSActive(e)?<span class=\"code-keyword\">this</span>.activeCea608Channel_[e.type]=<span class=\"code-literal\">null</span>:<span class=\"code-keyword\">this</span>.setsChannel1Active(e)?<span class=\"code-keyword\">this</span>.activeCea608Channel_[e.type]=<span class=\"code-number\">0</span>:<span class=\"code-keyword\">this</span>.setsChannel2Active(e)&amp;&amp;(<span class=\"code-keyword\">this</span>.activeCea608Channel_[e.type]=<span class=\"code-number\">1</span>),<span class=\"code-literal\">null</span>!==<span class=\"code-keyword\">this</span>.activeCea608Channel_[e.type]&amp;&amp;<span class=\"code-keyword\">this</span>.ccStreams_[(e.type&lt;&lt;<span class=\"code-number\">1</span>)+<span class=\"code-keyword\">this</span>.activeCea608Channel_[e.type]].push(e)},Le.prototype.setsChannel1Active=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">4096</span>==(<span class=\"code-number\">30720</span>&amp;e.ccData)},Le.prototype.setsChannel2Active=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">6144</span>==(<span class=\"code-number\">30720</span>&amp;e.ccData)},Le.prototype.setsTextOrXDSActive=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">256</span>==(<span class=\"code-number\">28928</span>&amp;e.ccData)||<span class=\"code-number\">4138</span>==(<span class=\"code-number\">30974</span>&amp;e.ccData)||<span class=\"code-number\">6186</span>==(<span class=\"code-number\">30974</span>&amp;e.ccData)};<span class=\"code-keyword\">var</span> Ee={<span class=\"code-number\">42</span>:<span class=\"code-number\">225</span>,<span class=\"code-number\">92</span>:<span class=\"code-number\">233</span>,<span class=\"code-number\">94</span>:<span class=\"code-number\">237</span>,<span class=\"code-number\">95</span>:<span class=\"code-number\">243</span>,<span class=\"code-number\">96</span>:<span class=\"code-number\">250</span>,<span class=\"code-number\">123</span>:<span class=\"code-number\">231</span>,<span class=\"code-number\">124</span>:<span class=\"code-number\">247</span>,<span class=\"code-number\">125</span>:<span class=\"code-number\">209</span>,<span class=\"code-number\">126</span>:<span class=\"code-number\">241</span>,<span class=\"code-number\">127</span>:<span class=\"code-number\">9608</span>,<span class=\"code-number\">304</span>:<span class=\"code-number\">174</span>,<span class=\"code-number\">305</span>:<span class=\"code-number\">176</span>,<span class=\"code-number\">306</span>:<span class=\"code-number\">189</span>,<span class=\"code-number\">307</span>:<span class=\"code-number\">191</span>,<span class=\"code-number\">308</span>:<span class=\"code-number\">8482</span>,<span class=\"code-number\">309</span>:<span class=\"code-number\">162</span>,<span class=\"code-number\">310</span>:<span class=\"code-number\">163</span>,<span class=\"code-number\">311</span>:<span class=\"code-number\">9834</span>,<span class=\"code-number\">312</span>:<span class=\"code-number\">224</span>,<span class=\"code-number\">313</span>:<span class=\"code-number\">160</span>,<span class=\"code-number\">314</span>:<span class=\"code-number\">232</span>,<span class=\"code-number\">315</span>:<span class=\"code-number\">226</span>,<span class=\"code-number\">316</span>:<span class=\"code-number\">234</span>,<span class=\"code-number\">317</span>:<span class=\"code-number\">238</span>,<span class=\"code-number\">318</span>:<span class=\"code-number\">244</span>,<span class=\"code-number\">319</span>:<span class=\"code-number\">251</span>,<span class=\"code-number\">544</span>:<span class=\"code-number\">193</span>,<span class=\"code-number\">545</span>:<span class=\"code-number\">201</span>,<span class=\"code-number\">546</span>:<span class=\"code-number\">211</span>,<span class=\"code-number\">547</span>:<span class=\"code-number\">218</span>,<span class=\"code-number\">548</span>:<span class=\"code-number\">220</span>,<span class=\"code-number\">549</span>:<span class=\"code-number\">252</span>,<span class=\"code-number\">550</span>:<span class=\"code-number\">8216</span>,<span class=\"code-number\">551</span>:<span class=\"code-number\">161</span>,<span class=\"code-number\">552</span>:<span class=\"code-number\">42</span>,<span class=\"code-number\">553</span>:<span class=\"code-number\">39</span>,<span class=\"code-number\">554</span>:<span class=\"code-number\">8212</span>,<span class=\"code-number\">555</span>:<span class=\"code-number\">169</span>,<span class=\"code-number\">556</span>:<span class=\"code-number\">8480</span>,<span class=\"code-number\">557</span>:<span class=\"code-number\">8226</span>,<span class=\"code-number\">558</span>:<span class=\"code-number\">8220</span>,<span class=\"code-number\">559</span>:<span class=\"code-number\">8221</span>,<span class=\"code-number\">560</span>:<span class=\"code-number\">192</span>,<span class=\"code-number\">561</span>:<span class=\"code-number\">194</span>,<span class=\"code-number\">562</span>:<span class=\"code-number\">199</span>,<span class=\"code-number\">563</span>:<span class=\"code-number\">200</span>,<span class=\"code-number\">564</span>:<span class=\"code-number\">202</span>,<span class=\"code-number\">565</span>:<span class=\"code-number\">203</span>,<span class=\"code-number\">566</span>:<span class=\"code-number\">235</span>,<span class=\"code-number\">567</span>:<span class=\"code-number\">206</span>,<span class=\"code-number\">568</span>:<span class=\"code-number\">207</span>,<span class=\"code-number\">569</span>:<span class=\"code-number\">239</span>,<span class=\"code-number\">570</span>:<span class=\"code-number\">212</span>,<span class=\"code-number\">571</span>:<span class=\"code-number\">217</span>,<span class=\"code-number\">572</span>:<span class=\"code-number\">249</span>,<span class=\"code-number\">573</span>:<span class=\"code-number\">219</span>,<span class=\"code-number\">574</span>:<span class=\"code-number\">171</span>,<span class=\"code-number\">575</span>:<span class=\"code-number\">187</span>,<span class=\"code-number\">800</span>:<span class=\"code-number\">195</span>,<span class=\"code-number\">801</span>:<span class=\"code-number\">227</span>,<span class=\"code-number\">802</span>:<span class=\"code-number\">205</span>,<span class=\"code-number\">803</span>:<span class=\"code-number\">204</span>,<span class=\"code-number\">804</span>:<span class=\"code-number\">236</span>,<span class=\"code-number\">805</span>:<span class=\"code-number\">210</span>,<span class=\"code-number\">806</span>:<span class=\"code-number\">242</span>,<span class=\"code-number\">807</span>:<span class=\"code-number\">213</span>,<span class=\"code-number\">808</span>:<span class=\"code-number\">245</span>,<span class=\"code-number\">809</span>:<span class=\"code-number\">123</span>,<span class=\"code-number\">810</span>:<span class=\"code-number\">125</span>,<span class=\"code-number\">811</span>:<span class=\"code-number\">92</span>,<span class=\"code-number\">812</span>:<span class=\"code-number\">94</span>,<span class=\"code-number\">813</span>:<span class=\"code-number\">95</span>,<span class=\"code-number\">814</span>:<span class=\"code-number\">124</span>,<span class=\"code-number\">815</span>:<span class=\"code-number\">126</span>,<span class=\"code-number\">816</span>:<span class=\"code-number\">196</span>,<span class=\"code-number\">817</span>:<span class=\"code-number\">228</span>,<span class=\"code-number\">818</span>:<span class=\"code-number\">214</span>,<span class=\"code-number\">819</span>:<span class=\"code-number\">246</span>,<span class=\"code-number\">820</span>:<span class=\"code-number\">223</span>,<span class=\"code-number\">821</span>:<span class=\"code-number\">165</span>,<span class=\"code-number\">822</span>:<span class=\"code-number\">164</span>,<span class=\"code-number\">823</span>:<span class=\"code-number\">9474</span>,<span class=\"code-number\">824</span>:<span class=\"code-number\">197</span>,<span class=\"code-number\">825</span>:<span class=\"code-number\">229</span>,<span class=\"code-number\">826</span>:<span class=\"code-number\">216</span>,<span class=\"code-number\">827</span>:<span class=\"code-number\">248</span>,<span class=\"code-number\">828</span>:<span class=\"code-number\">9484</span>,<span class=\"code-number\">829</span>:<span class=\"code-number\">9488</span>,<span class=\"code-number\">830</span>:<span class=\"code-number\">9492</span>,<span class=\"code-number\">831</span>:<span class=\"code-number\">9496</span>},Ue=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>===e?<span class=\"code-string\">\"\"</span>:(e=Ee[e]||e,<span class=\"code-built_in\">String</span>.fromCharCode(e))},Ie=[<span class=\"code-number\">4352</span>,<span class=\"code-number\">4384</span>,<span class=\"code-number\">4608</span>,<span class=\"code-number\">4640</span>,<span class=\"code-number\">5376</span>,<span class=\"code-number\">5408</span>,<span class=\"code-number\">5632</span>,<span class=\"code-number\">5664</span>,<span class=\"code-number\">5888</span>,<span class=\"code-number\">5920</span>,<span class=\"code-number\">4096</span>,<span class=\"code-number\">4864</span>,<span class=\"code-number\">4896</span>,<span class=\"code-number\">5120</span>,<span class=\"code-number\">5152</span>],Ae=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> e=[],t=<span class=\"code-number\">15</span>;t--;)e.push(<span class=\"code-string\">\"\"</span>);<span class=\"code-keyword\">return</span> e},Oe=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{e.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.field_=t||<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.dataChannel_=i||<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.name_=<span class=\"code-string\">\"CC\"</span>+(<span class=\"code-number\">1</span>+(<span class=\"code-keyword\">this</span>.field_&lt;&lt;<span class=\"code-number\">1</span>|<span class=\"code-keyword\">this</span>.dataChannel_)),<span class=\"code-keyword\">this</span>.setConstants(),<span class=\"code-keyword\">this</span>.reset(),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n,r,a;<span class=\"code-keyword\">if</span>((t=<span class=\"code-number\">32639</span>&amp;e.ccData)!==<span class=\"code-keyword\">this</span>.lastControlCode_){<span class=\"code-keyword\">if</span>(<span class=\"code-number\">4096</span>==(<span class=\"code-number\">61440</span>&amp;t)?<span class=\"code-keyword\">this</span>.lastControlCode_=t:t!==<span class=\"code-keyword\">this</span>.PADDING_&amp;&amp;(<span class=\"code-keyword\">this</span>.lastControlCode_=<span class=\"code-literal\">null</span>),n=t&gt;&gt;&gt;<span class=\"code-number\">8</span>,r=<span class=\"code-number\">255</span>&amp;t,t!==<span class=\"code-keyword\">this</span>.PADDING_)<span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.RESUME_CAPTION_LOADING_)<span class=\"code-keyword\">this</span>.mode_=<span class=\"code-string\">\"popOn\"</span>;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.END_OF_CAPTION_)<span class=\"code-keyword\">this</span>.mode_=<span class=\"code-string\">\"popOn\"</span>,<span class=\"code-keyword\">this</span>.clearFormatting(e.pts),<span class=\"code-keyword\">this</span>.flushDisplayed(e.pts),i=<span class=\"code-keyword\">this</span>.displayed_,<span class=\"code-keyword\">this</span>.displayed_=<span class=\"code-keyword\">this</span>.nonDisplayed_,<span class=\"code-keyword\">this</span>.nonDisplayed_=i,<span class=\"code-keyword\">this</span>.startPts_=e.pts;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.ROLL_UP_2_ROWS_)<span class=\"code-keyword\">this</span>.rollUpRows_=<span class=\"code-number\">2</span>,<span class=\"code-keyword\">this</span>.setRollUp(e.pts);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.ROLL_UP_3_ROWS_)<span class=\"code-keyword\">this</span>.rollUpRows_=<span class=\"code-number\">3</span>,<span class=\"code-keyword\">this</span>.setRollUp(e.pts);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.ROLL_UP_4_ROWS_)<span class=\"code-keyword\">this</span>.rollUpRows_=<span class=\"code-number\">4</span>,<span class=\"code-keyword\">this</span>.setRollUp(e.pts);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.CARRIAGE_RETURN_)<span class=\"code-keyword\">this</span>.clearFormatting(e.pts),<span class=\"code-keyword\">this</span>.flushDisplayed(e.pts),<span class=\"code-keyword\">this</span>.shiftRowsUp_(),<span class=\"code-keyword\">this</span>.startPts_=e.pts;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.BACKSPACE_)<span class=\"code-string\">\"popOn\"</span>===<span class=\"code-keyword\">this</span>.mode_?<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_]=<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_].slice(<span class=\"code-number\">0</span>,<span class=\"code-number\">-1</span>):<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_]=<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_].slice(<span class=\"code-number\">0</span>,<span class=\"code-number\">-1</span>);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.ERASE_DISPLAYED_MEMORY_)<span class=\"code-keyword\">this</span>.flushDisplayed(e.pts),<span class=\"code-keyword\">this</span>.displayed_=Ae();<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.ERASE_NON_DISPLAYED_MEMORY_)<span class=\"code-keyword\">this</span>.nonDisplayed_=Ae();<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.RESUME_DIRECT_CAPTIONING_)<span class=\"code-string\">\"paintOn\"</span>!==<span class=\"code-keyword\">this</span>.mode_&amp;&amp;(<span class=\"code-keyword\">this</span>.flushDisplayed(e.pts),<span class=\"code-keyword\">this</span>.displayed_=Ae()),<span class=\"code-keyword\">this</span>.mode_=<span class=\"code-string\">\"paintOn\"</span>,<span class=\"code-keyword\">this</span>.startPts_=e.pts;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isSpecialCharacter(n,r))a=Ue((n=(<span class=\"code-number\">3</span>&amp;n)&lt;&lt;<span class=\"code-number\">8</span>)|r),<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e.pts,a),<span class=\"code-keyword\">this</span>.column_++;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isExtCharacter(n,r))<span class=\"code-string\">\"popOn\"</span>===<span class=\"code-keyword\">this</span>.mode_?<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_]=<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_].slice(<span class=\"code-number\">0</span>,<span class=\"code-number\">-1</span>):<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_]=<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_].slice(<span class=\"code-number\">0</span>,<span class=\"code-number\">-1</span>),a=Ue((n=(<span class=\"code-number\">3</span>&amp;n)&lt;&lt;<span class=\"code-number\">8</span>)|r),<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e.pts,a),<span class=\"code-keyword\">this</span>.column_++;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isMidRowCode(n,r))<span class=\"code-keyword\">this</span>.clearFormatting(e.pts),<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e.pts,<span class=\"code-string\">\" \"</span>),<span class=\"code-keyword\">this</span>.column_++,<span class=\"code-number\">14</span>==(<span class=\"code-number\">14</span>&amp;r)&amp;&amp;<span class=\"code-keyword\">this</span>.addFormatting(e.pts,[<span class=\"code-string\">\"i\"</span>]),<span class=\"code-number\">1</span>==(<span class=\"code-number\">1</span>&amp;r)&amp;&amp;<span class=\"code-keyword\">this</span>.addFormatting(e.pts,[<span class=\"code-string\">\"u\"</span>]);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isOffsetControlCode(n,r))<span class=\"code-keyword\">this</span>.column_+=<span class=\"code-number\">3</span>&amp;r;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isPAC(n,r)){<span class=\"code-keyword\">var</span> s=Ie.indexOf(<span class=\"code-number\">7968</span>&amp;t);<span class=\"code-string\">\"rollUp\"</span>===<span class=\"code-keyword\">this</span>.mode_&amp;&amp;(s-<span class=\"code-keyword\">this</span>.rollUpRows_+<span class=\"code-number\">1</span>&lt;<span class=\"code-number\">0</span>&amp;&amp;(s=<span class=\"code-keyword\">this</span>.rollUpRows_<span class=\"code-number\">-1</span>),<span class=\"code-keyword\">this</span>.setRollUp(e.pts,s)),s!==<span class=\"code-keyword\">this</span>.row_&amp;&amp;(<span class=\"code-keyword\">this</span>.clearFormatting(e.pts),<span class=\"code-keyword\">this</span>.row_=s),<span class=\"code-number\">1</span>&amp;r&amp;&amp;<span class=\"code-number\">-1</span>===<span class=\"code-keyword\">this</span>.formatting_.indexOf(<span class=\"code-string\">\"u\"</span>)&amp;&amp;<span class=\"code-keyword\">this</span>.addFormatting(e.pts,[<span class=\"code-string\">\"u\"</span>]),<span class=\"code-number\">16</span>==(<span class=\"code-number\">16</span>&amp;t)&amp;&amp;(<span class=\"code-keyword\">this</span>.column_=<span class=\"code-number\">4</span>*((<span class=\"code-number\">14</span>&amp;t)&gt;&gt;<span class=\"code-number\">1</span>)),<span class=\"code-keyword\">this</span>.isColorPAC(r)&amp;&amp;<span class=\"code-number\">14</span>==(<span class=\"code-number\">14</span>&amp;r)&amp;&amp;<span class=\"code-keyword\">this</span>.addFormatting(e.pts,[<span class=\"code-string\">\"i\"</span>])}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.isNormalChar(n)&amp;&amp;(<span class=\"code-number\">0</span>===r&amp;&amp;(r=<span class=\"code-literal\">null</span>),a=Ue(n),a+=Ue(r),<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e.pts,a),<span class=\"code-keyword\">this</span>.column_+=a.length)}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.lastControlCode_=<span class=\"code-literal\">null</span>}};Oe.prototype=<span class=\"code-keyword\">new</span> G,Oe.prototype.flushDisplayed=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.displayed_.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">try</span>{<span class=\"code-keyword\">return</span> e.trim()}<span class=\"code-keyword\">catch</span>(e){<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">console</span>.error(<span class=\"code-string\">\"Skipping malformed caption.\"</span>),<span class=\"code-string\">\"\"</span>}}).join(<span class=\"code-string\">\"\\n\"</span>).replace(<span class=\"code-regexp\">/^\\n+|\\n+$/g</span>,<span class=\"code-string\">\"\"</span>);t.length&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">startPts</span>:<span class=\"code-keyword\">this</span>.startPts_,<span class=\"code-attr\">endPts</span>:e,<span class=\"code-attr\">text</span>:t,<span class=\"code-attr\">stream</span>:<span class=\"code-keyword\">this</span>.name_})},Oe.prototype.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.mode_=<span class=\"code-string\">\"popOn\"</span>,<span class=\"code-keyword\">this</span>.topRow_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.startPts_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.displayed_=Ae(),<span class=\"code-keyword\">this</span>.nonDisplayed_=Ae(),<span class=\"code-keyword\">this</span>.lastControlCode_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.column_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.row_=<span class=\"code-number\">14</span>,<span class=\"code-keyword\">this</span>.rollUpRows_=<span class=\"code-number\">2</span>,<span class=\"code-keyword\">this</span>.formatting_=[]},Oe.prototype.setConstants=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.dataChannel_?(<span class=\"code-keyword\">this</span>.BASE_=<span class=\"code-number\">16</span>,<span class=\"code-keyword\">this</span>.EXT_=<span class=\"code-number\">17</span>,<span class=\"code-keyword\">this</span>.CONTROL_=(<span class=\"code-number\">20</span>|<span class=\"code-keyword\">this</span>.field_)&lt;&lt;<span class=\"code-number\">8</span>,<span class=\"code-keyword\">this</span>.OFFSET_=<span class=\"code-number\">23</span>):<span class=\"code-number\">1</span>===<span class=\"code-keyword\">this</span>.dataChannel_&amp;&amp;(<span class=\"code-keyword\">this</span>.BASE_=<span class=\"code-number\">24</span>,<span class=\"code-keyword\">this</span>.EXT_=<span class=\"code-number\">25</span>,<span class=\"code-keyword\">this</span>.CONTROL_=(<span class=\"code-number\">28</span>|<span class=\"code-keyword\">this</span>.field_)&lt;&lt;<span class=\"code-number\">8</span>,<span class=\"code-keyword\">this</span>.OFFSET_=<span class=\"code-number\">31</span>),<span class=\"code-keyword\">this</span>.PADDING_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.RESUME_CAPTION_LOADING_=<span class=\"code-number\">32</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.END_OF_CAPTION_=<span class=\"code-number\">47</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.ROLL_UP_2_ROWS_=<span class=\"code-number\">37</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.ROLL_UP_3_ROWS_=<span class=\"code-number\">38</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.ROLL_UP_4_ROWS_=<span class=\"code-number\">39</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.CARRIAGE_RETURN_=<span class=\"code-number\">45</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.RESUME_DIRECT_CAPTIONING_=<span class=\"code-number\">41</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.BACKSPACE_=<span class=\"code-number\">33</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.ERASE_DISPLAYED_MEMORY_=<span class=\"code-number\">44</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.ERASE_NON_DISPLAYED_MEMORY_=<span class=\"code-number\">46</span>|<span class=\"code-keyword\">this</span>.CONTROL_},Oe.prototype.isSpecialCharacter=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e===<span class=\"code-keyword\">this</span>.EXT_&amp;&amp;t&gt;=<span class=\"code-number\">48</span>&amp;&amp;t&lt;=<span class=\"code-number\">63</span>},Oe.prototype.isExtCharacter=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span>(e===<span class=\"code-keyword\">this</span>.EXT_+<span class=\"code-number\">1</span>||e===<span class=\"code-keyword\">this</span>.EXT_+<span class=\"code-number\">2</span>)&amp;&amp;t&gt;=<span class=\"code-number\">32</span>&amp;&amp;t&lt;=<span class=\"code-number\">63</span>},Oe.prototype.isMidRowCode=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e===<span class=\"code-keyword\">this</span>.EXT_&amp;&amp;t&gt;=<span class=\"code-number\">32</span>&amp;&amp;t&lt;=<span class=\"code-number\">47</span>},Oe.prototype.isOffsetControlCode=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e===<span class=\"code-keyword\">this</span>.OFFSET_&amp;&amp;t&gt;=<span class=\"code-number\">33</span>&amp;&amp;t&lt;=<span class=\"code-number\">35</span>},Oe.prototype.isPAC=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e&gt;=<span class=\"code-keyword\">this</span>.BASE_&amp;&amp;e&lt;<span class=\"code-keyword\">this</span>.BASE_+<span class=\"code-number\">8</span>&amp;&amp;t&gt;=<span class=\"code-number\">64</span>&amp;&amp;t&lt;=<span class=\"code-number\">127</span>},Oe.prototype.isColorPAC=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&gt;=<span class=\"code-number\">64</span>&amp;&amp;e&lt;=<span class=\"code-number\">79</span>||e&gt;=<span class=\"code-number\">96</span>&amp;&amp;e&lt;=<span class=\"code-number\">127</span>},Oe.prototype.isNormalChar=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&gt;=<span class=\"code-number\">32</span>&amp;&amp;e&lt;=<span class=\"code-number\">127</span>},Oe.prototype.setRollUp=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"rollUp\"</span>!==<span class=\"code-keyword\">this</span>.mode_&amp;&amp;(<span class=\"code-keyword\">this</span>.row_=<span class=\"code-number\">14</span>,<span class=\"code-keyword\">this</span>.mode_=<span class=\"code-string\">\"rollUp\"</span>,<span class=\"code-keyword\">this</span>.flushDisplayed(e),<span class=\"code-keyword\">this</span>.nonDisplayed_=Ae(),<span class=\"code-keyword\">this</span>.displayed_=Ae()),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==t&amp;&amp;t!==<span class=\"code-keyword\">this</span>.row_)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;<span class=\"code-keyword\">this</span>.rollUpRows_;i++)<span class=\"code-keyword\">this</span>.displayed_[t-i]=<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_-i],<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_-i]=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t=<span class=\"code-keyword\">this</span>.row_),<span class=\"code-keyword\">this</span>.topRow_=t-<span class=\"code-keyword\">this</span>.rollUpRows_+<span class=\"code-number\">1</span>},Oe.prototype.addFormatting=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.formatting_=<span class=\"code-keyword\">this</span>.formatting_.concat(t);<span class=\"code-keyword\">var</span> i=t.reduce(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e+<span class=\"code-string\">\"&lt;\"</span>+t+<span class=\"code-string\">\"&gt;\"</span>},<span class=\"code-string\">\"\"</span>);<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e,i)},Oe.prototype.clearFormatting=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.formatting_.length){<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.formatting_.reverse().reduce(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e+<span class=\"code-string\">\"&lt;/\"</span>+t+<span class=\"code-string\">\"&gt;\"</span>},<span class=\"code-string\">\"\"</span>);<span class=\"code-keyword\">this</span>.formatting_=[],<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e,t)}},Oe.prototype.popOn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_];i+=t,<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_]=i},Oe.prototype.rollUp=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_];i+=t,<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_]=i},Oe.prototype.shiftRowsUp_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e;<span class=\"code-keyword\">for</span>(e=<span class=\"code-number\">0</span>;e&lt;<span class=\"code-keyword\">this</span>.topRow_;e++)<span class=\"code-keyword\">this</span>.displayed_[e]=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">for</span>(e=<span class=\"code-keyword\">this</span>.row_+<span class=\"code-number\">1</span>;e&lt;<span class=\"code-number\">15</span>;e++)<span class=\"code-keyword\">this</span>.displayed_[e]=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">for</span>(e=<span class=\"code-keyword\">this</span>.topRow_;e&lt;<span class=\"code-keyword\">this</span>.row_;e++)<span class=\"code-keyword\">this</span>.displayed_[e]=<span class=\"code-keyword\">this</span>.displayed_[e+<span class=\"code-number\">1</span>];<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_]=<span class=\"code-string\">\"\"</span>},Oe.prototype.paintOn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_];i+=t,<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_]=i};<span class=\"code-keyword\">var</span> Ce={<span class=\"code-attr\">CaptionStream</span>:Le,<span class=\"code-attr\">Cea608Stream</span>:Oe},Pe={<span class=\"code-attr\">H264_STREAM_TYPE</span>:<span class=\"code-number\">27</span>,<span class=\"code-attr\">ADTS_STREAM_TYPE</span>:<span class=\"code-number\">15</span>,<span class=\"code-attr\">METADATA_STREAM_TYPE</span>:<span class=\"code-number\">21</span>},De=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">1</span>;<span class=\"code-keyword\">for</span>(e&gt;t&amp;&amp;(i=<span class=\"code-number\">-1</span>);<span class=\"code-built_in\">Math</span>.abs(t-e)&gt;<span class=\"code-number\">4294967296</span>;)e+=<span class=\"code-number\">8589934592</span>*i;<span class=\"code-keyword\">return</span> e},Re=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i,n;e.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.type_=t||<span class=\"code-string\">\"shared\"</span>,<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-string\">\"shared\"</span>!==<span class=\"code-keyword\">this</span>.type_&amp;&amp;e.type!==<span class=\"code-keyword\">this</span>.type_||(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n=e.dts),e.dts=De(e.dts,n),e.pts=De(e.pts,n),i=e.dts,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,e))},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n=i,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>)},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.flush(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>)},<span class=\"code-keyword\">this</span>.discontinuity=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.discontinuity(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)}};Re.prototype=<span class=\"code-keyword\">new</span> G;<span class=\"code-keyword\">var</span> xe,Me=Re,Be=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">for</span>(n=t;n&lt;i;n++)r+=<span class=\"code-string\">\"%\"</span>+(<span class=\"code-string\">\"00\"</span>+e[n].toString(<span class=\"code-number\">16</span>)).slice(<span class=\"code-number\">-2</span>);<span class=\"code-keyword\">return</span> r},Ne=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">decodeURIComponent</span>(Be(e,t,i))},qe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e[<span class=\"code-number\">0</span>]&lt;&lt;<span class=\"code-number\">21</span>|e[<span class=\"code-number\">1</span>]&lt;&lt;<span class=\"code-number\">14</span>|e[<span class=\"code-number\">2</span>]&lt;&lt;<span class=\"code-number\">7</span>|e[<span class=\"code-number\">3</span>]},Fe={<span class=\"code-attr\">TXXX</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">3</span>===e.data[<span class=\"code-number\">0</span>]){<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">1</span>;t&lt;e.data.length;t++)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===e.data[t]){e.description=Ne(e.data,<span class=\"code-number\">1</span>,t),e.value=Ne(e.data,t+<span class=\"code-number\">1</span>,e.data.length).replace(<span class=\"code-regexp\">/\\0*$/</span>,<span class=\"code-string\">\"\"</span>);<span class=\"code-keyword\">break</span>}e.data=e.value}},<span class=\"code-attr\">WXXX</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">3</span>===e.data[<span class=\"code-number\">0</span>])<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">1</span>;t&lt;e.data.length;t++)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===e.data[t]){e.description=Ne(e.data,<span class=\"code-number\">1</span>,t),e.url=Ne(e.data,t+<span class=\"code-number\">1</span>,e.data.length);<span class=\"code-keyword\">break</span>}},<span class=\"code-attr\">PRIV</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i;<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">0</span>;t&lt;e.data.length;t++)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===e.data[t]){e.owner=(i=e.data,<span class=\"code-built_in\">unescape</span>(Be(i,<span class=\"code-number\">0</span>,t)));<span class=\"code-keyword\">break</span>}e.privateData=e.data.subarray(t+<span class=\"code-number\">1</span>),e.data=e.privateData}};(xe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i={<span class=\"code-attr\">debug</span>:!(!e||!e.debug),<span class=\"code-attr\">descriptor</span>:e&amp;&amp;e.descriptor},n=<span class=\"code-number\">0</span>,r=[],a=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(xe.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.dispatchType=Pe.METADATA_STREAM_TYPE.toString(<span class=\"code-number\">16</span>),i.descriptor)<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">0</span>;t&lt;i.descriptor.length;t++)<span class=\"code-keyword\">this</span>.dispatchType+=(<span class=\"code-string\">\"00\"</span>+i.descriptor[t].toString(<span class=\"code-number\">16</span>)).slice(<span class=\"code-number\">-2</span>);<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,s,o,u,d;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"timed-metadata\"</span>===e.type)<span class=\"code-keyword\">if</span>(e.dataAlignmentIndicator&amp;&amp;(a=<span class=\"code-number\">0</span>,r.length=<span class=\"code-number\">0</span>),<span class=\"code-number\">0</span>===r.length&amp;&amp;(e.data.length&lt;<span class=\"code-number\">10</span>||e.data[<span class=\"code-number\">0</span>]!==<span class=\"code-string\">\"I\"</span>.charCodeAt(<span class=\"code-number\">0</span>)||e.data[<span class=\"code-number\">1</span>]!==<span class=\"code-string\">\"D\"</span>.charCodeAt(<span class=\"code-number\">0</span>)||e.data[<span class=\"code-number\">2</span>]!==<span class=\"code-string\">\"3\"</span>.charCodeAt(<span class=\"code-number\">0</span>)))i.debug&amp;&amp;<span class=\"code-built_in\">console</span>.log(<span class=\"code-string\">\"Skipping unrecognized metadata packet\"</span>);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(r.push(e),a+=e.data.byteLength,<span class=\"code-number\">1</span>===r.length&amp;&amp;(n=qe(e.data.subarray(<span class=\"code-number\">6</span>,<span class=\"code-number\">10</span>)),n+=<span class=\"code-number\">10</span>),!(a&lt;n)){<span class=\"code-keyword\">for</span>(t={<span class=\"code-attr\">data</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(n),<span class=\"code-attr\">frames</span>:[],<span class=\"code-attr\">pts</span>:r[<span class=\"code-number\">0</span>].pts,<span class=\"code-attr\">dts</span>:r[<span class=\"code-number\">0</span>].dts},d=<span class=\"code-number\">0</span>;d&lt;n;)t.data.set(r[<span class=\"code-number\">0</span>].data.subarray(<span class=\"code-number\">0</span>,n-d),d),d+=r[<span class=\"code-number\">0</span>].data.byteLength,a-=r[<span class=\"code-number\">0</span>].data.byteLength,r.shift();s=<span class=\"code-number\">10</span>,<span class=\"code-number\">64</span>&amp;t.data[<span class=\"code-number\">5</span>]&amp;&amp;(s+=<span class=\"code-number\">4</span>,s+=qe(t.data.subarray(<span class=\"code-number\">10</span>,<span class=\"code-number\">14</span>)),n-=qe(t.data.subarray(<span class=\"code-number\">16</span>,<span class=\"code-number\">20</span>)));<span class=\"code-keyword\">do</span>{<span class=\"code-keyword\">if</span>((o=qe(t.data.subarray(s+<span class=\"code-number\">4</span>,s+<span class=\"code-number\">8</span>)))&lt;<span class=\"code-number\">1</span>)<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">console</span>.log(<span class=\"code-string\">\"Malformed ID3 frame encountered. Skipping metadata parsing.\"</span>);<span class=\"code-keyword\">if</span>((u={<span class=\"code-attr\">id</span>:<span class=\"code-built_in\">String</span>.fromCharCode(t.data[s],t.data[s+<span class=\"code-number\">1</span>],t.data[s+<span class=\"code-number\">2</span>],t.data[s+<span class=\"code-number\">3</span>]),<span class=\"code-attr\">data</span>:t.data.subarray(s+<span class=\"code-number\">10</span>,s+o+<span class=\"code-number\">10</span>)}).key=u.id,Fe[u.id]&amp;&amp;(Fe[u.id](u),<span class=\"code-string\">\"com.apple.streaming.transportStreamTimestamp\"</span>===u.owner)){<span class=\"code-keyword\">var</span> l=u.data,h=(<span class=\"code-number\">1</span>&amp;l[<span class=\"code-number\">3</span>])&lt;&lt;<span class=\"code-number\">30</span>|l[<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">22</span>|l[<span class=\"code-number\">5</span>]&lt;&lt;<span class=\"code-number\">14</span>|l[<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">6</span>|l[<span class=\"code-number\">7</span>]&gt;&gt;&gt;<span class=\"code-number\">2</span>;h*=<span class=\"code-number\">4</span>,h+=<span class=\"code-number\">3</span>&amp;l[<span class=\"code-number\">7</span>],u.timeStamp=h,<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t.pts&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t.dts&amp;&amp;(t.pts=u.timeStamp,t.dts=u.timeStamp),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timestamp\"</span>,u)}t.frames.push(u),s+=<span class=\"code-number\">10</span>,s+=o}<span class=\"code-keyword\">while</span>(s&lt;n);<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,t)}}}).prototype=<span class=\"code-keyword\">new</span> G;<span class=\"code-keyword\">var</span> He,Ge,je,Ve=xe,We=Me;(He=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(<span class=\"code-number\">188</span>),t=<span class=\"code-number\">0</span>;He.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n,r=<span class=\"code-number\">0</span>,a=<span class=\"code-number\">188</span>;<span class=\"code-keyword\">for</span>(t?((n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(i.byteLength+t)).set(e.subarray(<span class=\"code-number\">0</span>,t)),n.set(i,t),t=<span class=\"code-number\">0</span>):n=i;a&lt;n.byteLength;)<span class=\"code-number\">71</span>!==n[r]||<span class=\"code-number\">71</span>!==n[a]?(r++,a++):(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,n.subarray(r,a)),r+=<span class=\"code-number\">188</span>,a+=<span class=\"code-number\">188</span>);r&lt;n.byteLength&amp;&amp;(e.set(n.subarray(r),<span class=\"code-number\">0</span>),t=n.byteLength-r)},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-number\">188</span>===t&amp;&amp;<span class=\"code-number\">71</span>===e[<span class=\"code-number\">0</span>]&amp;&amp;(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,e),t=<span class=\"code-number\">0</span>),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>)},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.flush(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>)},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)}}).prototype=<span class=\"code-keyword\">new</span> G,(Ge=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t,i,n;Ge.prototype.init.call(<span class=\"code-keyword\">this</span>),n=<span class=\"code-keyword\">this</span>,<span class=\"code-keyword\">this</span>.packetsWaitingForPmt=[],<span class=\"code-keyword\">this</span>.programMapTable=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,e=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,n</span>)</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;n.payloadUnitStartIndicator&amp;&amp;(r+=e[r]+<span class=\"code-number\">1</span>),<span class=\"code-string\">\"pat\"</span>===n.type?t(e.subarray(r),n):i(e.subarray(r),n)},t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{t.section_number=e[<span class=\"code-number\">7</span>],t.last_section_number=e[<span class=\"code-number\">8</span>],n.pmtPid=(<span class=\"code-number\">31</span>&amp;e[<span class=\"code-number\">10</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">11</span>],t.pmtPid=n.pmtPid},i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,r;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">1</span>&amp;e[<span class=\"code-number\">5</span>]){<span class=\"code-keyword\">for</span>(n.programMapTable={<span class=\"code-attr\">video</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">audio</span>:<span class=\"code-literal\">null</span>,<span class=\"code-string\">\"timed-metadata\"</span>:{}},i=<span class=\"code-number\">3</span>+((<span class=\"code-number\">15</span>&amp;e[<span class=\"code-number\">1</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">2</span>])<span class=\"code-number\">-4</span>,r=<span class=\"code-number\">12</span>+((<span class=\"code-number\">15</span>&amp;e[<span class=\"code-number\">10</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">11</span>]);r&lt;i;){<span class=\"code-keyword\">var</span> a=e[r],s=(<span class=\"code-number\">31</span>&amp;e[r+<span class=\"code-number\">1</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[r+<span class=\"code-number\">2</span>];a===Pe.H264_STREAM_TYPE&amp;&amp;<span class=\"code-literal\">null</span>===n.programMapTable.video?n.programMapTable.video=s:a===Pe.ADTS_STREAM_TYPE&amp;&amp;<span class=\"code-literal\">null</span>===n.programMapTable.audio?n.programMapTable.audio=s:a===Pe.METADATA_STREAM_TYPE&amp;&amp;(n.programMapTable[<span class=\"code-string\">\"timed-metadata\"</span>][s]=a),r+=<span class=\"code-number\">5</span>+((<span class=\"code-number\">15</span>&amp;e[r+<span class=\"code-number\">3</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[r+<span class=\"code-number\">4</span>])}t.programMapTable=n.programMapTable}},<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i={},n=<span class=\"code-number\">4</span>;<span class=\"code-keyword\">if</span>(i.payloadUnitStartIndicator=!!(<span class=\"code-number\">64</span>&amp;t[<span class=\"code-number\">1</span>]),i.pid=<span class=\"code-number\">31</span>&amp;t[<span class=\"code-number\">1</span>],i.pid&lt;&lt;=<span class=\"code-number\">8</span>,i.pid|=t[<span class=\"code-number\">2</span>],(<span class=\"code-number\">48</span>&amp;t[<span class=\"code-number\">3</span>])&gt;&gt;&gt;<span class=\"code-number\">4</span>&gt;<span class=\"code-number\">1</span>&amp;&amp;(n+=t[n]+<span class=\"code-number\">1</span>),<span class=\"code-number\">0</span>===i.pid)i.type=<span class=\"code-string\">\"pat\"</span>,e(t.subarray(n),i),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(i.pid===<span class=\"code-keyword\">this</span>.pmtPid)<span class=\"code-keyword\">for</span>(i.type=<span class=\"code-string\">\"pmt\"</span>,e(t.subarray(n),i),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">this</span>.packetsWaitingForPmt.length;)<span class=\"code-keyword\">this</span>.processPes_.apply(<span class=\"code-keyword\">this</span>,<span class=\"code-keyword\">this</span>.packetsWaitingForPmt.shift());<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.programMapTable?<span class=\"code-keyword\">this</span>.packetsWaitingForPmt.push([t,n,i]):<span class=\"code-keyword\">this</span>.processPes_(t,n,i)},<span class=\"code-keyword\">this</span>.processPes_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{i.pid===<span class=\"code-keyword\">this</span>.programMapTable.video?i.streamType=Pe.H264_STREAM_TYPE:i.pid===<span class=\"code-keyword\">this</span>.programMapTable.audio?i.streamType=Pe.ADTS_STREAM_TYPE:i.streamType=<span class=\"code-keyword\">this</span>.programMapTable[<span class=\"code-string\">\"timed-metadata\"</span>][i.pid],i.type=<span class=\"code-string\">\"pes\"</span>,i.data=e.subarray(t),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,i)}}).prototype=<span class=\"code-keyword\">new</span> G,Ge.STREAM_TYPES={<span class=\"code-attr\">h264</span>:<span class=\"code-number\">27</span>,<span class=\"code-attr\">adts</span>:<span class=\"code-number\">15</span>},(je=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t=<span class=\"code-keyword\">this</span>,i={<span class=\"code-attr\">data</span>:[],<span class=\"code-attr\">size</span>:<span class=\"code-number\">0</span>},n={<span class=\"code-attr\">data</span>:[],<span class=\"code-attr\">size</span>:<span class=\"code-number\">0</span>},r={<span class=\"code-attr\">data</span>:[],<span class=\"code-attr\">size</span>:<span class=\"code-number\">0</span>},a=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i,n</span>)</span>{<span class=\"code-keyword\">var</span> r,a,s=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.size),o={<span class=\"code-attr\">type</span>:i},u=<span class=\"code-number\">0</span>,d=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(e.data.length&amp;&amp;!(e.size&lt;<span class=\"code-number\">9</span>)){<span class=\"code-keyword\">for</span>(o.trackId=e.data[<span class=\"code-number\">0</span>].pid,u=<span class=\"code-number\">0</span>;u&lt;e.data.length;u++)a=e.data[u],s.set(a.data,d),d+=a.data.byteLength;<span class=\"code-keyword\">var</span> l,h,c;l=s,(h=o).packetLength=<span class=\"code-number\">6</span>+(l[<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">8</span>|l[<span class=\"code-number\">5</span>]),h.dataAlignmentIndicator=<span class=\"code-number\">0</span>!=(<span class=\"code-number\">4</span>&amp;l[<span class=\"code-number\">6</span>]),<span class=\"code-number\">192</span>&amp;(c=l[<span class=\"code-number\">7</span>])&amp;&amp;(h.pts=(<span class=\"code-number\">14</span>&amp;l[<span class=\"code-number\">9</span>])&lt;&lt;<span class=\"code-number\">27</span>|(<span class=\"code-number\">255</span>&amp;l[<span class=\"code-number\">10</span>])&lt;&lt;<span class=\"code-number\">20</span>|(<span class=\"code-number\">254</span>&amp;l[<span class=\"code-number\">11</span>])&lt;&lt;<span class=\"code-number\">12</span>|(<span class=\"code-number\">255</span>&amp;l[<span class=\"code-number\">12</span>])&lt;&lt;<span class=\"code-number\">5</span>|(<span class=\"code-number\">254</span>&amp;l[<span class=\"code-number\">13</span>])&gt;&gt;&gt;<span class=\"code-number\">3</span>,h.pts*=<span class=\"code-number\">4</span>,h.pts+=(<span class=\"code-number\">6</span>&amp;l[<span class=\"code-number\">13</span>])&gt;&gt;&gt;<span class=\"code-number\">1</span>,h.dts=h.pts,<span class=\"code-number\">64</span>&amp;c&amp;&amp;(h.dts=(<span class=\"code-number\">14</span>&amp;l[<span class=\"code-number\">14</span>])&lt;&lt;<span class=\"code-number\">27</span>|(<span class=\"code-number\">255</span>&amp;l[<span class=\"code-number\">15</span>])&lt;&lt;<span class=\"code-number\">20</span>|(<span class=\"code-number\">254</span>&amp;l[<span class=\"code-number\">16</span>])&lt;&lt;<span class=\"code-number\">12</span>|(<span class=\"code-number\">255</span>&amp;l[<span class=\"code-number\">17</span>])&lt;&lt;<span class=\"code-number\">5</span>|(<span class=\"code-number\">254</span>&amp;l[<span class=\"code-number\">18</span>])&gt;&gt;&gt;<span class=\"code-number\">3</span>,h.dts*=<span class=\"code-number\">4</span>,h.dts+=(<span class=\"code-number\">6</span>&amp;l[<span class=\"code-number\">18</span>])&gt;&gt;&gt;<span class=\"code-number\">1</span>)),h.data=l.subarray(<span class=\"code-number\">9</span>+l[<span class=\"code-number\">8</span>]),r=<span class=\"code-string\">\"video\"</span>===i||o.packetLength&lt;=e.size,(n||r)&amp;&amp;(e.size=<span class=\"code-number\">0</span>,e.data.length=<span class=\"code-number\">0</span>),r&amp;&amp;t.trigger(<span class=\"code-string\">\"data\"</span>,o)}};je.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">s</span>)</span>{({<span class=\"code-attr\">pat</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{},<span class=\"code-attr\">pes</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t;<span class=\"code-keyword\">switch</span>(s.streamType){<span class=\"code-keyword\">case</span> Pe.H264_STREAM_TYPE:<span class=\"code-keyword\">case</span> Pe.H264_STREAM_TYPE:e=i,t=<span class=\"code-string\">\"video\"</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> Pe.ADTS_STREAM_TYPE:e=n,t=<span class=\"code-string\">\"audio\"</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> Pe.METADATA_STREAM_TYPE:e=r,t=<span class=\"code-string\">\"timed-metadata\"</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">default</span>:<span class=\"code-keyword\">return</span>}s.payloadUnitStartIndicator&amp;&amp;a(e,t,!<span class=\"code-number\">0</span>),e.data.push(s),e.size+=s.data.byteLength},<span class=\"code-attr\">pmt</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"metadata\"</span>,<span class=\"code-attr\">tracks</span>:[]};<span class=\"code-literal\">null</span>!==(e=s.programMapTable).video&amp;&amp;i.tracks.push({<span class=\"code-attr\">timelineStartInfo</span>:{<span class=\"code-attr\">baseMediaDecodeTime</span>:<span class=\"code-number\">0</span>},<span class=\"code-attr\">id</span>:+e.video,<span class=\"code-attr\">codec</span>:<span class=\"code-string\">\"avc\"</span>,<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"video\"</span>}),<span class=\"code-literal\">null</span>!==e.audio&amp;&amp;i.tracks.push({<span class=\"code-attr\">timelineStartInfo</span>:{<span class=\"code-attr\">baseMediaDecodeTime</span>:<span class=\"code-number\">0</span>},<span class=\"code-attr\">id</span>:+e.audio,<span class=\"code-attr\">codec</span>:<span class=\"code-string\">\"adts\"</span>,<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>}),t.trigger(<span class=\"code-string\">\"data\"</span>,i)}})[s.type]()},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i.size=<span class=\"code-number\">0</span>,i.data.length=<span class=\"code-number\">0</span>,n.size=<span class=\"code-number\">0</span>,n.data.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)},<span class=\"code-keyword\">this</span>.flushStreams_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{a(i,<span class=\"code-string\">\"video\"</span>),a(n,<span class=\"code-string\">\"audio\"</span>),a(r,<span class=\"code-string\">\"timed-metadata\"</span>)},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.flushStreams_(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>)}}).prototype=<span class=\"code-keyword\">new</span> G;<span class=\"code-keyword\">var</span> ze={<span class=\"code-attr\">PAT_PID</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">MP2T_PACKET_LENGTH</span>:<span class=\"code-number\">188</span>,<span class=\"code-attr\">TransportPacketStream</span>:He,<span class=\"code-attr\">TransportParseStream</span>:Ge,<span class=\"code-attr\">ElementaryStream</span>:je,<span class=\"code-attr\">TimestampRolloverStream</span>:We,<span class=\"code-attr\">CaptionStream</span>:Ce.CaptionStream,<span class=\"code-attr\">Cea608Stream</span>:Ce.Cea608Stream,<span class=\"code-attr\">MetadataStream</span>:Ve};<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> Xe <span class=\"code-keyword\">in</span> Pe)Pe.hasOwnProperty(Xe)&amp;&amp;(ze[Xe]=Pe[Xe]);<span class=\"code-keyword\">var</span> Ye,Ke=ze,$e=de,Qe=[<span class=\"code-number\">96e3</span>,<span class=\"code-number\">88200</span>,<span class=\"code-number\">64e3</span>,<span class=\"code-number\">48e3</span>,<span class=\"code-number\">44100</span>,<span class=\"code-number\">32e3</span>,<span class=\"code-number\">24e3</span>,<span class=\"code-number\">22050</span>,<span class=\"code-number\">16e3</span>,<span class=\"code-number\">12e3</span>,<span class=\"code-number\">11025</span>,<span class=\"code-number\">8e3</span>,<span class=\"code-number\">7350</span>];(Ye=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=<span class=\"code-number\">0</span>;Ye.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-keyword\">var</span> r,a,s,o,u,d,l=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(e||(i=<span class=\"code-number\">0</span>),<span class=\"code-string\">\"audio\"</span>===n.type)<span class=\"code-keyword\">for</span>(t?(o=t,(t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(o.byteLength+n.data.byteLength)).set(o),t.set(n.data,o.byteLength)):t=n.data;l+<span class=\"code-number\">5</span>&lt;t.length;)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">255</span>===t[l]&amp;&amp;<span class=\"code-number\">240</span>==(<span class=\"code-number\">246</span>&amp;t[l+<span class=\"code-number\">1</span>])){<span class=\"code-keyword\">if</span>(a=<span class=\"code-number\">2</span>*(<span class=\"code-number\">1</span>&amp;~t[l+<span class=\"code-number\">1</span>]),r=(<span class=\"code-number\">3</span>&amp;t[l+<span class=\"code-number\">3</span>])&lt;&lt;<span class=\"code-number\">11</span>|t[l+<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">3</span>|(<span class=\"code-number\">224</span>&amp;t[l+<span class=\"code-number\">5</span>])&gt;&gt;<span class=\"code-number\">5</span>,d=(u=<span class=\"code-number\">1024</span>*(<span class=\"code-number\">1</span>+(<span class=\"code-number\">3</span>&amp;t[l+<span class=\"code-number\">6</span>])))*$e/Qe[(<span class=\"code-number\">60</span>&amp;t[l+<span class=\"code-number\">2</span>])&gt;&gt;&gt;<span class=\"code-number\">2</span>],s=l+r,t.byteLength&lt;s)<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">pts</span>:n.pts+i*d,<span class=\"code-attr\">dts</span>:n.dts+i*d,<span class=\"code-attr\">sampleCount</span>:u,<span class=\"code-attr\">audioobjecttype</span>:<span class=\"code-number\">1</span>+(t[l+<span class=\"code-number\">2</span>]&gt;&gt;&gt;<span class=\"code-number\">6</span>&amp;<span class=\"code-number\">3</span>),<span class=\"code-attr\">channelcount</span>:(<span class=\"code-number\">1</span>&amp;t[l+<span class=\"code-number\">2</span>])&lt;&lt;<span class=\"code-number\">2</span>|(<span class=\"code-number\">192</span>&amp;t[l+<span class=\"code-number\">3</span>])&gt;&gt;&gt;<span class=\"code-number\">6</span>,<span class=\"code-attr\">samplerate</span>:Qe[(<span class=\"code-number\">60</span>&amp;t[l+<span class=\"code-number\">2</span>])&gt;&gt;&gt;<span class=\"code-number\">2</span>],<span class=\"code-attr\">samplingfrequencyindex</span>:(<span class=\"code-number\">60</span>&amp;t[l+<span class=\"code-number\">2</span>])&gt;&gt;&gt;<span class=\"code-number\">2</span>,<span class=\"code-attr\">samplesize</span>:<span class=\"code-number\">16</span>,<span class=\"code-attr\">data</span>:t.subarray(l+<span class=\"code-number\">7</span>+a,s)}),i++,t.byteLength===s)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span>(t=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>);t=t.subarray(s)}<span class=\"code-keyword\">else</span> l++},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>)},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>)}}).prototype=<span class=\"code-keyword\">new</span> G;<span class=\"code-keyword\">var</span> Je,Ze,et,tt=Ye,it=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.byteLength,i=<span class=\"code-number\">0</span>,n=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">this</span>.length=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">8</span>*t},<span class=\"code-keyword\">this</span>.bitsAvailable=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">8</span>*t+n},<span class=\"code-keyword\">this</span>.loadWord=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> r=e.byteLength-t,a=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(<span class=\"code-number\">4</span>),s=<span class=\"code-built_in\">Math</span>.min(<span class=\"code-number\">4</span>,t);<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===s)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"no bytes available\"</span>);a.set(e.subarray(r,r+s)),i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(a.buffer).getUint32(<span class=\"code-number\">0</span>),n=<span class=\"code-number\">8</span>*s,t-=s},<span class=\"code-keyword\">this</span>.skipBits=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> r;n&gt;e?(i&lt;&lt;=e,n-=e):(e-=n,e-=<span class=\"code-number\">8</span>*(r=<span class=\"code-built_in\">Math</span>.floor(e/<span class=\"code-number\">8</span>)),t-=r,<span class=\"code-keyword\">this</span>.loadWord(),i&lt;&lt;=e,n-=e)},<span class=\"code-keyword\">this</span>.readBits=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-built_in\">Math</span>.min(n,e),a=i&gt;&gt;&gt;<span class=\"code-number\">32</span>-r;<span class=\"code-keyword\">return</span>(n-=r)&gt;<span class=\"code-number\">0</span>?i&lt;&lt;=r:t&gt;<span class=\"code-number\">0</span>&amp;&amp;<span class=\"code-keyword\">this</span>.loadWord(),(r=e-r)&gt;<span class=\"code-number\">0</span>?a&lt;&lt;r|<span class=\"code-keyword\">this</span>.readBits(r):a},<span class=\"code-keyword\">this</span>.skipLeadingZeros=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e;<span class=\"code-keyword\">for</span>(e=<span class=\"code-number\">0</span>;e&lt;n;++e)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!=(i&amp;<span class=\"code-number\">2147483648</span>&gt;&gt;&gt;e))<span class=\"code-keyword\">return</span> i&lt;&lt;=e,n-=e,e;<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.loadWord(),e+<span class=\"code-keyword\">this</span>.skipLeadingZeros()},<span class=\"code-keyword\">this</span>.skipUnsignedExpGolomb=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.skipBits(<span class=\"code-number\">1</span>+<span class=\"code-keyword\">this</span>.skipLeadingZeros())},<span class=\"code-keyword\">this</span>.skipExpGolomb=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.skipBits(<span class=\"code-number\">1</span>+<span class=\"code-keyword\">this</span>.skipLeadingZeros())},<span class=\"code-keyword\">this</span>.readUnsignedExpGolomb=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.skipLeadingZeros();<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.readBits(e+<span class=\"code-number\">1</span>)<span class=\"code-number\">-1</span>},<span class=\"code-keyword\">this</span>.readExpGolomb=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.readUnsignedExpGolomb();<span class=\"code-keyword\">return</span> <span class=\"code-number\">1</span>&amp;e?<span class=\"code-number\">1</span>+e&gt;&gt;&gt;<span class=\"code-number\">1</span>:<span class=\"code-number\">-1</span>*(e&gt;&gt;&gt;<span class=\"code-number\">1</span>)},<span class=\"code-keyword\">this</span>.readBoolean=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">1</span>===<span class=\"code-keyword\">this</span>.readBits(<span class=\"code-number\">1</span>)},<span class=\"code-keyword\">this</span>.readUnsignedByte=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.readBits(<span class=\"code-number\">8</span>)},<span class=\"code-keyword\">this</span>.loadWord()};(Ze=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t,i=<span class=\"code-number\">0</span>;Ze.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-keyword\">var</span> r;t?((r=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(t.byteLength+n.data.byteLength)).set(t),r.set(n.data,t.byteLength),t=r):t=n.data;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a=t.byteLength;i&lt;a<span class=\"code-number\">-3</span>;i++)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">1</span>===t[i+<span class=\"code-number\">2</span>]){e=i+<span class=\"code-number\">5</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-keyword\">for</span>(;e&lt;a;)<span class=\"code-keyword\">switch</span>(t[e]){<span class=\"code-keyword\">case</span> <span class=\"code-number\">0</span>:<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==t[e<span class=\"code-number\">-1</span>]){e+=<span class=\"code-number\">2</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==t[e<span class=\"code-number\">-2</span>]){e++;<span class=\"code-keyword\">break</span>}i+<span class=\"code-number\">3</span>!==e<span class=\"code-number\">-2</span>&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,t.subarray(i+<span class=\"code-number\">3</span>,e<span class=\"code-number\">-2</span>));<span class=\"code-keyword\">do</span>{e++}<span class=\"code-keyword\">while</span>(<span class=\"code-number\">1</span>!==t[e]&amp;&amp;e&lt;a);i=e<span class=\"code-number\">-2</span>,e+=<span class=\"code-number\">3</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">1</span>:<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==t[e<span class=\"code-number\">-1</span>]||<span class=\"code-number\">0</span>!==t[e<span class=\"code-number\">-2</span>]){e+=<span class=\"code-number\">3</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,t.subarray(i+<span class=\"code-number\">3</span>,e<span class=\"code-number\">-2</span>)),i=e<span class=\"code-number\">-2</span>,e+=<span class=\"code-number\">3</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">default</span>:e+=<span class=\"code-number\">3</span>}t=t.subarray(i),e-=i,i=<span class=\"code-number\">0</span>},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t=<span class=\"code-literal\">null</span>,i=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t&amp;&amp;t.byteLength&gt;<span class=\"code-number\">3</span>&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,t.subarray(i+<span class=\"code-number\">3</span>)),t=<span class=\"code-literal\">null</span>,i=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>)},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.flush(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>)}}).prototype=<span class=\"code-keyword\">new</span> G,et={<span class=\"code-number\">100</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">110</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">122</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">244</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">44</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">83</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">86</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">118</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">128</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">138</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">139</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">134</span>:!<span class=\"code-number\">0</span>},(Je=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t,i,n,r,a,s,o=<span class=\"code-keyword\">new</span> Ze;Je.prototype.init.call(<span class=\"code-keyword\">this</span>),e=<span class=\"code-keyword\">this</span>,<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-string\">\"video\"</span>===e.type&amp;&amp;(t=e.trackId,i=e.pts,n=e.dts,o.push(e))},o.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">s</span>)</span>{<span class=\"code-keyword\">var</span> o={<span class=\"code-attr\">trackId</span>:t,<span class=\"code-attr\">pts</span>:i,<span class=\"code-attr\">dts</span>:n,<span class=\"code-attr\">data</span>:s};<span class=\"code-keyword\">switch</span>(<span class=\"code-number\">31</span>&amp;s[<span class=\"code-number\">0</span>]){<span class=\"code-keyword\">case</span> <span class=\"code-number\">5</span>:o.nalUnitType=<span class=\"code-string\">\"slice_layer_without_partitioning_rbsp_idr\"</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">6</span>:o.nalUnitType=<span class=\"code-string\">\"sei_rbsp\"</span>,o.escapedRBSP=r(s.subarray(<span class=\"code-number\">1</span>));<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">7</span>:o.nalUnitType=<span class=\"code-string\">\"seq_parameter_set_rbsp\"</span>,o.escapedRBSP=r(s.subarray(<span class=\"code-number\">1</span>)),o.config=a(o.escapedRBSP);<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">8</span>:o.nalUnitType=<span class=\"code-string\">\"pic_parameter_set_rbsp\"</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">9</span>:o.nalUnitType=<span class=\"code-string\">\"access_unit_delimiter_rbsp\"</span>}e.trigger(<span class=\"code-string\">\"data\"</span>,o)}),o.on(<span class=\"code-string\">\"done\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"done\"</span>)}),o.on(<span class=\"code-string\">\"partialdone\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"partialdone\"</span>)}),o.on(<span class=\"code-string\">\"reset\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"reset\"</span>)}),o.on(<span class=\"code-string\">\"endedtimeline\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"endedtimeline\"</span>)}),<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{o.flush()},<span class=\"code-keyword\">this</span>.partialFlush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{o.partialFlush()},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{o.reset()},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{o.endTimeline()},s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n=<span class=\"code-number\">8</span>,r=<span class=\"code-number\">8</span>;<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">0</span>;i&lt;e;i++)<span class=\"code-number\">0</span>!==r&amp;&amp;(r=(n+t.readExpGolomb()+<span class=\"code-number\">256</span>)%<span class=\"code-number\">256</span>),n=<span class=\"code-number\">0</span>===r?n:r},r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t,i,n=e.byteLength,r=[],a=<span class=\"code-number\">1</span>;a&lt;n<span class=\"code-number\">-2</span>;)<span class=\"code-number\">0</span>===e[a]&amp;&amp;<span class=\"code-number\">0</span>===e[a+<span class=\"code-number\">1</span>]&amp;&amp;<span class=\"code-number\">3</span>===e[a+<span class=\"code-number\">2</span>]?(r.push(a+<span class=\"code-number\">2</span>),a+=<span class=\"code-number\">2</span>):a++;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===r.length)<span class=\"code-keyword\">return</span> e;t=n-r.length,i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(t);<span class=\"code-keyword\">var</span> s=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(a=<span class=\"code-number\">0</span>;a&lt;t;s++,a++)s===r[<span class=\"code-number\">0</span>]&amp;&amp;(s++,r.shift()),i[a]=e[s];<span class=\"code-keyword\">return</span> i},a=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n,r,a,o,u,d,l,h,c,f,p,m=<span class=\"code-number\">0</span>,g=<span class=\"code-number\">0</span>,y=<span class=\"code-number\">0</span>,_=<span class=\"code-number\">0</span>,v=<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(i=(t=<span class=\"code-keyword\">new</span> it(e)).readUnsignedByte(),r=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),et[i]&amp;&amp;(<span class=\"code-number\">3</span>===(a=t.readUnsignedExpGolomb())&amp;&amp;t.skipBits(<span class=\"code-number\">1</span>),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(<span class=\"code-number\">1</span>),t.readBoolean()))<span class=\"code-keyword\">for</span>(c=<span class=\"code-number\">3</span>!==a?<span class=\"code-number\">8</span>:<span class=\"code-number\">12</span>,p=<span class=\"code-number\">0</span>;p&lt;c;p++)t.readBoolean()&amp;&amp;s(p&lt;<span class=\"code-number\">6</span>?<span class=\"code-number\">16</span>:<span class=\"code-number\">64</span>,t);<span class=\"code-keyword\">if</span>(t.skipUnsignedExpGolomb(),<span class=\"code-number\">0</span>===(o=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-number\">1</span>===o)<span class=\"code-keyword\">for</span>(t.skipBits(<span class=\"code-number\">1</span>),t.skipExpGolomb(),t.skipExpGolomb(),u=t.readUnsignedExpGolomb(),p=<span class=\"code-number\">0</span>;p&lt;u;p++)t.skipExpGolomb();<span class=\"code-keyword\">if</span>(t.skipUnsignedExpGolomb(),t.skipBits(<span class=\"code-number\">1</span>),d=t.readUnsignedExpGolomb(),l=t.readUnsignedExpGolomb(),<span class=\"code-number\">0</span>===(h=t.readBits(<span class=\"code-number\">1</span>))&amp;&amp;t.skipBits(<span class=\"code-number\">1</span>),t.skipBits(<span class=\"code-number\">1</span>),t.readBoolean()&amp;&amp;(m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb(),_=t.readUnsignedExpGolomb()),t.readBoolean()&amp;&amp;t.readBoolean()){<span class=\"code-keyword\">switch</span>(t.readUnsignedByte()){<span class=\"code-keyword\">case</span> <span class=\"code-number\">1</span>:f=[<span class=\"code-number\">1</span>,<span class=\"code-number\">1</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">2</span>:f=[<span class=\"code-number\">12</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">3</span>:f=[<span class=\"code-number\">10</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">4</span>:f=[<span class=\"code-number\">16</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">5</span>:f=[<span class=\"code-number\">40</span>,<span class=\"code-number\">33</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">6</span>:f=[<span class=\"code-number\">24</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">7</span>:f=[<span class=\"code-number\">20</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">8</span>:f=[<span class=\"code-number\">32</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">9</span>:f=[<span class=\"code-number\">80</span>,<span class=\"code-number\">33</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">10</span>:f=[<span class=\"code-number\">18</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">11</span>:f=[<span class=\"code-number\">15</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">12</span>:f=[<span class=\"code-number\">64</span>,<span class=\"code-number\">33</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">13</span>:f=[<span class=\"code-number\">160</span>,<span class=\"code-number\">99</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">14</span>:f=[<span class=\"code-number\">4</span>,<span class=\"code-number\">3</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">15</span>:f=[<span class=\"code-number\">3</span>,<span class=\"code-number\">2</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">16</span>:f=[<span class=\"code-number\">2</span>,<span class=\"code-number\">1</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">255</span>:f=[t.readUnsignedByte()&lt;&lt;<span class=\"code-number\">8</span>|t.readUnsignedByte(),t.readUnsignedByte()&lt;&lt;<span class=\"code-number\">8</span>|t.readUnsignedByte()]}f&amp;&amp;(v=f[<span class=\"code-number\">0</span>]/f[<span class=\"code-number\">1</span>])}<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">profileIdc</span>:i,<span class=\"code-attr\">levelIdc</span>:n,<span class=\"code-attr\">profileCompatibility</span>:r,<span class=\"code-attr\">width</span>:<span class=\"code-built_in\">Math</span>.ceil((<span class=\"code-number\">16</span>*(d+<span class=\"code-number\">1</span>)<span class=\"code-number\">-2</span>*m<span class=\"code-number\">-2</span>*g)*v),<span class=\"code-attr\">height</span>:(<span class=\"code-number\">2</span>-h)*(l+<span class=\"code-number\">1</span>)*<span class=\"code-number\">16</span><span class=\"code-number\">-2</span>*y<span class=\"code-number\">-2</span>*_,<span class=\"code-attr\">sarRatio</span>:f}}}).prototype=<span class=\"code-keyword\">new</span> G;<span class=\"code-keyword\">var</span> nt,rt={<span class=\"code-attr\">H264Stream</span>:Je,<span class=\"code-attr\">NalByteStream</span>:Ze},at=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e[<span class=\"code-number\">0</span>]===<span class=\"code-string\">\"I\"</span>.charCodeAt(<span class=\"code-number\">0</span>)&amp;&amp;e[<span class=\"code-number\">1</span>]===<span class=\"code-string\">\"D\"</span>.charCodeAt(<span class=\"code-number\">0</span>)&amp;&amp;e[<span class=\"code-number\">2</span>]===<span class=\"code-string\">\"3\"</span>.charCodeAt(<span class=\"code-number\">0</span>)},st=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e[t+<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">21</span>|e[t+<span class=\"code-number\">7</span>]&lt;&lt;<span class=\"code-number\">14</span>|e[t+<span class=\"code-number\">8</span>]&lt;&lt;<span class=\"code-number\">7</span>|e[t+<span class=\"code-number\">9</span>];<span class=\"code-keyword\">return</span>(<span class=\"code-number\">16</span>&amp;e[t+<span class=\"code-number\">5</span>])&gt;&gt;<span class=\"code-number\">4</span>?i+<span class=\"code-number\">20</span>:i+<span class=\"code-number\">10</span>},ot=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=(<span class=\"code-number\">224</span>&amp;e[t+<span class=\"code-number\">5</span>])&gt;&gt;<span class=\"code-number\">5</span>,n=e[t+<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">3</span>;<span class=\"code-keyword\">return</span> <span class=\"code-number\">6144</span>&amp;e[t+<span class=\"code-number\">3</span>]|n|i};(nt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>,t=<span class=\"code-number\">0</span>;nt.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.setTimestamp=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{t=e},<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a,s,o=<span class=\"code-number\">0</span>,u=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(e.length?(s=e.length,(e=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(i.byteLength+s)).set(e.subarray(<span class=\"code-number\">0</span>,s)),e.set(i,s)):e=i;e.length-u&gt;=<span class=\"code-number\">3</span>;)<span class=\"code-keyword\">if</span>(e[u]!==<span class=\"code-string\">\"I\"</span>.charCodeAt(<span class=\"code-number\">0</span>)||e[u+<span class=\"code-number\">1</span>]!==<span class=\"code-string\">\"D\"</span>.charCodeAt(<span class=\"code-number\">0</span>)||e[u+<span class=\"code-number\">2</span>]!==<span class=\"code-string\">\"3\"</span>.charCodeAt(<span class=\"code-number\">0</span>))<span class=\"code-keyword\">if</span>(<span class=\"code-number\">255</span>!=(<span class=\"code-number\">255</span>&amp;e[u])||<span class=\"code-number\">240</span>!=(<span class=\"code-number\">240</span>&amp;e[u+<span class=\"code-number\">1</span>]))u++;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(e.length-u&lt;<span class=\"code-number\">7</span>)<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">if</span>(u+(o=ot(e,u))&gt;e.length)<span class=\"code-keyword\">break</span>;a={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>,<span class=\"code-attr\">data</span>:e.subarray(u,u+o),<span class=\"code-attr\">pts</span>:t,<span class=\"code-attr\">dts</span>:t},<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,a),u+=o}<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(e.length-u&lt;<span class=\"code-number\">10</span>)<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">if</span>(u+(o=st(e,u))&gt;e.length)<span class=\"code-keyword\">break</span>;r={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"timed-metadata\"</span>,<span class=\"code-attr\">data</span>:e.subarray(u,u+o)},<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,r),u+=o}n=e.length-u,e=n&gt;<span class=\"code-number\">0</span>?e.subarray(u):<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>)}}).prototype=<span class=\"code-keyword\">new</span> G;<span class=\"code-keyword\">var</span> ut,dt,lt,ht,ct=nt,ft=rt.H264Stream,pt=at,mt=de,gt=[<span class=\"code-string\">\"audioobjecttype\"</span>,<span class=\"code-string\">\"channelcount\"</span>,<span class=\"code-string\">\"samplerate\"</span>,<span class=\"code-string\">\"samplingfrequencyindex\"</span>,<span class=\"code-string\">\"samplesize\"</span>],yt=[<span class=\"code-string\">\"width\"</span>,<span class=\"code-string\">\"height\"</span>,<span class=\"code-string\">\"profileIdc\"</span>,<span class=\"code-string\">\"levelIdc\"</span>,<span class=\"code-string\">\"profileCompatibility\"</span>,<span class=\"code-string\">\"sarRatio\"</span>],_t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i;<span class=\"code-keyword\">if</span>(e.length!==t.length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">0</span>;i&lt;e.length;i++)<span class=\"code-keyword\">if</span>(e[i]!==t[i])<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>},vt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r,a</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">start</span>:{<span class=\"code-attr\">dts</span>:e,<span class=\"code-attr\">pts</span>:e+(i-t)},<span class=\"code-attr\">end</span>:{<span class=\"code-attr\">dts</span>:e+(n-t),<span class=\"code-attr\">pts</span>:e+(r-i)},<span class=\"code-attr\">prependedContentDuration</span>:a,<span class=\"code-attr\">baseMediaDecodeTime</span>:e}};(dt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=[],n=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">0</span>,a=<span class=\"code-number\">0</span>,s=<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>;t=t||{},dt.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{be(e,t),e&amp;&amp;gt.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{e[i]=t[i]}),i.push(t)},<span class=\"code-keyword\">this</span>.setEarliestDts=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{r=t-e.timelineStartInfo.baseMediaDecodeTime},<span class=\"code-keyword\">this</span>.setVideoBaseMediaDecodeTime=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{s=e},<span class=\"code-keyword\">this</span>.setAudioAppendStart=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{a=e},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> o,u,d,l,h;<span class=\"code-number\">0</span>!==i.length?(o=pe(i,e,r),e.baseMediaDecodeTime=ve(e,t.keepOriginalTimestamps),fe(e,o,a,s),e.samples=me(o),d=K(ge(o)),i=[],u=$(n,[e]),l=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(u.byteLength+d.byteLength),n++,l.set(u),l.set(d,u.byteLength),_e(e),h=<span class=\"code-built_in\">Math</span>.ceil(<span class=\"code-number\">1024</span>*mt/e.samplerate),o.length&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timingInfo\"</span>,{<span class=\"code-attr\">start</span>:o[<span class=\"code-number\">0</span>].dts,<span class=\"code-attr\">end</span>:o[<span class=\"code-number\">0</span>].dts+o.length*h}),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">track</span>:e,<span class=\"code-attr\">boxes</span>:l}),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>,<span class=\"code-string\">\"AudioSegmentStream\"</span>)):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>,<span class=\"code-string\">\"AudioSegmentStream\"</span>)},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{_e(e),i=[],<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)}}).prototype=<span class=\"code-keyword\">new</span> G,(ut=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r=<span class=\"code-number\">0</span>,a=[],s=[];t=t||{},ut.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">delete</span> e.minPTS,<span class=\"code-keyword\">this</span>.gopCache_=[],<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{be(e,t),<span class=\"code-string\">\"seq_parameter_set_rbsp\"</span>!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],yt.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e[t]=i[t]},<span class=\"code-keyword\">this</span>)),<span class=\"code-string\">\"pic_parameter_set_rbsp\"</span>!==t.nalUnitType||n||(n=t.data,e.pps=[t.data]),a.push(t)},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i,n,o,u,d,l,h,c,f=<span class=\"code-number\">0</span>;a.length&amp;&amp;<span class=\"code-string\">\"access_unit_delimiter_rbsp\"</span>!==a[<span class=\"code-number\">0</span>].nalUnitType;)a.shift();<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===a.length)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.resetStream_(),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>,<span class=\"code-string\">\"VideoSegmentStream\"</span>);<span class=\"code-keyword\">if</span>(i=Z(a),(o=ee(i))[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>].keyFrame||((n=<span class=\"code-keyword\">this</span>.getGopForFusion_(a[<span class=\"code-number\">0</span>],e))?(f=n.duration,o.unshift(n),o.byteLength+=n.byteLength,o.nalCount+=n.nalCount,o.pts=n.pts,o.dts=n.dts,o.duration+=n.duration):o=te(o)),s.length){<span class=\"code-keyword\">var</span> p;<span class=\"code-keyword\">if</span>(!(p=t.alignGopsAtEnd?<span class=\"code-keyword\">this</span>.alignGopsAtEnd_(o):<span class=\"code-keyword\">this</span>.alignGopsAtStart_(o)))<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.gopCache_.unshift({<span class=\"code-attr\">gop</span>:o.pop(),<span class=\"code-attr\">pps</span>:e.pps,<span class=\"code-attr\">sps</span>:e.sps}),<span class=\"code-keyword\">this</span>.gopCache_.length=<span class=\"code-built_in\">Math</span>.min(<span class=\"code-number\">6</span>,<span class=\"code-keyword\">this</span>.gopCache_.length),a=[],<span class=\"code-keyword\">this</span>.resetStream_(),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>,<span class=\"code-string\">\"VideoSegmentStream\"</span>);_e(e),o=p}be(e,o),e.samples=ie(o),d=K(ne(o)),e.baseMediaDecodeTime=ve(e,t.keepOriginalTimestamps),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"processedGopsInfo\"</span>,o.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">pts</span>:e.pts,<span class=\"code-attr\">dts</span>:e.dts,<span class=\"code-attr\">byteLength</span>:e.byteLength}})),h=o[<span class=\"code-number\">0</span>],c=o[o.length<span class=\"code-number\">-1</span>],<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"segmentTimingInfo\"</span>,vt(e.baseMediaDecodeTime,h.dts,h.pts,c.dts+c.duration,c.pts+c.duration,f)),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timingInfo\"</span>,{<span class=\"code-attr\">start</span>:o[<span class=\"code-number\">0</span>].dts,<span class=\"code-attr\">end</span>:o[o.length<span class=\"code-number\">-1</span>].dts+o[o.length<span class=\"code-number\">-1</span>].duration}),<span class=\"code-keyword\">this</span>.gopCache_.unshift({<span class=\"code-attr\">gop</span>:o.pop(),<span class=\"code-attr\">pps</span>:e.pps,<span class=\"code-attr\">sps</span>:e.sps}),<span class=\"code-keyword\">this</span>.gopCache_.length=<span class=\"code-built_in\">Math</span>.min(<span class=\"code-number\">6</span>,<span class=\"code-keyword\">this</span>.gopCache_.length),a=[],<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"baseMediaDecodeTime\"</span>,e.baseMediaDecodeTime),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timelineStartInfo\"</span>,e.timelineStartInfo),u=$(r,[e]),l=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(u.byteLength+d.byteLength),r++,l.set(u),l.set(d,u.byteLength),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">track</span>:e,<span class=\"code-attr\">boxes</span>:l}),<span class=\"code-keyword\">this</span>.resetStream_(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>,<span class=\"code-string\">\"VideoSegmentStream\"</span>)},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.resetStream_(),a=[],<span class=\"code-keyword\">this</span>.gopCache_.length=<span class=\"code-number\">0</span>,s.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)},<span class=\"code-keyword\">this</span>.resetStream_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{_e(e),i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>},<span class=\"code-keyword\">this</span>.getGopForFusion_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a,s,o=<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(s=<span class=\"code-number\">0</span>;s&lt;<span class=\"code-keyword\">this</span>.gopCache_.length;s++)r=(a=<span class=\"code-keyword\">this</span>.gopCache_[s]).gop,e.pps&amp;&amp;_t(e.pps[<span class=\"code-number\">0</span>],a.pps[<span class=\"code-number\">0</span>])&amp;&amp;e.sps&amp;&amp;_t(e.sps[<span class=\"code-number\">0</span>],a.sps[<span class=\"code-number\">0</span>])&amp;&amp;(r.dts&lt;e.timelineStartInfo.dts||(i=t.dts-r.dts-r.duration)&gt;=<span class=\"code-number\">-1e4</span>&amp;&amp;i&lt;=<span class=\"code-number\">45e3</span>&amp;&amp;(!n||o&gt;i)&amp;&amp;(n=a,o=i));<span class=\"code-keyword\">return</span> n?n.gop:<span class=\"code-literal\">null</span>},<span class=\"code-keyword\">this</span>.alignGopsAtStart_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n,r,a,o,u,d;<span class=\"code-keyword\">for</span>(a=e.byteLength,o=e.nalCount,u=e.duration,t=i=<span class=\"code-number\">0</span>;t&lt;s.length&amp;&amp;i&lt;e.length&amp;&amp;(n=s[t],r=e[i],n.pts!==r.pts);)r.pts&gt;n.pts?t++:(i++,a-=r.byteLength,o-=r.nalCount,u-=r.duration);<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>===i?e:i===e.length?<span class=\"code-literal\">null</span>:((d=e.slice(i)).byteLength=a,d.duration=u,d.nalCount=o,d.pts=d[<span class=\"code-number\">0</span>].pts,d.dts=d[<span class=\"code-number\">0</span>].dts,d)},<span class=\"code-keyword\">this</span>.alignGopsAtEnd_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n,r,a,o,u;<span class=\"code-keyword\">for</span>(t=s.length<span class=\"code-number\">-1</span>,i=e.length<span class=\"code-number\">-1</span>,a=<span class=\"code-literal\">null</span>,o=!<span class=\"code-number\">1</span>;t&gt;=<span class=\"code-number\">0</span>&amp;&amp;i&gt;=<span class=\"code-number\">0</span>;){<span class=\"code-keyword\">if</span>(n=s[t],r=e[i],n.pts===r.pts){o=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">break</span>}n.pts&gt;r.pts?t--:(t===s.length<span class=\"code-number\">-1</span>&amp;&amp;(a=i),i--)}<span class=\"code-keyword\">if</span>(!o&amp;&amp;<span class=\"code-literal\">null</span>===a)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===(u=o?i:a))<span class=\"code-keyword\">return</span> e;<span class=\"code-keyword\">var</span> d=e.slice(u),l=d.reduce(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{<span class=\"code-attr\">byteLength</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">duration</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">nalCount</span>:<span class=\"code-number\">0</span>});<span class=\"code-keyword\">return</span> d.byteLength=l.byteLength,d.duration=l.duration,d.nalCount=l.nalCount,d.pts=d[<span class=\"code-number\">0</span>].pts,d.dts=d[<span class=\"code-number\">0</span>].dts,d},<span class=\"code-keyword\">this</span>.alignGopsWith=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{s=e}}).prototype=<span class=\"code-keyword\">new</span> G,(ht=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.numberOfTracks=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.metadataStream=t,<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==(e=e||{}).remux?<span class=\"code-keyword\">this</span>.remuxTracks=!!e.remux:<span class=\"code-keyword\">this</span>.remuxTracks=!<span class=\"code-number\">0</span>,<span class=\"code-string\">\"boolean\"</span>==<span class=\"code-keyword\">typeof</span> e.keepOriginalTimestamps?<span class=\"code-keyword\">this</span>.keepOriginalTimestamps=e.keepOriginalTimestamps:<span class=\"code-keyword\">this</span>.keepOriginalTimestamps=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.pendingTracks=[],<span class=\"code-keyword\">this</span>.videoTrack=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.pendingBoxes=[],<span class=\"code-keyword\">this</span>.pendingCaptions=[],<span class=\"code-keyword\">this</span>.pendingMetadata=[],<span class=\"code-keyword\">this</span>.pendingBytes=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.emittedTracks=<span class=\"code-number\">0</span>,ht.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.text?<span class=\"code-keyword\">this</span>.pendingCaptions.push(e):e.frames?<span class=\"code-keyword\">this</span>.pendingMetadata.push(e):(<span class=\"code-keyword\">this</span>.pendingTracks.push(e.track),<span class=\"code-keyword\">this</span>.pendingBytes+=e.boxes.byteLength,<span class=\"code-string\">\"video\"</span>===e.track.type&amp;&amp;(<span class=\"code-keyword\">this</span>.videoTrack=e.track,<span class=\"code-keyword\">this</span>.pendingBoxes.push(e.boxes)),<span class=\"code-keyword\">void</span>(<span class=\"code-string\">\"audio\"</span>===e.track.type&amp;&amp;(<span class=\"code-keyword\">this</span>.audioTrack=e.track,<span class=\"code-keyword\">this</span>.pendingBoxes.unshift(e.boxes))))}}).prototype=<span class=\"code-keyword\">new</span> G,ht.prototype.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n,r,a=<span class=\"code-number\">0</span>,s={<span class=\"code-attr\">captions</span>:[],<span class=\"code-attr\">captionStreams</span>:{},<span class=\"code-attr\">metadata</span>:[],<span class=\"code-attr\">info</span>:{}},o=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.pendingTracks.length&lt;<span class=\"code-keyword\">this</span>.numberOfTracks){<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"VideoSegmentStream\"</span>!==e&amp;&amp;<span class=\"code-string\">\"AudioSegmentStream\"</span>!==e)<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.remuxTracks)<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.pendingTracks.length)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.emittedTracks++,<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.emittedTracks&gt;=<span class=\"code-keyword\">this</span>.numberOfTracks&amp;&amp;(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>),<span class=\"code-keyword\">this</span>.emittedTracks=<span class=\"code-number\">0</span>))}<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.videoTrack?(o=<span class=\"code-keyword\">this</span>.videoTrack.timelineStartInfo.pts,yt.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{s.info[e]=<span class=\"code-keyword\">this</span>.videoTrack[e]},<span class=\"code-keyword\">this</span>)):<span class=\"code-keyword\">this</span>.audioTrack&amp;&amp;(o=<span class=\"code-keyword\">this</span>.audioTrack.timelineStartInfo.pts,gt.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{s.info[e]=<span class=\"code-keyword\">this</span>.audioTrack[e]},<span class=\"code-keyword\">this</span>)),<span class=\"code-keyword\">this</span>.videoTrack||<span class=\"code-keyword\">this</span>.audioTrack){<span class=\"code-keyword\">for</span>(<span class=\"code-number\">1</span>===<span class=\"code-keyword\">this</span>.pendingTracks.length?s.type=<span class=\"code-keyword\">this</span>.pendingTracks[<span class=\"code-number\">0</span>].type:s.type=<span class=\"code-string\">\"combined\"</span>,<span class=\"code-keyword\">this</span>.emittedTracks+=<span class=\"code-keyword\">this</span>.pendingTracks.length,n=Q(<span class=\"code-keyword\">this</span>.pendingTracks),s.initSegment=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(n.byteLength),s.initSegment.set(n),s.data=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(<span class=\"code-keyword\">this</span>.pendingBytes),r=<span class=\"code-number\">0</span>;r&lt;<span class=\"code-keyword\">this</span>.pendingBoxes.length;r++)s.data.set(<span class=\"code-keyword\">this</span>.pendingBoxes[r],a),a+=<span class=\"code-keyword\">this</span>.pendingBoxes[r].byteLength;<span class=\"code-keyword\">for</span>(r=<span class=\"code-number\">0</span>;r&lt;<span class=\"code-keyword\">this</span>.pendingCaptions.length;r++)(t=<span class=\"code-keyword\">this</span>.pendingCaptions[r]).startTime=ce(t.startPts,o,<span class=\"code-keyword\">this</span>.keepOriginalTimestamps),t.endTime=ce(t.endPts,o,<span class=\"code-keyword\">this</span>.keepOriginalTimestamps),s.captionStreams[t.stream]=!<span class=\"code-number\">0</span>,s.captions.push(t);<span class=\"code-keyword\">for</span>(r=<span class=\"code-number\">0</span>;r&lt;<span class=\"code-keyword\">this</span>.pendingMetadata.length;r++)(i=<span class=\"code-keyword\">this</span>.pendingMetadata[r]).cueTime=ce(i.pts,o,<span class=\"code-keyword\">this</span>.keepOriginalTimestamps),s.metadata.push(i);<span class=\"code-keyword\">for</span>(s.metadata.dispatchType=<span class=\"code-keyword\">this</span>.metadataStream.dispatchType,<span class=\"code-keyword\">this</span>.pendingTracks.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.videoTrack=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.pendingBoxes.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.pendingCaptions.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.pendingBytes=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.pendingMetadata.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,s),r=<span class=\"code-number\">0</span>;r&lt;s.captions.length;r++)t=s.captions[r],<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"caption\"</span>,t);<span class=\"code-keyword\">for</span>(r=<span class=\"code-number\">0</span>;r&lt;s.metadata.length;r++)i=s.metadata[r],<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"id3Frame\"</span>,i)}<span class=\"code-keyword\">this</span>.emittedTracks&gt;=<span class=\"code-keyword\">this</span>.numberOfTracks&amp;&amp;(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>),<span class=\"code-keyword\">this</span>.emittedTracks=<span class=\"code-number\">0</span>)},ht.prototype.setRemux=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.remuxTracks=e},(lt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=<span class=\"code-keyword\">this</span>,r=!<span class=\"code-number\">0</span>;lt.prototype.init.call(<span class=\"code-keyword\">this</span>),e=e||{},<span class=\"code-keyword\">this</span>.baseMediaDecodeTime=e.baseMediaDecodeTime||<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.transmuxPipeline_={},<span class=\"code-keyword\">this</span>.setupAacPipeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> r={};<span class=\"code-keyword\">this</span>.transmuxPipeline_=r,r.type=<span class=\"code-string\">\"aac\"</span>,r.metadataStream=<span class=\"code-keyword\">new</span> Ke.MetadataStream,r.aacStream=<span class=\"code-keyword\">new</span> ct,r.audioTimestampRolloverStream=<span class=\"code-keyword\">new</span> Ke.TimestampRolloverStream(<span class=\"code-string\">\"audio\"</span>),r.timedMetadataTimestampRolloverStream=<span class=\"code-keyword\">new</span> Ke.TimestampRolloverStream(<span class=\"code-string\">\"timed-metadata\"</span>),r.adtsStream=<span class=\"code-keyword\">new</span> tt,r.coalesceStream=<span class=\"code-keyword\">new</span> ht(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on(<span class=\"code-string\">\"timestamp\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{r.aacStream.setTimestamp(e.timeStamp)}),r.aacStream.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">a</span>)</span>{<span class=\"code-string\">\"timed-metadata\"</span>!==a.type||r.audioSegmentStream||(i=i||{<span class=\"code-attr\">timelineStartInfo</span>:{<span class=\"code-attr\">baseMediaDecodeTime</span>:n.baseMediaDecodeTime},<span class=\"code-attr\">codec</span>:<span class=\"code-string\">\"adts\"</span>,<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=<span class=\"code-keyword\">new</span> dt(i,e),r.audioSegmentStream.on(<span class=\"code-string\">\"timingInfo\"</span>,n.trigger.bind(n,<span class=\"code-string\">\"audioTimingInfo\"</span>)),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),n.trigger(<span class=\"code-string\">\"trackinfo\"</span>,{<span class=\"code-attr\">hasAudio</span>:!!i,<span class=\"code-attr\">hasVideo</span>:!!t})}),r.coalesceStream.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"data\"</span>)),r.coalesceStream.on(<span class=\"code-string\">\"done\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"done\"</span>))},<span class=\"code-keyword\">this</span>.setupTsPipeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> r={};<span class=\"code-keyword\">this</span>.transmuxPipeline_=r,r.type=<span class=\"code-string\">\"ts\"</span>,r.metadataStream=<span class=\"code-keyword\">new</span> Ke.MetadataStream,r.packetStream=<span class=\"code-keyword\">new</span> Ke.TransportPacketStream,r.parseStream=<span class=\"code-keyword\">new</span> Ke.TransportParseStream,r.elementaryStream=<span class=\"code-keyword\">new</span> Ke.ElementaryStream,r.timestampRolloverStream=<span class=\"code-keyword\">new</span> Ke.TimestampRolloverStream,r.adtsStream=<span class=\"code-keyword\">new</span> tt,r.h264Stream=<span class=\"code-keyword\">new</span> ft,r.captionStream=<span class=\"code-keyword\">new</span> Ke.CaptionStream,r.coalesceStream=<span class=\"code-keyword\">new</span> ht(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">a</span>)</span>{<span class=\"code-keyword\">var</span> s;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"metadata\"</span>===a.type){<span class=\"code-keyword\">for</span>(s=a.tracks.length;s--;)t||<span class=\"code-string\">\"video\"</span>!==a.tracks[s].type?i||<span class=\"code-string\">\"audio\"</span>!==a.tracks[s].type||((i=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(t=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime;t&amp;&amp;!r.videoSegmentStream&amp;&amp;(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=<span class=\"code-keyword\">new</span> ut(t,e),r.videoSegmentStream.on(<span class=\"code-string\">\"timelineStartInfo\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i&amp;&amp;(i.timelineStartInfo=e,r.audioSegmentStream.setEarliestDts(e.dts))}),r.videoSegmentStream.on(<span class=\"code-string\">\"processedGopsInfo\"</span>,n.trigger.bind(n,<span class=\"code-string\">\"gopInfo\"</span>)),r.videoSegmentStream.on(<span class=\"code-string\">\"segmentTimingInfo\"</span>,n.trigger.bind(n,<span class=\"code-string\">\"videoSegmentTimingInfo\"</span>)),r.videoSegmentStream.on(<span class=\"code-string\">\"baseMediaDecodeTime\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i&amp;&amp;r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),r.videoSegmentStream.on(<span class=\"code-string\">\"timingInfo\"</span>,n.trigger.bind(n,<span class=\"code-string\">\"videoTimingInfo\"</span>)),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),i&amp;&amp;!r.audioSegmentStream&amp;&amp;(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=<span class=\"code-keyword\">new</span> dt(i,e),r.audioSegmentStream.on(<span class=\"code-string\">\"timingInfo\"</span>,n.trigger.bind(n,<span class=\"code-string\">\"audioTimingInfo\"</span>)),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),n.trigger(<span class=\"code-string\">\"trackinfo\"</span>,{<span class=\"code-attr\">hasAudio</span>:!!i,<span class=\"code-attr\">hasVideo</span>:!!t})}}),r.coalesceStream.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"data\"</span>)),r.coalesceStream.on(<span class=\"code-string\">\"id3Frame\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.dispatchType=r.metadataStream.dispatchType,n.trigger(<span class=\"code-string\">\"id3Frame\"</span>,e)}),r.coalesceStream.on(<span class=\"code-string\">\"caption\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"caption\"</span>)),r.coalesceStream.on(<span class=\"code-string\">\"done\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"done\"</span>))},<span class=\"code-keyword\">this</span>.setBaseMediaDecodeTime=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">this</span>.transmuxPipeline_;e.keepOriginalTimestamps||(<span class=\"code-keyword\">this</span>.baseMediaDecodeTime=n),i&amp;&amp;(i.timelineStartInfo.dts=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,i.timelineStartInfo.pts=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,_e(i),e.keepOriginalTimestamps||(i.timelineStartInfo.baseMediaDecodeTime=n),r.audioTimestampRolloverStream&amp;&amp;r.audioTimestampRolloverStream.discontinuity()),t&amp;&amp;(r.videoSegmentStream&amp;&amp;(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,t.timelineStartInfo.pts=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,_e(t),r.captionStream.reset(),e.keepOriginalTimestamps||(t.timelineStartInfo.baseMediaDecodeTime=n)),r.timestampRolloverStream&amp;&amp;r.timestampRolloverStream.discontinuity()},<span class=\"code-keyword\">this</span>.setAudioAppendStart=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},<span class=\"code-keyword\">this</span>.setRemux=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.transmuxPipeline_;e.remux=t,i&amp;&amp;i.coalesceStream&amp;&amp;i.coalesceStream.setRemux(t)},<span class=\"code-keyword\">this</span>.alignGopsWith=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{t&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxPipeline_.videoSegmentStream&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(r){<span class=\"code-keyword\">var</span> t=pt(e);t&amp;&amp;<span class=\"code-string\">\"aac\"</span>!==<span class=\"code-keyword\">this</span>.transmuxPipeline_.type?<span class=\"code-keyword\">this</span>.setupAacPipeline():t||<span class=\"code-string\">\"ts\"</span>===<span class=\"code-keyword\">this</span>.transmuxPipeline_.type||<span class=\"code-keyword\">this</span>.setupTsPipeline(),r=!<span class=\"code-number\">1</span>}<span class=\"code-keyword\">this</span>.transmuxPipeline_.headOfPipeline.push(e)},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{r=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.transmuxPipeline_.headOfPipeline.flush()},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.transmuxPipeline_.headOfPipeline.endTimeline()},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.transmuxPipeline_.headOfPipeline&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxPipeline_.headOfPipeline.reset()},<span class=\"code-keyword\">this</span>.resetCaptions=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.transmuxPipeline_.captionStream&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxPipeline_.captionStream.reset()}}).prototype=<span class=\"code-keyword\">new</span> G;<span class=\"code-keyword\">var</span> bt={<span class=\"code-attr\">Transmuxer</span>:lt,<span class=\"code-attr\">VideoSegmentStream</span>:ut,<span class=\"code-attr\">AudioSegmentStream</span>:dt,<span class=\"code-attr\">AUDIO_PROPERTIES</span>:gt,<span class=\"code-attr\">VIDEO_PROPERTIES</span>:yt,<span class=\"code-attr\">generateVideoSegmentTimingInfo</span>:vt},Tt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!(e <span class=\"code-keyword\">instanceof</span> t))<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">TypeError</span>(<span class=\"code-string\">\"Cannot call a class as a function\"</span>)},St=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;t.length;i++){<span class=\"code-keyword\">var</span> n=t[i];n.enumerable=n.enumerable||!<span class=\"code-number\">1</span>,n.configurable=!<span class=\"code-number\">0</span>,<span class=\"code-string\">\"value\"</span><span class=\"code-keyword\">in</span> n&amp;&amp;(n.writable=!<span class=\"code-number\">0</span>),<span class=\"code-built_in\">Object</span>.defineProperty(e,n.key,n)}}<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i,n</span>)</span>{<span class=\"code-keyword\">return</span> i&amp;&amp;e(t.prototype,i),n&amp;&amp;e(t,n),t}}(),kt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{Tt(<span class=\"code-keyword\">this</span>,e),<span class=\"code-keyword\">this</span>.options=i||{},<span class=\"code-keyword\">this</span>.self=t,<span class=\"code-keyword\">this</span>.init()}<span class=\"code-keyword\">return</span> St(e,[{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"init\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t;<span class=\"code-keyword\">this</span>.transmuxer&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxer.dispose(),<span class=\"code-keyword\">this</span>.transmuxer=<span class=\"code-keyword\">new</span> bt.Transmuxer(<span class=\"code-keyword\">this</span>.options),e=<span class=\"code-keyword\">this</span>.self,(t=<span class=\"code-keyword\">this</span>.transmuxer).on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.initSegment;t.initSegment={<span class=\"code-attr\">data</span>:i.buffer,<span class=\"code-attr\">byteOffset</span>:i.byteOffset,<span class=\"code-attr\">byteLength</span>:i.byteLength};<span class=\"code-keyword\">var</span> n=t.data;t.data=n.buffer,e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"data\"</span>,<span class=\"code-attr\">segment</span>:t,<span class=\"code-attr\">byteOffset</span>:n.byteOffset,<span class=\"code-attr\">byteLength</span>:n.byteLength},[t.data])}),t.captionStream&amp;&amp;t.captionStream.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"caption\"</span>,<span class=\"code-attr\">data</span>:t})}),t.on(<span class=\"code-string\">\"done\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"done\"</span>})}),t.on(<span class=\"code-string\">\"gopInfo\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"gopInfo\"</span>,<span class=\"code-attr\">gopInfo</span>:t})}),t.on(<span class=\"code-string\">\"videoSegmentTimingInfo\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"videoSegmentTimingInfo\"</span>,<span class=\"code-attr\">videoSegmentTimingInfo</span>:t})})}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"push\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.data,e.byteOffset,e.byteLength);<span class=\"code-keyword\">this</span>.transmuxer.push(t)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"reset\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.init()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"setTimestampOffset\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.timestampOffset||<span class=\"code-number\">0</span>;<span class=\"code-keyword\">this</span>.transmuxer.setBaseMediaDecodeTime(<span class=\"code-built_in\">Math</span>.round(<span class=\"code-number\">9e4</span>*t))}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"setAudioAppendStart\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.transmuxer.setAudioAppendStart(<span class=\"code-built_in\">Math</span>.ceil(<span class=\"code-number\">9e4</span>*e.appendStart))}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"flush\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.transmuxer.flush()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"resetCaptions\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.transmuxer.resetCaptions()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"alignGopsWith\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),e}();<span class=\"code-keyword\">new</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.onmessage=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-string\">\"init\"</span>===t.data.action&amp;&amp;t.data.options?<span class=\"code-keyword\">this</span>.messageHandlers=<span class=\"code-keyword\">new</span> kt(e,t.data.options):(<span class=\"code-keyword\">this</span>.messageHandlers||(<span class=\"code-keyword\">this</span>.messageHandlers=<span class=\"code-keyword\">new</span> kt(e)),t.data&amp;&amp;t.data.action&amp;&amp;<span class=\"code-string\">\"init\"</span>!==t.data.action&amp;&amp;<span class=\"code-keyword\">this</span>.messageHandlers[t.data.action]&amp;&amp;<span class=\"code-keyword\">this</span>.messageHandlers[t.data.action](t.data))}}(i)}()}),qe={<span class=\"code-attr\">videoCodec</span>:<span class=\"code-string\">\"avc1\"</span>,<span class=\"code-attr\">videoObjectTypeIndicator</span>:<span class=\"code-string\">\".4d400d\"</span>,<span class=\"code-attr\">audioProfile</span>:<span class=\"code-string\">\"2\"</span>},Fe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.replace(<span class=\"code-regexp\">/avc1\\.(\\d+)\\.(\\d+)/i</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"avc1.\"</span>+(<span class=\"code-string\">\"00\"</span>+<span class=\"code-built_in\">Number</span>(t).toString(<span class=\"code-number\">16</span>)).slice(<span class=\"code-number\">-2</span>)+<span class=\"code-string\">\"00\"</span>+(<span class=\"code-string\">\"00\"</span>+<span class=\"code-built_in\">Number</span>(i).toString(<span class=\"code-number\">16</span>)).slice(<span class=\"code-number\">-2</span>)})})},He=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t=<span class=\"code-built_in\">arguments</span>.length&gt;<span class=\"code-number\">0</span>&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">0</span>]?<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">0</span>]:<span class=\"code-string\">\"\"</span>,i={<span class=\"code-attr\">codecCount</span>:<span class=\"code-number\">0</span>};<span class=\"code-keyword\">return</span> i.codecCount=t.split(<span class=\"code-string\">\",\"</span>).length,i.codecCount=i.codecCount||<span class=\"code-number\">2</span>,(e=<span class=\"code-regexp\">/(^|\\s|,)+(avc[13])([^ ,]*)/i</span>.exec(t))&amp;&amp;(i.videoCodec=e[<span class=\"code-number\">2</span>],i.videoObjectTypeIndicator=e[<span class=\"code-number\">3</span>]),i.audioProfile=<span class=\"code-regexp\">/(^|\\s|,)+mp4a.[0-9A-Fa-f]+\\.([0-9A-Fa-f]+)/i</span>.exec(t),i.audioProfile=i.audioProfile&amp;&amp;i.audioProfile[<span class=\"code-number\">2</span>],i},Ge=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> e+<span class=\"code-string\">\"/\"</span>+t+<span class=\"code-string\">'; codecs=\"'</span>+i.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!!e}).join(<span class=\"code-string\">\", \"</span>)+<span class=\"code-string\">'\"'</span>},je=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.segments&amp;&amp;e.segments.length&amp;&amp;e.segments[<span class=\"code-number\">0</span>].map?<span class=\"code-string\">\"mp4\"</span>:<span class=\"code-string\">\"mp2t\"</span>}(i),r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.attributes||{};<span class=\"code-keyword\">return</span> t.CODECS?He(t.CODECS):qe}(i),a=i.attributes||{},s=!<span class=\"code-number\">0</span>,o=!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(!i)<span class=\"code-keyword\">return</span>[];<span class=\"code-keyword\">if</span>(e.mediaGroups.AUDIO&amp;&amp;a.AUDIO){<span class=\"code-keyword\">var</span> u=e.mediaGroups.AUDIO[a.AUDIO];<span class=\"code-keyword\">if</span>(u)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> d <span class=\"code-keyword\">in</span> o=!<span class=\"code-number\">0</span>,s=!<span class=\"code-number\">1</span>,u)<span class=\"code-keyword\">if</span>(!u[d].uri&amp;&amp;!u[d].playlists){s=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">break</span>}}o&amp;&amp;!r.audioProfile&amp;&amp;(s||(r.audioProfile=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!e.mediaGroups.AUDIO||!t)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i=e.mediaGroups.AUDIO[t];<span class=\"code-keyword\">if</span>(!i)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> i){<span class=\"code-keyword\">var</span> r=i[n];<span class=\"code-keyword\">if</span>(r.default&amp;&amp;r.playlists)<span class=\"code-keyword\">return</span> He(r.playlists[<span class=\"code-number\">0</span>].attributes.CODECS).audioProfile}<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}(e,a.AUDIO)),r.audioProfile||(t.log.warn(<span class=\"code-string\">\"Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)\"</span>),r.audioProfile=qe.audioProfile));<span class=\"code-keyword\">var</span> l={};r.videoCodec&amp;&amp;(l.video=<span class=\"code-string\">\"\"</span>+r.videoCodec+r.videoObjectTypeIndicator),r.audioProfile&amp;&amp;(l.audio=<span class=\"code-string\">\"mp4a.40.\"</span>+r.audioProfile);<span class=\"code-keyword\">var</span> h=Ge(<span class=\"code-string\">\"audio\"</span>,n,[l.audio]),c=Ge(<span class=\"code-string\">\"video\"</span>,n,[l.video]),f=Ge(<span class=\"code-string\">\"video\"</span>,n,[l.video,l.audio]);<span class=\"code-keyword\">return</span> o?!s&amp;&amp;l.video?[c,h]:s||l.video?[f,h]:[h,h]:l.video?[f]:[h]},Ve=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">parameters</span>:{}},i=e.trim().split(<span class=\"code-string\">\";\"</span>);<span class=\"code-keyword\">return</span> t.type=i.shift().trim(),i.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=e.trim().split(<span class=\"code-string\">\"=\"</span>);<span class=\"code-keyword\">if</span>(i.length&gt;<span class=\"code-number\">1</span>){<span class=\"code-keyword\">var</span> n=i[<span class=\"code-number\">0</span>].replace(<span class=\"code-regexp\">/\"/g</span>,<span class=\"code-string\">\"\"</span>).trim(),r=i[<span class=\"code-number\">1</span>].replace(<span class=\"code-regexp\">/\"/g</span>,<span class=\"code-string\">\"\"</span>).trim();t.parameters[n]=r}}),t},We=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-regexp\">/mp4a\\.\\d+.\\d+/i</span>.test(e)},ze=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-regexp\">/avc1\\.[\\da-f]+/i</span>.test(e)},Xe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i,n</span>)</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-literal\">null</span>,a=<span class=\"code-literal\">null</span>,s=<span class=\"code-number\">0</span>,o=[],u=[];<span class=\"code-keyword\">if</span>(!e&amp;&amp;!i)<span class=\"code-keyword\">return</span> t.createTimeRange();<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">return</span> i.buffered;<span class=\"code-keyword\">if</span>(!i)<span class=\"code-keyword\">return</span> e.buffered;<span class=\"code-keyword\">if</span>(n)<span class=\"code-keyword\">return</span> e.buffered;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===e.buffered.length&amp;&amp;<span class=\"code-number\">0</span>===i.buffered.length)<span class=\"code-keyword\">return</span> t.createTimeRange();<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> d=e.buffered,l=i.buffered,h=d.length;h--;)o.push({<span class=\"code-attr\">time</span>:d.start(h),<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"start\"</span>}),o.push({<span class=\"code-attr\">time</span>:d.end(h),<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"end\"</span>});<span class=\"code-keyword\">for</span>(h=l.length;h--;)o.push({<span class=\"code-attr\">time</span>:l.start(h),<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"start\"</span>}),o.push({<span class=\"code-attr\">time</span>:l.end(h),<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"end\"</span>});<span class=\"code-keyword\">for</span>(o.sort(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.time-t.time}),h=<span class=\"code-number\">0</span>;h&lt;o.length;h++)<span class=\"code-string\">\"start\"</span>===o[h].type?<span class=\"code-number\">2</span>===++s&amp;&amp;(r=o[h].time):<span class=\"code-string\">\"end\"</span>===o[h].type&amp;&amp;<span class=\"code-number\">1</span>===--s&amp;&amp;(a=o[h].time),<span class=\"code-literal\">null</span>!==r&amp;&amp;<span class=\"code-literal\">null</span>!==a&amp;&amp;(u.push([r,a]),r=<span class=\"code-literal\">null</span>,a=<span class=\"code-literal\">null</span>);<span class=\"code-keyword\">return</span> t.createTimeRanges(u)},Ye=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">i</span>(<span class=\"code-params\">e,n</span>)</span>{_(<span class=\"code-keyword\">this</span>,i);<span class=\"code-keyword\">var</span> r=T(<span class=\"code-keyword\">this</span>,(i.__proto__||<span class=\"code-built_in\">Object</span>.getPrototypeOf(i)).call(<span class=\"code-keyword\">this</span>,t.EventTarget));r.timestampOffset_=<span class=\"code-number\">0</span>,r.pendingBuffers_=[],r.bufferUpdating_=!<span class=\"code-number\">1</span>,r.mediaSource_=e,r.codecs_=n,r.audioCodec_=<span class=\"code-literal\">null</span>,r.videoCodec_=<span class=\"code-literal\">null</span>,r.audioDisabled_=!<span class=\"code-number\">1</span>,r.appendAudioInitSegment_=!<span class=\"code-number\">0</span>,r.gopBuffer_=[],r.timeMapping_=<span class=\"code-number\">0</span>,r.safeAppend_=t.browser.IE_VERSION&gt;=<span class=\"code-number\">11</span>;<span class=\"code-keyword\">var</span> a={<span class=\"code-attr\">remux</span>:!<span class=\"code-number\">1</span>,<span class=\"code-attr\">alignGopsAtEnd</span>:r.safeAppend_};<span class=\"code-keyword\">return</span> r.codecs_.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{We(e)?r.audioCodec_=e:ze(e)&amp;&amp;(r.videoCodec_=e)}),r.transmuxer_=<span class=\"code-keyword\">new</span> Ne,r.transmuxer_.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"init\"</span>,<span class=\"code-attr\">options</span>:a}),r.transmuxer_.onmessage=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"data\"</span>===e.data.action?r.data_(e):<span class=\"code-string\">\"done\"</span>===e.data.action?r.done_(e):<span class=\"code-string\">\"gopInfo\"</span>===e.data.action?r.appendGopInfo_(e):<span class=\"code-string\">\"videoSegmentTimingInfo\"</span>===e.data.action?r.videoSegmentTimingInfo_(e.data.videoSegmentTimingInfo):<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>},<span class=\"code-built_in\">Object</span>.defineProperty(r,<span class=\"code-string\">\"timestampOffset\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.timestampOffset_},<span class=\"code-attr\">set</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> e&amp;&amp;e&gt;=<span class=\"code-number\">0</span>&amp;&amp;(<span class=\"code-keyword\">this</span>.timestampOffset_=e,<span class=\"code-keyword\">this</span>.appendAudioInitSegment_=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.gopBuffer_.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.timeMapping_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.transmuxer_.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"setTimestampOffset\"</span>,<span class=\"code-attr\">timestampOffset</span>:e}))}}),<span class=\"code-built_in\">Object</span>.defineProperty(r,<span class=\"code-string\">\"appendWindowStart\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span>(<span class=\"code-keyword\">this</span>.videoBuffer_||<span class=\"code-keyword\">this</span>.audioBuffer_).appendWindowStart},<span class=\"code-attr\">set</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.videoBuffer_&amp;&amp;(<span class=\"code-keyword\">this</span>.videoBuffer_.appendWindowStart=e),<span class=\"code-keyword\">this</span>.audioBuffer_&amp;&amp;(<span class=\"code-keyword\">this</span>.audioBuffer_.appendWindowStart=e)}}),<span class=\"code-built_in\">Object</span>.defineProperty(r,<span class=\"code-string\">\"updating\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span>!!(<span class=\"code-keyword\">this</span>.bufferUpdating_||!<span class=\"code-keyword\">this</span>.audioDisabled_&amp;&amp;<span class=\"code-keyword\">this</span>.audioBuffer_&amp;&amp;<span class=\"code-keyword\">this</span>.audioBuffer_.updating||<span class=\"code-keyword\">this</span>.videoBuffer_&amp;&amp;<span class=\"code-keyword\">this</span>.videoBuffer_.updating)}}),<span class=\"code-built_in\">Object</span>.defineProperty(r,<span class=\"code-string\">\"buffered\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> Xe(<span class=\"code-keyword\">this</span>.videoBuffer_,<span class=\"code-keyword\">this</span>.audioBuffer_,<span class=\"code-keyword\">this</span>.audioDisabled_)}}),r}<span class=\"code-keyword\">return</span> b(i,e),v(i,[{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"data_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.data.segment;t.data=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=t.player_;<span class=\"code-keyword\">if</span>(i.captions&amp;&amp;i.captions.length)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r <span class=\"code-keyword\">in</span> e.inbandTextTracks_||(e.inbandTextTracks_={}),i.captionStreams)<span class=\"code-keyword\">if</span>(!e.inbandTextTracks_[r]){n.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-608\"</span>});<span class=\"code-keyword\">var</span> a=n.textTracks().getTrackById(r);e.inbandTextTracks_[r]=a||n.addRemoteTextTrack({<span class=\"code-attr\">kind</span>:<span class=\"code-string\">\"captions\"</span>,<span class=\"code-attr\">id</span>:r,<span class=\"code-attr\">label</span>:r},!<span class=\"code-number\">1</span>).track}i.metadata&amp;&amp;i.metadata.length&amp;&amp;!e.metadataTrack_&amp;&amp;(e.metadataTrack_=n.addRemoteTextTrack({<span class=\"code-attr\">kind</span>:<span class=\"code-string\">\"metadata\"</span>,<span class=\"code-attr\">label</span>:<span class=\"code-string\">\"Timed Metadata\"</span>},!<span class=\"code-number\">1</span>).track,e.metadataTrack_.inBandMetadataTrackDispatchType=i.metadata.dispatchType)}(<span class=\"code-keyword\">this</span>,<span class=\"code-keyword\">this</span>.mediaSource_,t),<span class=\"code-keyword\">this</span>.pendingBuffers_.push(t)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"done_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-string\">\"closed\"</span>!==<span class=\"code-keyword\">this</span>.mediaSource_.readyState?<span class=\"code-keyword\">this</span>.processPendingSegments_():<span class=\"code-keyword\">this</span>.pendingBuffers_.length=<span class=\"code-number\">0</span>}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"videoSegmentTimingInfo_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t={<span class=\"code-attr\">start</span>:{<span class=\"code-attr\">decode</span>:e.start.dts/<span class=\"code-number\">9e4</span>,<span class=\"code-attr\">presentation</span>:e.start.pts/<span class=\"code-number\">9e4</span>},<span class=\"code-attr\">end</span>:{<span class=\"code-attr\">decode</span>:e.end.dts/<span class=\"code-number\">9e4</span>,<span class=\"code-attr\">presentation</span>:e.end.pts/<span class=\"code-number\">9e4</span>},<span class=\"code-attr\">baseMediaDecodeTime</span>:e.baseMediaDecodeTime/<span class=\"code-number\">9e4</span>};e.prependedContentDuration&amp;&amp;(t.prependedContentDuration=e.prependedContentDuration/<span class=\"code-number\">9e4</span>),<span class=\"code-keyword\">this</span>.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"videoSegmentTimingInfo\"</span>,<span class=\"code-attr\">videoSegmentTimingInfo</span>:t})}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"createRealSourceBuffers_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>,t=[<span class=\"code-string\">\"audio\"</span>,<span class=\"code-string\">\"video\"</span>];t.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">if</span>(e[i+<span class=\"code-string\">\"Codec_\"</span>]&amp;&amp;!e[i+<span class=\"code-string\">\"Buffer_\"</span>]){<span class=\"code-keyword\">var</span> n=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(e.mediaSource_[i+<span class=\"code-string\">\"Buffer_\"</span>])(n=e.mediaSource_[i+<span class=\"code-string\">\"Buffer_\"</span>]).updating=!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">var</span> r=i+<span class=\"code-string\">'/mp4;codecs=\"'</span>+e[i+<span class=\"code-string\">\"Codec_\"</span>]+<span class=\"code-string\">'\"'</span>;n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.addSourceBuffer(t),n=<span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>);n.updating=!<span class=\"code-number\">1</span>,n.realBuffer_=i;<span class=\"code-keyword\">var</span> r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> i[e]?n[e]=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i[e].apply(i,<span class=\"code-built_in\">arguments</span>)}:<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n[e]&amp;&amp;<span class=\"code-built_in\">Object</span>.defineProperty(n,e,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i[e]},<span class=\"code-attr\">set</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span> i[e]=t}})};<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a <span class=\"code-keyword\">in</span> i)r(a);<span class=\"code-keyword\">return</span> n}(e.mediaSource_.nativeMediaSource_,r),e.mediaSource_[i+<span class=\"code-string\">\"Buffer_\"</span>]=n}e[i+<span class=\"code-string\">\"Buffer_\"</span>]=n,[<span class=\"code-string\">\"update\"</span>,<span class=\"code-string\">\"updatestart\"</span>,<span class=\"code-string\">\"updateend\"</span>].forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">r</span>)</span>{n.addEventListener(r,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"audio\"</span>!==i||!e.audioDisabled_)<span class=\"code-keyword\">return</span><span class=\"code-string\">\"updateend\"</span>===r&amp;&amp;(e[i+<span class=\"code-string\">\"Buffer_\"</span>].updating=!<span class=\"code-number\">1</span>),t.every(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span>!(<span class=\"code-string\">\"audio\"</span>!==t||!e.audioDisabled_)||(i===t||!e[t+<span class=\"code-string\">\"Buffer_\"</span>]||!e[t+<span class=\"code-string\">\"Buffer_\"</span>].updating)})?e.trigger(r):<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>})})}})}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"appendBuffer\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.bufferUpdating_=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.audioBuffer_&amp;&amp;<span class=\"code-keyword\">this</span>.audioBuffer_.buffered.length){<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.audioBuffer_.buffered;<span class=\"code-keyword\">this</span>.transmuxer_.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"setAudioAppendStart\"</span>,<span class=\"code-attr\">appendStart</span>:t.end(t.length<span class=\"code-number\">-1</span>)})}<span class=\"code-keyword\">this</span>.videoBuffer_&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxer_.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"alignGopsWith\"</span>,<span class=\"code-attr\">gopsToAlignWith</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t||<span class=\"code-literal\">null</span>===t||!e.length)<span class=\"code-keyword\">return</span>[];<span class=\"code-keyword\">var</span> n=<span class=\"code-built_in\">Math</span>.ceil(<span class=\"code-number\">9e4</span>*(t-i+<span class=\"code-number\">3</span>)),r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(r=<span class=\"code-number\">0</span>;r&lt;e.length&amp;&amp;!(e[r].pts&gt;n);r++);<span class=\"code-keyword\">return</span> e.slice(r)}(<span class=\"code-keyword\">this</span>.gopBuffer_,<span class=\"code-keyword\">this</span>.mediaSource_.player_?<span class=\"code-keyword\">this</span>.mediaSource_.player_.currentTime():<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.timeMapping_)}),<span class=\"code-keyword\">this</span>.transmuxer_.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"push\"</span>,<span class=\"code-attr\">data</span>:e.buffer,<span class=\"code-attr\">byteOffset</span>:e.byteOffset,<span class=\"code-attr\">byteLength</span>:e.byteLength},[e.buffer]),<span class=\"code-keyword\">this</span>.transmuxer_.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"flush\"</span>})}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"appendGopInfo_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.gopBuffer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(!t.length)<span class=\"code-keyword\">return</span> e;<span class=\"code-keyword\">if</span>(i)<span class=\"code-keyword\">return</span> t.slice();<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=t[<span class=\"code-number\">0</span>].pts,r=<span class=\"code-number\">0</span>;r&lt;e.length&amp;&amp;!(e[r].pts&gt;=n);r++);<span class=\"code-keyword\">return</span> e.slice(<span class=\"code-number\">0</span>,r).concat(t)}(<span class=\"code-keyword\">this</span>.gopBuffer_,e.data.gopInfo,<span class=\"code-keyword\">this</span>.safeAppend_)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"remove\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.videoBuffer_&amp;&amp;(<span class=\"code-keyword\">this</span>.videoBuffer_.updating=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.videoBuffer_.remove(e,t),<span class=\"code-keyword\">this</span>.gopBuffer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-built_in\">Math</span>.ceil(<span class=\"code-number\">9e4</span>*(t-n)),a=<span class=\"code-built_in\">Math</span>.ceil(<span class=\"code-number\">9e4</span>*(i-n)),s=e.slice(),o=e.length;o--&amp;&amp;!(e[o].pts&lt;=a););<span class=\"code-keyword\">if</span>(<span class=\"code-number\">-1</span>===o)<span class=\"code-keyword\">return</span> s;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> u=o+<span class=\"code-number\">1</span>;u--&amp;&amp;!(e[u].pts&lt;=r););<span class=\"code-keyword\">return</span> u=<span class=\"code-built_in\">Math</span>.max(u,<span class=\"code-number\">0</span>),s.splice(u,o-u+<span class=\"code-number\">1</span>),s}(<span class=\"code-keyword\">this</span>.gopBuffer_,e,t,<span class=\"code-keyword\">this</span>.timeMapping_)),!<span class=\"code-keyword\">this</span>.audioDisabled_&amp;&amp;<span class=\"code-keyword\">this</span>.audioBuffer_&amp;&amp;(<span class=\"code-keyword\">this</span>.audioBuffer_.updating=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.audioBuffer_.remove(e,t)),we(e,t,<span class=\"code-keyword\">this</span>.metadataTrack_),<span class=\"code-keyword\">this</span>.inbandTextTracks_)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i <span class=\"code-keyword\">in</span> <span class=\"code-keyword\">this</span>.inbandTextTracks_)we(e,t,<span class=\"code-keyword\">this</span>.inbandTextTracks_[i])}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"processPendingSegments_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e={<span class=\"code-attr\">video</span>:{<span class=\"code-attr\">segments</span>:[],<span class=\"code-attr\">bytes</span>:<span class=\"code-number\">0</span>},<span class=\"code-attr\">audio</span>:{<span class=\"code-attr\">segments</span>:[],<span class=\"code-attr\">bytes</span>:<span class=\"code-number\">0</span>},<span class=\"code-attr\">captions</span>:[],<span class=\"code-attr\">metadata</span>:[]};<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.pendingBuffers_.length)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"updateend\"</span>),<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.bufferUpdating_=!<span class=\"code-number\">1</span>);e=<span class=\"code-keyword\">this</span>.pendingBuffers_.reduce(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.type,n=t.data,r=t.initSegment;<span class=\"code-keyword\">return</span> e[i].segments.push(n),e[i].bytes+=n.byteLength,e[i].initSegment=r,t.captions&amp;&amp;(e.captions=e.captions.concat(t.captions)),t.info&amp;&amp;(e[i].info=t.info),t.metadata&amp;&amp;(e.metadata=e.metadata.concat(t.metadata)),e},e),<span class=\"code-keyword\">this</span>.videoBuffer_||<span class=\"code-keyword\">this</span>.audioBuffer_||(<span class=\"code-number\">0</span>===e.video.bytes&amp;&amp;(<span class=\"code-keyword\">this</span>.videoCodec_=<span class=\"code-literal\">null</span>),<span class=\"code-number\">0</span>===e.audio.bytes&amp;&amp;(<span class=\"code-keyword\">this</span>.audioCodec_=<span class=\"code-literal\">null</span>),<span class=\"code-keyword\">this</span>.createRealSourceBuffers_()),e.audio.info&amp;&amp;<span class=\"code-keyword\">this</span>.mediaSource_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audioinfo\"</span>,<span class=\"code-attr\">info</span>:e.audio.info}),e.video.info&amp;&amp;<span class=\"code-keyword\">this</span>.mediaSource_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"videoinfo\"</span>,<span class=\"code-attr\">info</span>:e.video.info}),<span class=\"code-keyword\">this</span>.appendAudioInitSegment_&amp;&amp;(!<span class=\"code-keyword\">this</span>.audioDisabled_&amp;&amp;<span class=\"code-keyword\">this</span>.audioBuffer_&amp;&amp;(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),<span class=\"code-keyword\">this</span>.appendAudioInitSegment_=!<span class=\"code-number\">1</span>);<span class=\"code-keyword\">var</span> t=!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">this</span>.videoBuffer_&amp;&amp;e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,<span class=\"code-keyword\">this</span>.concatAndAppendSegments_(e.video,<span class=\"code-keyword\">this</span>.videoBuffer_)):!<span class=\"code-keyword\">this</span>.videoBuffer_||!<span class=\"code-keyword\">this</span>.audioDisabled_&amp;&amp;<span class=\"code-keyword\">this</span>.audioBuffer_||(t=!<span class=\"code-number\">0</span>),Ee(<span class=\"code-keyword\">this</span>,e.captions,e.metadata),!<span class=\"code-keyword\">this</span>.audioDisabled_&amp;&amp;<span class=\"code-keyword\">this</span>.audioBuffer_&amp;&amp;<span class=\"code-keyword\">this</span>.concatAndAppendSegments_(e.audio,<span class=\"code-keyword\">this</span>.audioBuffer_),<span class=\"code-keyword\">this</span>.pendingBuffers_.length=<span class=\"code-number\">0</span>,t&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"updateend\"</span>),<span class=\"code-keyword\">this</span>.bufferUpdating_=!<span class=\"code-number\">1</span>}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"concatAndAppendSegments_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(e.bytes){n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.bytes),e.segments.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{n.set(e,i),i+=e.byteLength});<span class=\"code-keyword\">try</span>{t.updating=!<span class=\"code-number\">0</span>,t.appendBuffer(n)}<span class=\"code-keyword\">catch</span>(e){<span class=\"code-keyword\">this</span>.mediaSource_.player_&amp;&amp;<span class=\"code-keyword\">this</span>.mediaSource_.player_.error({<span class=\"code-attr\">code</span>:<span class=\"code-number\">-3</span>,<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"APPEND_BUFFER_ERR\"</span>,<span class=\"code-attr\">message</span>:e.message,<span class=\"code-attr\">originalError</span>:e})}}}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"abort\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.videoBuffer_&amp;&amp;<span class=\"code-keyword\">this</span>.videoBuffer_.abort(),!<span class=\"code-keyword\">this</span>.audioDisabled_&amp;&amp;<span class=\"code-keyword\">this</span>.audioBuffer_&amp;&amp;<span class=\"code-keyword\">this</span>.audioBuffer_.abort(),<span class=\"code-keyword\">this</span>.transmuxer_&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxer_.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"reset\"</span>}),<span class=\"code-keyword\">this</span>.pendingBuffers_.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.bufferUpdating_=!<span class=\"code-number\">1</span>}}]),i}(t.EventTarget),Ke=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">i</span>(<span class=\"code-params\"></span>)</span>{_(<span class=\"code-keyword\">this</span>,i);<span class=\"code-keyword\">var</span> e=T(<span class=\"code-keyword\">this</span>,(i.__proto__||<span class=\"code-built_in\">Object</span>.getPrototypeOf(i)).call(<span class=\"code-keyword\">this</span>)),n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(n <span class=\"code-keyword\">in</span> e.nativeMediaSource_=<span class=\"code-keyword\">new</span> u.MediaSource,e.nativeMediaSource_)n <span class=\"code-keyword\">in</span> i.prototype||<span class=\"code-string\">\"function\"</span>!=<span class=\"code-keyword\">typeof</span> e.nativeMediaSource_[n]||(e[n]=e.nativeMediaSource_[n].bind(e.nativeMediaSource_));<span class=\"code-keyword\">return</span> e.duration_=<span class=\"code-literal\">NaN</span>,<span class=\"code-built_in\">Object</span>.defineProperty(e,<span class=\"code-string\">\"duration\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.duration_===<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>?<span class=\"code-keyword\">this</span>.duration_:<span class=\"code-keyword\">this</span>.nativeMediaSource_.duration},<span class=\"code-attr\">set</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.duration_=e,e===<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>||(<span class=\"code-keyword\">this</span>.nativeMediaSource_.duration=e)}}),<span class=\"code-built_in\">Object</span>.defineProperty(e,<span class=\"code-string\">\"seekable\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.duration_===<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>?t.createTimeRanges([[<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.nativeMediaSource_.duration]]):<span class=\"code-keyword\">this</span>.nativeMediaSource_.seekable}}),<span class=\"code-built_in\">Object</span>.defineProperty(e,<span class=\"code-string\">\"readyState\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.nativeMediaSource_.readyState}}),<span class=\"code-built_in\">Object</span>.defineProperty(e,<span class=\"code-string\">\"activeSourceBuffers\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.activeSourceBuffers_}}),e.sourceBuffers=[],e.activeSourceBuffers_=[],e.updateActiveSourceBuffers_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(e.activeSourceBuffers_.length=<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>===e.sourceBuffers.length){<span class=\"code-keyword\">var</span> t=e.sourceBuffers[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">return</span> t.appendAudioInitSegment_=!<span class=\"code-number\">0</span>,t.audioDisabled_=!t.audioCodec_,<span class=\"code-keyword\">void</span> e.activeSourceBuffers_.push(t)}<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=!<span class=\"code-number\">1</span>,n=!<span class=\"code-number\">0</span>,r=<span class=\"code-number\">0</span>;r&lt;e.player_.audioTracks().length;r++){<span class=\"code-keyword\">var</span> a=e.player_.audioTracks()[r];<span class=\"code-keyword\">if</span>(a.enabled&amp;&amp;<span class=\"code-string\">\"main\"</span>!==a.kind){i=!<span class=\"code-number\">0</span>,n=!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">break</span>}}e.sourceBuffers.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,r</span>)</span>{<span class=\"code-keyword\">if</span>(t.appendAudioInitSegment_=!<span class=\"code-number\">0</span>,t.videoCodec_&amp;&amp;t.audioCodec_)t.audioDisabled_=i;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t.videoCodec_&amp;&amp;!t.audioCodec_)t.audioDisabled_=!<span class=\"code-number\">0</span>,n=!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(!t.videoCodec_&amp;&amp;t.audioCodec_&amp;&amp;(t.audioDisabled_=r?n:!n,t.audioDisabled_))<span class=\"code-keyword\">return</span>;e.activeSourceBuffers_.push(t)})},e.onPlayerMediachange_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.sourceBuffers.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.appendAudioInitSegment_=!<span class=\"code-number\">0</span>})},e.onHlsReset_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.sourceBuffers.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.transmuxer_&amp;&amp;e.transmuxer_.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"resetCaptions\"</span>})})},e.onHlsSegmentTimeMapping_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.sourceBuffers.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.timeMapping_=t.mapping})},[<span class=\"code-string\">\"sourceopen\"</span>,<span class=\"code-string\">\"sourceclose\"</span>,<span class=\"code-string\">\"sourceended\"</span>].forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.nativeMediaSource_.addEventListener(e,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>))},e),e.on(<span class=\"code-string\">\"sourceopen\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n=s.querySelector(<span class=\"code-string\">'[src=\"'</span>+e.url_+<span class=\"code-string\">'\"]'</span>);n&amp;&amp;(e.player_=t(n.parentNode),e.player_&amp;&amp;(e.player_.tech_.on(<span class=\"code-string\">\"hls-reset\"</span>,e.onHlsReset_),e.player_.tech_.on(<span class=\"code-string\">\"hls-segment-time-mapping\"</span>,e.onHlsSegmentTimeMapping_),e.player_.audioTracks&amp;&amp;e.player_.audioTracks()&amp;&amp;(e.player_.audioTracks().on(<span class=\"code-string\">\"change\"</span>,e.updateActiveSourceBuffers_),e.player_.audioTracks().on(<span class=\"code-string\">\"addtrack\"</span>,e.updateActiveSourceBuffers_),e.player_.audioTracks().on(<span class=\"code-string\">\"removetrack\"</span>,e.updateActiveSourceBuffers_)),e.player_.on(<span class=\"code-string\">\"mediachange\"</span>,e.onPlayerMediachange_)))}),e.on(<span class=\"code-string\">\"sourceended\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=Le(e.duration),n=<span class=\"code-number\">0</span>;n&lt;e.sourceBuffers.length;n++){<span class=\"code-keyword\">var</span> r=e.sourceBuffers[n],a=r.metadataTrack_&amp;&amp;r.metadataTrack_.cues;a&amp;&amp;a.length&amp;&amp;(a[a.length<span class=\"code-number\">-1</span>].endTime=i)}}),e.on(<span class=\"code-string\">\"sourceclose\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.sourceBuffers.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.transmuxer_&amp;&amp;e.transmuxer_.terminate()}),<span class=\"code-keyword\">this</span>.sourceBuffers.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.player_&amp;&amp;(<span class=\"code-keyword\">this</span>.player_.audioTracks&amp;&amp;<span class=\"code-keyword\">this</span>.player_.audioTracks()&amp;&amp;(<span class=\"code-keyword\">this</span>.player_.audioTracks().off(<span class=\"code-string\">\"change\"</span>,<span class=\"code-keyword\">this</span>.updateActiveSourceBuffers_),<span class=\"code-keyword\">this</span>.player_.audioTracks().off(<span class=\"code-string\">\"addtrack\"</span>,<span class=\"code-keyword\">this</span>.updateActiveSourceBuffers_),<span class=\"code-keyword\">this</span>.player_.audioTracks().off(<span class=\"code-string\">\"removetrack\"</span>,<span class=\"code-keyword\">this</span>.updateActiveSourceBuffers_)),<span class=\"code-keyword\">this</span>.player_.el_&amp;&amp;<span class=\"code-keyword\">this</span>.player_.off(<span class=\"code-string\">\"mediachange\"</span>,<span class=\"code-keyword\">this</span>.onPlayerMediachange_),<span class=\"code-keyword\">this</span>.player_.tech_&amp;&amp;<span class=\"code-keyword\">this</span>.player_.tech_.el_&amp;&amp;(<span class=\"code-keyword\">this</span>.player_.tech_.off(<span class=\"code-string\">\"hls-reset\"</span>,<span class=\"code-keyword\">this</span>.onHlsReset_),<span class=\"code-keyword\">this</span>.player_.tech_.off(<span class=\"code-string\">\"hls-segment-time-mapping\"</span>,<span class=\"code-keyword\">this</span>.onHlsSegmentTimeMapping_)))}),e}<span class=\"code-keyword\">return</span> b(i,e),v(i,[{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"addSeekableRange_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.duration!==<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>)<span class=\"code-keyword\">throw</span>(i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"MediaSource.addSeekableRange() can only be invoked when the duration is Infinity\"</span>)).name=<span class=\"code-string\">\"InvalidStateError\"</span>,i.code=<span class=\"code-number\">11</span>,i;(t&gt;<span class=\"code-keyword\">this</span>.nativeMediaSource_.duration||<span class=\"code-built_in\">isNaN</span>(<span class=\"code-keyword\">this</span>.nativeMediaSource_.duration))&amp;&amp;(<span class=\"code-keyword\">this</span>.nativeMediaSource_.duration=t)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"addSourceBuffer\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,i=Ve(e);<span class=\"code-keyword\">if</span>(<span class=\"code-regexp\">/^(video|audio)\\/mp2t$/i</span>.test(i.type)){<span class=\"code-keyword\">var</span> n=[];i.parameters&amp;&amp;i.parameters.codecs&amp;&amp;(n=i.parameters.codecs.split(<span class=\"code-string\">\",\"</span>),n=(n=Fe(n)).filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> We(e)||ze(e)})),<span class=\"code-number\">0</span>===n.length&amp;&amp;(n=[<span class=\"code-string\">\"avc1.4d400d\"</span>,<span class=\"code-string\">\"mp4a.40.2\"</span>]),t=<span class=\"code-keyword\">new</span> Ye(<span class=\"code-keyword\">this</span>,n),<span class=\"code-number\">0</span>!==<span class=\"code-keyword\">this</span>.sourceBuffers.length&amp;&amp;(<span class=\"code-keyword\">this</span>.sourceBuffers[<span class=\"code-number\">0</span>].createRealSourceBuffers_(),t.createRealSourceBuffers_(),<span class=\"code-keyword\">this</span>.sourceBuffers[<span class=\"code-number\">0</span>].audioDisabled_=!<span class=\"code-number\">0</span>)}<span class=\"code-keyword\">else</span> t=<span class=\"code-keyword\">this</span>.nativeMediaSource_.addSourceBuffer(e);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.sourceBuffers.push(t),t}}]),i}(t.EventTarget),$e=<span class=\"code-number\">0</span>;t.mediaSources={};<span class=\"code-keyword\">var</span> Qe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">var</span> n=t.mediaSources[e];<span class=\"code-keyword\">if</span>(!n)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Media Source not found (Video.js)\"</span>);n.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"sourceopen\"</span>,<span class=\"code-attr\">swfId</span>:i})},Je=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span>!!u.MediaSource&amp;&amp;!!u.MediaSource.isTypeSupported&amp;&amp;u.MediaSource.isTypeSupported(<span class=\"code-string\">'video/mp4;codecs=\"avc1.4d400d,mp4a.40.2\"'</span>)},Ze=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.MediaSource={<span class=\"code-attr\">open</span>:Qe,<span class=\"code-attr\">supportsNativeMediaSources</span>:Je},Je())<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">new</span> Ke;<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Cannot use create a virtual MediaSource for this video\"</span>)};Ze.open=Qe,Ze.supportsNativeMediaSources=Je;<span class=\"code-keyword\">var</span> et={<span class=\"code-attr\">createObjectURL</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> e <span class=\"code-keyword\">instanceof</span> Ke?(i=u.URL.createObjectURL(e.nativeMediaSource_),e.url_=i,i):e <span class=\"code-keyword\">instanceof</span> Ke?(i=<span class=\"code-string\">\"blob:vjs-media-source/\"</span>+$e,$e++,t.mediaSources[i]=e,i):(i=u.URL.createObjectURL(e),e.url_=i,i)}};t.MediaSource=Ze,t.URL=et;\n","<span class=\"code-comment\">/*! @name mpd-parser @version 0.8.1 @license Apache-2.0 */</span>\n","<span class=\"code-keyword\">var</span> tt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!!e&amp;&amp;<span class=\"code-string\">\"object\"</span>==<span class=\"code-keyword\">typeof</span> e},it=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-built_in\">arguments</span>.length,i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Array</span>(t),n=<span class=\"code-number\">0</span>;n&lt;t;n++)i[n]=<span class=\"code-built_in\">arguments</span>[n];<span class=\"code-keyword\">return</span> i.reduce(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Object</span>.keys(i).forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-built_in\">Array</span>.isArray(t[n])&amp;&amp;<span class=\"code-built_in\">Array</span>.isArray(i[n])?t[n]=t[n].concat(i[n]):tt(t[n])&amp;&amp;tt(i[n])?t[n]=e(t[n],i[n]):t[n]=i[n]}),t},{})},nt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.reduce(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.concat(t)},[])},rt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!e.length)<span class=\"code-keyword\">return</span>[];<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=[],i=<span class=\"code-number\">0</span>;i&lt;e.length;i++)t.push(e[i]);<span class=\"code-keyword\">return</span> t},at=<span class=\"code-string\">\"INVALID_NUMBER_OF_PERIOD\"</span>,st=<span class=\"code-string\">\"DASH_EMPTY_MANIFEST\"</span>,ot=<span class=\"code-string\">\"DASH_INVALID_XML\"</span>,ut=<span class=\"code-string\">\"NO_BASE_URL\"</span>,dt=<span class=\"code-string\">\"SEGMENT_TIME_UNSPECIFIED\"</span>,lt=<span class=\"code-string\">\"UNSUPPORTED_UTC_TIMING_SCHEME\"</span>;<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">window</span>?<span class=\"code-built_in\">window</span>:<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> global?global:<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> self&amp;&amp;self;<span class=\"code-keyword\">var</span> ht=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e(t={<span class=\"code-attr\">exports</span>:{}},t.exports),t.exports}(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a,s;i=<span class=\"code-regexp\">/^((?:[a-zA-Z0-9+\\-.]+:)?)(\\/\\/[^\\/?#]*)?((?:[^\\/\\?#]*\\/)*.*?)??(;.*?)?(\\?.*?)?(#.*?)?$/</span>,n=<span class=\"code-regexp\">/^([^\\/?#]*)(.*)$/</span>,r=<span class=\"code-regexp\">/(?:\\/|^)\\.(?=\\/)/g</span>,a=<span class=\"code-regexp\">/(?:\\/|^)\\.\\.\\/(?!\\.\\.\\/).*?(?=\\/)/g</span>,s={<span class=\"code-attr\">buildAbsoluteURL</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(i=i||{},e=e.trim(),!(t=t.trim())){<span class=\"code-keyword\">if</span>(!i.alwaysNormalize)<span class=\"code-keyword\">return</span> e;<span class=\"code-keyword\">var</span> r=s.parseURL(e);<span class=\"code-keyword\">if</span>(!r)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Error trying to parse base URL.\"</span>);<span class=\"code-keyword\">return</span> r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}<span class=\"code-keyword\">var</span> a=s.parseURL(t);<span class=\"code-keyword\">if</span>(!a)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Error trying to parse relative URL.\"</span>);<span class=\"code-keyword\">if</span>(a.scheme)<span class=\"code-keyword\">return</span> i.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;<span class=\"code-keyword\">var</span> o=s.parseURL(e);<span class=\"code-keyword\">if</span>(!o)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Error trying to parse base URL.\"</span>);<span class=\"code-keyword\">if</span>(!o.netLoc&amp;&amp;o.path&amp;&amp;<span class=\"code-string\">\"/\"</span>!==o.path[<span class=\"code-number\">0</span>]){<span class=\"code-keyword\">var</span> u=n.exec(o.path);o.netLoc=u[<span class=\"code-number\">1</span>],o.path=u[<span class=\"code-number\">2</span>]}o.netLoc&amp;&amp;!o.path&amp;&amp;(o.path=<span class=\"code-string\">\"/\"</span>);<span class=\"code-keyword\">var</span> d={<span class=\"code-attr\">scheme</span>:o.scheme,<span class=\"code-attr\">netLoc</span>:a.netLoc,<span class=\"code-attr\">path</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">params</span>:a.params,<span class=\"code-attr\">query</span>:a.query,<span class=\"code-attr\">fragment</span>:a.fragment};<span class=\"code-keyword\">if</span>(!a.netLoc&amp;&amp;(d.netLoc=o.netLoc,<span class=\"code-string\">\"/\"</span>!==a.path[<span class=\"code-number\">0</span>]))<span class=\"code-keyword\">if</span>(a.path){<span class=\"code-keyword\">var</span> l=o.path,h=l.substring(<span class=\"code-number\">0</span>,l.lastIndexOf(<span class=\"code-string\">\"/\"</span>)+<span class=\"code-number\">1</span>)+a.path;d.path=s.normalizePath(h)}<span class=\"code-keyword\">else</span> d.path=o.path,a.params||(d.params=o.params,a.query||(d.query=o.query));<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>===d.path&amp;&amp;(d.path=i.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(d)},<span class=\"code-attr\">parseURL</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=i.exec(e);<span class=\"code-keyword\">return</span> t?{<span class=\"code-attr\">scheme</span>:t[<span class=\"code-number\">1</span>]||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">netLoc</span>:t[<span class=\"code-number\">2</span>]||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">path</span>:t[<span class=\"code-number\">3</span>]||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">params</span>:t[<span class=\"code-number\">4</span>]||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">query</span>:t[<span class=\"code-number\">5</span>]||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">fragment</span>:t[<span class=\"code-number\">6</span>]||<span class=\"code-string\">\"\"</span>}:<span class=\"code-literal\">null</span>},<span class=\"code-attr\">normalizePath</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(e=e.split(<span class=\"code-string\">\"\"</span>).reverse().join(<span class=\"code-string\">\"\"</span>).replace(r,<span class=\"code-string\">\"\"</span>);e.length!==(e=e.replace(a,<span class=\"code-string\">\"\"</span>)).length;);<span class=\"code-keyword\">return</span> e.split(<span class=\"code-string\">\"\"</span>).reverse().join(<span class=\"code-string\">\"\"</span>)},<span class=\"code-attr\">buildURLFromParts</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s}),ct=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-regexp\">/^[a-z]+:/i</span>.test(t)?t:(<span class=\"code-regexp\">/\\/\\//i</span>.test(e)||(e=ht.buildAbsoluteURL(u.location.href,e)),ht.buildAbsoluteURL(e,t))},ft=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.baseUrl,i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t?<span class=\"code-string\">\"\"</span>:t,n=e.source,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n?<span class=\"code-string\">\"\"</span>:n,a=e.range,s=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===a?<span class=\"code-string\">\"\"</span>:a,o=e.indexRange,u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===o?<span class=\"code-string\">\"\"</span>:o,d={<span class=\"code-attr\">uri</span>:r,<span class=\"code-attr\">resolvedUri</span>:ct(i||<span class=\"code-string\">\"\"</span>,r)};<span class=\"code-keyword\">if</span>(s||u){<span class=\"code-keyword\">var</span> l=(s||u).split(<span class=\"code-string\">\"-\"</span>),h=<span class=\"code-built_in\">parseInt</span>(l[<span class=\"code-number\">0</span>],<span class=\"code-number\">10</span>),c=<span class=\"code-built_in\">parseInt</span>(l[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>);d.byterange={<span class=\"code-attr\">length</span>:c-h+<span class=\"code-number\">1</span>,<span class=\"code-attr\">offset</span>:h}}<span class=\"code-keyword\">return</span> d},pt={<span class=\"code-attr\">static</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.duration,i=e.timescale,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i?<span class=\"code-number\">1</span>:i,r=e.sourceDuration;<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">start</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">end</span>:<span class=\"code-built_in\">Math</span>.ceil(r/(t/n))}},<span class=\"code-attr\">dynamic</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.NOW,i=e.clientOffset,n=e.availabilityStartTime,r=e.timescale,a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===r?<span class=\"code-number\">1</span>:r,s=e.duration,o=e.start,u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===o?<span class=\"code-number\">0</span>:o,d=e.minimumUpdatePeriod,l=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===d?<span class=\"code-number\">0</span>:d,h=e.timeShiftBufferDepth,c=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===h?<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>:h,f=(t+i)/<span class=\"code-number\">1e3</span>,p=n+u,m=f+l-p,g=<span class=\"code-built_in\">Math</span>.ceil(m*a/s),y=<span class=\"code-built_in\">Math</span>.floor((f-p-c)*a/s),_=<span class=\"code-built_in\">Math</span>.floor((f-p)*a/s);<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">start</span>:<span class=\"code-built_in\">Math</span>.max(<span class=\"code-number\">0</span>,y),<span class=\"code-attr\">end</span>:<span class=\"code-built_in\">Math</span>.min(g,_)}}},mt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.type,i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t?<span class=\"code-string\">\"static\"</span>:t,n=e.duration,r=e.timescale,a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===r?<span class=\"code-number\">1</span>:r,s=e.sourceDuration,o=pt[i](e),u=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=[],n=e;n&lt;t;n++)i.push(n);<span class=\"code-keyword\">return</span> i}(o.start,o.end).map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=e.duration,r=e.timescale,a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===r?<span class=\"code-number\">1</span>:r,s=e.periodIndex,o=e.startNumber;<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">number</span>:(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===o?<span class=\"code-number\">1</span>:o)+t,<span class=\"code-attr\">duration</span>:n/a,<span class=\"code-attr\">timeline</span>:s,<span class=\"code-attr\">time</span>:i*n}}}(e));<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"static\"</span>===i){<span class=\"code-keyword\">var</span> d=u.length<span class=\"code-number\">-1</span>;u[d].duration=s-n/a*d}<span class=\"code-keyword\">return</span> u},gt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.baseUrl,i=e.initialization,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i?{}:i,r=e.sourceDuration,a=e.timescale,s=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===a?<span class=\"code-number\">1</span>:a,o=e.indexRange,u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===o?<span class=\"code-string\">\"\"</span>:o,d=e.duration;<span class=\"code-keyword\">if</span>(!t)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(ut);<span class=\"code-keyword\">var</span> l=ft({<span class=\"code-attr\">baseUrl</span>:t,<span class=\"code-attr\">source</span>:n.sourceURL,<span class=\"code-attr\">range</span>:n.range}),h=ft({<span class=\"code-attr\">baseUrl</span>:t,<span class=\"code-attr\">source</span>:t,<span class=\"code-attr\">indexRange</span>:u});<span class=\"code-keyword\">if</span>(h.map=l,d){<span class=\"code-keyword\">var</span> c=mt(e);c.length&amp;&amp;(h.duration=c[<span class=\"code-number\">0</span>].duration,h.timeline=c[<span class=\"code-number\">0</span>].timeline)}<span class=\"code-keyword\">else</span> r&amp;&amp;(h.duration=r/s,h.timeline=<span class=\"code-number\">0</span>);<span class=\"code-keyword\">return</span> h.number=<span class=\"code-number\">0</span>,[h]},yt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=e.sidx.map?e.sidx.map:<span class=\"code-literal\">null</span>,r=e.sidx.duration,a=e.timeline||<span class=\"code-number\">0</span>,s=e.sidx.byterange,o=s.offset+s.length,u=t.timescale,d=t.references.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">1</span>!==e.referenceType}),l=[],h=o+t.firstOffset,c=<span class=\"code-number\">0</span>;c&lt;d.length;c++){<span class=\"code-keyword\">var</span> f=t.references[c],p=f.referencedSize,m=f.subsegmentDuration,g=gt({<span class=\"code-attr\">baseUrl</span>:i,<span class=\"code-attr\">timescale</span>:u,<span class=\"code-attr\">timeline</span>:a,<span class=\"code-attr\">periodIndex</span>:a,<span class=\"code-attr\">duration</span>:m,<span class=\"code-attr\">sourceDuration</span>:r,<span class=\"code-attr\">indexRange</span>:h+<span class=\"code-string\">\"-\"</span>+(h+p<span class=\"code-number\">-1</span>)})[<span class=\"code-number\">0</span>];n&amp;&amp;(g.map=n),l.push(g),h+=p}<span class=\"code-keyword\">return</span> e.segments=l,e},_t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">return</span>(t=e.reduce(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n=t.attributes.id+(t.attributes.lang||<span class=\"code-string\">\"\"</span>);e[n]?(t.segments[<span class=\"code-number\">0</span>]&amp;&amp;(t.segments[<span class=\"code-number\">0</span>].discontinuity=!<span class=\"code-number\">0</span>),(i=e[n].segments).push.apply(i,t.segments),t.attributes.contentProtection&amp;&amp;(e[n].attributes.contentProtection=t.attributes.contentProtection)):e[n]=t;<span class=\"code-keyword\">return</span> e},{}),<span class=\"code-built_in\">Object</span>.keys(t).map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t[e]})).map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i;<span class=\"code-keyword\">return</span> e.discontinuityStarts=(t=e.segments,i=<span class=\"code-string\">\"discontinuity\"</span>,t.reduce(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,n</span>)</span>{<span class=\"code-keyword\">return</span> t[i]&amp;&amp;e.push(n),e},[])),e})},vt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t={}),!<span class=\"code-built_in\">Object</span>.keys(t).length)<span class=\"code-keyword\">return</span> e;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i <span class=\"code-keyword\">in</span> e){<span class=\"code-keyword\">var</span> n=e[i];<span class=\"code-keyword\">if</span>(n.sidx){<span class=\"code-keyword\">var</span> r=n.sidx.uri+<span class=\"code-string\">\"-\"</span>+(s=n.sidx.byterange,<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,o=s.offset+s.length<span class=\"code-number\">-1</span>,s.offset+<span class=\"code-string\">\"-\"</span>+o),a=t[r]&amp;&amp;t[r].sidx;n.sidx&amp;&amp;a&amp;&amp;yt(n,a,n.sidx.resolvedUri)}}<span class=\"code-keyword\">var</span> s,o;<span class=\"code-keyword\">return</span> e},bt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=e.attributes,n=e.segments,r=e.sidx,a={<span class=\"code-attr\">attributes</span>:(t={<span class=\"code-attr\">NAME</span>:i.id,<span class=\"code-attr\">AUDIO</span>:<span class=\"code-string\">\"audio\"</span>,<span class=\"code-attr\">SUBTITLES</span>:<span class=\"code-string\">\"subs\"</span>,<span class=\"code-attr\">RESOLUTION</span>:{<span class=\"code-attr\">width</span>:i.width,<span class=\"code-attr\">height</span>:i.height},<span class=\"code-attr\">CODECS</span>:i.codecs,<span class=\"code-attr\">BANDWIDTH</span>:i.bandwidth},t[<span class=\"code-string\">\"PROGRAM-ID\"</span>]=<span class=\"code-number\">1</span>,t),<span class=\"code-attr\">uri</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">endList</span>:<span class=\"code-string\">\"static\"</span>===(i.type||<span class=\"code-string\">\"static\"</span>),<span class=\"code-attr\">timeline</span>:i.periodIndex,<span class=\"code-attr\">resolvedUri</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">targetDuration</span>:i.duration,<span class=\"code-attr\">segments</span>:n,<span class=\"code-attr\">mediaSequence</span>:n.length?n[<span class=\"code-number\">0</span>].number:<span class=\"code-number\">1</span>};<span class=\"code-keyword\">return</span> i.contentProtection&amp;&amp;(a.contentProtection=i.contentProtection),r&amp;&amp;(a.sidx=r),a},Tt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t={}),!e.length)<span class=\"code-keyword\">return</span>{};<span class=\"code-keyword\">var</span> n=e[<span class=\"code-number\">0</span>].attributes,r=n.sourceDuration,a=n.minimumUpdatePeriod,s=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===a?<span class=\"code-number\">0</span>:a,o=_t(e.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.attributes;<span class=\"code-keyword\">return</span><span class=\"code-string\">\"video/mp4\"</span>===t.mimeType||<span class=\"code-string\">\"video\"</span>===t.contentType})).map(bt),u=_t(e.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.attributes;<span class=\"code-keyword\">return</span><span class=\"code-string\">\"audio/mp4\"</span>===t.mimeType||<span class=\"code-string\">\"audio\"</span>===t.contentType})),d=e.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.attributes;<span class=\"code-keyword\">return</span><span class=\"code-string\">\"text/vtt\"</span>===t.mimeType||<span class=\"code-string\">\"text\"</span>===t.contentType}),l={<span class=\"code-attr\">allowCache</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">discontinuityStarts</span>:[],<span class=\"code-attr\">segments</span>:[],<span class=\"code-attr\">endList</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">mediaGroups</span>:(i={<span class=\"code-attr\">AUDIO</span>:{},<span class=\"code-attr\">VIDEO</span>:{}},i[<span class=\"code-string\">\"CLOSED-CAPTIONS\"</span>]={},i.SUBTITLES={},i),<span class=\"code-attr\">uri</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">duration</span>:r,<span class=\"code-attr\">playlists</span>:vt(o,t),<span class=\"code-attr\">minimumUpdatePeriod</span>:<span class=\"code-number\">1e3</span>*s};<span class=\"code-keyword\">return</span> u.length&amp;&amp;(l.mediaGroups.AUDIO.audio=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t={});<span class=\"code-keyword\">var</span> n=e.reduce(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,n</span>)</span>{<span class=\"code-keyword\">var</span> r=n.attributes.role&amp;&amp;n.attributes.role.value||<span class=\"code-string\">\"\"</span>,a=n.attributes.lang||<span class=\"code-string\">\"\"</span>,s=<span class=\"code-string\">\"main\"</span>;<span class=\"code-keyword\">if</span>(a){<span class=\"code-keyword\">var</span> o=r?<span class=\"code-string\">\" (\"</span>+r+<span class=\"code-string\">\")\"</span>:<span class=\"code-string\">\"\"</span>;s=<span class=\"code-string\">\"\"</span>+n.attributes.lang+o}<span class=\"code-keyword\">return</span> e[s]&amp;&amp;e[s].playlists[<span class=\"code-number\">0</span>].attributes.BANDWIDTH&gt;n.attributes.bandwidth?e:(e[s]={<span class=\"code-attr\">language</span>:a,<span class=\"code-attr\">autoselect</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">default</span>:<span class=\"code-string\">\"main\"</span>===r,<span class=\"code-attr\">playlists</span>:vt([<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=e.attributes,n=e.segments,r=e.sidx,a={<span class=\"code-attr\">attributes</span>:(t={<span class=\"code-attr\">NAME</span>:i.id,<span class=\"code-attr\">BANDWIDTH</span>:i.bandwidth,<span class=\"code-attr\">CODECS</span>:i.codecs},t[<span class=\"code-string\">\"PROGRAM-ID\"</span>]=<span class=\"code-number\">1</span>,t),<span class=\"code-attr\">uri</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">endList</span>:<span class=\"code-string\">\"static\"</span>===(i.type||<span class=\"code-string\">\"static\"</span>),<span class=\"code-attr\">timeline</span>:i.periodIndex,<span class=\"code-attr\">resolvedUri</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">targetDuration</span>:i.duration,<span class=\"code-attr\">segments</span>:n,<span class=\"code-attr\">mediaSequence</span>:n.length?n[<span class=\"code-number\">0</span>].number:<span class=\"code-number\">1</span>};<span class=\"code-keyword\">return</span> i.contentProtection&amp;&amp;(a.contentProtection=i.contentProtection),r&amp;&amp;(a.sidx=r),a}(n)],t),<span class=\"code-attr\">uri</span>:<span class=\"code-string\">\"\"</span>},<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;<span class=\"code-string\">\"main\"</span>===r&amp;&amp;((i=n).default=!<span class=\"code-number\">0</span>),e)},{});i||(n[<span class=\"code-built_in\">Object</span>.keys(n)[<span class=\"code-number\">0</span>]].default=!<span class=\"code-number\">0</span>);<span class=\"code-keyword\">return</span> n}(u,t)),d.length&amp;&amp;(l.mediaGroups.SUBTITLES.subs=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t={}),e.reduce(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a,s,o=i.attributes.lang||<span class=\"code-string\">\"text\"</span>;<span class=\"code-keyword\">return</span> e[o]?e:(e[o]={<span class=\"code-attr\">language</span>:o,<span class=\"code-attr\">default</span>:!<span class=\"code-number\">1</span>,<span class=\"code-attr\">autoselect</span>:!<span class=\"code-number\">1</span>,<span class=\"code-attr\">playlists</span>:vt([(n=i,a=n.attributes,s=n.segments,<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===s&amp;&amp;(s=[{<span class=\"code-attr\">uri</span>:a.baseUrl,<span class=\"code-attr\">timeline</span>:a.periodIndex,<span class=\"code-attr\">resolvedUri</span>:a.baseUrl||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">duration</span>:a.sourceDuration,<span class=\"code-attr\">number</span>:<span class=\"code-number\">0</span>}],a.duration=a.sourceDuration),{<span class=\"code-attr\">attributes</span>:(r={<span class=\"code-attr\">NAME</span>:a.id,<span class=\"code-attr\">BANDWIDTH</span>:a.bandwidth},r[<span class=\"code-string\">\"PROGRAM-ID\"</span>]=<span class=\"code-number\">1</span>,r),<span class=\"code-attr\">uri</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">endList</span>:<span class=\"code-string\">\"static\"</span>===(a.type||<span class=\"code-string\">\"static\"</span>),<span class=\"code-attr\">timeline</span>:a.periodIndex,<span class=\"code-attr\">resolvedUri</span>:a.baseUrl||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">targetDuration</span>:a.duration,<span class=\"code-attr\">segments</span>:s,<span class=\"code-attr\">mediaSequence</span>:s.length?s[<span class=\"code-number\">0</span>].number:<span class=\"code-number\">1</span>})],t),<span class=\"code-attr\">uri</span>:<span class=\"code-string\">\"\"</span>},e)},{})}(d,t)),l},St=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=e.NOW,r=e.clientOffset,a=e.availabilityStartTime,s=e.timescale,o=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===s?<span class=\"code-number\">1</span>:s,u=e.start,d=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===u?<span class=\"code-number\">0</span>:u,l=e.minimumUpdatePeriod,h=(n+r)/<span class=\"code-number\">1e3</span>+(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===l?<span class=\"code-number\">0</span>:l)-(a+d);<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Math</span>.ceil((h*o-t)/i)},kt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=e.type,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i?<span class=\"code-string\">\"static\"</span>:i,r=e.minimumUpdatePeriod,a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===r?<span class=\"code-number\">0</span>:r,s=e.media,o=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===s?<span class=\"code-string\">\"\"</span>:s,u=e.sourceDuration,d=e.timescale,l=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===d?<span class=\"code-number\">1</span>:d,h=e.startNumber,c=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===h?<span class=\"code-number\">1</span>:h,f=e.periodIndex,p=[],m=<span class=\"code-number\">-1</span>,g=<span class=\"code-number\">0</span>;g&lt;t.length;g++){<span class=\"code-keyword\">var</span> y=t[g],_=y.d,v=y.r||<span class=\"code-number\">0</span>,b=y.t||<span class=\"code-number\">0</span>;m&lt;<span class=\"code-number\">0</span>&amp;&amp;(m=b),b&amp;&amp;b&gt;m&amp;&amp;(m=b);<span class=\"code-keyword\">var</span> T=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(v&lt;<span class=\"code-number\">0</span>){<span class=\"code-keyword\">var</span> S=g+<span class=\"code-number\">1</span>;T=S===t.length?<span class=\"code-string\">\"dynamic\"</span>===n&amp;&amp;a&gt;<span class=\"code-number\">0</span>&amp;&amp;o.indexOf(<span class=\"code-string\">\"$Number$\"</span>)&gt;<span class=\"code-number\">0</span>?St(e,m,_):(u*l-m)/_:(t[S].t-m)/_}<span class=\"code-keyword\">else</span> T=v+<span class=\"code-number\">1</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> k=c+p.length+T,w=c+p.length;w&lt;k;)p.push({<span class=\"code-attr\">number</span>:w,<span class=\"code-attr\">duration</span>:_/l,<span class=\"code-attr\">time</span>:m,<span class=\"code-attr\">timeline</span>:f}),m+=_,w++}<span class=\"code-keyword\">return</span> p},wt=<span class=\"code-regexp\">/\\$([A-z]*)(?:(%0)([0-9]+)d)?\\$/g</span>,Lt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.replace(wt,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i,n,r</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"$$\"</span>===t)<span class=\"code-keyword\">return</span><span class=\"code-string\">\"$\"</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e[i])<span class=\"code-keyword\">return</span> t;<span class=\"code-keyword\">var</span> a=<span class=\"code-string\">\"\"</span>+e[i];<span class=\"code-keyword\">return</span><span class=\"code-string\">\"RepresentationID\"</span>===i?a:(r=n?<span class=\"code-built_in\">parseInt</span>(r,<span class=\"code-number\">10</span>):<span class=\"code-number\">1</span>,a.length&gt;=r?a:<span class=\"code-string\">\"\"</span>+<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Array</span>(r-a.length+<span class=\"code-number\">1</span>).join(<span class=\"code-string\">\"0\"</span>)+a)}}(t))},Et=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i={<span class=\"code-attr\">RepresentationID</span>:e.id,<span class=\"code-attr\">Bandwidth</span>:e.bandwidth||<span class=\"code-number\">0</span>},n=e.initialization,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n?{<span class=\"code-attr\">sourceURL</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">range</span>:<span class=\"code-string\">\"\"</span>}:n,a=ft({<span class=\"code-attr\">baseUrl</span>:e.baseUrl,<span class=\"code-attr\">source</span>:Lt(r.sourceURL,i),<span class=\"code-attr\">range</span>:r.range});<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.duration||t?e.duration?mt(e):kt(e,t):[{<span class=\"code-attr\">number</span>:e.startNumber||<span class=\"code-number\">1</span>,<span class=\"code-attr\">duration</span>:e.sourceDuration,<span class=\"code-attr\">time</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">timeline</span>:e.periodIndex}]}(e,t).map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{i.Number=t.number,i.Time=t.time;<span class=\"code-keyword\">var</span> n=Lt(e.media||<span class=\"code-string\">\"\"</span>,i);<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">uri</span>:n,<span class=\"code-attr\">timeline</span>:t.timeline,<span class=\"code-attr\">duration</span>:t.duration,<span class=\"code-attr\">resolvedUri</span>:ct(e.baseUrl||<span class=\"code-string\">\"\"</span>,n),<span class=\"code-attr\">map</span>:a,<span class=\"code-attr\">number</span>:t.number}})},Ut=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.duration,n=e.segmentUrls,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n?[]:n;<span class=\"code-keyword\">if</span>(!i&amp;&amp;!t||i&amp;&amp;t)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(dt);<span class=\"code-keyword\">var</span> a,s=r.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.baseUrl,n=e.initialization,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n?{}:n,a=ft({<span class=\"code-attr\">baseUrl</span>:i,<span class=\"code-attr\">source</span>:r.sourceURL,<span class=\"code-attr\">range</span>:r.range}),s=ft({<span class=\"code-attr\">baseUrl</span>:i,<span class=\"code-attr\">source</span>:t.media,<span class=\"code-attr\">range</span>:t.mediaRange});<span class=\"code-keyword\">return</span> s.map=a,s}(e,t)});<span class=\"code-keyword\">return</span> i&amp;&amp;(a=mt(e)),t&amp;&amp;(a=kt(e,t)),a.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(s[t]){<span class=\"code-keyword\">var</span> i=s[t];<span class=\"code-keyword\">return</span> i.timeline=e.timeline,i.duration=e.duration,i.number=e.number,i}}).filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e})},It=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=e.attributes,r=e.segmentInfo;r.template?(i=Et,t=it(n,r.template)):r.base?(i=gt,t=it(n,r.base)):r.list&amp;&amp;(i=Ut,t=it(n,r.list));<span class=\"code-keyword\">var</span> a={<span class=\"code-attr\">attributes</span>:n};<span class=\"code-keyword\">if</span>(!i)<span class=\"code-keyword\">return</span> a;<span class=\"code-keyword\">var</span> s=i(t,r.timeline);<span class=\"code-keyword\">if</span>(t.duration){<span class=\"code-keyword\">var</span> o=t,u=o.duration,d=o.timescale,l=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===d?<span class=\"code-number\">1</span>:d;t.duration=u/l}<span class=\"code-keyword\">else</span> s.length?t.duration=s.reduce(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Math</span>.max(e,<span class=\"code-built_in\">Math</span>.ceil(t.duration))},<span class=\"code-number\">0</span>):t.duration=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> a.attributes=t,a.segments=s,r.base&amp;&amp;t.indexRange&amp;&amp;(a.sidx=s[<span class=\"code-number\">0</span>],a.segments=[]),a},At=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> rt(e.childNodes).filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.tagName===t})},Ot=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.textContent.trim()},Ct=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-regexp\">/P(?:(\\d*)Y)?(?:(\\d*)M)?(?:(\\d*)D)?(?:T(?:(\\d*)H)?(?:(\\d*)M)?(?:([\\d.]*)S)?)?/</span>.exec(e);<span class=\"code-keyword\">if</span>(!t)<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> i=t.slice(<span class=\"code-number\">1</span>),n=i[<span class=\"code-number\">0</span>],r=i[<span class=\"code-number\">1</span>],a=i[<span class=\"code-number\">2</span>],s=i[<span class=\"code-number\">3</span>],o=i[<span class=\"code-number\">4</span>],u=i[<span class=\"code-number\">5</span>];<span class=\"code-keyword\">return</span> <span class=\"code-number\">31536e3</span>*<span class=\"code-built_in\">parseFloat</span>(n||<span class=\"code-number\">0</span>)+<span class=\"code-number\">2592e3</span>*<span class=\"code-built_in\">parseFloat</span>(r||<span class=\"code-number\">0</span>)+<span class=\"code-number\">86400</span>*<span class=\"code-built_in\">parseFloat</span>(a||<span class=\"code-number\">0</span>)+<span class=\"code-number\">3600</span>*<span class=\"code-built_in\">parseFloat</span>(s||<span class=\"code-number\">0</span>)+<span class=\"code-number\">60</span>*<span class=\"code-built_in\">parseFloat</span>(o||<span class=\"code-number\">0</span>)+<span class=\"code-built_in\">parseFloat</span>(u||<span class=\"code-number\">0</span>)},Pt={<span class=\"code-attr\">mediaPresentationDuration</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Ct(e)},<span class=\"code-attr\">availabilityStartTime</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-regexp\">/^\\d+-\\d+-\\d+T\\d+:\\d+:\\d+(\\.\\d+)?$/</span>.test(t=e)&amp;&amp;(t+=<span class=\"code-string\">\"Z\"</span>),<span class=\"code-built_in\">Date</span>.parse(t)/<span class=\"code-number\">1e3</span>;<span class=\"code-keyword\">var</span> t},<span class=\"code-attr\">minimumUpdatePeriod</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Ct(e)},<span class=\"code-attr\">timeShiftBufferDepth</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Ct(e)},<span class=\"code-attr\">start</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Ct(e)},<span class=\"code-attr\">width</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">height</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">bandwidth</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">startNumber</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">timescale</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">duration</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>);<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">isNaN</span>(t)?Ct(e):t},<span class=\"code-attr\">d</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">t</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">r</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">DEFAULT</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e}},Dt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&amp;&amp;e.attributes?rt(e.attributes).reduce(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=Pt[t.name]||Pt.DEFAULT;<span class=\"code-keyword\">return</span> e[t.name]=i(t.value),e},{}):{}};<span class=\"code-keyword\">var</span> Rt,xt,Mt={<span class=\"code-string\">\"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b\"</span>:<span class=\"code-string\">\"org.w3.clearkey\"</span>,<span class=\"code-string\">\"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed\"</span>:<span class=\"code-string\">\"com.widevine.alpha\"</span>,<span class=\"code-string\">\"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95\"</span>:<span class=\"code-string\">\"com.microsoft.playready\"</span>,<span class=\"code-string\">\"urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb\"</span>:<span class=\"code-string\">\"com.adobe.primetime\"</span>},Bt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> t.length?nt(e.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span> ct(e,Ot(t))})})):e},Nt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=At(e,<span class=\"code-string\">\"SegmentTemplate\"</span>)[<span class=\"code-number\">0</span>],i=At(e,<span class=\"code-string\">\"SegmentList\"</span>)[<span class=\"code-number\">0</span>],n=i&amp;&amp;At(i,<span class=\"code-string\">\"SegmentURL\"</span>).map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> it({<span class=\"code-attr\">tag</span>:<span class=\"code-string\">\"SegmentURL\"</span>},Dt(e))}),r=At(e,<span class=\"code-string\">\"SegmentBase\"</span>)[<span class=\"code-number\">0</span>],a=i||t,s=a&amp;&amp;At(a,<span class=\"code-string\">\"SegmentTimeline\"</span>)[<span class=\"code-number\">0</span>],o=i||r||t,u=o&amp;&amp;At(o,<span class=\"code-string\">\"Initialization\"</span>)[<span class=\"code-number\">0</span>],d=t&amp;&amp;Dt(t);d&amp;&amp;u?d.initialization=u&amp;&amp;Dt(u):d&amp;&amp;d.initialization&amp;&amp;(d.initialization={<span class=\"code-attr\">sourceURL</span>:d.initialization});<span class=\"code-keyword\">var</span> l={<span class=\"code-attr\">template</span>:d,<span class=\"code-attr\">timeline</span>:s&amp;&amp;At(s,<span class=\"code-string\">\"S\"</span>).map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Dt(e)}),<span class=\"code-attr\">list</span>:i&amp;&amp;it(Dt(i),{<span class=\"code-attr\">segmentUrls</span>:n,<span class=\"code-attr\">initialization</span>:Dt(u)}),<span class=\"code-attr\">base</span>:r&amp;&amp;it(Dt(r),{<span class=\"code-attr\">initialization</span>:Dt(u)})};<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Object</span>.keys(l).forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{l[e]||<span class=\"code-keyword\">delete</span> l[e]}),l},qt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.reduce(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=Dt(t),n=Mt[i.schemeIdUri];<span class=\"code-keyword\">if</span>(n){e[n]={<span class=\"code-attr\">attributes</span>:i};<span class=\"code-keyword\">var</span> r=At(t,<span class=\"code-string\">\"cenc:pssh\"</span>)[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(r){<span class=\"code-keyword\">var</span> a=Ot(r),s=a&amp;&amp;<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=u.atob(e),i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(t.length),n=<span class=\"code-number\">0</span>;n&lt;t.length;n++)i[n]=t.charCodeAt(n);<span class=\"code-keyword\">return</span> i}(a);e[n].pssh=s}}<span class=\"code-keyword\">return</span> e},{})},Ft=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-keyword\">var</span> r=Dt(n),a=Bt(t,At(n,<span class=\"code-string\">\"BaseURL\"</span>)),s=At(n,<span class=\"code-string\">\"Role\"</span>)[<span class=\"code-number\">0</span>],o={<span class=\"code-attr\">role</span>:Dt(s)},u=it(e,r,o),d=qt(At(n,<span class=\"code-string\">\"ContentProtection\"</span>));<span class=\"code-built_in\">Object</span>.keys(d).length&amp;&amp;(u=it(u,{<span class=\"code-attr\">contentProtection</span>:d}));<span class=\"code-keyword\">var</span> l=Nt(n),h=At(n,<span class=\"code-string\">\"Representation\"</span>),c=it(i,l);<span class=\"code-keyword\">return</span> nt(h.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-keyword\">var</span> r=At(n,<span class=\"code-string\">\"BaseURL\"</span>),a=Bt(t,r),s=it(e,Dt(n)),o=Nt(n);<span class=\"code-keyword\">return</span> a.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">segmentInfo</span>:it(i,o),<span class=\"code-attr\">attributes</span>:it(s,{<span class=\"code-attr\">baseUrl</span>:e})}})}}(u,a,c)))}},Ht=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t={});<span class=\"code-keyword\">var</span> i=t,n=i.manifestUri,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n?<span class=\"code-string\">\"\"</span>:n,a=i.NOW,s=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===a?<span class=\"code-built_in\">Date</span>.now():a,o=i.clientOffset,d=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===o?<span class=\"code-number\">0</span>:o,l=At(e,<span class=\"code-string\">\"Period\"</span>);<span class=\"code-keyword\">if</span>(!l.length)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(at);<span class=\"code-keyword\">var</span> h=Dt(e),c=Bt([r],At(e,<span class=\"code-string\">\"BaseURL\"</span>));<span class=\"code-keyword\">return</span> h.sourceDuration=h.mediaPresentationDuration||<span class=\"code-number\">0</span>,h.NOW=s,h.clientOffset=d,nt(l.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i,n</span>)</span>{<span class=\"code-keyword\">var</span> r=Bt(t,At(i,<span class=\"code-string\">\"BaseURL\"</span>)),a=Dt(i),s=<span class=\"code-built_in\">parseInt</span>(a.id,<span class=\"code-number\">10</span>),o=u.isNaN(s)?n:s,d=it(e,{<span class=\"code-attr\">periodIndex</span>:o}),l=At(i,<span class=\"code-string\">\"AdaptationSet\"</span>),h=Nt(i);<span class=\"code-keyword\">return</span> nt(l.map(Ft(d,r,h)))}}(h,c)))},Gt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"\"</span>===e)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(st);<span class=\"code-keyword\">var</span> t=(<span class=\"code-keyword\">new</span> u.DOMParser).parseFromString(e,<span class=\"code-string\">\"application/xml\"</span>),i=t&amp;&amp;<span class=\"code-string\">\"MPD\"</span>===t.documentElement.tagName?t.documentElement:<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(!i||i&amp;&amp;i.getElementsByTagName(<span class=\"code-string\">\"parsererror\"</span>).length&gt;<span class=\"code-number\">0</span>)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(ot);<span class=\"code-keyword\">return</span> i},jt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t={}),Tt(Ht(Gt(e),t).map(It),t.sidxMapping)},Vt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=At(e,<span class=\"code-string\">\"UTCTiming\"</span>)[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(!t)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i=Dt(t);<span class=\"code-keyword\">switch</span>(i.schemeIdUri){<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:http-head:2014\"</span>:<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:http-head:2012\"</span>:i.method=<span class=\"code-string\">\"HEAD\"</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:http-xsdate:2014\"</span>:<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:http-iso:2014\"</span>:<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:http-xsdate:2012\"</span>:<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:http-iso:2012\"</span>:i.method=<span class=\"code-string\">\"GET\"</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:direct:2014\"</span>:<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:direct:2012\"</span>:i.method=<span class=\"code-string\">\"DIRECT\"</span>,i.value=<span class=\"code-built_in\">Date</span>.parse(i.value);<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:http-ntp:2014\"</span>:<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:ntp:2014\"</span>:<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:sntp:2014\"</span>:<span class=\"code-keyword\">default</span>:<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(lt)}<span class=\"code-keyword\">return</span> i}(Gt(e))},Wt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&gt;&gt;&gt;<span class=\"code-number\">0</span>},zt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>(<span class=\"code-string\">\"00\"</span>+e.toString(<span class=\"code-number\">16</span>)).slice(<span class=\"code-number\">-2</span>)},Xt=Wt,Yt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Date</span>(<span class=\"code-number\">1e3</span>*e<span class=\"code-number\">-20828448e5</span>)},Kt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">isLeading</span>:(<span class=\"code-number\">12</span>&amp;e[<span class=\"code-number\">0</span>])&gt;&gt;&gt;<span class=\"code-number\">2</span>,<span class=\"code-attr\">dependsOn</span>:<span class=\"code-number\">3</span>&amp;e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">isDependedOn</span>:(<span class=\"code-number\">192</span>&amp;e[<span class=\"code-number\">1</span>])&gt;&gt;&gt;<span class=\"code-number\">6</span>,<span class=\"code-attr\">hasRedundancy</span>:(<span class=\"code-number\">48</span>&amp;e[<span class=\"code-number\">1</span>])&gt;&gt;&gt;<span class=\"code-number\">4</span>,<span class=\"code-attr\">paddingValue</span>:(<span class=\"code-number\">14</span>&amp;e[<span class=\"code-number\">1</span>])&gt;&gt;&gt;<span class=\"code-number\">1</span>,<span class=\"code-attr\">isNonSyncSample</span>:<span class=\"code-number\">1</span>&amp;e[<span class=\"code-number\">1</span>],<span class=\"code-attr\">degradationPriority</span>:e[<span class=\"code-number\">2</span>]&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">3</span>]}},$t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">return</span> t+=<span class=\"code-built_in\">String</span>.fromCharCode(e[<span class=\"code-number\">0</span>]),t+=<span class=\"code-built_in\">String</span>.fromCharCode(e[<span class=\"code-number\">1</span>]),t+=<span class=\"code-built_in\">String</span>.fromCharCode(e[<span class=\"code-number\">2</span>]),t+=<span class=\"code-built_in\">String</span>.fromCharCode(e[<span class=\"code-number\">3</span>])},Qt={<span class=\"code-attr\">avc1</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength);<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">dataReferenceIndex</span>:t.getUint16(<span class=\"code-number\">6</span>),<span class=\"code-attr\">width</span>:t.getUint16(<span class=\"code-number\">24</span>),<span class=\"code-attr\">height</span>:t.getUint16(<span class=\"code-number\">26</span>),<span class=\"code-attr\">horizresolution</span>:t.getUint16(<span class=\"code-number\">28</span>)+t.getUint16(<span class=\"code-number\">30</span>)/<span class=\"code-number\">16</span>,<span class=\"code-attr\">vertresolution</span>:t.getUint16(<span class=\"code-number\">32</span>)+t.getUint16(<span class=\"code-number\">34</span>)/<span class=\"code-number\">16</span>,<span class=\"code-attr\">frameCount</span>:t.getUint16(<span class=\"code-number\">40</span>),<span class=\"code-attr\">depth</span>:t.getUint16(<span class=\"code-number\">74</span>),<span class=\"code-attr\">config</span>:Rt(e.subarray(<span class=\"code-number\">78</span>,e.byteLength))}},<span class=\"code-attr\">avcC</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n,r,a=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength),s={<span class=\"code-attr\">configurationVersion</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">avcProfileIndication</span>:e[<span class=\"code-number\">1</span>],<span class=\"code-attr\">profileCompatibility</span>:e[<span class=\"code-number\">2</span>],<span class=\"code-attr\">avcLevelIndication</span>:e[<span class=\"code-number\">3</span>],<span class=\"code-attr\">lengthSizeMinusOne</span>:<span class=\"code-number\">3</span>&amp;e[<span class=\"code-number\">4</span>],<span class=\"code-attr\">sps</span>:[],<span class=\"code-attr\">pps</span>:[]},o=<span class=\"code-number\">31</span>&amp;e[<span class=\"code-number\">5</span>];<span class=\"code-keyword\">for</span>(n=<span class=\"code-number\">6</span>,r=<span class=\"code-number\">0</span>;r&lt;o;r++)i=a.getUint16(n),n+=<span class=\"code-number\">2</span>,s.sps.push(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(n,n+i))),n+=i;<span class=\"code-keyword\">for</span>(t=e[n],n++,r=<span class=\"code-number\">0</span>;r&lt;t;r++)i=a.getUint16(n),n+=<span class=\"code-number\">2</span>,s.pps.push(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(n,n+i))),n+=i;<span class=\"code-keyword\">return</span> s},<span class=\"code-attr\">btrt</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength);<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">bufferSizeDB</span>:t.getUint32(<span class=\"code-number\">0</span>),<span class=\"code-attr\">maxBitrate</span>:t.getUint32(<span class=\"code-number\">4</span>),<span class=\"code-attr\">avgBitrate</span>:t.getUint32(<span class=\"code-number\">8</span>)}},<span class=\"code-attr\">esds</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">esId</span>:e[<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">7</span>],<span class=\"code-attr\">streamPriority</span>:<span class=\"code-number\">31</span>&amp;e[<span class=\"code-number\">8</span>],<span class=\"code-attr\">decoderConfig</span>:{<span class=\"code-attr\">objectProfileIndication</span>:e[<span class=\"code-number\">11</span>],<span class=\"code-attr\">streamType</span>:e[<span class=\"code-number\">12</span>]&gt;&gt;&gt;<span class=\"code-number\">2</span>&amp;<span class=\"code-number\">63</span>,<span class=\"code-attr\">bufferSize</span>:e[<span class=\"code-number\">13</span>]&lt;&lt;<span class=\"code-number\">16</span>|e[<span class=\"code-number\">14</span>]&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">15</span>],<span class=\"code-attr\">maxBitrate</span>:e[<span class=\"code-number\">16</span>]&lt;&lt;<span class=\"code-number\">24</span>|e[<span class=\"code-number\">17</span>]&lt;&lt;<span class=\"code-number\">16</span>|e[<span class=\"code-number\">18</span>]&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">19</span>],<span class=\"code-attr\">avgBitrate</span>:e[<span class=\"code-number\">20</span>]&lt;&lt;<span class=\"code-number\">24</span>|e[<span class=\"code-number\">21</span>]&lt;&lt;<span class=\"code-number\">16</span>|e[<span class=\"code-number\">22</span>]&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">23</span>],<span class=\"code-attr\">decoderConfigDescriptor</span>:{<span class=\"code-attr\">tag</span>:e[<span class=\"code-number\">24</span>],<span class=\"code-attr\">length</span>:e[<span class=\"code-number\">25</span>],<span class=\"code-attr\">audioObjectType</span>:e[<span class=\"code-number\">26</span>]&gt;&gt;&gt;<span class=\"code-number\">3</span>&amp;<span class=\"code-number\">31</span>,<span class=\"code-attr\">samplingFrequencyIndex</span>:(<span class=\"code-number\">7</span>&amp;e[<span class=\"code-number\">26</span>])&lt;&lt;<span class=\"code-number\">1</span>|e[<span class=\"code-number\">27</span>]&gt;&gt;&gt;<span class=\"code-number\">7</span>&amp;<span class=\"code-number\">1</span>,<span class=\"code-attr\">channelConfiguration</span>:e[<span class=\"code-number\">27</span>]&gt;&gt;&gt;<span class=\"code-number\">3</span>&amp;<span class=\"code-number\">15</span>}}}},<span class=\"code-attr\">ftyp</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength),i={<span class=\"code-attr\">majorBrand</span>:$t(e.subarray(<span class=\"code-number\">0</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">minorVersion</span>:t.getUint32(<span class=\"code-number\">4</span>),<span class=\"code-attr\">compatibleBrands</span>:[]},n=<span class=\"code-number\">8</span>;n&lt;e.byteLength;)i.compatibleBrands.push($t(e.subarray(n,n+<span class=\"code-number\">4</span>))),n+=<span class=\"code-number\">4</span>;<span class=\"code-keyword\">return</span> i},<span class=\"code-attr\">dinf</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">boxes</span>:Rt(e)}},<span class=\"code-attr\">dref</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">dataReferences</span>:Rt(e.subarray(<span class=\"code-number\">8</span>))}},<span class=\"code-attr\">hdlr</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t={<span class=\"code-attr\">version</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength).getUint8(<span class=\"code-number\">0</span>),<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">handlerType</span>:$t(e.subarray(<span class=\"code-number\">8</span>,<span class=\"code-number\">12</span>)),<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"\"</span>},i=<span class=\"code-number\">8</span>;<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">24</span>;i&lt;e.byteLength;i++){<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===e[i]){i++;<span class=\"code-keyword\">break</span>}t.name+=<span class=\"code-built_in\">String</span>.fromCharCode(e[i])}<span class=\"code-keyword\">return</span> t.name=<span class=\"code-built_in\">decodeURIComponent</span>(<span class=\"code-built_in\">escape</span>(t.name)),t},<span class=\"code-attr\">mdat</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">byteLength</span>:e.byteLength,<span class=\"code-attr\">nals</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength),r=[];<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">0</span>;t+<span class=\"code-number\">4</span>&lt;e.length;t+=i)<span class=\"code-keyword\">if</span>(i=n.getUint32(t),t+=<span class=\"code-number\">4</span>,i&lt;=<span class=\"code-number\">0</span>)r.push(<span class=\"code-string\">\"&lt;span style='color:red;'&gt;MALFORMED DATA&lt;/span&gt;\"</span>);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">switch</span>(<span class=\"code-number\">31</span>&amp;e[t]){<span class=\"code-keyword\">case</span> <span class=\"code-number\">1</span>:r.push(<span class=\"code-string\">\"slice_layer_without_partitioning_rbsp\"</span>);<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">5</span>:r.push(<span class=\"code-string\">\"slice_layer_without_partitioning_rbsp_idr\"</span>);<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">6</span>:r.push(<span class=\"code-string\">\"sei_rbsp\"</span>);<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">7</span>:r.push(<span class=\"code-string\">\"seq_parameter_set_rbsp\"</span>);<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">8</span>:r.push(<span class=\"code-string\">\"pic_parameter_set_rbsp\"</span>);<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">9</span>:r.push(<span class=\"code-string\">\"access_unit_delimiter_rbsp\"</span>);<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">default</span>:r.push(<span class=\"code-string\">\"UNKNOWN NAL - \"</span>+e[t]&amp;<span class=\"code-number\">31</span>)}<span class=\"code-keyword\">return</span> r}(e)}},<span class=\"code-attr\">mdhd</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength),n=<span class=\"code-number\">4</span>,r={<span class=\"code-attr\">version</span>:i.getUint8(<span class=\"code-number\">0</span>),<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">language</span>:<span class=\"code-string\">\"\"</span>};<span class=\"code-keyword\">return</span> <span class=\"code-number\">1</span>===r.version?(n+=<span class=\"code-number\">4</span>,r.creationTime=Yt(i.getUint32(n)),n+=<span class=\"code-number\">8</span>,r.modificationTime=Yt(i.getUint32(n)),n+=<span class=\"code-number\">4</span>,r.timescale=i.getUint32(n),n+=<span class=\"code-number\">8</span>,r.duration=i.getUint32(n)):(r.creationTime=Yt(i.getUint32(n)),n+=<span class=\"code-number\">4</span>,r.modificationTime=Yt(i.getUint32(n)),n+=<span class=\"code-number\">4</span>,r.timescale=i.getUint32(n),n+=<span class=\"code-number\">4</span>,r.duration=i.getUint32(n)),n+=<span class=\"code-number\">4</span>,t=i.getUint16(n),r.language+=<span class=\"code-built_in\">String</span>.fromCharCode(<span class=\"code-number\">96</span>+(t&gt;&gt;<span class=\"code-number\">10</span>)),r.language+=<span class=\"code-built_in\">String</span>.fromCharCode(<span class=\"code-number\">96</span>+((<span class=\"code-number\">992</span>&amp;t)&gt;&gt;<span class=\"code-number\">5</span>)),r.language+=<span class=\"code-built_in\">String</span>.fromCharCode(<span class=\"code-number\">96</span>+(<span class=\"code-number\">31</span>&amp;t)),r},<span class=\"code-attr\">mdia</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">boxes</span>:Rt(e)}},<span class=\"code-attr\">mfhd</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">sequenceNumber</span>:e[<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">24</span>|e[<span class=\"code-number\">5</span>]&lt;&lt;<span class=\"code-number\">16</span>|e[<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">7</span>]}},<span class=\"code-attr\">minf</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">boxes</span>:Rt(e)}},<span class=\"code-attr\">mp4a</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength),i={<span class=\"code-attr\">dataReferenceIndex</span>:t.getUint16(<span class=\"code-number\">6</span>),<span class=\"code-attr\">channelcount</span>:t.getUint16(<span class=\"code-number\">16</span>),<span class=\"code-attr\">samplesize</span>:t.getUint16(<span class=\"code-number\">18</span>),<span class=\"code-attr\">samplerate</span>:t.getUint16(<span class=\"code-number\">24</span>)+t.getUint16(<span class=\"code-number\">26</span>)/<span class=\"code-number\">65536</span>};<span class=\"code-keyword\">return</span> e.byteLength&gt;<span class=\"code-number\">28</span>&amp;&amp;(i.streamDescriptor=Rt(e.subarray(<span class=\"code-number\">28</span>))[<span class=\"code-number\">0</span>]),i},<span class=\"code-attr\">moof</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">boxes</span>:Rt(e)}},<span class=\"code-attr\">moov</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">boxes</span>:Rt(e)}},<span class=\"code-attr\">mvex</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">boxes</span>:Rt(e)}},<span class=\"code-attr\">mvhd</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength),i=<span class=\"code-number\">4</span>,n={<span class=\"code-attr\">version</span>:t.getUint8(<span class=\"code-number\">0</span>),<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>))};<span class=\"code-keyword\">return</span> <span class=\"code-number\">1</span>===n.version?(i+=<span class=\"code-number\">4</span>,n.creationTime=Yt(t.getUint32(i)),i+=<span class=\"code-number\">8</span>,n.modificationTime=Yt(t.getUint32(i)),i+=<span class=\"code-number\">4</span>,n.timescale=t.getUint32(i),i+=<span class=\"code-number\">8</span>,n.duration=t.getUint32(i)):(n.creationTime=Yt(t.getUint32(i)),i+=<span class=\"code-number\">4</span>,n.modificationTime=Yt(t.getUint32(i)),i+=<span class=\"code-number\">4</span>,n.timescale=t.getUint32(i),i+=<span class=\"code-number\">4</span>,n.duration=t.getUint32(i)),i+=<span class=\"code-number\">4</span>,n.rate=t.getUint16(i)+t.getUint16(i+<span class=\"code-number\">2</span>)/<span class=\"code-number\">16</span>,i+=<span class=\"code-number\">4</span>,n.volume=t.getUint8(i)+t.getUint8(i+<span class=\"code-number\">1</span>)/<span class=\"code-number\">8</span>,i+=<span class=\"code-number\">2</span>,i+=<span class=\"code-number\">2</span>,i+=<span class=\"code-number\">8</span>,n.matrix=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>(e.subarray(i,i+<span class=\"code-number\">36</span>)),i+=<span class=\"code-number\">36</span>,i+=<span class=\"code-number\">24</span>,n.nextTrackId=t.getUint32(i),n},<span class=\"code-attr\">pdin</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength);<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">version</span>:t.getUint8(<span class=\"code-number\">0</span>),<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">rate</span>:t.getUint32(<span class=\"code-number\">4</span>),<span class=\"code-attr\">initialDelay</span>:t.getUint32(<span class=\"code-number\">8</span>)}},<span class=\"code-attr\">sdtp</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i={<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">samples</span>:[]};<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">4</span>;t&lt;e.byteLength;t++)i.samples.push({<span class=\"code-attr\">dependsOn</span>:(<span class=\"code-number\">48</span>&amp;e[t])&gt;&gt;<span class=\"code-number\">4</span>,<span class=\"code-attr\">isDependedOn</span>:(<span class=\"code-number\">12</span>&amp;e[t])&gt;&gt;<span class=\"code-number\">2</span>,<span class=\"code-attr\">hasRedundancy</span>:<span class=\"code-number\">3</span>&amp;e[t]});<span class=\"code-keyword\">return</span> i},<span class=\"code-attr\">sidx</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength),n={<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">references</span>:[],<span class=\"code-attr\">referenceId</span>:i.getUint32(<span class=\"code-number\">4</span>),<span class=\"code-attr\">timescale</span>:i.getUint32(<span class=\"code-number\">8</span>),<span class=\"code-attr\">earliestPresentationTime</span>:i.getUint32(<span class=\"code-number\">12</span>),<span class=\"code-attr\">firstOffset</span>:i.getUint32(<span class=\"code-number\">16</span>)},r=i.getUint16(<span class=\"code-number\">22</span>);<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">24</span>;r;t+=<span class=\"code-number\">12</span>,r--)n.references.push({<span class=\"code-attr\">referenceType</span>:(<span class=\"code-number\">128</span>&amp;e[t])&gt;&gt;&gt;<span class=\"code-number\">7</span>,<span class=\"code-attr\">referencedSize</span>:<span class=\"code-number\">2147483647</span>&amp;i.getUint32(t),<span class=\"code-attr\">subsegmentDuration</span>:i.getUint32(t+<span class=\"code-number\">4</span>),<span class=\"code-attr\">startsWithSap</span>:!!(<span class=\"code-number\">128</span>&amp;e[t+<span class=\"code-number\">8</span>]),<span class=\"code-attr\">sapType</span>:(<span class=\"code-number\">112</span>&amp;e[t+<span class=\"code-number\">8</span>])&gt;&gt;&gt;<span class=\"code-number\">4</span>,<span class=\"code-attr\">sapDeltaTime</span>:<span class=\"code-number\">268435455</span>&amp;i.getUint32(t+<span class=\"code-number\">8</span>)});<span class=\"code-keyword\">return</span> n},<span class=\"code-attr\">smhd</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">balance</span>:e[<span class=\"code-number\">4</span>]+e[<span class=\"code-number\">5</span>]/<span class=\"code-number\">256</span>}},<span class=\"code-attr\">stbl</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">boxes</span>:Rt(e)}},<span class=\"code-attr\">stco</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength),n={<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">chunkOffsets</span>:[]},r=i.getUint32(<span class=\"code-number\">4</span>);<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">8</span>;r;t+=<span class=\"code-number\">4</span>,r--)n.chunkOffsets.push(i.getUint32(t));<span class=\"code-keyword\">return</span> n},<span class=\"code-attr\">stsc</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength),n=i.getUint32(<span class=\"code-number\">4</span>),r={<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">sampleToChunks</span>:[]};<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">8</span>;n;t+=<span class=\"code-number\">12</span>,n--)r.sampleToChunks.push({<span class=\"code-attr\">firstChunk</span>:i.getUint32(t),<span class=\"code-attr\">samplesPerChunk</span>:i.getUint32(t+<span class=\"code-number\">4</span>),<span class=\"code-attr\">sampleDescriptionIndex</span>:i.getUint32(t+<span class=\"code-number\">8</span>)});<span class=\"code-keyword\">return</span> r},<span class=\"code-attr\">stsd</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">sampleDescriptions</span>:Rt(e.subarray(<span class=\"code-number\">8</span>))}},<span class=\"code-attr\">stsz</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength),n={<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">sampleSize</span>:i.getUint32(<span class=\"code-number\">4</span>),<span class=\"code-attr\">entries</span>:[]};<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">12</span>;t&lt;e.byteLength;t+=<span class=\"code-number\">4</span>)n.entries.push(i.getUint32(t));<span class=\"code-keyword\">return</span> n},<span class=\"code-attr\">stts</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength),n={<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">timeToSamples</span>:[]},r=i.getUint32(<span class=\"code-number\">4</span>);<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">8</span>;r;t+=<span class=\"code-number\">8</span>,r--)n.timeToSamples.push({<span class=\"code-attr\">sampleCount</span>:i.getUint32(t),<span class=\"code-attr\">sampleDelta</span>:i.getUint32(t+<span class=\"code-number\">4</span>)});<span class=\"code-keyword\">return</span> n},<span class=\"code-attr\">styp</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Qt.ftyp(e)},<span class=\"code-attr\">tfdt</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t={<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">baseMediaDecodeTime</span>:Xt(e[<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">24</span>|e[<span class=\"code-number\">5</span>]&lt;&lt;<span class=\"code-number\">16</span>|e[<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">7</span>])};<span class=\"code-keyword\">return</span> <span class=\"code-number\">1</span>===t.version&amp;&amp;(t.baseMediaDecodeTime*=<span class=\"code-built_in\">Math</span>.pow(<span class=\"code-number\">2</span>,<span class=\"code-number\">32</span>),t.baseMediaDecodeTime+=Xt(e[<span class=\"code-number\">8</span>]&lt;&lt;<span class=\"code-number\">24</span>|e[<span class=\"code-number\">9</span>]&lt;&lt;<span class=\"code-number\">16</span>|e[<span class=\"code-number\">10</span>]&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">11</span>])),t},<span class=\"code-attr\">tfhd</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength),n={<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">trackId</span>:i.getUint32(<span class=\"code-number\">4</span>)},r=<span class=\"code-number\">1</span>&amp;n.flags[<span class=\"code-number\">2</span>],a=<span class=\"code-number\">2</span>&amp;n.flags[<span class=\"code-number\">2</span>],s=<span class=\"code-number\">8</span>&amp;n.flags[<span class=\"code-number\">2</span>],o=<span class=\"code-number\">16</span>&amp;n.flags[<span class=\"code-number\">2</span>],u=<span class=\"code-number\">32</span>&amp;n.flags[<span class=\"code-number\">2</span>],d=<span class=\"code-number\">65536</span>&amp;n.flags[<span class=\"code-number\">0</span>],l=<span class=\"code-number\">131072</span>&amp;n.flags[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">return</span> t=<span class=\"code-number\">8</span>,r&amp;&amp;(t+=<span class=\"code-number\">4</span>,n.baseDataOffset=i.getUint32(<span class=\"code-number\">12</span>),t+=<span class=\"code-number\">4</span>),a&amp;&amp;(n.sampleDescriptionIndex=i.getUint32(t),t+=<span class=\"code-number\">4</span>),s&amp;&amp;(n.defaultSampleDuration=i.getUint32(t),t+=<span class=\"code-number\">4</span>),o&amp;&amp;(n.defaultSampleSize=i.getUint32(t),t+=<span class=\"code-number\">4</span>),u&amp;&amp;(n.defaultSampleFlags=i.getUint32(t)),d&amp;&amp;(n.durationIsEmpty=!<span class=\"code-number\">0</span>),!r&amp;&amp;l&amp;&amp;(n.baseDataOffsetIsMoof=!<span class=\"code-number\">0</span>),n},<span class=\"code-attr\">tkhd</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength),i=<span class=\"code-number\">4</span>,n={<span class=\"code-attr\">version</span>:t.getUint8(<span class=\"code-number\">0</span>),<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>))};<span class=\"code-keyword\">return</span> <span class=\"code-number\">1</span>===n.version?(i+=<span class=\"code-number\">4</span>,n.creationTime=Yt(t.getUint32(i)),i+=<span class=\"code-number\">8</span>,n.modificationTime=Yt(t.getUint32(i)),i+=<span class=\"code-number\">4</span>,n.trackId=t.getUint32(i),i+=<span class=\"code-number\">4</span>,i+=<span class=\"code-number\">8</span>,n.duration=t.getUint32(i)):(n.creationTime=Yt(t.getUint32(i)),i+=<span class=\"code-number\">4</span>,n.modificationTime=Yt(t.getUint32(i)),i+=<span class=\"code-number\">4</span>,n.trackId=t.getUint32(i),i+=<span class=\"code-number\">4</span>,i+=<span class=\"code-number\">4</span>,n.duration=t.getUint32(i)),i+=<span class=\"code-number\">4</span>,i+=<span class=\"code-number\">8</span>,n.layer=t.getUint16(i),i+=<span class=\"code-number\">2</span>,n.alternateGroup=t.getUint16(i),i+=<span class=\"code-number\">2</span>,n.volume=t.getUint8(i)+t.getUint8(i+<span class=\"code-number\">1</span>)/<span class=\"code-number\">8</span>,i+=<span class=\"code-number\">2</span>,i+=<span class=\"code-number\">2</span>,n.matrix=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>(e.subarray(i,i+<span class=\"code-number\">36</span>)),i+=<span class=\"code-number\">36</span>,n.width=t.getUint16(i)+t.getUint16(i+<span class=\"code-number\">2</span>)/<span class=\"code-number\">16</span>,i+=<span class=\"code-number\">4</span>,n.height=t.getUint16(i)+t.getUint16(i+<span class=\"code-number\">2</span>)/<span class=\"code-number\">16</span>,n},<span class=\"code-attr\">traf</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">boxes</span>:Rt(e)}},<span class=\"code-attr\">trak</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">boxes</span>:Rt(e)}},<span class=\"code-attr\">trex</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength);<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">trackId</span>:t.getUint32(<span class=\"code-number\">4</span>),<span class=\"code-attr\">defaultSampleDescriptionIndex</span>:t.getUint32(<span class=\"code-number\">8</span>),<span class=\"code-attr\">defaultSampleDuration</span>:t.getUint32(<span class=\"code-number\">12</span>),<span class=\"code-attr\">defaultSampleSize</span>:t.getUint32(<span class=\"code-number\">16</span>),<span class=\"code-attr\">sampleDependsOn</span>:<span class=\"code-number\">3</span>&amp;e[<span class=\"code-number\">20</span>],<span class=\"code-attr\">sampleIsDependedOn</span>:(<span class=\"code-number\">192</span>&amp;e[<span class=\"code-number\">21</span>])&gt;&gt;<span class=\"code-number\">6</span>,<span class=\"code-attr\">sampleHasRedundancy</span>:(<span class=\"code-number\">48</span>&amp;e[<span class=\"code-number\">21</span>])&gt;&gt;<span class=\"code-number\">4</span>,<span class=\"code-attr\">samplePaddingValue</span>:(<span class=\"code-number\">14</span>&amp;e[<span class=\"code-number\">21</span>])&gt;&gt;<span class=\"code-number\">1</span>,<span class=\"code-attr\">sampleIsDifferenceSample</span>:!!(<span class=\"code-number\">1</span>&amp;e[<span class=\"code-number\">21</span>]),<span class=\"code-attr\">sampleDegradationPriority</span>:t.getUint16(<span class=\"code-number\">22</span>)}},<span class=\"code-attr\">trun</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i={<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">samples</span>:[]},n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength),r=<span class=\"code-number\">1</span>&amp;i.flags[<span class=\"code-number\">2</span>],a=<span class=\"code-number\">4</span>&amp;i.flags[<span class=\"code-number\">2</span>],s=<span class=\"code-number\">1</span>&amp;i.flags[<span class=\"code-number\">1</span>],o=<span class=\"code-number\">2</span>&amp;i.flags[<span class=\"code-number\">1</span>],u=<span class=\"code-number\">4</span>&amp;i.flags[<span class=\"code-number\">1</span>],d=<span class=\"code-number\">8</span>&amp;i.flags[<span class=\"code-number\">1</span>],l=n.getUint32(<span class=\"code-number\">4</span>),h=<span class=\"code-number\">8</span>;<span class=\"code-keyword\">for</span>(r&amp;&amp;(i.dataOffset=n.getInt32(h),h+=<span class=\"code-number\">4</span>),a&amp;&amp;l&amp;&amp;(t={<span class=\"code-attr\">flags</span>:Kt(e.subarray(h,h+<span class=\"code-number\">4</span>))},h+=<span class=\"code-number\">4</span>,s&amp;&amp;(t.duration=n.getUint32(h),h+=<span class=\"code-number\">4</span>),o&amp;&amp;(t.size=n.getUint32(h),h+=<span class=\"code-number\">4</span>),d&amp;&amp;(t.compositionTimeOffset=n.getUint32(h),h+=<span class=\"code-number\">4</span>),i.samples.push(t),l--);l--;)t={},s&amp;&amp;(t.duration=n.getUint32(h),h+=<span class=\"code-number\">4</span>),o&amp;&amp;(t.size=n.getUint32(h),h+=<span class=\"code-number\">4</span>),u&amp;&amp;(t.flags=Kt(e.subarray(h,h+<span class=\"code-number\">4</span>)),h+=<span class=\"code-number\">4</span>),d&amp;&amp;(t.compositionTimeOffset=n.getUint32(h),h+=<span class=\"code-number\">4</span>),i.samples.push(t);<span class=\"code-keyword\">return</span> i},<span class=\"code-string\">\"url \"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>))}},<span class=\"code-attr\">vmhd</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength);<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">graphicsmode</span>:t.getUint16(<span class=\"code-number\">4</span>),<span class=\"code-attr\">opcolor</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint16Array</span>([t.getUint16(<span class=\"code-number\">6</span>),t.getUint16(<span class=\"code-number\">8</span>),t.getUint16(<span class=\"code-number\">10</span>)])}}},Jt={<span class=\"code-attr\">inspect</span>:Rt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t,i,n,r,a,s=<span class=\"code-number\">0</span>,o=[],u=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">ArrayBuffer</span>(e.length),d=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(u),l=<span class=\"code-number\">0</span>;l&lt;e.length;++l)d[l]=e[l];<span class=\"code-keyword\">for</span>(t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(u);s&lt;e.byteLength;)i=t.getUint32(s),n=$t(e.subarray(s+<span class=\"code-number\">4</span>,s+<span class=\"code-number\">8</span>)),r=i&gt;<span class=\"code-number\">1</span>?s+i:e.byteLength,(a=(Qt[n]||<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">data</span>:e}})(e.subarray(s+<span class=\"code-number\">8</span>,r))).size=i,a.type=n,o.push(a),s=r;<span class=\"code-keyword\">return</span> o},<span class=\"code-attr\">textify</span>:xt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i;<span class=\"code-keyword\">return</span> t=t||<span class=\"code-number\">0</span>,i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Array</span>(<span class=\"code-number\">2</span>*t+<span class=\"code-number\">1</span>).join(<span class=\"code-string\">\" \"</span>),e.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,n</span>)</span>{<span class=\"code-keyword\">return</span> i+e.type+<span class=\"code-string\">\"\\n\"</span>+<span class=\"code-built_in\">Object</span>.keys(e).filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"type\"</span>!==e&amp;&amp;<span class=\"code-string\">\"boxes\"</span>!==e}).map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> n=i+<span class=\"code-string\">\"  \"</span>+t+<span class=\"code-string\">\": \"</span>,r=e[t];<span class=\"code-keyword\">if</span>(r <span class=\"code-keyword\">instanceof</span> <span class=\"code-built_in\">Uint8Array</span>||r <span class=\"code-keyword\">instanceof</span> <span class=\"code-built_in\">Uint32Array</span>){<span class=\"code-keyword\">var</span> a=<span class=\"code-built_in\">Array</span>.prototype.slice.call(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(r.buffer,r.byteOffset,r.byteLength)).map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\" \"</span>+(<span class=\"code-string\">\"00\"</span>+e.toString(<span class=\"code-number\">16</span>)).slice(<span class=\"code-number\">-2</span>)}).join(<span class=\"code-string\">\"\"</span>).match(<span class=\"code-regexp\">/.{1,24}/g</span>);<span class=\"code-keyword\">return</span> a?<span class=\"code-number\">1</span>===a.length?n+<span class=\"code-string\">\"&lt;\"</span>+a.join(<span class=\"code-string\">\"\"</span>).slice(<span class=\"code-number\">1</span>)+<span class=\"code-string\">\"&gt;\"</span>:n+<span class=\"code-string\">\"&lt;\\n\"</span>+a.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> i+<span class=\"code-string\">\"  \"</span>+e}).join(<span class=\"code-string\">\"\\n\"</span>)+<span class=\"code-string\">\"\\n\"</span>+i+<span class=\"code-string\">\"  &gt;\"</span>:n+<span class=\"code-string\">\"&lt;&gt;\"</span>}<span class=\"code-keyword\">return</span> n+<span class=\"code-built_in\">JSON</span>.stringify(r,<span class=\"code-literal\">null</span>,<span class=\"code-number\">2</span>).split(<span class=\"code-string\">\"\\n\"</span>).map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>===t?e:i+<span class=\"code-string\">\"  \"</span>+e}).join(<span class=\"code-string\">\"\\n\"</span>)}).join(<span class=\"code-string\">\"\\n\"</span>)+(e.boxes?<span class=\"code-string\">\"\\n\"</span>+xt(e.boxes,t+<span class=\"code-number\">1</span>):<span class=\"code-string\">\"\"</span>)}).join(<span class=\"code-string\">\"\\n\"</span>)},<span class=\"code-attr\">parseType</span>:$t,<span class=\"code-attr\">findBox</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a,s,o,u=[];<span class=\"code-keyword\">if</span>(!i.length)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">for</span>(n=<span class=\"code-number\">0</span>;n&lt;t.byteLength;)r=Xt(t[n]&lt;&lt;<span class=\"code-number\">24</span>|t[n+<span class=\"code-number\">1</span>]&lt;&lt;<span class=\"code-number\">16</span>|t[n+<span class=\"code-number\">2</span>]&lt;&lt;<span class=\"code-number\">8</span>|t[n+<span class=\"code-number\">3</span>]),a=$t(t.subarray(n+<span class=\"code-number\">4</span>,n+<span class=\"code-number\">8</span>)),s=r&gt;<span class=\"code-number\">1</span>?n+r:t.byteLength,a===i[<span class=\"code-number\">0</span>]&amp;&amp;(<span class=\"code-number\">1</span>===i.length?u.push(t.subarray(n+<span class=\"code-number\">8</span>,s)):(o=e(t.subarray(n+<span class=\"code-number\">8</span>,s),i.slice(<span class=\"code-number\">1</span>))).length&amp;&amp;(u=u.concat(o))),n=s;<span class=\"code-keyword\">return</span> u},<span class=\"code-attr\">parseTraf</span>:Qt.traf,<span class=\"code-attr\">parseTfdt</span>:Qt.tfdt,<span class=\"code-attr\">parseHdlr</span>:Qt.hdlr,<span class=\"code-attr\">parseTfhd</span>:Qt.tfhd,<span class=\"code-attr\">parseTrun</span>:Qt.trun,<span class=\"code-attr\">parseSidx</span>:Qt.sidx},Zt=t.EventTarget,ei=t.mergeOptions,ti=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,n=ei(e,{<span class=\"code-attr\">duration</span>:t.duration,<span class=\"code-attr\">minimumUpdatePeriod</span>:t.minimumUpdatePeriod}),r=<span class=\"code-number\">0</span>;r&lt;t.playlists.length;r++){<span class=\"code-keyword\">var</span> a=U(n,t.playlists[r]);a?n=a:i=!<span class=\"code-number\">0</span>}<span class=\"code-keyword\">return</span> E(t,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,r,a</span>)</span>{<span class=\"code-keyword\">if</span>(e.playlists&amp;&amp;e.playlists.length){<span class=\"code-keyword\">var</span> s=e.playlists[<span class=\"code-number\">0</span>].uri,o=U(n,e.playlists[<span class=\"code-number\">0</span>]);o&amp;&amp;((n=o).mediaGroups[t][r][a].playlists[<span class=\"code-number\">0</span>]=n.playlists[s],i=!<span class=\"code-number\">1</span>)}}),i?<span class=\"code-literal\">null</span>:n},ii=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.byterange.offset+e.byterange.length<span class=\"code-number\">-1</span>;<span class=\"code-keyword\">return</span> e.uri+<span class=\"code-string\">\"-\"</span>+e.byterange.offset+<span class=\"code-string\">\"-\"</span>+t},ni=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r={};<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a <span class=\"code-keyword\">in</span> e){<span class=\"code-keyword\">var</span> s=e[a].sidx;<span class=\"code-keyword\">if</span>(s){<span class=\"code-keyword\">var</span> o=ii(s);<span class=\"code-keyword\">if</span>(!t[o])<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">var</span> u=t[o].sidxInfo;i=u,n=s,(<span class=\"code-built_in\">Boolean</span>(!i.map&amp;&amp;!n.map)||<span class=\"code-built_in\">Boolean</span>(i.map&amp;&amp;n.map&amp;&amp;i.map.byterange.offset===n.map.byterange.offset&amp;&amp;i.map.byterange.length===n.map.byterange.length))&amp;&amp;i.uri===n.uri&amp;&amp;i.byterange.offset===n.byterange.offset&amp;&amp;i.byterange.length===n.byterange.length&amp;&amp;(r[o]=t[o])}}<span class=\"code-keyword\">return</span> r},ri=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i,n,r,a</span>)</span>{<span class=\"code-keyword\">var</span> s={<span class=\"code-attr\">uri</span>:l(r.handleManifestRedirects,e.resolvedUri),<span class=\"code-attr\">byterange</span>:e.byterange,<span class=\"code-attr\">playlist</span>:i};<span class=\"code-keyword\">return</span> n(t.mergeOptions(s,{<span class=\"code-attr\">responseType</span>:<span class=\"code-string\">\"arraybuffer\"</span>,<span class=\"code-attr\">headers</span>:Q(s)}),a)},ai=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-built_in\">arguments</span>.length&gt;<span class=\"code-number\">2</span>&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">2</span>]?<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">2</span>]:{},r=<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">3</span>];_(<span class=\"code-keyword\">this</span>,t);<span class=\"code-keyword\">var</span> a=T(<span class=\"code-keyword\">this</span>,(t.__proto__||<span class=\"code-built_in\">Object</span>.getPrototypeOf(t)).call(<span class=\"code-keyword\">this</span>)),s=n.withCredentials,o=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==s&amp;&amp;s,u=n.handleManifestRedirects,d=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==u&amp;&amp;u;<span class=\"code-keyword\">if</span>(a.hls_=i,a.withCredentials=o,a.handleManifestRedirects=d,!e)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"A non-empty playlist URL or playlist is required\"</span>);<span class=\"code-keyword\">return</span> a.on(<span class=\"code-string\">\"minimumUpdatePeriod\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{a.refreshXml_()}),a.on(<span class=\"code-string\">\"mediaupdatetimeout\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{a.refreshMedia_(a.media().uri)}),a.state=<span class=\"code-string\">\"HAVE_NOTHING\"</span>,a.loadedPlaylists_={},<span class=\"code-string\">\"string\"</span>==<span class=\"code-keyword\">typeof</span> e?(a.srcUrl=e,a.sidxMapping_={},T(a)):(a.setupChildLoader(r,e),a)}<span class=\"code-keyword\">return</span> b(t,Zt),v(t,[{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"setupChildLoader\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.masterPlaylistLoader_=e,<span class=\"code-keyword\">this</span>.childPlaylist_=t}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"dispose\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.stopRequest(),<span class=\"code-keyword\">this</span>.loadedPlaylists_={},u.clearTimeout(<span class=\"code-keyword\">this</span>.minimumUpdatePeriodTimeout_),u.clearTimeout(<span class=\"code-keyword\">this</span>.mediaRequest_),u.clearTimeout(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"hasPendingRequest\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.request||<span class=\"code-keyword\">this</span>.mediaRequest_}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"stopRequest\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.request){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.request;<span class=\"code-keyword\">this</span>.request=<span class=\"code-literal\">null</span>,e.onreadystatechange=<span class=\"code-literal\">null</span>,e.abort()}}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"sidxRequestFinished_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">a,s</span>)</span>{<span class=\"code-keyword\">if</span>(r.request){<span class=\"code-keyword\">if</span>(r.request=<span class=\"code-literal\">null</span>,a)<span class=\"code-keyword\">return</span> r.error={<span class=\"code-attr\">status</span>:s.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"DASH playlist request error at URL: \"</span>+e.uri,<span class=\"code-attr\">response</span>:s.response,<span class=\"code-attr\">code</span>:<span class=\"code-number\">2</span>},i&amp;&amp;(r.state=i),r.trigger(<span class=\"code-string\">\"error\"</span>),n(t,<span class=\"code-literal\">null</span>);<span class=\"code-keyword\">var</span> o=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(s.response),u=Jt.parseSidx(o.subarray(<span class=\"code-number\">8</span>));<span class=\"code-keyword\">return</span> n(t,u)}}}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"media\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.media_;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"HAVE_NOTHING\"</span>===<span class=\"code-keyword\">this</span>.state)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Cannot switch media playlist from \"</span>+<span class=\"code-keyword\">this</span>.state);<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.state;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"string\"</span>==<span class=\"code-keyword\">typeof</span> e){<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.master.playlists[e])<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Unknown playlist URI: \"</span>+e);e=<span class=\"code-keyword\">this</span>.master.playlists[e]}<span class=\"code-keyword\">var</span> n=!<span class=\"code-keyword\">this</span>.media_||e.uri!==<span class=\"code-keyword\">this</span>.media_.uri;<span class=\"code-keyword\">if</span>(n&amp;&amp;<span class=\"code-keyword\">this</span>.loadedPlaylists_[e.uri]&amp;&amp;<span class=\"code-keyword\">this</span>.loadedPlaylists_[e.uri].endList)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_METADATA\"</span>,<span class=\"code-keyword\">this</span>.media_=e,<span class=\"code-keyword\">void</span>(n&amp;&amp;(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediachanging\"</span>),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediachange\"</span>)));<span class=\"code-keyword\">if</span>(n)<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.media_&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediachanging\"</span>),e.sidx){<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">this</span>.masterPlaylistLoader_?(r=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master,a=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.sidxMapping_):(r=<span class=\"code-keyword\">this</span>.master,a=<span class=\"code-keyword\">this</span>.sidxMapping_);<span class=\"code-keyword\">var</span> s=ii(e.sidx);a[s]={<span class=\"code-attr\">sidxInfo</span>:e.sidx},<span class=\"code-keyword\">this</span>.request=ri(e.sidx,e,<span class=\"code-keyword\">this</span>.hls_.xhr,{<span class=\"code-attr\">handleManifestRedirects</span>:<span class=\"code-keyword\">this</span>.handleManifestRedirects},<span class=\"code-keyword\">this</span>.sidxRequestFinished_(e,r,i,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n,r</span>)</span>{<span class=\"code-keyword\">if</span>(!n||!r)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"failed to request sidx\"</span>);a[s].sidx=r,t.haveMetadata({<span class=\"code-attr\">startingState</span>:i,<span class=\"code-attr\">playlist</span>:n.playlists[e.uri]})}))}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.mediaRequest_=u.setTimeout(<span class=\"code-keyword\">this</span>.haveMetadata.bind(<span class=\"code-keyword\">this</span>,{<span class=\"code-attr\">startingState</span>:i,<span class=\"code-attr\">playlist</span>:e}),<span class=\"code-number\">0</span>)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"haveMetadata\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.startingState,i=e.playlist;<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_METADATA\"</span>,<span class=\"code-keyword\">this</span>.loadedPlaylists_[i.uri]=i,<span class=\"code-keyword\">this</span>.mediaRequest_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.refreshMedia_(i.uri),<span class=\"code-string\">\"HAVE_MASTER\"</span>===t?<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedmetadata\"</span>):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediachange\"</span>)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"pause\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.stopRequest(),u.clearTimeout(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout),u.clearTimeout(<span class=\"code-keyword\">this</span>.minimumUpdatePeriodTimeout_),<span class=\"code-string\">\"HAVE_NOTHING\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;(<span class=\"code-keyword\">this</span>.started=!<span class=\"code-number\">1</span>)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"load\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;u.clearTimeout(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout),u.clearTimeout(<span class=\"code-keyword\">this</span>.minimumUpdatePeriodTimeout_);<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.media();<span class=\"code-keyword\">if</span>(e){<span class=\"code-keyword\">var</span> n=i?i.targetDuration/<span class=\"code-number\">2</span>*<span class=\"code-number\">1e3</span>:<span class=\"code-number\">5e3</span>;<span class=\"code-keyword\">this</span>.mediaUpdateTimeout=u.setTimeout(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.load()},n)}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.started?<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedplaylist\"</span>):<span class=\"code-keyword\">this</span>.start()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"parseMasterXml\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=jt(<span class=\"code-keyword\">this</span>.masterXml_,{<span class=\"code-attr\">manifestUri</span>:<span class=\"code-keyword\">this</span>.srcUrl,<span class=\"code-attr\">clientOffset</span>:<span class=\"code-keyword\">this</span>.clientOffset_,<span class=\"code-attr\">sidxMapping</span>:<span class=\"code-keyword\">this</span>.sidxMapping_});e.uri=<span class=\"code-keyword\">this</span>.srcUrl;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>;t&lt;e.playlists.length;t++){<span class=\"code-keyword\">var</span> i=<span class=\"code-string\">\"placeholder-uri-\"</span>+t;e.playlists[t].uri=i,e.playlists[i]=e.playlists[t]}<span class=\"code-keyword\">return</span> E(e,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i,n,r</span>)</span>{<span class=\"code-keyword\">if</span>(t.playlists&amp;&amp;t.playlists.length){<span class=\"code-keyword\">var</span> a=<span class=\"code-string\">\"placeholder-uri-\"</span>+i+<span class=\"code-string\">\"-\"</span>+n+<span class=\"code-string\">\"-\"</span>+r;t.playlists[<span class=\"code-number\">0</span>].uri=a,e.playlists[a]=t.playlists[<span class=\"code-number\">0</span>]}}),I(e),A(e),e}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"start\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.started=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.masterPlaylistLoader_?<span class=\"code-keyword\">this</span>.mediaRequest_=u.setTimeout(<span class=\"code-keyword\">this</span>.haveMaster_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-number\">0</span>):<span class=\"code-keyword\">this</span>.request=<span class=\"code-keyword\">this</span>.hls_.xhr({<span class=\"code-attr\">uri</span>:<span class=\"code-keyword\">this</span>.srcUrl,<span class=\"code-attr\">withCredentials</span>:<span class=\"code-keyword\">this</span>.withCredentials},<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">if</span>(e.request){<span class=\"code-keyword\">if</span>(e.request=<span class=\"code-literal\">null</span>,t)<span class=\"code-keyword\">return</span> e.error={<span class=\"code-attr\">status</span>:i.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"DASH playlist request error at URL: \"</span>+e.srcUrl,<span class=\"code-attr\">responseText</span>:i.responseText,<span class=\"code-attr\">code</span>:<span class=\"code-number\">2</span>},<span class=\"code-string\">\"HAVE_NOTHING\"</span>===e.state&amp;&amp;(e.started=!<span class=\"code-number\">1</span>),e.trigger(<span class=\"code-string\">\"error\"</span>);e.masterXml_=i.responseText,i.responseHeaders&amp;&amp;i.responseHeaders.date?e.masterLoaded_=<span class=\"code-built_in\">Date</span>.parse(i.responseHeaders.date):e.masterLoaded_=<span class=\"code-built_in\">Date</span>.now(),e.srcUrl=l(e.handleManifestRedirects,e.srcUrl,i),e.syncClientServerClock_(e.onClientServerClockSync_.bind(e))}})}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"syncClientServerClock_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>,i=Vt(<span class=\"code-keyword\">this</span>.masterXml_);<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>===i?(<span class=\"code-keyword\">this</span>.clientOffset_=<span class=\"code-keyword\">this</span>.masterLoaded_-<span class=\"code-built_in\">Date</span>.now(),e()):<span class=\"code-string\">\"DIRECT\"</span>===i.method?(<span class=\"code-keyword\">this</span>.clientOffset_=i.value-<span class=\"code-built_in\">Date</span>.now(),e()):<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.request=<span class=\"code-keyword\">this</span>.hls_.xhr({<span class=\"code-attr\">uri</span>:d(<span class=\"code-keyword\">this</span>.srcUrl,i.value),<span class=\"code-attr\">method</span>:i.method,<span class=\"code-attr\">withCredentials</span>:<span class=\"code-keyword\">this</span>.withCredentials},<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n,r</span>)</span>{<span class=\"code-keyword\">if</span>(t.request){<span class=\"code-keyword\">if</span>(n)<span class=\"code-keyword\">return</span> t.clientOffset_=t.masterLoaded_-<span class=\"code-built_in\">Date</span>.now(),e();<span class=\"code-keyword\">var</span> a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;a=<span class=\"code-string\">\"HEAD\"</span>===i.method?r.responseHeaders&amp;&amp;r.responseHeaders.date?<span class=\"code-built_in\">Date</span>.parse(r.responseHeaders.date):t.masterLoaded_:<span class=\"code-built_in\">Date</span>.parse(r.responseText),t.clientOffset_=a-<span class=\"code-built_in\">Date</span>.now(),e()}}))}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"haveMaster_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_MASTER\"</span>,<span class=\"code-keyword\">this</span>.mediaRequest_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.masterPlaylistLoader_?<span class=\"code-keyword\">this</span>.media_||<span class=\"code-keyword\">this</span>.media(<span class=\"code-keyword\">this</span>.childPlaylist_):(<span class=\"code-keyword\">this</span>.master=<span class=\"code-keyword\">this</span>.parseMasterXml(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedplaylist\"</span>))}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"onClientServerClockSync_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.haveMaster_(),<span class=\"code-keyword\">this</span>.hasPendingRequest()||<span class=\"code-keyword\">this</span>.media_||<span class=\"code-keyword\">this</span>.media(<span class=\"code-keyword\">this</span>.master.playlists[<span class=\"code-number\">0</span>]),<span class=\"code-keyword\">this</span>.master&amp;&amp;<span class=\"code-keyword\">this</span>.master.minimumUpdatePeriod&amp;&amp;(<span class=\"code-keyword\">this</span>.minimumUpdatePeriodTimeout_=u.setTimeout(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"minimumUpdatePeriod\"</span>)},<span class=\"code-keyword\">this</span>.master.minimumUpdatePeriod))}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"refreshXml_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.request=<span class=\"code-keyword\">this</span>.hls_.xhr({<span class=\"code-attr\">uri</span>:<span class=\"code-keyword\">this</span>.srcUrl,<span class=\"code-attr\">withCredentials</span>:<span class=\"code-keyword\">this</span>.withCredentials},<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">if</span>(e.request){<span class=\"code-keyword\">if</span>(e.request=<span class=\"code-literal\">null</span>,t)<span class=\"code-keyword\">return</span> e.error={<span class=\"code-attr\">status</span>:i.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"DASH playlist request error at URL: \"</span>+e.srcUrl,<span class=\"code-attr\">responseText</span>:i.responseText,<span class=\"code-attr\">code</span>:<span class=\"code-number\">2</span>},<span class=\"code-string\">\"HAVE_NOTHING\"</span>===e.state&amp;&amp;(e.started=!<span class=\"code-number\">1</span>),e.trigger(<span class=\"code-string\">\"error\"</span>);e.masterXml_=i.responseText,e.sidxMapping_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">var</span> r=jt(e,{<span class=\"code-attr\">manifestUri</span>:t,<span class=\"code-attr\">clientOffset</span>:i}),a=ni(r.playlists,n);<span class=\"code-keyword\">return</span> E(r,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,r</span>)</span>{<span class=\"code-keyword\">if</span>(e.playlists&amp;&amp;e.playlists.length){<span class=\"code-keyword\">var</span> s=e.playlists;a=ei(a,ni(s,n))}}),a}(e.masterXml_,e.srcUrl,e.clientOffset_,e.sidxMapping_);<span class=\"code-keyword\">var</span> n=e.parseMasterXml(),r=ti(e.master,n),a=e.media().sidx;<span class=\"code-keyword\">if</span>(r)<span class=\"code-keyword\">if</span>(a){<span class=\"code-keyword\">var</span> s=ii(a);<span class=\"code-keyword\">if</span>(!e.sidxMapping_[s]){<span class=\"code-keyword\">var</span> o=e.media();e.request=ri(o.sidx,o,e.hls_.xhr,{<span class=\"code-attr\">handleManifestRedirects</span>:e.handleManifestRedirects},e.sidxRequestFinished_(o,n,e.state,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">if</span>(!t||!i)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"failed to request sidx on minimumUpdatePeriod\"</span>);e.sidxMapping_[s].sidx=i,e.minimumUpdatePeriodTimeout_=u.setTimeout(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"minimumUpdatePeriod\"</span>)},e.master.minimumUpdatePeriod),e.refreshMedia_(e.media().uri)}))}}<span class=\"code-keyword\">else</span> e.master=r;e.minimumUpdatePeriodTimeout_=u.setTimeout(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"minimumUpdatePeriod\"</span>)},e.master.minimumUpdatePeriod)}})}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"refreshMedia_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"refreshMedia_ must take a media uri\"</span>);<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">this</span>.masterPlaylistLoader_?(i=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master,n=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.parseMasterXml()):(i=<span class=\"code-keyword\">this</span>.master,n=<span class=\"code-keyword\">this</span>.parseMasterXml());<span class=\"code-keyword\">var</span> r=ti(i,n);r?(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_?<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master=r:<span class=\"code-keyword\">this</span>.master=r,<span class=\"code-keyword\">this</span>.media_=r.playlists[e]):(<span class=\"code-keyword\">this</span>.media_=n.playlists[e],<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"playlistunchanged\"</span>)),<span class=\"code-keyword\">this</span>.media().endList||(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout=u.setTimeout(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t.trigger(<span class=\"code-string\">\"mediaupdatetimeout\"</span>)},O(<span class=\"code-keyword\">this</span>.media(),!!r))),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedplaylist\"</span>)}}]),t}(),si=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t.log.debug?t.log.debug.bind(t,<span class=\"code-string\">\"VHS:\"</span>,e+<span class=\"code-string\">\" &gt;\"</span>):<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{}};<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">oi</span>(<span class=\"code-params\"></span>)</span>{}<span class=\"code-keyword\">var</span> ui,di,li,hi,ci,fi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i,n,r</span>)</span>{_(<span class=\"code-keyword\">this</span>,e),<span class=\"code-keyword\">this</span>.callbacks_=[],<span class=\"code-keyword\">this</span>.pendingCallback_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.timestampOffset_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.mediaSource=t,<span class=\"code-keyword\">this</span>.processedAppend_=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.type_=n,<span class=\"code-keyword\">this</span>.mimeType_=i,<span class=\"code-keyword\">this</span>.logger_=si(<span class=\"code-string\">\"SourceUpdater[\"</span>+n+<span class=\"code-string\">\"][\"</span>+i+<span class=\"code-string\">\"]\"</span>),<span class=\"code-string\">\"closed\"</span>===t.readyState?t.addEventListener(<span class=\"code-string\">\"sourceopen\"</span>,<span class=\"code-keyword\">this</span>.createSourceBuffer_.bind(<span class=\"code-keyword\">this</span>,i,r)):<span class=\"code-keyword\">this</span>.createSourceBuffer_(i,r)}<span class=\"code-keyword\">return</span> v(e,[{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"createSourceBuffer_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.sourceBuffer_=<span class=\"code-keyword\">this</span>.mediaSource.addSourceBuffer(e),<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"created SourceBuffer\"</span>),t&amp;&amp;(t.trigger(<span class=\"code-string\">\"sourcebufferadded\"</span>),<span class=\"code-keyword\">this</span>.mediaSource.sourceBuffers.length&lt;<span class=\"code-number\">2</span>)?t.on(<span class=\"code-string\">\"sourcebufferadded\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i.start_()}):<span class=\"code-keyword\">this</span>.start_()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"start_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.started_=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.onUpdateendCallback_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t=e.pendingCallback_;e.pendingCallback_=<span class=\"code-literal\">null</span>,e.sourceBuffer_.removing=!<span class=\"code-number\">1</span>,e.logger_(<span class=\"code-string\">\"buffered [\"</span>+Se(e.buffered())+<span class=\"code-string\">\"]\"</span>),t&amp;&amp;t(),e.runCallback_()},<span class=\"code-keyword\">this</span>.sourceBuffer_.addEventListener(<span class=\"code-string\">\"updateend\"</span>,<span class=\"code-keyword\">this</span>.onUpdateendCallback_),<span class=\"code-keyword\">this</span>.runCallback_()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"abort\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.processedAppend_&amp;&amp;<span class=\"code-keyword\">this</span>.queueCallback_(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t.sourceBuffer_.abort()},e)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"appendBuffer\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.processedAppend_=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.queueCallback_(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.videoSegmentTimingInfoCallback&amp;&amp;i.sourceBuffer_.addEventListener(<span class=\"code-string\">\"videoSegmentTimingInfo\"</span>,e.videoSegmentTimingInfoCallback),i.sourceBuffer_.appendBuffer(e.bytes)},<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.videoSegmentTimingInfoCallback&amp;&amp;i.sourceBuffer_.removeEventListener(<span class=\"code-string\">\"videoSegmentTimingInfo\"</span>,e.videoSegmentTimingInfoCallback),t()})}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"buffered\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.sourceBuffer_?<span class=\"code-keyword\">this</span>.sourceBuffer_.buffered:t.createTimeRanges()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"remove\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>,n=<span class=\"code-built_in\">arguments</span>.length&gt;<span class=\"code-number\">2</span>&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">2</span>]?<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">2</span>]:oi;<span class=\"code-keyword\">this</span>.processedAppend_&amp;&amp;<span class=\"code-keyword\">this</span>.queueCallback_(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i.logger_(<span class=\"code-string\">\"remove [\"</span>+e+<span class=\"code-string\">\" =&gt; \"</span>+t+<span class=\"code-string\">\"]\"</span>),i.sourceBuffer_.removing=!<span class=\"code-number\">0</span>,i.sourceBuffer_.remove(e,t)},n)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"updating\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span>!<span class=\"code-keyword\">this</span>.sourceBuffer_||<span class=\"code-keyword\">this</span>.sourceBuffer_.updating||!!<span class=\"code-keyword\">this</span>.pendingCallback_&amp;&amp;<span class=\"code-keyword\">this</span>.pendingCallback_!==oi}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"timestampOffset\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e&amp;&amp;(<span class=\"code-keyword\">this</span>.queueCallback_(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t.sourceBuffer_.timestampOffset=e,t.runCallback_()}),<span class=\"code-keyword\">this</span>.timestampOffset_=e),<span class=\"code-keyword\">this</span>.timestampOffset_}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"queueCallback_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.callbacks_.push([e.bind(<span class=\"code-keyword\">this</span>),t]),<span class=\"code-keyword\">this</span>.runCallback_()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"runCallback_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;!<span class=\"code-keyword\">this</span>.updating()&amp;&amp;<span class=\"code-keyword\">this</span>.callbacks_.length&amp;&amp;<span class=\"code-keyword\">this</span>.started_&amp;&amp;(e=<span class=\"code-keyword\">this</span>.callbacks_.shift(),<span class=\"code-keyword\">this</span>.pendingCallback_=e[<span class=\"code-number\">1</span>],e[<span class=\"code-number\">0</span>]())}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"dispose\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>,t=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\"></span>)</span>{e.sourceBuffer_&amp;&amp;<span class=\"code-string\">\"open\"</span>===e.mediaSource.readyState&amp;&amp;e.sourceBuffer_.abort(),e.sourceBuffer_.removeEventListener(<span class=\"code-string\">\"updateend\"</span>,t)};<span class=\"code-keyword\">this</span>.sourceBuffer_.removeEventListener(<span class=\"code-string\">\"updateend\"</span>,<span class=\"code-keyword\">this</span>.onUpdateendCallback_),<span class=\"code-keyword\">this</span>.sourceBuffer_.removing?<span class=\"code-keyword\">this</span>.sourceBuffer_.addEventListener(<span class=\"code-string\">\"updateend\"</span>,t):t()}}]),e}(),pi={<span class=\"code-attr\">GOAL_BUFFER_LENGTH</span>:<span class=\"code-number\">30</span>,<span class=\"code-attr\">MAX_GOAL_BUFFER_LENGTH</span>:<span class=\"code-number\">60</span>,<span class=\"code-attr\">GOAL_BUFFER_LENGTH_RATE</span>:<span class=\"code-number\">1</span>,<span class=\"code-attr\">INITIAL_BANDWIDTH</span>:<span class=\"code-number\">4194304</span>,<span class=\"code-attr\">BANDWIDTH_VARIANCE</span>:<span class=\"code-number\">1.2</span>,<span class=\"code-attr\">BUFFER_LOW_WATER_LINE</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">MAX_BUFFER_LOW_WATER_LINE</span>:<span class=\"code-number\">30</span>,<span class=\"code-attr\">BUFFER_LOW_WATER_LINE_RATE</span>:<span class=\"code-number\">1</span>},mi=Wt,gi=zt;ui=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Jt.findBox(e,[<span class=\"code-string\">\"moov\"</span>,<span class=\"code-string\">\"trak\"</span>]).reduce(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a,s;<span class=\"code-keyword\">return</span>(i=Jt.findBox(t,[<span class=\"code-string\">\"tkhd\"</span>])[<span class=\"code-number\">0</span>])?(n=i[<span class=\"code-number\">0</span>],a=mi(i[r=<span class=\"code-number\">0</span>===n?<span class=\"code-number\">12</span>:<span class=\"code-number\">20</span>]&lt;&lt;<span class=\"code-number\">24</span>|i[r+<span class=\"code-number\">1</span>]&lt;&lt;<span class=\"code-number\">16</span>|i[r+<span class=\"code-number\">2</span>]&lt;&lt;<span class=\"code-number\">8</span>|i[r+<span class=\"code-number\">3</span>]),(s=Jt.findBox(t,[<span class=\"code-string\">\"mdia\"</span>,<span class=\"code-string\">\"mdhd\"</span>])[<span class=\"code-number\">0</span>])?(r=<span class=\"code-number\">0</span>===(n=s[<span class=\"code-number\">0</span>])?<span class=\"code-number\">12</span>:<span class=\"code-number\">20</span>,e[a]=mi(s[r]&lt;&lt;<span class=\"code-number\">24</span>|s[r+<span class=\"code-number\">1</span>]&lt;&lt;<span class=\"code-number\">16</span>|s[r+<span class=\"code-number\">2</span>]&lt;&lt;<span class=\"code-number\">8</span>|s[r+<span class=\"code-number\">3</span>]),e):<span class=\"code-literal\">null</span>):<span class=\"code-literal\">null</span>},{})},di=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r;<span class=\"code-keyword\">return</span> i=Jt.findBox(t,[<span class=\"code-string\">\"moof\"</span>,<span class=\"code-string\">\"traf\"</span>]),n=[].concat.apply([],i.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span> Jt.findBox(t,[<span class=\"code-string\">\"tfhd\"</span>]).map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n,r;<span class=\"code-keyword\">return</span> n=mi(i[<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">24</span>|i[<span class=\"code-number\">5</span>]&lt;&lt;<span class=\"code-number\">16</span>|i[<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">8</span>|i[<span class=\"code-number\">7</span>]),r=e[n]||<span class=\"code-number\">9e4</span>,(Jt.findBox(t,[<span class=\"code-string\">\"tfdt\"</span>]).map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i;<span class=\"code-keyword\">return</span> t=e[<span class=\"code-number\">0</span>],i=mi(e[<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">24</span>|e[<span class=\"code-number\">5</span>]&lt;&lt;<span class=\"code-number\">16</span>|e[<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">7</span>]),<span class=\"code-number\">1</span>===t&amp;&amp;(i*=<span class=\"code-built_in\">Math</span>.pow(<span class=\"code-number\">2</span>,<span class=\"code-number\">32</span>),i+=mi(e[<span class=\"code-number\">8</span>]&lt;&lt;<span class=\"code-number\">24</span>|e[<span class=\"code-number\">9</span>]&lt;&lt;<span class=\"code-number\">16</span>|e[<span class=\"code-number\">10</span>]&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">11</span>])),i})[<span class=\"code-number\">0</span>]||<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>)/r})})),r=<span class=\"code-built_in\">Math</span>.min.apply(<span class=\"code-literal\">null</span>,n),<span class=\"code-built_in\">isFinite</span>(r)?r:<span class=\"code-number\">0</span>},li=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n=Jt.findBox(t,[<span class=\"code-string\">\"moof\"</span>,<span class=\"code-string\">\"traf\"</span>]),r=<span class=\"code-number\">0</span>,a=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(n&amp;&amp;n.length)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> s=Jt.parseTraf(n[<span class=\"code-number\">0</span>]),o=<span class=\"code-number\">0</span>;o&lt;s.boxes.length;o++)<span class=\"code-string\">\"tfhd\"</span>===s.boxes[o].type?i=s.boxes[o].trackId:<span class=\"code-string\">\"tfdt\"</span>===s.boxes[o].type?r=s.boxes[o].baseMediaDecodeTime:<span class=\"code-string\">\"trun\"</span>===s.boxes[o].type&amp;&amp;s.boxes[o].samples.length&amp;&amp;(a=s.boxes[o].samples[<span class=\"code-number\">0</span>].compositionTimeOffset||<span class=\"code-number\">0</span>);<span class=\"code-keyword\">return</span>(r+a)/(e[i]||<span class=\"code-number\">9e4</span>)},hi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=[];<span class=\"code-keyword\">return</span> Jt.findBox(e,[<span class=\"code-string\">\"moov\"</span>,<span class=\"code-string\">\"trak\"</span>]).forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=Jt.findBox(e,[<span class=\"code-string\">\"mdia\"</span>,<span class=\"code-string\">\"hdlr\"</span>]),n=Jt.findBox(e,[<span class=\"code-string\">\"tkhd\"</span>]);i.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">var</span> r,a,s=Jt.parseType(e.subarray(<span class=\"code-number\">8</span>,<span class=\"code-number\">12</span>)),o=n[i];<span class=\"code-string\">\"vide\"</span>===s&amp;&amp;(a=<span class=\"code-number\">0</span>===(r=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(o.buffer,o.byteOffset,o.byteLength)).getUint8(<span class=\"code-number\">0</span>)?r.getUint32(<span class=\"code-number\">12</span>):r.getUint32(<span class=\"code-number\">20</span>),t.push(a))})}),t},ci=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=[];<span class=\"code-keyword\">return</span> Jt.findBox(e,[<span class=\"code-string\">\"moov\"</span>,<span class=\"code-string\">\"trak\"</span>]).forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r={},a=Jt.findBox(e,[<span class=\"code-string\">\"tkhd\"</span>])[<span class=\"code-number\">0</span>];a&amp;&amp;(n=(i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(a.buffer,a.byteOffset,a.byteLength)).getUint8(<span class=\"code-number\">0</span>),r.id=<span class=\"code-number\">0</span>===n?i.getUint32(<span class=\"code-number\">12</span>):i.getUint32(<span class=\"code-number\">20</span>));<span class=\"code-keyword\">var</span> s=Jt.findBox(e,[<span class=\"code-string\">\"mdia\"</span>,<span class=\"code-string\">\"hdlr\"</span>])[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(s){<span class=\"code-keyword\">var</span> o=Jt.parseType(s.subarray(<span class=\"code-number\">8</span>,<span class=\"code-number\">12</span>));r.type=<span class=\"code-string\">\"vide\"</span>===o?<span class=\"code-string\">\"video\"</span>:<span class=\"code-string\">\"soun\"</span>===o?<span class=\"code-string\">\"audio\"</span>:o}<span class=\"code-keyword\">var</span> u=Jt.findBox(e,[<span class=\"code-string\">\"mdia\"</span>,<span class=\"code-string\">\"minf\"</span>,<span class=\"code-string\">\"stbl\"</span>,<span class=\"code-string\">\"stsd\"</span>])[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(u){<span class=\"code-keyword\">var</span> d=u.subarray(<span class=\"code-number\">8</span>);r.codec=Jt.parseType(d.subarray(<span class=\"code-number\">4</span>,<span class=\"code-number\">8</span>));<span class=\"code-keyword\">var</span> l,h=Jt.findBox(d,[r.codec])[<span class=\"code-number\">0</span>];h&amp;&amp;(<span class=\"code-regexp\">/^[a-z]vc[1-9]$/i</span>.test(r.codec)?(l=h.subarray(<span class=\"code-number\">78</span>),<span class=\"code-string\">\"avcC\"</span>===Jt.parseType(l.subarray(<span class=\"code-number\">4</span>,<span class=\"code-number\">8</span>))&amp;&amp;l.length&gt;<span class=\"code-number\">11</span>?(r.codec+=<span class=\"code-string\">\".\"</span>,r.codec+=gi(l[<span class=\"code-number\">9</span>]),r.codec+=gi(l[<span class=\"code-number\">10</span>]),r.codec+=gi(l[<span class=\"code-number\">11</span>])):r.codec=<span class=\"code-string\">\"avc1.4d400d\"</span>):<span class=\"code-regexp\">/^mp4[a,v]$/i</span>.test(r.codec)&amp;&amp;(l=h.subarray(<span class=\"code-number\">28</span>),<span class=\"code-string\">\"esds\"</span>===Jt.parseType(l.subarray(<span class=\"code-number\">4</span>,<span class=\"code-number\">8</span>))&amp;&amp;l.length&gt;<span class=\"code-number\">20</span>&amp;&amp;<span class=\"code-number\">0</span>!==l[<span class=\"code-number\">19</span>]?(r.codec+=<span class=\"code-string\">\".\"</span>+gi(l[<span class=\"code-number\">19</span>]),r.codec+=<span class=\"code-string\">\".\"</span>+gi(l[<span class=\"code-number\">20</span>]&gt;&gt;&gt;<span class=\"code-number\">2</span>&amp;<span class=\"code-number\">63</span>).replace(<span class=\"code-regexp\">/^0/</span>,<span class=\"code-string\">\"\"</span>)):r.codec=<span class=\"code-string\">\"mp4a.40.2\"</span>))}<span class=\"code-keyword\">var</span> c=Jt.findBox(e,[<span class=\"code-string\">\"mdia\"</span>,<span class=\"code-string\">\"mdhd\"</span>])[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(c&amp;&amp;a){<span class=\"code-keyword\">var</span> f=<span class=\"code-number\">0</span>===n?<span class=\"code-number\">12</span>:<span class=\"code-number\">20</span>;r.timescale=mi(c[f]&lt;&lt;<span class=\"code-number\">24</span>|c[f+<span class=\"code-number\">1</span>]&lt;&lt;<span class=\"code-number\">16</span>|c[f+<span class=\"code-number\">2</span>]&lt;&lt;<span class=\"code-number\">8</span>|c[f+<span class=\"code-number\">3</span>])}t.push(r)}),t};<span class=\"code-keyword\">var</span> yi={<span class=\"code-attr\">findBox</span>:Jt.findBox,<span class=\"code-attr\">parseType</span>:Jt.parseType,<span class=\"code-attr\">timescale</span>:ui,<span class=\"code-attr\">startTime</span>:di,<span class=\"code-attr\">compositionStartTime</span>:li,<span class=\"code-attr\">videoTrackIds</span>:hi,<span class=\"code-attr\">tracks</span>:ci},_i=<span class=\"code-number\">2</span>,vi=<span class=\"code-number\">-101</span>,bi=<span class=\"code-number\">-102</span>,Ti=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.abort()})},Si=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> t.timedout?{<span class=\"code-attr\">status</span>:t.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"HLS request timed-out at URL: \"</span>+t.uri,<span class=\"code-attr\">code</span>:vi,<span class=\"code-attr\">xhr</span>:t}:t.aborted?{<span class=\"code-attr\">status</span>:t.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"HLS request aborted at URL: \"</span>+t.uri,<span class=\"code-attr\">code</span>:bi,<span class=\"code-attr\">xhr</span>:t}:e?{<span class=\"code-attr\">status</span>:t.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"HLS request errored at URL: \"</span>+t.uri,<span class=\"code-attr\">code</span>:_i,<span class=\"code-attr\">xhr</span>:t}:<span class=\"code-literal\">null</span>},ki=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-number\">0</span>,r=!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">a,s</span>)</span>{<span class=\"code-keyword\">if</span>(!r)<span class=\"code-keyword\">return</span> a?(r=!<span class=\"code-number\">0</span>,Ti(e),i(a,s)):(n+=<span class=\"code-number\">1</span>)===e.length?(s.endOfAllRequests=<span class=\"code-built_in\">Date</span>.now(),s.encryptedBytes?<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{e.addEventListener(<span class=\"code-string\">\"message\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">n</span>(<span class=\"code-params\">r</span>)</span>{<span class=\"code-keyword\">if</span>(r.data.source===t.requestId){e.removeEventListener(<span class=\"code-string\">\"message\"</span>,n);<span class=\"code-keyword\">var</span> a=r.data.decrypted;<span class=\"code-keyword\">return</span> t.bytes=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(a.bytes,a.byteOffset,a.byteLength),i(<span class=\"code-literal\">null</span>,t)}});<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;n=t.key.bytes.slice?t.key.bytes.slice():<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>(<span class=\"code-built_in\">Array</span>.prototype.slice.call(t.key.bytes)),e.postMessage(ce({<span class=\"code-attr\">source</span>:t.requestId,<span class=\"code-attr\">encrypted</span>:t.encryptedBytes,<span class=\"code-attr\">key</span>:n,<span class=\"code-attr\">iv</span>:t.key.iv}),[t.encryptedBytes.buffer,n.buffer])}(t,s,i):i(<span class=\"code-literal\">null</span>,s)):<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>}},wi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-keyword\">var</span> r,a,s;<span class=\"code-keyword\">return</span> e.stats=t.mergeOptions(e.stats,(a=(r=n).target,(s={<span class=\"code-attr\">bandwidth</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>,<span class=\"code-attr\">bytesReceived</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">roundTripTime</span>:<span class=\"code-built_in\">Date</span>.now()-a.requestTime||<span class=\"code-number\">0</span>}).bytesReceived=r.loaded,s.bandwidth=<span class=\"code-built_in\">Math</span>.floor(s.bytesReceived/s.roundTripTime*<span class=\"code-number\">8</span>*<span class=\"code-number\">1e3</span>),s)),!e.stats.firstBytesReceivedAt&amp;&amp;e.stats.bytesReceived&amp;&amp;(e.stats.firstBytesReceivedAt=<span class=\"code-built_in\">Date</span>.now()),i(n,e)}},Li=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i,n,r,a,s,o</span>)</span>{<span class=\"code-keyword\">var</span> u=[],d=ki(u,n,o);<span class=\"code-keyword\">if</span>(a.key&amp;&amp;!a.key.bytes){<span class=\"code-keyword\">var</span> l=e(t.mergeOptions(i,{<span class=\"code-attr\">uri</span>:a.key.resolvedUri,<span class=\"code-attr\">responseType</span>:<span class=\"code-string\">\"arraybuffer\"</span>}),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i,n</span>)</span>{<span class=\"code-keyword\">var</span> r=n.response,a=Si(i,n);<span class=\"code-keyword\">if</span>(a)<span class=\"code-keyword\">return</span> t(a,e);<span class=\"code-keyword\">if</span>(<span class=\"code-number\">16</span>!==r.byteLength)<span class=\"code-keyword\">return</span> t({<span class=\"code-attr\">status</span>:n.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Invalid HLS key at URL: \"</span>+n.uri,<span class=\"code-attr\">code</span>:_i,<span class=\"code-attr\">xhr</span>:n},e);<span class=\"code-keyword\">var</span> s=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(r);<span class=\"code-keyword\">return</span> e.key.bytes=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>([s.getUint32(<span class=\"code-number\">0</span>),s.getUint32(<span class=\"code-number\">4</span>),s.getUint32(<span class=\"code-number\">8</span>),s.getUint32(<span class=\"code-number\">12</span>)]),t(<span class=\"code-literal\">null</span>,e)}}(a,d));u.push(l)}<span class=\"code-keyword\">if</span>(a.map&amp;&amp;!a.map.bytes){<span class=\"code-keyword\">var</span> h=e(t.mergeOptions(i,{<span class=\"code-attr\">uri</span>:a.map.resolvedUri,<span class=\"code-attr\">responseType</span>:<span class=\"code-string\">\"arraybuffer\"</span>,<span class=\"code-attr\">headers</span>:Q(a.map)}),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n,r</span>)</span>{<span class=\"code-keyword\">var</span> a=r.response,s=Si(n,r);<span class=\"code-keyword\">return</span> s?i(s,e):<span class=\"code-number\">0</span>===a.byteLength?i({<span class=\"code-attr\">status</span>:r.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Empty HLS segment content at URL: \"</span>+r.uri,<span class=\"code-attr\">code</span>:_i,<span class=\"code-attr\">xhr</span>:r},e):(e.map.bytes=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(r.response),t&amp;&amp;!t.isInitialized()&amp;&amp;t.init(),e.map.timescales=yi.timescale(e.map.bytes),e.map.videoTrackIds=yi.videoTrackIds(e.map.bytes),i(<span class=\"code-literal\">null</span>,e))}}(a,r,d));u.push(h)}<span class=\"code-keyword\">var</span> c=e(t.mergeOptions(i,{<span class=\"code-attr\">uri</span>:a.resolvedUri,<span class=\"code-attr\">responseType</span>:<span class=\"code-string\">\"arraybuffer\"</span>,<span class=\"code-attr\">headers</span>:Q(a)}),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n,r</span>)</span>{<span class=\"code-keyword\">var</span> a=r.response,s=Si(n,r),o=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> s?i(s,e):<span class=\"code-number\">0</span>===a.byteLength?i({<span class=\"code-attr\">status</span>:r.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Empty HLS segment content at URL: \"</span>+r.uri,<span class=\"code-attr\">code</span>:_i,<span class=\"code-attr\">xhr</span>:r},e):(e.stats=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">bandwidth</span>:e.bandwidth,<span class=\"code-attr\">bytesReceived</span>:e.bytesReceived||<span class=\"code-number\">0</span>,<span class=\"code-attr\">roundTripTime</span>:e.roundTripTime||<span class=\"code-number\">0</span>}}(r),e.key?e.encryptedBytes=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(r.response):e.bytes=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(r.response),t&amp;&amp;e.map&amp;&amp;e.map.bytes&amp;&amp;(t.isInitialized()||t.init(),(o=t.parse(e.bytes,e.map.videoTrackIds,e.map.timescales))&amp;&amp;o.captions&amp;&amp;(e.captionStreams=o.captionStreams,e.fmp4Captions=o.captions)),i(<span class=\"code-literal\">null</span>,e))}}(a,r,d));<span class=\"code-keyword\">return</span> c.addEventListener(<span class=\"code-string\">\"progress\"</span>,wi(a,s)),u.push(c),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> Ti(u)}},Ei=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i;<span class=\"code-keyword\">return</span> e&amp;&amp;(i=u.getComputedStyle(e))?i[t]:<span class=\"code-string\">\"\"</span>},Ui=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.slice();e.sort(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,n</span>)</span>{<span class=\"code-keyword\">var</span> r=t(e,n);<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>===r?i.indexOf(e)-i.indexOf(n):r})},Ii=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> e.attributes.BANDWIDTH&amp;&amp;(i=e.attributes.BANDWIDTH),i=i||u.Number.MAX_VALUE,t.attributes.BANDWIDTH&amp;&amp;(n=t.attributes.BANDWIDTH),i-(n=n||u.Number.MAX_VALUE)},Ai=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>,i={<span class=\"code-attr\">payloadType</span>:<span class=\"code-number\">-1</span>,<span class=\"code-attr\">payloadSize</span>:<span class=\"code-number\">0</span>},n=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">0</span>;t&lt;e.byteLength&amp;&amp;<span class=\"code-number\">128</span>!==e[t];){<span class=\"code-keyword\">for</span>(;<span class=\"code-number\">255</span>===e[t];)n+=<span class=\"code-number\">255</span>,t++;<span class=\"code-keyword\">for</span>(n+=e[t++];<span class=\"code-number\">255</span>===e[t];)r+=<span class=\"code-number\">255</span>,t++;<span class=\"code-keyword\">if</span>(r+=e[t++],!i.payload&amp;&amp;<span class=\"code-number\">4</span>===n){i.payloadType=n,i.payloadSize=r,i.payload=e.subarray(t,t+r);<span class=\"code-keyword\">break</span>}t+=r,n=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">0</span>}<span class=\"code-keyword\">return</span> i},Oi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">181</span>!==e.payload[<span class=\"code-number\">0</span>]?<span class=\"code-literal\">null</span>:<span class=\"code-number\">49</span>!=(e.payload[<span class=\"code-number\">1</span>]&lt;&lt;<span class=\"code-number\">8</span>|e.payload[<span class=\"code-number\">2</span>])?<span class=\"code-literal\">null</span>:<span class=\"code-string\">\"GA94\"</span>!==<span class=\"code-built_in\">String</span>.fromCharCode(e.payload[<span class=\"code-number\">3</span>],e.payload[<span class=\"code-number\">4</span>],e.payload[<span class=\"code-number\">5</span>],e.payload[<span class=\"code-number\">6</span>])?<span class=\"code-literal\">null</span>:<span class=\"code-number\">3</span>!==e.payload[<span class=\"code-number\">7</span>]?<span class=\"code-literal\">null</span>:e.payload.subarray(<span class=\"code-number\">8</span>,e.payload.length<span class=\"code-number\">-1</span>)},Ci=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a,s=[];<span class=\"code-keyword\">if</span>(!(<span class=\"code-number\">64</span>&amp;t[<span class=\"code-number\">0</span>]))<span class=\"code-keyword\">return</span> s;<span class=\"code-keyword\">for</span>(n=<span class=\"code-number\">31</span>&amp;t[<span class=\"code-number\">0</span>],i=<span class=\"code-number\">0</span>;i&lt;n;i++)a={<span class=\"code-attr\">type</span>:<span class=\"code-number\">3</span>&amp;t[<span class=\"code-number\">2</span>+(r=<span class=\"code-number\">3</span>*i)],<span class=\"code-attr\">pts</span>:e},<span class=\"code-number\">4</span>&amp;t[r+<span class=\"code-number\">2</span>]&amp;&amp;(a.ccData=t[r+<span class=\"code-number\">3</span>]&lt;&lt;<span class=\"code-number\">8</span>|t[r+<span class=\"code-number\">4</span>],s.push(a));<span class=\"code-keyword\">return</span> s},Pi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t,i,n=e.byteLength,r=[],a=<span class=\"code-number\">1</span>;a&lt;n<span class=\"code-number\">-2</span>;)<span class=\"code-number\">0</span>===e[a]&amp;&amp;<span class=\"code-number\">0</span>===e[a+<span class=\"code-number\">1</span>]&amp;&amp;<span class=\"code-number\">3</span>===e[a+<span class=\"code-number\">2</span>]?(r.push(a+<span class=\"code-number\">2</span>),a+=<span class=\"code-number\">2</span>):a++;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===r.length)<span class=\"code-keyword\">return</span> e;t=n-r.length,i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(t);<span class=\"code-keyword\">var</span> s=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(a=<span class=\"code-number\">0</span>;a&lt;t;s++,a++)s===r[<span class=\"code-number\">0</span>]&amp;&amp;(s++,r.shift()),i[a]=e[s];<span class=\"code-keyword\">return</span> i},Di=<span class=\"code-number\">4</span>,Ri=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.init=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e={};<span class=\"code-keyword\">this</span>.on=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{e[t]||(e[t]=[]),e[t]=e[t].concat(i)},<span class=\"code-keyword\">this</span>.off=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n;<span class=\"code-keyword\">return</span>!!e[t]&amp;&amp;(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,<span class=\"code-number\">1</span>),n&gt;<span class=\"code-number\">-1</span>)},<span class=\"code-keyword\">this</span>.trigger=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a;<span class=\"code-keyword\">if</span>(i=e[t])<span class=\"code-keyword\">if</span>(<span class=\"code-number\">2</span>===<span class=\"code-built_in\">arguments</span>.length)<span class=\"code-keyword\">for</span>(r=i.length,n=<span class=\"code-number\">0</span>;n&lt;r;++n)i[n].call(<span class=\"code-keyword\">this</span>,<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]);<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">for</span>(a=[],n=<span class=\"code-built_in\">arguments</span>.length,n=<span class=\"code-number\">1</span>;n&lt;<span class=\"code-built_in\">arguments</span>.length;++n)a.push(<span class=\"code-built_in\">arguments</span>[n]);<span class=\"code-keyword\">for</span>(r=i.length,n=<span class=\"code-number\">0</span>;n&lt;r;++n)i[n].apply(<span class=\"code-keyword\">this</span>,a)}},<span class=\"code-keyword\">this</span>.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e={}}}};Ri.prototype.pipe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.push(t)}),<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"done\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.flush(t)}),<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"partialdone\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.partialFlush(t)}),<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"endedtimeline\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.endTimeline(t)}),<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"reset\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.reset(t)}),e},Ri.prototype.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,e)},Ri.prototype.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>,e)},Ri.prototype.partialFlush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"partialdone\"</span>,e)},Ri.prototype.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>,e)},Ri.prototype.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>,e)};<span class=\"code-keyword\">var</span> xi=Ri,Mi=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\"></span>)</span>{e.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.captionPackets_=[],<span class=\"code-keyword\">this</span>.ccStreams_=[<span class=\"code-keyword\">new</span> Hi(<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>),<span class=\"code-keyword\">new</span> Hi(<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>),<span class=\"code-keyword\">new</span> Hi(<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>),<span class=\"code-keyword\">new</span> Hi(<span class=\"code-number\">1</span>,<span class=\"code-number\">1</span>)],<span class=\"code-keyword\">this</span>.reset(),<span class=\"code-keyword\">this</span>.ccStreams_.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"data\"</span>)),e.on(<span class=\"code-string\">\"partialdone\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"partialdone\"</span>)),e.on(<span class=\"code-string\">\"done\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"done\"</span>))},<span class=\"code-keyword\">this</span>)};(Mi.prototype=<span class=\"code-keyword\">new</span> xi).push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"sei_rbsp\"</span>===e.nalUnitType&amp;&amp;(t=Ai(e.escapedRBSP)).payloadType===Di&amp;&amp;(i=Oi(t)))<span class=\"code-keyword\">if</span>(e.dts&lt;<span class=\"code-keyword\">this</span>.latestDts_)<span class=\"code-keyword\">this</span>.ignoreNextEqualDts_=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(e.dts===<span class=\"code-keyword\">this</span>.latestDts_&amp;&amp;<span class=\"code-keyword\">this</span>.ignoreNextEqualDts_)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.numSameDts_--,<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.numSameDts_||(<span class=\"code-keyword\">this</span>.ignoreNextEqualDts_=!<span class=\"code-number\">1</span>));n=Ci(e.pts,i),<span class=\"code-keyword\">this</span>.captionPackets_=<span class=\"code-keyword\">this</span>.captionPackets_.concat(n),<span class=\"code-keyword\">this</span>.latestDts_!==e.dts&amp;&amp;(<span class=\"code-keyword\">this</span>.numSameDts_=<span class=\"code-number\">0</span>),<span class=\"code-keyword\">this</span>.numSameDts_++,<span class=\"code-keyword\">this</span>.latestDts_=e.dts}},Mi.prototype.flushCCStreams=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.ccStreams_.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"flush\"</span>===e?t.flush():t.partialFlush()},<span class=\"code-keyword\">this</span>)},Mi.prototype.flushStream=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.captionPackets_.length?(<span class=\"code-keyword\">this</span>.captionPackets_.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{e.presortIndex=t}),<span class=\"code-keyword\">this</span>.captionPackets_.sort(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),<span class=\"code-keyword\">this</span>.captionPackets_.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.type&lt;<span class=\"code-number\">2</span>&amp;&amp;<span class=\"code-keyword\">this</span>.dispatchCea608Packet(e)},<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.captionPackets_.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.flushCCStreams(e)):<span class=\"code-keyword\">this</span>.flushCCStreams(e)},Mi.prototype.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.flushStream(<span class=\"code-string\">\"flush\"</span>)},Mi.prototype.partialFlush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.flushStream(<span class=\"code-string\">\"partialFlush\"</span>)},Mi.prototype.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.latestDts_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.ignoreNextEqualDts_=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.numSameDts_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.activeCea608Channel_=[<span class=\"code-literal\">null</span>,<span class=\"code-literal\">null</span>],<span class=\"code-keyword\">this</span>.ccStreams_.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.reset()})},Mi.prototype.dispatchCea608Packet=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.setsTextOrXDSActive(e)?<span class=\"code-keyword\">this</span>.activeCea608Channel_[e.type]=<span class=\"code-literal\">null</span>:<span class=\"code-keyword\">this</span>.setsChannel1Active(e)?<span class=\"code-keyword\">this</span>.activeCea608Channel_[e.type]=<span class=\"code-number\">0</span>:<span class=\"code-keyword\">this</span>.setsChannel2Active(e)&amp;&amp;(<span class=\"code-keyword\">this</span>.activeCea608Channel_[e.type]=<span class=\"code-number\">1</span>),<span class=\"code-literal\">null</span>!==<span class=\"code-keyword\">this</span>.activeCea608Channel_[e.type]&amp;&amp;<span class=\"code-keyword\">this</span>.ccStreams_[(e.type&lt;&lt;<span class=\"code-number\">1</span>)+<span class=\"code-keyword\">this</span>.activeCea608Channel_[e.type]].push(e)},Mi.prototype.setsChannel1Active=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">4096</span>==(<span class=\"code-number\">30720</span>&amp;e.ccData)},Mi.prototype.setsChannel2Active=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">6144</span>==(<span class=\"code-number\">30720</span>&amp;e.ccData)},Mi.prototype.setsTextOrXDSActive=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">256</span>==(<span class=\"code-number\">28928</span>&amp;e.ccData)||<span class=\"code-number\">4138</span>==(<span class=\"code-number\">30974</span>&amp;e.ccData)||<span class=\"code-number\">6186</span>==(<span class=\"code-number\">30974</span>&amp;e.ccData)};<span class=\"code-keyword\">var</span> Bi={<span class=\"code-number\">42</span>:<span class=\"code-number\">225</span>,<span class=\"code-number\">92</span>:<span class=\"code-number\">233</span>,<span class=\"code-number\">94</span>:<span class=\"code-number\">237</span>,<span class=\"code-number\">95</span>:<span class=\"code-number\">243</span>,<span class=\"code-number\">96</span>:<span class=\"code-number\">250</span>,<span class=\"code-number\">123</span>:<span class=\"code-number\">231</span>,<span class=\"code-number\">124</span>:<span class=\"code-number\">247</span>,<span class=\"code-number\">125</span>:<span class=\"code-number\">209</span>,<span class=\"code-number\">126</span>:<span class=\"code-number\">241</span>,<span class=\"code-number\">127</span>:<span class=\"code-number\">9608</span>,<span class=\"code-number\">304</span>:<span class=\"code-number\">174</span>,<span class=\"code-number\">305</span>:<span class=\"code-number\">176</span>,<span class=\"code-number\">306</span>:<span class=\"code-number\">189</span>,<span class=\"code-number\">307</span>:<span class=\"code-number\">191</span>,<span class=\"code-number\">308</span>:<span class=\"code-number\">8482</span>,<span class=\"code-number\">309</span>:<span class=\"code-number\">162</span>,<span class=\"code-number\">310</span>:<span class=\"code-number\">163</span>,<span class=\"code-number\">311</span>:<span class=\"code-number\">9834</span>,<span class=\"code-number\">312</span>:<span class=\"code-number\">224</span>,<span class=\"code-number\">313</span>:<span class=\"code-number\">160</span>,<span class=\"code-number\">314</span>:<span class=\"code-number\">232</span>,<span class=\"code-number\">315</span>:<span class=\"code-number\">226</span>,<span class=\"code-number\">316</span>:<span class=\"code-number\">234</span>,<span class=\"code-number\">317</span>:<span class=\"code-number\">238</span>,<span class=\"code-number\">318</span>:<span class=\"code-number\">244</span>,<span class=\"code-number\">319</span>:<span class=\"code-number\">251</span>,<span class=\"code-number\">544</span>:<span class=\"code-number\">193</span>,<span class=\"code-number\">545</span>:<span class=\"code-number\">201</span>,<span class=\"code-number\">546</span>:<span class=\"code-number\">211</span>,<span class=\"code-number\">547</span>:<span class=\"code-number\">218</span>,<span class=\"code-number\">548</span>:<span class=\"code-number\">220</span>,<span class=\"code-number\">549</span>:<span class=\"code-number\">252</span>,<span class=\"code-number\">550</span>:<span class=\"code-number\">8216</span>,<span class=\"code-number\">551</span>:<span class=\"code-number\">161</span>,<span class=\"code-number\">552</span>:<span class=\"code-number\">42</span>,<span class=\"code-number\">553</span>:<span class=\"code-number\">39</span>,<span class=\"code-number\">554</span>:<span class=\"code-number\">8212</span>,<span class=\"code-number\">555</span>:<span class=\"code-number\">169</span>,<span class=\"code-number\">556</span>:<span class=\"code-number\">8480</span>,<span class=\"code-number\">557</span>:<span class=\"code-number\">8226</span>,<span class=\"code-number\">558</span>:<span class=\"code-number\">8220</span>,<span class=\"code-number\">559</span>:<span class=\"code-number\">8221</span>,<span class=\"code-number\">560</span>:<span class=\"code-number\">192</span>,<span class=\"code-number\">561</span>:<span class=\"code-number\">194</span>,<span class=\"code-number\">562</span>:<span class=\"code-number\">199</span>,<span class=\"code-number\">563</span>:<span class=\"code-number\">200</span>,<span class=\"code-number\">564</span>:<span class=\"code-number\">202</span>,<span class=\"code-number\">565</span>:<span class=\"code-number\">203</span>,<span class=\"code-number\">566</span>:<span class=\"code-number\">235</span>,<span class=\"code-number\">567</span>:<span class=\"code-number\">206</span>,<span class=\"code-number\">568</span>:<span class=\"code-number\">207</span>,<span class=\"code-number\">569</span>:<span class=\"code-number\">239</span>,<span class=\"code-number\">570</span>:<span class=\"code-number\">212</span>,<span class=\"code-number\">571</span>:<span class=\"code-number\">217</span>,<span class=\"code-number\">572</span>:<span class=\"code-number\">249</span>,<span class=\"code-number\">573</span>:<span class=\"code-number\">219</span>,<span class=\"code-number\">574</span>:<span class=\"code-number\">171</span>,<span class=\"code-number\">575</span>:<span class=\"code-number\">187</span>,<span class=\"code-number\">800</span>:<span class=\"code-number\">195</span>,<span class=\"code-number\">801</span>:<span class=\"code-number\">227</span>,<span class=\"code-number\">802</span>:<span class=\"code-number\">205</span>,<span class=\"code-number\">803</span>:<span class=\"code-number\">204</span>,<span class=\"code-number\">804</span>:<span class=\"code-number\">236</span>,<span class=\"code-number\">805</span>:<span class=\"code-number\">210</span>,<span class=\"code-number\">806</span>:<span class=\"code-number\">242</span>,<span class=\"code-number\">807</span>:<span class=\"code-number\">213</span>,<span class=\"code-number\">808</span>:<span class=\"code-number\">245</span>,<span class=\"code-number\">809</span>:<span class=\"code-number\">123</span>,<span class=\"code-number\">810</span>:<span class=\"code-number\">125</span>,<span class=\"code-number\">811</span>:<span class=\"code-number\">92</span>,<span class=\"code-number\">812</span>:<span class=\"code-number\">94</span>,<span class=\"code-number\">813</span>:<span class=\"code-number\">95</span>,<span class=\"code-number\">814</span>:<span class=\"code-number\">124</span>,<span class=\"code-number\">815</span>:<span class=\"code-number\">126</span>,<span class=\"code-number\">816</span>:<span class=\"code-number\">196</span>,<span class=\"code-number\">817</span>:<span class=\"code-number\">228</span>,<span class=\"code-number\">818</span>:<span class=\"code-number\">214</span>,<span class=\"code-number\">819</span>:<span class=\"code-number\">246</span>,<span class=\"code-number\">820</span>:<span class=\"code-number\">223</span>,<span class=\"code-number\">821</span>:<span class=\"code-number\">165</span>,<span class=\"code-number\">822</span>:<span class=\"code-number\">164</span>,<span class=\"code-number\">823</span>:<span class=\"code-number\">9474</span>,<span class=\"code-number\">824</span>:<span class=\"code-number\">197</span>,<span class=\"code-number\">825</span>:<span class=\"code-number\">229</span>,<span class=\"code-number\">826</span>:<span class=\"code-number\">216</span>,<span class=\"code-number\">827</span>:<span class=\"code-number\">248</span>,<span class=\"code-number\">828</span>:<span class=\"code-number\">9484</span>,<span class=\"code-number\">829</span>:<span class=\"code-number\">9488</span>,<span class=\"code-number\">830</span>:<span class=\"code-number\">9492</span>,<span class=\"code-number\">831</span>:<span class=\"code-number\">9496</span>},Ni=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>===e?<span class=\"code-string\">\"\"</span>:(e=Bi[e]||e,<span class=\"code-built_in\">String</span>.fromCharCode(e))},qi=[<span class=\"code-number\">4352</span>,<span class=\"code-number\">4384</span>,<span class=\"code-number\">4608</span>,<span class=\"code-number\">4640</span>,<span class=\"code-number\">5376</span>,<span class=\"code-number\">5408</span>,<span class=\"code-number\">5632</span>,<span class=\"code-number\">5664</span>,<span class=\"code-number\">5888</span>,<span class=\"code-number\">5920</span>,<span class=\"code-number\">4096</span>,<span class=\"code-number\">4864</span>,<span class=\"code-number\">4896</span>,<span class=\"code-number\">5120</span>,<span class=\"code-number\">5152</span>],Fi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> e=[],t=<span class=\"code-number\">15</span>;t--;)e.push(<span class=\"code-string\">\"\"</span>);<span class=\"code-keyword\">return</span> e},Hi=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{e.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.field_=t||<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.dataChannel_=i||<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.name_=<span class=\"code-string\">\"CC\"</span>+(<span class=\"code-number\">1</span>+(<span class=\"code-keyword\">this</span>.field_&lt;&lt;<span class=\"code-number\">1</span>|<span class=\"code-keyword\">this</span>.dataChannel_)),<span class=\"code-keyword\">this</span>.setConstants(),<span class=\"code-keyword\">this</span>.reset(),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n,r,a;<span class=\"code-keyword\">if</span>((t=<span class=\"code-number\">32639</span>&amp;e.ccData)!==<span class=\"code-keyword\">this</span>.lastControlCode_){<span class=\"code-keyword\">if</span>(<span class=\"code-number\">4096</span>==(<span class=\"code-number\">61440</span>&amp;t)?<span class=\"code-keyword\">this</span>.lastControlCode_=t:t!==<span class=\"code-keyword\">this</span>.PADDING_&amp;&amp;(<span class=\"code-keyword\">this</span>.lastControlCode_=<span class=\"code-literal\">null</span>),n=t&gt;&gt;&gt;<span class=\"code-number\">8</span>,r=<span class=\"code-number\">255</span>&amp;t,t!==<span class=\"code-keyword\">this</span>.PADDING_)<span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.RESUME_CAPTION_LOADING_)<span class=\"code-keyword\">this</span>.mode_=<span class=\"code-string\">\"popOn\"</span>;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.END_OF_CAPTION_)<span class=\"code-keyword\">this</span>.mode_=<span class=\"code-string\">\"popOn\"</span>,<span class=\"code-keyword\">this</span>.clearFormatting(e.pts),<span class=\"code-keyword\">this</span>.flushDisplayed(e.pts),i=<span class=\"code-keyword\">this</span>.displayed_,<span class=\"code-keyword\">this</span>.displayed_=<span class=\"code-keyword\">this</span>.nonDisplayed_,<span class=\"code-keyword\">this</span>.nonDisplayed_=i,<span class=\"code-keyword\">this</span>.startPts_=e.pts;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.ROLL_UP_2_ROWS_)<span class=\"code-keyword\">this</span>.rollUpRows_=<span class=\"code-number\">2</span>,<span class=\"code-keyword\">this</span>.setRollUp(e.pts);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.ROLL_UP_3_ROWS_)<span class=\"code-keyword\">this</span>.rollUpRows_=<span class=\"code-number\">3</span>,<span class=\"code-keyword\">this</span>.setRollUp(e.pts);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.ROLL_UP_4_ROWS_)<span class=\"code-keyword\">this</span>.rollUpRows_=<span class=\"code-number\">4</span>,<span class=\"code-keyword\">this</span>.setRollUp(e.pts);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.CARRIAGE_RETURN_)<span class=\"code-keyword\">this</span>.clearFormatting(e.pts),<span class=\"code-keyword\">this</span>.flushDisplayed(e.pts),<span class=\"code-keyword\">this</span>.shiftRowsUp_(),<span class=\"code-keyword\">this</span>.startPts_=e.pts;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.BACKSPACE_)<span class=\"code-string\">\"popOn\"</span>===<span class=\"code-keyword\">this</span>.mode_?<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_]=<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_].slice(<span class=\"code-number\">0</span>,<span class=\"code-number\">-1</span>):<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_]=<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_].slice(<span class=\"code-number\">0</span>,<span class=\"code-number\">-1</span>);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.ERASE_DISPLAYED_MEMORY_)<span class=\"code-keyword\">this</span>.flushDisplayed(e.pts),<span class=\"code-keyword\">this</span>.displayed_=Fi();<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.ERASE_NON_DISPLAYED_MEMORY_)<span class=\"code-keyword\">this</span>.nonDisplayed_=Fi();<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.RESUME_DIRECT_CAPTIONING_)<span class=\"code-string\">\"paintOn\"</span>!==<span class=\"code-keyword\">this</span>.mode_&amp;&amp;(<span class=\"code-keyword\">this</span>.flushDisplayed(e.pts),<span class=\"code-keyword\">this</span>.displayed_=Fi()),<span class=\"code-keyword\">this</span>.mode_=<span class=\"code-string\">\"paintOn\"</span>,<span class=\"code-keyword\">this</span>.startPts_=e.pts;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isSpecialCharacter(n,r))a=Ni((n=(<span class=\"code-number\">3</span>&amp;n)&lt;&lt;<span class=\"code-number\">8</span>)|r),<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e.pts,a),<span class=\"code-keyword\">this</span>.column_++;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isExtCharacter(n,r))<span class=\"code-string\">\"popOn\"</span>===<span class=\"code-keyword\">this</span>.mode_?<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_]=<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_].slice(<span class=\"code-number\">0</span>,<span class=\"code-number\">-1</span>):<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_]=<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_].slice(<span class=\"code-number\">0</span>,<span class=\"code-number\">-1</span>),a=Ni((n=(<span class=\"code-number\">3</span>&amp;n)&lt;&lt;<span class=\"code-number\">8</span>)|r),<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e.pts,a),<span class=\"code-keyword\">this</span>.column_++;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isMidRowCode(n,r))<span class=\"code-keyword\">this</span>.clearFormatting(e.pts),<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e.pts,<span class=\"code-string\">\" \"</span>),<span class=\"code-keyword\">this</span>.column_++,<span class=\"code-number\">14</span>==(<span class=\"code-number\">14</span>&amp;r)&amp;&amp;<span class=\"code-keyword\">this</span>.addFormatting(e.pts,[<span class=\"code-string\">\"i\"</span>]),<span class=\"code-number\">1</span>==(<span class=\"code-number\">1</span>&amp;r)&amp;&amp;<span class=\"code-keyword\">this</span>.addFormatting(e.pts,[<span class=\"code-string\">\"u\"</span>]);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isOffsetControlCode(n,r))<span class=\"code-keyword\">this</span>.column_+=<span class=\"code-number\">3</span>&amp;r;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isPAC(n,r)){<span class=\"code-keyword\">var</span> s=qi.indexOf(<span class=\"code-number\">7968</span>&amp;t);<span class=\"code-string\">\"rollUp\"</span>===<span class=\"code-keyword\">this</span>.mode_&amp;&amp;(s-<span class=\"code-keyword\">this</span>.rollUpRows_+<span class=\"code-number\">1</span>&lt;<span class=\"code-number\">0</span>&amp;&amp;(s=<span class=\"code-keyword\">this</span>.rollUpRows_<span class=\"code-number\">-1</span>),<span class=\"code-keyword\">this</span>.setRollUp(e.pts,s)),s!==<span class=\"code-keyword\">this</span>.row_&amp;&amp;(<span class=\"code-keyword\">this</span>.clearFormatting(e.pts),<span class=\"code-keyword\">this</span>.row_=s),<span class=\"code-number\">1</span>&amp;r&amp;&amp;<span class=\"code-number\">-1</span>===<span class=\"code-keyword\">this</span>.formatting_.indexOf(<span class=\"code-string\">\"u\"</span>)&amp;&amp;<span class=\"code-keyword\">this</span>.addFormatting(e.pts,[<span class=\"code-string\">\"u\"</span>]),<span class=\"code-number\">16</span>==(<span class=\"code-number\">16</span>&amp;t)&amp;&amp;(<span class=\"code-keyword\">this</span>.column_=<span class=\"code-number\">4</span>*((<span class=\"code-number\">14</span>&amp;t)&gt;&gt;<span class=\"code-number\">1</span>)),<span class=\"code-keyword\">this</span>.isColorPAC(r)&amp;&amp;<span class=\"code-number\">14</span>==(<span class=\"code-number\">14</span>&amp;r)&amp;&amp;<span class=\"code-keyword\">this</span>.addFormatting(e.pts,[<span class=\"code-string\">\"i\"</span>])}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.isNormalChar(n)&amp;&amp;(<span class=\"code-number\">0</span>===r&amp;&amp;(r=<span class=\"code-literal\">null</span>),a=Ni(n),a+=Ni(r),<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e.pts,a),<span class=\"code-keyword\">this</span>.column_+=a.length)}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.lastControlCode_=<span class=\"code-literal\">null</span>}};Hi.prototype=<span class=\"code-keyword\">new</span> xi,Hi.prototype.flushDisplayed=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.displayed_.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">try</span>{<span class=\"code-keyword\">return</span> e.trim()}<span class=\"code-keyword\">catch</span>(e){<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">console</span>.error(<span class=\"code-string\">\"Skipping malformed caption.\"</span>),<span class=\"code-string\">\"\"</span>}}).join(<span class=\"code-string\">\"\\n\"</span>).replace(<span class=\"code-regexp\">/^\\n+|\\n+$/g</span>,<span class=\"code-string\">\"\"</span>);t.length&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">startPts</span>:<span class=\"code-keyword\">this</span>.startPts_,<span class=\"code-attr\">endPts</span>:e,<span class=\"code-attr\">text</span>:t,<span class=\"code-attr\">stream</span>:<span class=\"code-keyword\">this</span>.name_})},Hi.prototype.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.mode_=<span class=\"code-string\">\"popOn\"</span>,<span class=\"code-keyword\">this</span>.topRow_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.startPts_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.displayed_=Fi(),<span class=\"code-keyword\">this</span>.nonDisplayed_=Fi(),<span class=\"code-keyword\">this</span>.lastControlCode_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.column_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.row_=<span class=\"code-number\">14</span>,<span class=\"code-keyword\">this</span>.rollUpRows_=<span class=\"code-number\">2</span>,<span class=\"code-keyword\">this</span>.formatting_=[]},Hi.prototype.setConstants=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.dataChannel_?(<span class=\"code-keyword\">this</span>.BASE_=<span class=\"code-number\">16</span>,<span class=\"code-keyword\">this</span>.EXT_=<span class=\"code-number\">17</span>,<span class=\"code-keyword\">this</span>.CONTROL_=(<span class=\"code-number\">20</span>|<span class=\"code-keyword\">this</span>.field_)&lt;&lt;<span class=\"code-number\">8</span>,<span class=\"code-keyword\">this</span>.OFFSET_=<span class=\"code-number\">23</span>):<span class=\"code-number\">1</span>===<span class=\"code-keyword\">this</span>.dataChannel_&amp;&amp;(<span class=\"code-keyword\">this</span>.BASE_=<span class=\"code-number\">24</span>,<span class=\"code-keyword\">this</span>.EXT_=<span class=\"code-number\">25</span>,<span class=\"code-keyword\">this</span>.CONTROL_=(<span class=\"code-number\">28</span>|<span class=\"code-keyword\">this</span>.field_)&lt;&lt;<span class=\"code-number\">8</span>,<span class=\"code-keyword\">this</span>.OFFSET_=<span class=\"code-number\">31</span>),<span class=\"code-keyword\">this</span>.PADDING_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.RESUME_CAPTION_LOADING_=<span class=\"code-number\">32</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.END_OF_CAPTION_=<span class=\"code-number\">47</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.ROLL_UP_2_ROWS_=<span class=\"code-number\">37</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.ROLL_UP_3_ROWS_=<span class=\"code-number\">38</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.ROLL_UP_4_ROWS_=<span class=\"code-number\">39</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.CARRIAGE_RETURN_=<span class=\"code-number\">45</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.RESUME_DIRECT_CAPTIONING_=<span class=\"code-number\">41</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.BACKSPACE_=<span class=\"code-number\">33</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.ERASE_DISPLAYED_MEMORY_=<span class=\"code-number\">44</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.ERASE_NON_DISPLAYED_MEMORY_=<span class=\"code-number\">46</span>|<span class=\"code-keyword\">this</span>.CONTROL_},Hi.prototype.isSpecialCharacter=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e===<span class=\"code-keyword\">this</span>.EXT_&amp;&amp;t&gt;=<span class=\"code-number\">48</span>&amp;&amp;t&lt;=<span class=\"code-number\">63</span>},Hi.prototype.isExtCharacter=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span>(e===<span class=\"code-keyword\">this</span>.EXT_+<span class=\"code-number\">1</span>||e===<span class=\"code-keyword\">this</span>.EXT_+<span class=\"code-number\">2</span>)&amp;&amp;t&gt;=<span class=\"code-number\">32</span>&amp;&amp;t&lt;=<span class=\"code-number\">63</span>},Hi.prototype.isMidRowCode=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e===<span class=\"code-keyword\">this</span>.EXT_&amp;&amp;t&gt;=<span class=\"code-number\">32</span>&amp;&amp;t&lt;=<span class=\"code-number\">47</span>},Hi.prototype.isOffsetControlCode=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e===<span class=\"code-keyword\">this</span>.OFFSET_&amp;&amp;t&gt;=<span class=\"code-number\">33</span>&amp;&amp;t&lt;=<span class=\"code-number\">35</span>},Hi.prototype.isPAC=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e&gt;=<span class=\"code-keyword\">this</span>.BASE_&amp;&amp;e&lt;<span class=\"code-keyword\">this</span>.BASE_+<span class=\"code-number\">8</span>&amp;&amp;t&gt;=<span class=\"code-number\">64</span>&amp;&amp;t&lt;=<span class=\"code-number\">127</span>},Hi.prototype.isColorPAC=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&gt;=<span class=\"code-number\">64</span>&amp;&amp;e&lt;=<span class=\"code-number\">79</span>||e&gt;=<span class=\"code-number\">96</span>&amp;&amp;e&lt;=<span class=\"code-number\">127</span>},Hi.prototype.isNormalChar=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&gt;=<span class=\"code-number\">32</span>&amp;&amp;e&lt;=<span class=\"code-number\">127</span>},Hi.prototype.setRollUp=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"rollUp\"</span>!==<span class=\"code-keyword\">this</span>.mode_&amp;&amp;(<span class=\"code-keyword\">this</span>.row_=<span class=\"code-number\">14</span>,<span class=\"code-keyword\">this</span>.mode_=<span class=\"code-string\">\"rollUp\"</span>,<span class=\"code-keyword\">this</span>.flushDisplayed(e),<span class=\"code-keyword\">this</span>.nonDisplayed_=Fi(),<span class=\"code-keyword\">this</span>.displayed_=Fi()),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==t&amp;&amp;t!==<span class=\"code-keyword\">this</span>.row_)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;<span class=\"code-keyword\">this</span>.rollUpRows_;i++)<span class=\"code-keyword\">this</span>.displayed_[t-i]=<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_-i],<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_-i]=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t=<span class=\"code-keyword\">this</span>.row_),<span class=\"code-keyword\">this</span>.topRow_=t-<span class=\"code-keyword\">this</span>.rollUpRows_+<span class=\"code-number\">1</span>},Hi.prototype.addFormatting=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.formatting_=<span class=\"code-keyword\">this</span>.formatting_.concat(t);<span class=\"code-keyword\">var</span> i=t.reduce(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e+<span class=\"code-string\">\"&lt;\"</span>+t+<span class=\"code-string\">\"&gt;\"</span>},<span class=\"code-string\">\"\"</span>);<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e,i)},Hi.prototype.clearFormatting=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.formatting_.length){<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.formatting_.reverse().reduce(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e+<span class=\"code-string\">\"&lt;/\"</span>+t+<span class=\"code-string\">\"&gt;\"</span>},<span class=\"code-string\">\"\"</span>);<span class=\"code-keyword\">this</span>.formatting_=[],<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e,t)}},Hi.prototype.popOn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_];i+=t,<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_]=i},Hi.prototype.rollUp=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_];i+=t,<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_]=i},Hi.prototype.shiftRowsUp_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e;<span class=\"code-keyword\">for</span>(e=<span class=\"code-number\">0</span>;e&lt;<span class=\"code-keyword\">this</span>.topRow_;e++)<span class=\"code-keyword\">this</span>.displayed_[e]=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">for</span>(e=<span class=\"code-keyword\">this</span>.row_+<span class=\"code-number\">1</span>;e&lt;<span class=\"code-number\">15</span>;e++)<span class=\"code-keyword\">this</span>.displayed_[e]=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">for</span>(e=<span class=\"code-keyword\">this</span>.topRow_;e&lt;<span class=\"code-keyword\">this</span>.row_;e++)<span class=\"code-keyword\">this</span>.displayed_[e]=<span class=\"code-keyword\">this</span>.displayed_[e+<span class=\"code-number\">1</span>];<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_]=<span class=\"code-string\">\"\"</span>},Hi.prototype.paintOn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_];i+=t,<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_]=i};<span class=\"code-keyword\">var</span> Gi=Pi,ji=Mi,Vi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=e,n=<span class=\"code-number\">0</span>;n&lt;t.length;n++){<span class=\"code-keyword\">var</span> r=t[n];<span class=\"code-keyword\">if</span>(i&lt;r.size)<span class=\"code-keyword\">return</span> r;i-=r.size}<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>},Wi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=yi.findBox(e,[<span class=\"code-string\">\"moof\"</span>,<span class=\"code-string\">\"traf\"</span>]),n={},r=[];<span class=\"code-keyword\">return</span> yi.findBox(e,[<span class=\"code-string\">\"mdat\"</span>]).forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> n=i[t];r.push({<span class=\"code-attr\">mdat</span>:e,<span class=\"code-attr\">traf</span>:n})}),r.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i,r=e.mdat,a=e.traf,s=yi.findBox(a,[<span class=\"code-string\">\"tfhd\"</span>]),o=Jt.parseTfhd(s[<span class=\"code-number\">0</span>]),u=o.trackId,d=yi.findBox(a,[<span class=\"code-string\">\"tfdt\"</span>]),l=d.length&gt;<span class=\"code-number\">0</span>?Jt.parseTfdt(d[<span class=\"code-number\">0</span>]).baseMediaDecodeTime:<span class=\"code-number\">0</span>,h=yi.findBox(a,[<span class=\"code-string\">\"trun\"</span>]);t===u&amp;&amp;h.length&gt;<span class=\"code-number\">0</span>&amp;&amp;(i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a,s,o=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength),u=[];<span class=\"code-keyword\">for</span>(r=<span class=\"code-number\">0</span>;r+<span class=\"code-number\">4</span>&lt;e.length;r+=a)<span class=\"code-keyword\">if</span>(a=o.getUint32(r),r+=<span class=\"code-number\">4</span>,!(a&lt;=<span class=\"code-number\">0</span>))<span class=\"code-keyword\">switch</span>(<span class=\"code-number\">31</span>&amp;e[r]){<span class=\"code-keyword\">case</span> <span class=\"code-number\">6</span>:<span class=\"code-keyword\">var</span> d=e.subarray(r+<span class=\"code-number\">1</span>,r+<span class=\"code-number\">1</span>+a),l=Vi(r,t);n={<span class=\"code-attr\">nalUnitType</span>:<span class=\"code-string\">\"sei_rbsp\"</span>,<span class=\"code-attr\">size</span>:a,<span class=\"code-attr\">data</span>:d,<span class=\"code-attr\">escapedRBSP</span>:Gi(d),<span class=\"code-attr\">trackId</span>:i},l?(n.pts=l.pts,n.dts=l.dts,s=l):(n.pts=s.pts,n.dts=s.dts),u.push(n)}<span class=\"code-keyword\">return</span> u}(r,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=t,r=i.defaultSampleDuration||<span class=\"code-number\">0</span>,a=i.defaultSampleSize||<span class=\"code-number\">0</span>,s=i.trackId,o=[];<span class=\"code-keyword\">return</span> e.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=Jt.parseTrun(e).samples;t.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.duration&amp;&amp;(e.duration=r),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.size&amp;&amp;(e.size=a),e.trackId=s,e.dts=n,<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.compositionTimeOffset&amp;&amp;(e.compositionTimeOffset=<span class=\"code-number\">0</span>),e.pts=n+e.compositionTimeOffset,n+=e.duration}),o=o.concat(t)}),o}(h,l,o),u),n[u]||(n[u]=[]),n[u]=n[u].concat(i))}),n},zi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t,i,n,r,a,s=!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">this</span>.isInitialized=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> s},<span class=\"code-keyword\">this</span>.init=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e=<span class=\"code-keyword\">new</span> ji,s=!<span class=\"code-number\">0</span>,a=!!t&amp;&amp;t.isPartial,e.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.startTime=e.startPts/n,e.endTime=e.endPts/n,r.captions.push(e),r.captionStreams[e.stream]=!<span class=\"code-number\">0</span>})},<span class=\"code-keyword\">this</span>.isNewInit=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span>!(e&amp;&amp;<span class=\"code-number\">0</span>===e.length||t&amp;&amp;<span class=\"code-string\">\"object\"</span>==<span class=\"code-keyword\">typeof</span> t&amp;&amp;<span class=\"code-number\">0</span>===<span class=\"code-built_in\">Object</span>.keys(t).length||i===e[<span class=\"code-number\">0</span>]&amp;&amp;n===t[i])},<span class=\"code-keyword\">this</span>.parse=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,a,s</span>)</span>{<span class=\"code-keyword\">var</span> o;<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.isInitialized())<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(!a||!s)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isNewInit(a,s))i=a[<span class=\"code-number\">0</span>],n=s[i];<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>===i||!n)<span class=\"code-keyword\">return</span> t.push(e),<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">for</span>(;t.length&gt;<span class=\"code-number\">0</span>;){<span class=\"code-keyword\">var</span> u=t.shift();<span class=\"code-keyword\">this</span>.parse(u,a,s)}<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>!==(o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>===t?<span class=\"code-literal\">null</span>:{<span class=\"code-attr\">seiNals</span>:Wi(e,t)[t],<span class=\"code-attr\">timescale</span>:i}}(e,i,n))&amp;&amp;o.seiNals?(<span class=\"code-keyword\">this</span>.pushNals(o.seiNals),<span class=\"code-keyword\">this</span>.flushStream(),r):<span class=\"code-literal\">null</span>},<span class=\"code-keyword\">this</span>.pushNals=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.isInitialized()||!t||<span class=\"code-number\">0</span>===t.length)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;t.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.push(t)})},<span class=\"code-keyword\">this</span>.flushStream=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.isInitialized())<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;a?e.partialFlush():e.flush()},<span class=\"code-keyword\">this</span>.clearParsedCaptions=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{r.captions=[],r.captionStreams={}},<span class=\"code-keyword\">this</span>.resetCaptionStream=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.isInitialized())<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;e.reset()},<span class=\"code-keyword\">this</span>.clearAllCaptions=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.clearParsedCaptions(),<span class=\"code-keyword\">this</span>.resetCaptionStream()},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t=[],i=<span class=\"code-literal\">null</span>,n=<span class=\"code-literal\">null</span>,r?<span class=\"code-keyword\">this</span>.clearParsedCaptions():r={<span class=\"code-attr\">captions</span>:[],<span class=\"code-attr\">captionStreams</span>:{}},<span class=\"code-keyword\">this</span>.resetCaptionStream()},<span class=\"code-keyword\">this</span>.reset()},Xi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> e&amp;&amp;<span class=\"code-built_in\">isFinite</span>(e)},Yi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">i</span>(<span class=\"code-params\">e</span>)</span>{_(<span class=\"code-keyword\">this</span>,i);<span class=\"code-keyword\">var</span> t=T(<span class=\"code-keyword\">this</span>,(i.__proto__||<span class=\"code-built_in\">Object</span>.getPrototypeOf(i)).call(<span class=\"code-keyword\">this</span>));<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">TypeError</span>(<span class=\"code-string\">\"Initialization settings are required\"</span>);<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"function\"</span>!=<span class=\"code-keyword\">typeof</span> e.currentTime)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">TypeError</span>(<span class=\"code-string\">\"No currentTime getter specified\"</span>);<span class=\"code-keyword\">if</span>(!e.mediaSource)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">TypeError</span>(<span class=\"code-string\">\"No MediaSource specified\"</span>);<span class=\"code-keyword\">return</span> t.bandwidth=e.bandwidth,t.throughput={<span class=\"code-attr\">rate</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">count</span>:<span class=\"code-number\">0</span>},t.roundTrip=<span class=\"code-literal\">NaN</span>,t.resetStats_(),t.mediaIndex=<span class=\"code-literal\">null</span>,t.hasPlayed_=e.hasPlayed,t.currentTime_=e.currentTime,t.seekable_=e.seekable,t.seeking_=e.seeking,t.duration_=e.duration,t.mediaSource_=e.mediaSource,t.hls_=e.hls,t.loaderType_=e.loaderType,t.startingMedia_=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,t.segmentMetadataTrack_=e.segmentMetadataTrack,t.goalBufferLength_=e.goalBufferLength,t.sourceType_=e.sourceType,t.inbandTextTracks_=e.inbandTextTracks,t.state_=<span class=\"code-string\">\"INIT\"</span>,t.checkBufferTimeout_=<span class=\"code-literal\">null</span>,t.error_=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,t.currentTimeline_=<span class=\"code-number\">-1</span>,t.pendingSegment_=<span class=\"code-literal\">null</span>,t.mimeType_=<span class=\"code-literal\">null</span>,t.sourceUpdater_=<span class=\"code-literal\">null</span>,t.xhrOptions_=<span class=\"code-literal\">null</span>,t.activeInitSegmentId_=<span class=\"code-literal\">null</span>,t.initSegments_={},t.cacheEncryptionKeys_=e.cacheEncryptionKeys,t.keyCache_={},<span class=\"code-string\">\"main\"</span>===t.loaderType_?t.captionParser_=<span class=\"code-keyword\">new</span> zi:t.captionParser_=<span class=\"code-literal\">null</span>,t.decrypter_=e.decrypter,t.syncController_=e.syncController,t.syncPoint_={<span class=\"code-attr\">segmentIndex</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">time</span>:<span class=\"code-number\">0</span>},t.syncController_.on(<span class=\"code-string\">\"syncinfoupdate\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.trigger(<span class=\"code-string\">\"syncinfoupdate\"</span>)}),t.mediaSource_.addEventListener(<span class=\"code-string\">\"sourceopen\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.ended_=!<span class=\"code-number\">1</span>}),t.fetchAtBuffer_=!<span class=\"code-number\">1</span>,t.logger_=si(<span class=\"code-string\">\"SegmentLoader[\"</span>+t.loaderType_+<span class=\"code-string\">\"]\"</span>),<span class=\"code-built_in\">Object</span>.defineProperty(t,<span class=\"code-string\">\"state\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.state_},<span class=\"code-attr\">set</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e!==<span class=\"code-keyword\">this</span>.state_&amp;&amp;(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-keyword\">this</span>.state_+<span class=\"code-string\">\" -&gt; \"</span>+e),<span class=\"code-keyword\">this</span>.state_=e)}}),t}<span class=\"code-keyword\">return</span> b(i,e),v(i,[{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"resetStats_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.mediaBytesTransferred=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.mediaRequests=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.mediaRequestsAborted=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.mediaRequestsTimedout=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.mediaRequestsErrored=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.mediaTransferDuration=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.mediaSecondsLoaded=<span class=\"code-number\">0</span>}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"dispose\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"DISPOSED\"</span>,<span class=\"code-keyword\">this</span>.pause(),<span class=\"code-keyword\">this</span>.abort_(),<span class=\"code-keyword\">this</span>.sourceUpdater_&amp;&amp;<span class=\"code-keyword\">this</span>.sourceUpdater_.dispose(),<span class=\"code-keyword\">this</span>.resetStats_(),<span class=\"code-keyword\">this</span>.captionParser_&amp;&amp;<span class=\"code-keyword\">this</span>.captionParser_.reset()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"abort\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-string\">\"WAITING\"</span>===<span class=\"code-keyword\">this</span>.state?(<span class=\"code-keyword\">this</span>.abort_(),<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,<span class=\"code-keyword\">this</span>.paused()||<span class=\"code-keyword\">this</span>.monitorBuffer_()):<span class=\"code-keyword\">this</span>.pendingSegment_&amp;&amp;(<span class=\"code-keyword\">this</span>.pendingSegment_=<span class=\"code-literal\">null</span>)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"abort_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.pendingSegment_&amp;&amp;<span class=\"code-keyword\">this</span>.pendingSegment_.abortRequests(),<span class=\"code-keyword\">this</span>.pendingSegment_=<span class=\"code-literal\">null</span>}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"error\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e&amp;&amp;(<span class=\"code-keyword\">this</span>.error_=e),<span class=\"code-keyword\">this</span>.pendingSegment_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.error_}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"endOfStream\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.ended_=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.pause(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"ended\"</span>)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"buffered_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.sourceUpdater_?<span class=\"code-keyword\">this</span>.sourceUpdater_.buffered():t.createTimeRanges()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"initSegment\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-built_in\">arguments</span>.length&gt;<span class=\"code-number\">1</span>&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]&amp;&amp;<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>];<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i=fe(e),n=<span class=\"code-keyword\">this</span>.initSegments_[i];<span class=\"code-keyword\">return</span> t&amp;&amp;!n&amp;&amp;e.bytes&amp;&amp;(<span class=\"code-keyword\">this</span>.initSegments_[i]=n={<span class=\"code-attr\">resolvedUri</span>:e.resolvedUri,<span class=\"code-attr\">byterange</span>:e.byterange,<span class=\"code-attr\">bytes</span>:e.bytes,<span class=\"code-attr\">timescales</span>:e.timescales,<span class=\"code-attr\">videoTrackIds</span>:e.videoTrackIds}),n||e}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"segmentKey\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-built_in\">arguments</span>.length&gt;<span class=\"code-number\">1</span>&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]&amp;&amp;<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>];<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i=pe(e),n=<span class=\"code-keyword\">this</span>.keyCache_[i];<span class=\"code-keyword\">this</span>.cacheEncryptionKeys_&amp;&amp;t&amp;&amp;!n&amp;&amp;e.bytes&amp;&amp;(<span class=\"code-keyword\">this</span>.keyCache_[i]=n={<span class=\"code-attr\">resolvedUri</span>:e.resolvedUri,<span class=\"code-attr\">bytes</span>:e.bytes});<span class=\"code-keyword\">var</span> r={<span class=\"code-attr\">resolvedUri</span>:(n||e).resolvedUri};<span class=\"code-keyword\">return</span> n&amp;&amp;(r.bytes=n.bytes),r}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"couldBeginLoading_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.playlist_&amp;&amp;(<span class=\"code-keyword\">this</span>.sourceUpdater_||<span class=\"code-keyword\">this</span>.mimeType_&amp;&amp;<span class=\"code-string\">\"INIT\"</span>===<span class=\"code-keyword\">this</span>.state)&amp;&amp;!<span class=\"code-keyword\">this</span>.paused()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"load\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.monitorBuffer_(),<span class=\"code-keyword\">this</span>.playlist_){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.syncController_.setDateTimeMapping(<span class=\"code-keyword\">this</span>.playlist_),<span class=\"code-string\">\"INIT\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;<span class=\"code-keyword\">this</span>.couldBeginLoading_())<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.init_();!<span class=\"code-keyword\">this</span>.couldBeginLoading_()||<span class=\"code-string\">\"READY\"</span>!==<span class=\"code-keyword\">this</span>.state&amp;&amp;<span class=\"code-string\">\"INIT\"</span>!==<span class=\"code-keyword\">this</span>.state||(<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>)}}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"init_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,<span class=\"code-keyword\">this</span>.sourceUpdater_=<span class=\"code-keyword\">new</span> fi(<span class=\"code-keyword\">this</span>.mediaSource_,<span class=\"code-keyword\">this</span>.mimeType_,<span class=\"code-keyword\">this</span>.loaderType_,<span class=\"code-keyword\">this</span>.sourceBufferEmitter_),<span class=\"code-keyword\">this</span>.resetEverything(),<span class=\"code-keyword\">this</span>.monitorBuffer_()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"playlist\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-built_in\">arguments</span>.length&gt;<span class=\"code-number\">1</span>&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]?<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]:{};<span class=\"code-keyword\">if</span>(e){<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.playlist_,n=<span class=\"code-keyword\">this</span>.pendingSegment_;<span class=\"code-keyword\">this</span>.playlist_=e,<span class=\"code-keyword\">this</span>.xhrOptions_=t,<span class=\"code-keyword\">this</span>.hasPlayed_()||(e.syncInfo={<span class=\"code-attr\">mediaSequence</span>:e.mediaSequence,<span class=\"code-attr\">time</span>:<span class=\"code-number\">0</span>});<span class=\"code-keyword\">var</span> r=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(i&amp;&amp;(i.id?r=i.id:i.uri&amp;&amp;(r=i.uri)),<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"playlist update [\"</span>+r+<span class=\"code-string\">\" =&gt; \"</span>+(e.id||e.uri)+<span class=\"code-string\">\"]\"</span>),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"syncinfoupdate\"</span>),<span class=\"code-string\">\"INIT\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;<span class=\"code-keyword\">this</span>.couldBeginLoading_())<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.init_();<span class=\"code-keyword\">if</span>(i&amp;&amp;i.uri===e.uri){<span class=\"code-keyword\">var</span> a=e.mediaSequence-i.mediaSequence;<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"live window shift [\"</span>+a+<span class=\"code-string\">\"]\"</span>),<span class=\"code-literal\">null</span>!==<span class=\"code-keyword\">this</span>.mediaIndex&amp;&amp;(<span class=\"code-keyword\">this</span>.mediaIndex-=a),n&amp;&amp;(n.mediaIndex-=a,n.mediaIndex&gt;=<span class=\"code-number\">0</span>&amp;&amp;(n.segment=e.segments[n.mediaIndex])),<span class=\"code-keyword\">this</span>.syncController_.saveExpiredSegmentInfo(i,e)}<span class=\"code-keyword\">else</span> <span class=\"code-literal\">null</span>!==<span class=\"code-keyword\">this</span>.mediaIndex&amp;&amp;<span class=\"code-keyword\">this</span>.resyncLoader()}}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"pause\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.checkBufferTimeout_&amp;&amp;(u.clearTimeout(<span class=\"code-keyword\">this</span>.checkBufferTimeout_),<span class=\"code-keyword\">this</span>.checkBufferTimeout_=<span class=\"code-literal\">null</span>)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"paused\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>===<span class=\"code-keyword\">this</span>.checkBufferTimeout_}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"mimeType\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.mimeType_||(<span class=\"code-keyword\">this</span>.mimeType_=e,<span class=\"code-keyword\">this</span>.sourceBufferEmitter_=t,<span class=\"code-string\">\"INIT\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;<span class=\"code-keyword\">this</span>.couldBeginLoading_()&amp;&amp;<span class=\"code-keyword\">this</span>.init_())}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"resetEverything\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.ended_=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.resetLoader(),<span class=\"code-keyword\">this</span>.remove(<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.duration_(),e),<span class=\"code-keyword\">this</span>.captionParser_&amp;&amp;<span class=\"code-keyword\">this</span>.captionParser_.clearAllCaptions(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reseteverything\"</span>)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"resetLoader\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.fetchAtBuffer_=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.resyncLoader()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"resyncLoader\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.mediaIndex=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.syncPoint_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.abort()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"remove\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.sourceUpdater_&amp;&amp;<span class=\"code-keyword\">this</span>.sourceUpdater_.remove(e,t,i),we(e,t,<span class=\"code-keyword\">this</span>.segmentMetadataTrack_),<span class=\"code-keyword\">this</span>.inbandTextTracks_)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> <span class=\"code-keyword\">this</span>.inbandTextTracks_)we(e,t,<span class=\"code-keyword\">this</span>.inbandTextTracks_[n])}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"monitorBuffer_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.checkBufferTimeout_&amp;&amp;u.clearTimeout(<span class=\"code-keyword\">this</span>.checkBufferTimeout_),<span class=\"code-keyword\">this</span>.checkBufferTimeout_=u.setTimeout(<span class=\"code-keyword\">this</span>.monitorBufferTick_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-number\">1</span>)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"monitorBufferTick_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-string\">\"READY\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;<span class=\"code-keyword\">this</span>.fillBuffer_(),<span class=\"code-keyword\">this</span>.checkBufferTimeout_&amp;&amp;u.clearTimeout(<span class=\"code-keyword\">this</span>.checkBufferTimeout_),<span class=\"code-keyword\">this</span>.checkBufferTimeout_=u.setTimeout(<span class=\"code-keyword\">this</span>.monitorBufferTick_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-number\">500</span>)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"fillBuffer_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.sourceUpdater_.updating()){<span class=\"code-keyword\">this</span>.syncPoint_||(<span class=\"code-keyword\">this</span>.syncPoint_=<span class=\"code-keyword\">this</span>.syncController_.getSyncPoint(<span class=\"code-keyword\">this</span>.playlist_,<span class=\"code-keyword\">this</span>.duration_(),<span class=\"code-keyword\">this</span>.currentTimeline_,<span class=\"code-keyword\">this</span>.currentTime_()));<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.checkBuffer_(<span class=\"code-keyword\">this</span>.buffered_(),<span class=\"code-keyword\">this</span>.playlist_,<span class=\"code-keyword\">this</span>.mediaIndex,<span class=\"code-keyword\">this</span>.hasPlayed_(),<span class=\"code-keyword\">this</span>.currentTime_(),<span class=\"code-keyword\">this</span>.syncPoint_);e&amp;&amp;(<span class=\"code-keyword\">this</span>.isEndOfStream_(e.mediaIndex)?<span class=\"code-keyword\">this</span>.endOfStream():(e.mediaIndex!==<span class=\"code-keyword\">this</span>.playlist_.segments.length<span class=\"code-number\">-1</span>||<span class=\"code-string\">\"ended\"</span>!==<span class=\"code-keyword\">this</span>.mediaSource_.readyState||<span class=\"code-keyword\">this</span>.seeking_())&amp;&amp;(e.timeline!==<span class=\"code-keyword\">this</span>.currentTimeline_&amp;&amp;(<span class=\"code-keyword\">this</span>.syncController_.reset(),e.timestampOffset=e.startOfSegment,<span class=\"code-keyword\">this</span>.captionParser_&amp;&amp;<span class=\"code-keyword\">this</span>.captionParser_.clearAllCaptions()),<span class=\"code-keyword\">this</span>.loadSegment_(e)))}}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"isEndOfStream_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(!e||!t)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> n=i===e.segments.length;<span class=\"code-keyword\">return</span> e.endList&amp;&amp;<span class=\"code-string\">\"open\"</span>===t.readyState&amp;&amp;n}(<span class=\"code-built_in\">arguments</span>.length&gt;<span class=\"code-number\">1</span>&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]?<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]:<span class=\"code-keyword\">this</span>.playlist_,<span class=\"code-keyword\">this</span>.mediaSource_,e)&amp;&amp;!<span class=\"code-keyword\">this</span>.sourceUpdater_.updating()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"checkBuffer_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r,a</span>)</span>{<span class=\"code-keyword\">var</span> s=<span class=\"code-number\">0</span>,o=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;e.length&amp;&amp;(s=e.end(e.length<span class=\"code-number\">-1</span>));<span class=\"code-keyword\">var</span> u=<span class=\"code-built_in\">Math</span>.max(<span class=\"code-number\">0</span>,s-r);<span class=\"code-keyword\">if</span>(!t.segments.length)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(u&gt;=<span class=\"code-keyword\">this</span>.goalBufferLength_())<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(!n&amp;&amp;u&gt;=<span class=\"code-number\">1</span>)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>===a)<span class=\"code-keyword\">return</span> i=<span class=\"code-keyword\">this</span>.getSyncSegmentCandidate_(t),<span class=\"code-keyword\">this</span>.generateSegmentInfo_(t,i,<span class=\"code-literal\">null</span>,!<span class=\"code-number\">0</span>);<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>!==i){t.segments[i];<span class=\"code-keyword\">return</span> o=s,<span class=\"code-keyword\">this</span>.generateSegmentInfo_(t,i+<span class=\"code-number\">1</span>,o,!<span class=\"code-number\">1</span>)}<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.fetchAtBuffer_){<span class=\"code-keyword\">var</span> d=X.getMediaInfoForTime(t,s,a.segmentIndex,a.time);i=d.mediaIndex,o=d.startTime}<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">var</span> l=X.getMediaInfoForTime(t,r,a.segmentIndex,a.time);i=l.mediaIndex,o=l.startTime}<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.generateSegmentInfo_(t,i,o,!<span class=\"code-number\">1</span>)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"getSyncSegmentCandidate_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">-1</span>===<span class=\"code-keyword\">this</span>.currentTimeline_)<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> i=e.segments.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">timeline</span>:e.timeline,<span class=\"code-attr\">segmentIndex</span>:t}}).filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.timeline===t.currentTimeline_});<span class=\"code-keyword\">return</span> i.length?i[<span class=\"code-built_in\">Math</span>.min(i.length<span class=\"code-number\">-1</span>,<span class=\"code-number\">1</span>)].segmentIndex:<span class=\"code-built_in\">Math</span>.max(e.segments.length<span class=\"code-number\">-1</span>,<span class=\"code-number\">0</span>)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"generateSegmentInfo_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">if</span>(t&lt;<span class=\"code-number\">0</span>||t&gt;=e.segments.length)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> r=e.segments[t];<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">requestId</span>:<span class=\"code-string\">\"segment-loader-\"</span>+<span class=\"code-built_in\">Math</span>.random(),<span class=\"code-attr\">uri</span>:r.resolvedUri,<span class=\"code-attr\">mediaIndex</span>:t,<span class=\"code-attr\">isSyncRequest</span>:n,<span class=\"code-attr\">startOfSegment</span>:i,<span class=\"code-attr\">playlist</span>:e,<span class=\"code-attr\">bytes</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">encryptedBytes</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">timestampOffset</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">timeline</span>:r.timeline,<span class=\"code-attr\">duration</span>:r.duration,<span class=\"code-attr\">segment</span>:r}}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"abortRequestEarly_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.hls_.tech_.paused()||!<span class=\"code-keyword\">this</span>.xhrOptions_.timeout||!<span class=\"code-keyword\">this</span>.playlist_.attributes.BANDWIDTH)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-built_in\">Date</span>.now()-(e.firstBytesReceivedAt||<span class=\"code-built_in\">Date</span>.now())&lt;<span class=\"code-number\">1e3</span>)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.currentTime_(),i=e.bandwidth,n=<span class=\"code-keyword\">this</span>.pendingSegment_.duration,r=X.estimateSegmentRequestTime(n,i,<span class=\"code-keyword\">this</span>.playlist_,e.bytesReceived),a=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-built_in\">arguments</span>.length&gt;<span class=\"code-number\">2</span>&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">2</span>]?<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">2</span>]:<span class=\"code-number\">1</span>;<span class=\"code-keyword\">return</span>((e.length?e.end(e.length<span class=\"code-number\">-1</span>):<span class=\"code-number\">0</span>)-t)/i}(<span class=\"code-keyword\">this</span>.buffered_(),t,<span class=\"code-keyword\">this</span>.hls_.tech_.playbackRate())<span class=\"code-number\">-1</span>;<span class=\"code-keyword\">if</span>(r&lt;=a)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.master,i=e.currentTime,n=e.bandwidth,r=e.duration,a=e.segmentDuration,s=e.timeUntilRebuffer,o=e.currentTimeline,u=e.syncController,d=t.playlists.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!X.isIncompatible(e)}),l=d.filter(X.isEnabled);l.length||(l=d.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!X.isDisabled(e)}));<span class=\"code-keyword\">var</span> h=l.filter(X.hasAttribute.bind(<span class=\"code-literal\">null</span>,<span class=\"code-string\">\"BANDWIDTH\"</span>)).map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=u.getSyncPoint(e,r,o,i)?<span class=\"code-number\">1</span>:<span class=\"code-number\">2</span>;<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">playlist</span>:e,<span class=\"code-attr\">rebufferingImpact</span>:X.estimateSegmentRequestTime(a,n,e)*t-s}}),c=h.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.rebufferingImpact&lt;=<span class=\"code-number\">0</span>});<span class=\"code-keyword\">return</span> Ui(c,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> Ii(t.playlist,e.playlist)}),c.length?c[<span class=\"code-number\">0</span>]:(Ui(h,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.rebufferingImpact-t.rebufferingImpact}),h[<span class=\"code-number\">0</span>]||<span class=\"code-literal\">null</span>)}({<span class=\"code-attr\">master</span>:<span class=\"code-keyword\">this</span>.hls_.playlists.master,<span class=\"code-attr\">currentTime</span>:t,<span class=\"code-attr\">bandwidth</span>:i,<span class=\"code-attr\">duration</span>:<span class=\"code-keyword\">this</span>.duration_(),<span class=\"code-attr\">segmentDuration</span>:n,<span class=\"code-attr\">timeUntilRebuffer</span>:a,<span class=\"code-attr\">currentTimeline</span>:<span class=\"code-keyword\">this</span>.currentTimeline_,<span class=\"code-attr\">syncController</span>:<span class=\"code-keyword\">this</span>.syncController_});<span class=\"code-keyword\">if</span>(s){<span class=\"code-keyword\">var</span> o=r-a-s.rebufferingImpact,u=<span class=\"code-number\">.5</span>;<span class=\"code-keyword\">return</span> a&lt;=<span class=\"code-number\">1</span>/<span class=\"code-number\">30</span>&amp;&amp;(u=<span class=\"code-number\">1</span>),!s.playlist||s.playlist.uri===<span class=\"code-keyword\">this</span>.playlist_.uri||o&lt;u?!<span class=\"code-number\">1</span>:(<span class=\"code-keyword\">this</span>.bandwidth=s.playlist.attributes.BANDWIDTH*pi.BANDWIDTH_VARIANCE+<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.abort(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"earlyabort\"</span>),!<span class=\"code-number\">0</span>)}}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"handleProgress_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.pendingSegment_&amp;&amp;t.requestId===<span class=\"code-keyword\">this</span>.pendingSegment_.requestId&amp;&amp;!<span class=\"code-keyword\">this</span>.abortRequestEarly_(t.stats)&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"progress\"</span>)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"loadSegment_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"WAITING\"</span>,<span class=\"code-keyword\">this</span>.pendingSegment_=e,<span class=\"code-keyword\">this</span>.trimBackBuffer_(e),e.abortRequests=Li(<span class=\"code-keyword\">this</span>.hls_.xhr,<span class=\"code-keyword\">this</span>.xhrOptions_,<span class=\"code-keyword\">this</span>.decrypter_,<span class=\"code-keyword\">this</span>.captionParser_,<span class=\"code-keyword\">this</span>.createSimplifiedSegmentObj_(e),<span class=\"code-keyword\">this</span>.handleProgress_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.segmentRequestFinished_.bind(<span class=\"code-keyword\">this</span>))}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"trimBackBuffer_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> n=e.length&amp;&amp;e.start(<span class=\"code-number\">0</span>)&gt;<span class=\"code-number\">0</span>&amp;&amp;e.start(<span class=\"code-number\">0</span>)&lt;t?e.start(<span class=\"code-number\">0</span>):t<span class=\"code-number\">-30</span>,<span class=\"code-built_in\">Math</span>.min(n,t-i)}(<span class=\"code-keyword\">this</span>.seekable_(),<span class=\"code-keyword\">this</span>.currentTime_(),<span class=\"code-keyword\">this</span>.playlist_.targetDuration||<span class=\"code-number\">10</span>);t&gt;<span class=\"code-number\">0</span>&amp;&amp;<span class=\"code-keyword\">this</span>.remove(<span class=\"code-number\">0</span>,t)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"createSimplifiedSegmentObj_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segment,i={<span class=\"code-attr\">resolvedUri</span>:t.resolvedUri,<span class=\"code-attr\">byterange</span>:t.byterange,<span class=\"code-attr\">requestId</span>:e.requestId};<span class=\"code-keyword\">if</span>(t.key){<span class=\"code-keyword\">var</span> n=t.key.iv||<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,e.mediaIndex+e.playlist.mediaSequence]);i.key=<span class=\"code-keyword\">this</span>.segmentKey(t.key),i.key.iv=n}<span class=\"code-keyword\">return</span> t.map&amp;&amp;(i.map=<span class=\"code-keyword\">this</span>.initSegment(t.map)),i}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"segmentRequestFinished_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.mediaRequests+=<span class=\"code-number\">1</span>,t.stats&amp;&amp;(<span class=\"code-keyword\">this</span>.mediaBytesTransferred+=t.stats.bytesReceived,<span class=\"code-keyword\">this</span>.mediaTransferDuration+=t.stats.roundTripTime),<span class=\"code-keyword\">this</span>.pendingSegment_){<span class=\"code-keyword\">if</span>(t.requestId===<span class=\"code-keyword\">this</span>.pendingSegment_.requestId){<span class=\"code-keyword\">if</span>(e)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.pendingSegment_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,e.code===bi?<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.mediaRequestsAborted+=<span class=\"code-number\">1</span>):(<span class=\"code-keyword\">this</span>.pause(),e.code===vi?(<span class=\"code-keyword\">this</span>.mediaRequestsTimedout+=<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.bandwidth=<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.roundTrip=<span class=\"code-literal\">NaN</span>,<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"bandwidthupdate\"</span>)):(<span class=\"code-keyword\">this</span>.mediaRequestsErrored+=<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.error(e),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"error\"</span>)));<span class=\"code-keyword\">this</span>.bandwidth=t.stats.bandwidth,<span class=\"code-keyword\">this</span>.roundTrip=t.stats.roundTripTime,t.map&amp;&amp;(t.map=<span class=\"code-keyword\">this</span>.initSegment(t.map,!<span class=\"code-number\">0</span>)),t.key&amp;&amp;<span class=\"code-keyword\">this</span>.segmentKey(t.key,!<span class=\"code-number\">0</span>),<span class=\"code-keyword\">this</span>.processSegmentResponse_(t)}}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.mediaRequestsAborted+=<span class=\"code-number\">1</span>}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"processSegmentResponse_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.pendingSegment_;t.bytes=e.bytes,e.map&amp;&amp;(t.segment.map.bytes=e.map.bytes),t.endOfAllRequests=e.endOfAllRequests,e.fmp4Captions&amp;&amp;(!<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> i)<span class=\"code-keyword\">if</span>(!e[n]){t.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-608\"</span>});<span class=\"code-keyword\">var</span> r=t.textTracks().getTrackById(n);e[n]=r||t.addRemoteTextTrack({<span class=\"code-attr\">kind</span>:<span class=\"code-string\">\"captions\"</span>,<span class=\"code-attr\">id</span>:n,<span class=\"code-attr\">label</span>:n},!<span class=\"code-number\">1</span>).track}}(<span class=\"code-keyword\">this</span>.inbandTextTracks_,<span class=\"code-keyword\">this</span>.hls_.tech_,e.captionStreams),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.inbandTextTracks,i=e.captionArray,n=e.timestampOffset;<span class=\"code-keyword\">if</span>(i){<span class=\"code-keyword\">var</span> r=<span class=\"code-built_in\">window</span>.WebKitDataCue||<span class=\"code-built_in\">window</span>.VTTCue;i.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=e.stream,a=e.startTime,s=e.endTime;t[i]&amp;&amp;(a+=n,s+=n,t[i].addCue(<span class=\"code-keyword\">new</span> r(a,s,e.text)))})}}({<span class=\"code-attr\">inbandTextTracks</span>:<span class=\"code-keyword\">this</span>.inbandTextTracks_,<span class=\"code-attr\">captionArray</span>:e.fmp4Captions,<span class=\"code-attr\">timestampOffset</span>:<span class=\"code-number\">0</span>}),<span class=\"code-keyword\">this</span>.captionParser_&amp;&amp;<span class=\"code-keyword\">this</span>.captionParser_.clearParsedCaptions()),<span class=\"code-keyword\">this</span>.handleSegment_()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"handleSegment_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.pendingSegment_){<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.pendingSegment_,i=t.segment,n=<span class=\"code-keyword\">this</span>.syncController_.probeSegmentInfo(t);<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.startingMedia_&amp;&amp;n&amp;&amp;(n.containsAudio||n.containsVideo)&amp;&amp;(<span class=\"code-keyword\">this</span>.startingMedia_={<span class=\"code-attr\">containsAudio</span>:n.containsAudio,<span class=\"code-attr\">containsVideo</span>:n.containsVideo});<span class=\"code-keyword\">var</span> r,a,s,o=(r=<span class=\"code-keyword\">this</span>.loaderType_,a=<span class=\"code-keyword\">this</span>.startingMedia_,s=n,<span class=\"code-string\">\"main\"</span>===r&amp;&amp;a&amp;&amp;s?s.containsAudio||s.containsVideo?a.containsVideo&amp;&amp;!s.containsVideo?<span class=\"code-string\">\"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.\"</span>:!a.containsVideo&amp;&amp;s.containsVideo?<span class=\"code-string\">\"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.\"</span>:<span class=\"code-literal\">null</span>:<span class=\"code-string\">\"Neither audio nor video found in segment.\"</span>:<span class=\"code-literal\">null</span>);<span class=\"code-keyword\">if</span>(o)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.error({<span class=\"code-attr\">message</span>:o,<span class=\"code-attr\">blacklistDuration</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>}),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"error\"</span>);<span class=\"code-keyword\">if</span>(t.isSyncRequest)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"syncinfoupdate\"</span>),<span class=\"code-keyword\">this</span>.pendingSegment_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>);<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>!==t.timestampOffset&amp;&amp;t.timestampOffset!==<span class=\"code-keyword\">this</span>.sourceUpdater_.timestampOffset()){<span class=\"code-keyword\">if</span>(n&amp;&amp;n.segmentTimestampInfo){<span class=\"code-keyword\">var</span> u=n.segmentTimestampInfo[<span class=\"code-number\">0</span>].ptsTime,d=n.segmentTimestampInfo[<span class=\"code-number\">0</span>].dtsTime;t.timestampOffset-=u-d}<span class=\"code-keyword\">this</span>.sourceUpdater_.timestampOffset(t.timestampOffset),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timestampoffset\"</span>)}<span class=\"code-keyword\">var</span> l=<span class=\"code-keyword\">this</span>.syncController_.mappingForTimeline(t.timeline);<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>!==l&amp;&amp;<span class=\"code-keyword\">this</span>.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"segmenttimemapping\"</span>,<span class=\"code-attr\">mapping</span>:l}),<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"APPENDING\"</span>,i.map){<span class=\"code-keyword\">var</span> h=fe(i.map);<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.activeInitSegmentId_||<span class=\"code-keyword\">this</span>.activeInitSegmentId_!==h){<span class=\"code-keyword\">var</span> c=<span class=\"code-keyword\">this</span>.initSegment(i.map);<span class=\"code-keyword\">this</span>.sourceUpdater_.appendBuffer({<span class=\"code-attr\">bytes</span>:c.bytes},<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.activeInitSegmentId_=h})}}t.byteLength=t.bytes.byteLength,<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> i.start&amp;&amp;<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> i.end?<span class=\"code-keyword\">this</span>.mediaSecondsLoaded+=i.end-i.start:<span class=\"code-keyword\">this</span>.mediaSecondsLoaded+=i.duration,<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segment,i=t.start,n=t.end,r=e.playlist,a=r.mediaSequence,s=r.id,o=r.segments,u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===o?[]:o,d=e.mediaIndex,l=e.timeline;<span class=\"code-keyword\">return</span>[<span class=\"code-string\">\"appending [\"</span>+d+<span class=\"code-string\">\"] of [\"</span>+a+<span class=\"code-string\">\", \"</span>+(a+u.length)+<span class=\"code-string\">\"] from playlist [\"</span>+s+<span class=\"code-string\">\"]\"</span>,<span class=\"code-string\">\"[\"</span>+i+<span class=\"code-string\">\" =&gt; \"</span>+n+<span class=\"code-string\">\"] in timeline [\"</span>+l+<span class=\"code-string\">\"]\"</span>].join(<span class=\"code-string\">\" \"</span>)}(t)),<span class=\"code-keyword\">this</span>.sourceUpdater_.appendBuffer({<span class=\"code-attr\">bytes</span>:t.bytes,<span class=\"code-attr\">videoSegmentTimingInfoCallback</span>:<span class=\"code-keyword\">this</span>.handleVideoSegmentTimingInfo_.bind(<span class=\"code-keyword\">this</span>,t.requestId)},<span class=\"code-keyword\">this</span>.handleUpdateEnd_.bind(<span class=\"code-keyword\">this</span>))}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"handleVideoSegmentTimingInfo_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.pendingSegment_&amp;&amp;e===<span class=\"code-keyword\">this</span>.pendingSegment_.requestId){<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.pendingSegment_.segment;i.videoTimingInfo||(i.videoTimingInfo={}),i.videoTimingInfo.transmuxerPrependedSeconds=t.videoSegmentTimingInfo.prependedContentDuration||<span class=\"code-number\">0</span>,i.videoTimingInfo.transmuxedPresentationStart=t.videoSegmentTimingInfo.start.presentation,i.videoTimingInfo.transmuxedPresentationEnd=t.videoSegmentTimingInfo.end.presentation,i.videoTimingInfo.baseMediaDecodeTime=t.videoSegmentTimingInfo.baseMediaDecodeTime}}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"handleUpdateEnd_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.pendingSegment_)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.paused()||<span class=\"code-keyword\">this</span>.monitorBuffer_());<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.pendingSegment_,t=e.segment,i=<span class=\"code-literal\">null</span>!==<span class=\"code-keyword\">this</span>.mediaIndex;<span class=\"code-keyword\">this</span>.pendingSegment_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.recordThroughput_(e),<span class=\"code-keyword\">this</span>.addSegmentMetadataCue_(e),<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,<span class=\"code-keyword\">this</span>.mediaIndex=e.mediaIndex,<span class=\"code-keyword\">this</span>.fetchAtBuffer_=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.currentTimeline_=e.timeline,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"syncinfoupdate\"</span>),t.end&amp;&amp;<span class=\"code-keyword\">this</span>.currentTime_()-t.end&gt;<span class=\"code-number\">3</span>*e.playlist.targetDuration?<span class=\"code-keyword\">this</span>.resetEverything():(i&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"bandwidthupdate\"</span>),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"progress\"</span>),<span class=\"code-keyword\">this</span>.isEndOfStream_(e.mediaIndex+<span class=\"code-number\">1</span>,e.playlist)&amp;&amp;<span class=\"code-keyword\">this</span>.endOfStream(),<span class=\"code-keyword\">this</span>.paused()||<span class=\"code-keyword\">this</span>.monitorBuffer_())}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"recordThroughput_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.throughput.rate,i=<span class=\"code-built_in\">Date</span>.now()-e.endOfAllRequests+<span class=\"code-number\">1</span>,n=<span class=\"code-built_in\">Math</span>.floor(e.byteLength/i*<span class=\"code-number\">8</span>*<span class=\"code-number\">1e3</span>);<span class=\"code-keyword\">this</span>.throughput.rate+=(n-t)/++<span class=\"code-keyword\">this</span>.throughput.count}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"addSegmentMetadataCue_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.segmentMetadataTrack_){<span class=\"code-keyword\">var</span> t=e.segment,i=t.start,n=t.end;<span class=\"code-keyword\">if</span>(Xi(i)&amp;&amp;Xi(n)){we(i,n,<span class=\"code-keyword\">this</span>.segmentMetadataTrack_);<span class=\"code-keyword\">var</span> r=u.WebKitDataCue||u.VTTCue,a={<span class=\"code-attr\">custom</span>:t.custom,<span class=\"code-attr\">dateTimeObject</span>:t.dateTimeObject,<span class=\"code-attr\">dateTimeString</span>:t.dateTimeString,<span class=\"code-attr\">bandwidth</span>:e.playlist.attributes.BANDWIDTH,<span class=\"code-attr\">resolution</span>:e.playlist.attributes.RESOLUTION,<span class=\"code-attr\">codecs</span>:e.playlist.attributes.CODECS,<span class=\"code-attr\">byteLength</span>:e.byteLength,<span class=\"code-attr\">uri</span>:e.uri,<span class=\"code-attr\">timeline</span>:e.timeline,<span class=\"code-attr\">playlist</span>:e.playlist.uri,<span class=\"code-attr\">start</span>:i,<span class=\"code-attr\">end</span>:n},s=<span class=\"code-keyword\">new</span> r(i,n,<span class=\"code-built_in\">JSON</span>.stringify(a));s.value=a,<span class=\"code-keyword\">this</span>.segmentMetadataTrack_.addCue(s)}}}}]),i}(t.EventTarget),Ki=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">decodeURIComponent</span>(<span class=\"code-built_in\">escape</span>(<span class=\"code-built_in\">String</span>.fromCharCode.apply(<span class=\"code-literal\">null</span>,e)))},$i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(<span class=\"code-string\">\"\\n\\n\"</span>.split(<span class=\"code-string\">\"\"</span>).map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.charCodeAt(<span class=\"code-number\">0</span>)})),Qi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">i</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-built_in\">arguments</span>.length&gt;<span class=\"code-number\">1</span>&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]?<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]:{};_(<span class=\"code-keyword\">this</span>,i);<span class=\"code-keyword\">var</span> n=T(<span class=\"code-keyword\">this</span>,(i.__proto__||<span class=\"code-built_in\">Object</span>.getPrototypeOf(i)).call(<span class=\"code-keyword\">this</span>,e,t));<span class=\"code-keyword\">return</span> n.mediaSource_=<span class=\"code-literal\">null</span>,n.subtitlesTrack_=<span class=\"code-literal\">null</span>,n}<span class=\"code-keyword\">return</span> b(i,Yi),v(i,[{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"buffered_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.subtitlesTrack_||!<span class=\"code-keyword\">this</span>.subtitlesTrack_.cues.length)<span class=\"code-keyword\">return</span> t.createTimeRanges();<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.subtitlesTrack_.cues,i=e[<span class=\"code-number\">0</span>].startTime,n=e[e.length<span class=\"code-number\">-1</span>].startTime;<span class=\"code-keyword\">return</span> t.createTimeRanges([[i,n]])}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"initSegment\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-built_in\">arguments</span>.length&gt;<span class=\"code-number\">1</span>&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]&amp;&amp;<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>];<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i=fe(e),n=<span class=\"code-keyword\">this</span>.initSegments_[i];<span class=\"code-keyword\">if</span>(t&amp;&amp;!n&amp;&amp;e.bytes){<span class=\"code-keyword\">var</span> r=$i.byteLength+e.bytes.byteLength,a=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(r);a.set(e.bytes),a.set($i,e.bytes.byteLength),<span class=\"code-keyword\">this</span>.initSegments_[i]=n={<span class=\"code-attr\">resolvedUri</span>:e.resolvedUri,<span class=\"code-attr\">byterange</span>:e.byterange,<span class=\"code-attr\">bytes</span>:a}}<span class=\"code-keyword\">return</span> n||e}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"couldBeginLoading_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.playlist_&amp;&amp;<span class=\"code-keyword\">this</span>.subtitlesTrack_&amp;&amp;!<span class=\"code-keyword\">this</span>.paused()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"init_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,<span class=\"code-keyword\">this</span>.resetEverything(),<span class=\"code-keyword\">this</span>.monitorBuffer_()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"track\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e?<span class=\"code-keyword\">this</span>.subtitlesTrack_:(<span class=\"code-keyword\">this</span>.subtitlesTrack_=e,<span class=\"code-string\">\"INIT\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;<span class=\"code-keyword\">this</span>.couldBeginLoading_()&amp;&amp;<span class=\"code-keyword\">this</span>.init_(),<span class=\"code-keyword\">this</span>.subtitlesTrack_)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"remove\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{we(e,t,<span class=\"code-keyword\">this</span>.subtitlesTrack_)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"fillBuffer_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.syncPoint_||(<span class=\"code-keyword\">this</span>.syncPoint_=<span class=\"code-keyword\">this</span>.syncController_.getSyncPoint(<span class=\"code-keyword\">this</span>.playlist_,<span class=\"code-keyword\">this</span>.duration_(),<span class=\"code-keyword\">this</span>.currentTimeline_,<span class=\"code-keyword\">this</span>.currentTime_()));<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.checkBuffer_(<span class=\"code-keyword\">this</span>.buffered_(),<span class=\"code-keyword\">this</span>.playlist_,<span class=\"code-keyword\">this</span>.mediaIndex,<span class=\"code-keyword\">this</span>.hasPlayed_(),<span class=\"code-keyword\">this</span>.currentTime_(),<span class=\"code-keyword\">this</span>.syncPoint_);<span class=\"code-keyword\">if</span>(t=<span class=\"code-keyword\">this</span>.skipEmptySegments_(t)){<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>===<span class=\"code-keyword\">this</span>.syncController_.timestampOffsetForTimeline(t.timeline)){<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.syncController_.one(<span class=\"code-string\">\"timestampoffset\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.state=<span class=\"code-string\">\"READY\"</span>,e.paused()||e.monitorBuffer_()}),<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"WAITING_ON_TIMELINE\"</span>)}<span class=\"code-keyword\">this</span>.loadSegment_(t)}}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"skipEmptySegments_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(;e&amp;&amp;e.segment.empty;)e=<span class=\"code-keyword\">this</span>.generateSegmentInfo_(e.playlist,e.mediaIndex+<span class=\"code-number\">1</span>,e.startOfSegment+e.duration,e.isSyncRequest);<span class=\"code-keyword\">return</span> e}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"handleSegment_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.pendingSegment_&amp;&amp;<span class=\"code-keyword\">this</span>.subtitlesTrack_){<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"APPENDING\"</span>;<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.pendingSegment_,i=t.segment;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"function\"</span>!=<span class=\"code-keyword\">typeof</span> u.WebVTT&amp;&amp;<span class=\"code-keyword\">this</span>.subtitlesTrack_&amp;&amp;<span class=\"code-keyword\">this</span>.subtitlesTrack_.tech_){<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.subtitlesTrack_.tech_.off(<span class=\"code-string\">\"vttjsloaded\"</span>,n),e.error({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Error loading vtt.js\"</span>}),e.state=<span class=\"code-string\">\"READY\"</span>,e.pause(),e.trigger(<span class=\"code-string\">\"error\"</span>)};<span class=\"code-keyword\">return</span> n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.subtitlesTrack_.tech_.off(<span class=\"code-string\">\"vttjserror\"</span>,r),e.handleSegment_()},<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"WAITING_ON_VTTJS\"</span>,<span class=\"code-keyword\">this</span>.subtitlesTrack_.tech_.one(<span class=\"code-string\">\"vttjsloaded\"</span>,n),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.subtitlesTrack_.tech_.one(<span class=\"code-string\">\"vttjserror\"</span>,r)}i.requested=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">try</span>{<span class=\"code-keyword\">this</span>.parseVTTCues_(t)}<span class=\"code-keyword\">catch</span>(e){<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.error({<span class=\"code-attr\">message</span>:e.message}),<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,<span class=\"code-keyword\">this</span>.pause(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"error\"</span>)}<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.updateTimeMapping_(t,<span class=\"code-keyword\">this</span>.syncController_.timelines[t.timeline],<span class=\"code-keyword\">this</span>.playlist_),t.isSyncRequest)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"syncinfoupdate\"</span>),<span class=\"code-keyword\">this</span>.pendingSegment_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>);t.byteLength=t.bytes.byteLength,<span class=\"code-keyword\">this</span>.mediaSecondsLoaded+=i.duration,t.cues.length&amp;&amp;<span class=\"code-keyword\">this</span>.remove(t.cues[<span class=\"code-number\">0</span>].endTime,t.cues[t.cues.length<span class=\"code-number\">-1</span>].endTime),t.cues.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.subtitlesTrack_.addCue(t)}),<span class=\"code-keyword\">this</span>.handleUpdateEnd_()}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"parseVTTCues_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,n=!<span class=\"code-number\">1</span>;<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> u.TextDecoder?i=<span class=\"code-keyword\">new</span> u.TextDecoder(<span class=\"code-string\">\"utf8\"</span>):(i=u.WebVTT.StringDecoder(),n=!<span class=\"code-number\">0</span>);<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">new</span> u.WebVTT.Parser(u,u.vttjs,i);<span class=\"code-keyword\">if</span>(e.cues=[],e.timestampmap={<span class=\"code-attr\">MPEGTS</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">LOCAL</span>:<span class=\"code-number\">0</span>},r.oncue=e.cues.push.bind(e.cues),r.ontimestampmap=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span> e.timestampmap=t},r.onparsingerror=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{t.log.warn(<span class=\"code-string\">\"Error encountered when parsing cues: \"</span>+e.message)},e.segment.map){<span class=\"code-keyword\">var</span> a=e.segment.map.bytes;n&amp;&amp;(a=Ki(a)),r.parse(a)}<span class=\"code-keyword\">var</span> s=e.bytes;n&amp;&amp;(s=Ki(s)),r.parse(s),r.flush()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"updateTimeMapping_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=e.segment;<span class=\"code-keyword\">if</span>(t)<span class=\"code-keyword\">if</span>(e.cues.length){<span class=\"code-keyword\">var</span> r=e.timestampmap,a=r.MPEGTS/<span class=\"code-number\">9e4</span>-r.LOCAL+t.mapping;<span class=\"code-keyword\">if</span>(e.cues.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.startTime+=a,e.endTime+=a}),!i.syncInfo){<span class=\"code-keyword\">var</span> s=e.cues[<span class=\"code-number\">0</span>].startTime,o=e.cues[e.cues.length<span class=\"code-number\">-1</span>].startTime;i.syncInfo={<span class=\"code-attr\">mediaSequence</span>:i.mediaSequence+e.mediaIndex,<span class=\"code-attr\">time</span>:<span class=\"code-built_in\">Math</span>.min(s,o-n.duration)}}}<span class=\"code-keyword\">else</span> n.empty=!<span class=\"code-number\">0</span>}}]),i}(),Ji=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=e.cues,n=<span class=\"code-number\">0</span>;n&lt;i.length;n++){<span class=\"code-keyword\">var</span> r=i[n];<span class=\"code-keyword\">if</span>(t&gt;=r.adStartTime&amp;&amp;t&lt;=r.adEndTime)<span class=\"code-keyword\">return</span> r}<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>},Zi=<span class=\"code-number\">27</span>,en=<span class=\"code-number\">15</span>,tn=<span class=\"code-number\">21</span>,nn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">1</span>;<span class=\"code-keyword\">for</span>(e&gt;t&amp;&amp;(i=<span class=\"code-number\">-1</span>);<span class=\"code-built_in\">Math</span>.abs(t-e)&gt;<span class=\"code-number\">4294967296</span>;)e+=<span class=\"code-number\">8589934592</span>*i;<span class=\"code-keyword\">return</span> e},rn=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i,n;e.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.type_=t||<span class=\"code-string\">\"shared\"</span>,<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-string\">\"shared\"</span>!==<span class=\"code-keyword\">this</span>.type_&amp;&amp;e.type!==<span class=\"code-keyword\">this</span>.type_||(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n=e.dts),e.dts=nn(e.dts,n),e.pts=nn(e.pts,n),i=e.dts,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,e))},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n=i,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>)},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.flush(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>)},<span class=\"code-keyword\">this</span>.discontinuity=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.discontinuity(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)}};rn.prototype=<span class=\"code-keyword\">new</span> xi;<span class=\"code-keyword\">var</span> an,sn,on,un,dn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">31</span>&amp;e[<span class=\"code-number\">1</span>];<span class=\"code-keyword\">return</span> t&lt;&lt;=<span class=\"code-number\">8</span>,t|=e[<span class=\"code-number\">2</span>]},ln=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!!(<span class=\"code-number\">64</span>&amp;e[<span class=\"code-number\">1</span>])},hn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span>(<span class=\"code-number\">48</span>&amp;e[<span class=\"code-number\">3</span>])&gt;&gt;&gt;<span class=\"code-number\">4</span>&gt;<span class=\"code-number\">1</span>&amp;&amp;(t+=e[<span class=\"code-number\">4</span>]+<span class=\"code-number\">1</span>),t},cn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">switch</span>(e){<span class=\"code-keyword\">case</span> <span class=\"code-number\">5</span>:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"slice_layer_without_partitioning_rbsp_idr\"</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">6</span>:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"sei_rbsp\"</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">7</span>:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"seq_parameter_set_rbsp\"</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">8</span>:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"pic_parameter_set_rbsp\"</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">9</span>:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"access_unit_delimiter_rbsp\"</span>;<span class=\"code-keyword\">default</span>:<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}},fn={<span class=\"code-attr\">parseType</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=dn(e);<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>===i?<span class=\"code-string\">\"pat\"</span>:i===t?<span class=\"code-string\">\"pmt\"</span>:t?<span class=\"code-string\">\"pes\"</span>:<span class=\"code-literal\">null</span>},<span class=\"code-attr\">parsePat</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=ln(e),i=<span class=\"code-number\">4</span>+hn(e);<span class=\"code-keyword\">return</span> t&amp;&amp;(i+=e[i]+<span class=\"code-number\">1</span>),(<span class=\"code-number\">31</span>&amp;e[i+<span class=\"code-number\">10</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[i+<span class=\"code-number\">11</span>]},<span class=\"code-attr\">parsePmt</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t={},i=ln(e),n=<span class=\"code-number\">4</span>+hn(e);<span class=\"code-keyword\">if</span>(i&amp;&amp;(n+=e[n]+<span class=\"code-number\">1</span>),<span class=\"code-number\">1</span>&amp;e[n+<span class=\"code-number\">5</span>]){<span class=\"code-keyword\">var</span> r;r=<span class=\"code-number\">3</span>+((<span class=\"code-number\">15</span>&amp;e[n+<span class=\"code-number\">1</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[n+<span class=\"code-number\">2</span>])<span class=\"code-number\">-4</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a=<span class=\"code-number\">12</span>+((<span class=\"code-number\">15</span>&amp;e[n+<span class=\"code-number\">10</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[n+<span class=\"code-number\">11</span>]);a&lt;r;){<span class=\"code-keyword\">var</span> s=n+a;t[(<span class=\"code-number\">31</span>&amp;e[s+<span class=\"code-number\">1</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[s+<span class=\"code-number\">2</span>]]=e[s],a+=<span class=\"code-number\">5</span>+((<span class=\"code-number\">15</span>&amp;e[s+<span class=\"code-number\">3</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[s+<span class=\"code-number\">4</span>])}<span class=\"code-keyword\">return</span> t}},<span class=\"code-attr\">parsePayloadUnitStartIndicator</span>:ln,<span class=\"code-attr\">parsePesType</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">switch</span>(t[dn(e)]){<span class=\"code-keyword\">case</span> Zi:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"video\"</span>;<span class=\"code-keyword\">case</span> en:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"audio\"</span>;<span class=\"code-keyword\">case</span> tn:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"timed-metadata\"</span>;<span class=\"code-keyword\">default</span>:<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}},<span class=\"code-attr\">parsePesTime</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!ln(e))<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">4</span>+hn(e);<span class=\"code-keyword\">if</span>(t&gt;=e.byteLength)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i,n=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">return</span> <span class=\"code-number\">192</span>&amp;(i=e[t+<span class=\"code-number\">7</span>])&amp;&amp;((n={}).pts=(<span class=\"code-number\">14</span>&amp;e[t+<span class=\"code-number\">9</span>])&lt;&lt;<span class=\"code-number\">27</span>|(<span class=\"code-number\">255</span>&amp;e[t+<span class=\"code-number\">10</span>])&lt;&lt;<span class=\"code-number\">20</span>|(<span class=\"code-number\">254</span>&amp;e[t+<span class=\"code-number\">11</span>])&lt;&lt;<span class=\"code-number\">12</span>|(<span class=\"code-number\">255</span>&amp;e[t+<span class=\"code-number\">12</span>])&lt;&lt;<span class=\"code-number\">5</span>|(<span class=\"code-number\">254</span>&amp;e[t+<span class=\"code-number\">13</span>])&gt;&gt;&gt;<span class=\"code-number\">3</span>,n.pts*=<span class=\"code-number\">4</span>,n.pts+=(<span class=\"code-number\">6</span>&amp;e[t+<span class=\"code-number\">13</span>])&gt;&gt;&gt;<span class=\"code-number\">1</span>,n.dts=n.pts,<span class=\"code-number\">64</span>&amp;i&amp;&amp;(n.dts=(<span class=\"code-number\">14</span>&amp;e[t+<span class=\"code-number\">14</span>])&lt;&lt;<span class=\"code-number\">27</span>|(<span class=\"code-number\">255</span>&amp;e[t+<span class=\"code-number\">15</span>])&lt;&lt;<span class=\"code-number\">20</span>|(<span class=\"code-number\">254</span>&amp;e[t+<span class=\"code-number\">16</span>])&lt;&lt;<span class=\"code-number\">12</span>|(<span class=\"code-number\">255</span>&amp;e[t+<span class=\"code-number\">17</span>])&lt;&lt;<span class=\"code-number\">5</span>|(<span class=\"code-number\">254</span>&amp;e[t+<span class=\"code-number\">18</span>])&gt;&gt;&gt;<span class=\"code-number\">3</span>,n.dts*=<span class=\"code-number\">4</span>,n.dts+=(<span class=\"code-number\">6</span>&amp;e[t+<span class=\"code-number\">18</span>])&gt;&gt;&gt;<span class=\"code-number\">1</span>)),n},<span class=\"code-attr\">videoPacketContainsKeyFrame</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">4</span>+hn(e),i=e.subarray(t),n=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">0</span>,a=!<span class=\"code-number\">1</span>;r&lt;i.byteLength<span class=\"code-number\">-3</span>;r++)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">1</span>===i[r+<span class=\"code-number\">2</span>]){n=r+<span class=\"code-number\">5</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-keyword\">for</span>(;n&lt;i.byteLength;)<span class=\"code-keyword\">switch</span>(i[n]){<span class=\"code-keyword\">case</span> <span class=\"code-number\">0</span>:<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==i[n<span class=\"code-number\">-1</span>]){n+=<span class=\"code-number\">2</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==i[n<span class=\"code-number\">-2</span>]){n++;<span class=\"code-keyword\">break</span>}r+<span class=\"code-number\">3</span>!==n<span class=\"code-number\">-2</span>&amp;&amp;<span class=\"code-string\">\"slice_layer_without_partitioning_rbsp_idr\"</span>===cn(<span class=\"code-number\">31</span>&amp;i[r+<span class=\"code-number\">3</span>])&amp;&amp;(a=!<span class=\"code-number\">0</span>);<span class=\"code-keyword\">do</span>{n++}<span class=\"code-keyword\">while</span>(<span class=\"code-number\">1</span>!==i[n]&amp;&amp;n&lt;i.length);r=n<span class=\"code-number\">-2</span>,n+=<span class=\"code-number\">3</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">1</span>:<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==i[n<span class=\"code-number\">-1</span>]||<span class=\"code-number\">0</span>!==i[n<span class=\"code-number\">-2</span>]){n+=<span class=\"code-number\">3</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-string\">\"slice_layer_without_partitioning_rbsp_idr\"</span>===cn(<span class=\"code-number\">31</span>&amp;i[r+<span class=\"code-number\">3</span>])&amp;&amp;(a=!<span class=\"code-number\">0</span>),r=n<span class=\"code-number\">-2</span>,n+=<span class=\"code-number\">3</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">default</span>:n+=<span class=\"code-number\">3</span>}<span class=\"code-keyword\">return</span> i=i.subarray(r),n-=r,r=<span class=\"code-number\">0</span>,i&amp;&amp;i.byteLength&gt;<span class=\"code-number\">3</span>&amp;&amp;<span class=\"code-string\">\"slice_layer_without_partitioning_rbsp_idr\"</span>===cn(<span class=\"code-number\">31</span>&amp;i[r+<span class=\"code-number\">3</span>])&amp;&amp;(a=!<span class=\"code-number\">0</span>),a}},pn=[<span class=\"code-number\">96e3</span>,<span class=\"code-number\">88200</span>,<span class=\"code-number\">64e3</span>,<span class=\"code-number\">48e3</span>,<span class=\"code-number\">44100</span>,<span class=\"code-number\">32e3</span>,<span class=\"code-number\">24e3</span>,<span class=\"code-number\">22050</span>,<span class=\"code-number\">16e3</span>,<span class=\"code-number\">12e3</span>,<span class=\"code-number\">11025</span>,<span class=\"code-number\">8e3</span>,<span class=\"code-number\">7350</span>],mn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e[<span class=\"code-number\">0</span>]&lt;&lt;<span class=\"code-number\">21</span>|e[<span class=\"code-number\">1</span>]&lt;&lt;<span class=\"code-number\">14</span>|e[<span class=\"code-number\">2</span>]&lt;&lt;<span class=\"code-number\">7</span>|e[<span class=\"code-number\">3</span>]},gn={<span class=\"code-attr\">isLikelyAacData</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e[<span class=\"code-number\">0</span>]===<span class=\"code-string\">\"I\"</span>.charCodeAt(<span class=\"code-number\">0</span>)&amp;&amp;e[<span class=\"code-number\">1</span>]===<span class=\"code-string\">\"D\"</span>.charCodeAt(<span class=\"code-number\">0</span>)&amp;&amp;e[<span class=\"code-number\">2</span>]===<span class=\"code-string\">\"3\"</span>.charCodeAt(<span class=\"code-number\">0</span>)},<span class=\"code-attr\">parseId3TagSize</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e[t+<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">21</span>|e[t+<span class=\"code-number\">7</span>]&lt;&lt;<span class=\"code-number\">14</span>|e[t+<span class=\"code-number\">8</span>]&lt;&lt;<span class=\"code-number\">7</span>|e[t+<span class=\"code-number\">9</span>];<span class=\"code-keyword\">return</span>(<span class=\"code-number\">16</span>&amp;e[t+<span class=\"code-number\">5</span>])&gt;&gt;<span class=\"code-number\">4</span>?i+<span class=\"code-number\">20</span>:i+<span class=\"code-number\">10</span>},<span class=\"code-attr\">parseAdtsSize</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=(<span class=\"code-number\">224</span>&amp;e[t+<span class=\"code-number\">5</span>])&gt;&gt;<span class=\"code-number\">5</span>,n=e[t+<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">3</span>;<span class=\"code-keyword\">return</span> <span class=\"code-number\">6144</span>&amp;e[t+<span class=\"code-number\">3</span>]|n|i},<span class=\"code-attr\">parseType</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e[t]===<span class=\"code-string\">\"I\"</span>.charCodeAt(<span class=\"code-number\">0</span>)&amp;&amp;e[t+<span class=\"code-number\">1</span>]===<span class=\"code-string\">\"D\"</span>.charCodeAt(<span class=\"code-number\">0</span>)&amp;&amp;e[t+<span class=\"code-number\">2</span>]===<span class=\"code-string\">\"3\"</span>.charCodeAt(<span class=\"code-number\">0</span>)?<span class=\"code-string\">\"timed-metadata\"</span>:!<span class=\"code-number\">0</span>&amp;e[t]&amp;&amp;<span class=\"code-number\">240</span>==(<span class=\"code-number\">240</span>&amp;e[t+<span class=\"code-number\">1</span>])?<span class=\"code-string\">\"audio\"</span>:<span class=\"code-literal\">null</span>},<span class=\"code-attr\">parseSampleRate</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>;t+<span class=\"code-number\">5</span>&lt;e.length;){<span class=\"code-keyword\">if</span>(<span class=\"code-number\">255</span>===e[t]&amp;&amp;<span class=\"code-number\">240</span>==(<span class=\"code-number\">246</span>&amp;e[t+<span class=\"code-number\">1</span>]))<span class=\"code-keyword\">return</span> pn[(<span class=\"code-number\">60</span>&amp;e[t+<span class=\"code-number\">2</span>])&gt;&gt;&gt;<span class=\"code-number\">2</span>];t++}<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>},<span class=\"code-attr\">parseAacTimestamp</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n;t=<span class=\"code-number\">10</span>,<span class=\"code-number\">64</span>&amp;e[<span class=\"code-number\">5</span>]&amp;&amp;(t+=<span class=\"code-number\">4</span>,t+=mn(e.subarray(<span class=\"code-number\">10</span>,<span class=\"code-number\">14</span>)));<span class=\"code-keyword\">do</span>{<span class=\"code-keyword\">if</span>((i=mn(e.subarray(t+<span class=\"code-number\">4</span>,t+<span class=\"code-number\">8</span>)))&lt;<span class=\"code-number\">1</span>)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"PRIV\"</span>===<span class=\"code-built_in\">String</span>.fromCharCode(e[t],e[t+<span class=\"code-number\">1</span>],e[t+<span class=\"code-number\">2</span>],e[t+<span class=\"code-number\">3</span>])){n=e.subarray(t+<span class=\"code-number\">10</span>,t+i+<span class=\"code-number\">10</span>);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;n.byteLength;r++)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===n[r]){<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"com.apple.streaming.transportStreamTimestamp\"</span>===<span class=\"code-built_in\">unescape</span>(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">for</span>(n=t;n&lt;i;n++)r+=<span class=\"code-string\">\"%\"</span>+(<span class=\"code-string\">\"00\"</span>+e[n].toString(<span class=\"code-number\">16</span>)).slice(<span class=\"code-number\">-2</span>);<span class=\"code-keyword\">return</span> r}(n,<span class=\"code-number\">0</span>,r))){<span class=\"code-keyword\">var</span> a=n.subarray(r+<span class=\"code-number\">1</span>),s=(<span class=\"code-number\">1</span>&amp;a[<span class=\"code-number\">3</span>])&lt;&lt;<span class=\"code-number\">30</span>|a[<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">22</span>|a[<span class=\"code-number\">5</span>]&lt;&lt;<span class=\"code-number\">14</span>|a[<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">6</span>|a[<span class=\"code-number\">7</span>]&gt;&gt;&gt;<span class=\"code-number\">2</span>;<span class=\"code-keyword\">return</span> s*=<span class=\"code-number\">4</span>,s+=<span class=\"code-number\">3</span>&amp;a[<span class=\"code-number\">7</span>]}<span class=\"code-keyword\">break</span>}}t+=<span class=\"code-number\">10</span>,t+=i}<span class=\"code-keyword\">while</span>(t&lt;e.byteLength);<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}},yn=<span class=\"code-number\">9e4</span>,_n=(an=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">9e4</span>*e},sn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e*t},on=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e/<span class=\"code-number\">9e4</span>},un=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e/t},nn),vn={};vn.ts=fn,vn.aac=gn;<span class=\"code-keyword\">var</span> bn=yn,Tn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n,r,a,s,o=<span class=\"code-number\">0</span>,u=<span class=\"code-number\">188</span>,d=!<span class=\"code-number\">1</span>;u&lt;=e.byteLength;)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">71</span>!==e[o]||<span class=\"code-number\">71</span>!==e[u]&amp;&amp;u!==e.byteLength)o++,u++;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">switch</span>(n=e.subarray(o,u),vn.ts.parseType(n,t.pid)){<span class=\"code-keyword\">case</span><span class=\"code-string\">\"pes\"</span>:r=vn.ts.parsePesType(n,t.table),a=vn.ts.parsePayloadUnitStartIndicator(n),<span class=\"code-string\">\"audio\"</span>===r&amp;&amp;a&amp;&amp;(s=vn.ts.parsePesTime(n))&amp;&amp;(s.type=<span class=\"code-string\">\"audio\"</span>,i.audio.push(s),d=!<span class=\"code-number\">0</span>)}<span class=\"code-keyword\">if</span>(d)<span class=\"code-keyword\">break</span>;o+=<span class=\"code-number\">188</span>,u+=<span class=\"code-number\">188</span>}<span class=\"code-keyword\">for</span>(o=(u=e.byteLength)<span class=\"code-number\">-188</span>,d=!<span class=\"code-number\">1</span>;o&gt;=<span class=\"code-number\">0</span>;)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">71</span>!==e[o]||<span class=\"code-number\">71</span>!==e[u]&amp;&amp;u!==e.byteLength)o--,u--;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">switch</span>(n=e.subarray(o,u),vn.ts.parseType(n,t.pid)){<span class=\"code-keyword\">case</span><span class=\"code-string\">\"pes\"</span>:r=vn.ts.parsePesType(n,t.table),a=vn.ts.parsePayloadUnitStartIndicator(n),<span class=\"code-string\">\"audio\"</span>===r&amp;&amp;a&amp;&amp;(s=vn.ts.parsePesTime(n))&amp;&amp;(s.type=<span class=\"code-string\">\"audio\"</span>,i.audio.push(s),d=!<span class=\"code-number\">0</span>)}<span class=\"code-keyword\">if</span>(d)<span class=\"code-keyword\">break</span>;o-=<span class=\"code-number\">188</span>,u-=<span class=\"code-number\">188</span>}},Sn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n,r,a,s,o,u,d,l=<span class=\"code-number\">0</span>,h=<span class=\"code-number\">188</span>,c=!<span class=\"code-number\">1</span>,f={<span class=\"code-attr\">data</span>:[],<span class=\"code-attr\">size</span>:<span class=\"code-number\">0</span>};h&lt;e.byteLength;)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">71</span>!==e[l]||<span class=\"code-number\">71</span>!==e[h])l++,h++;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">switch</span>(n=e.subarray(l,h),vn.ts.parseType(n,t.pid)){<span class=\"code-keyword\">case</span><span class=\"code-string\">\"pes\"</span>:<span class=\"code-keyword\">if</span>(r=vn.ts.parsePesType(n,t.table),a=vn.ts.parsePayloadUnitStartIndicator(n),<span class=\"code-string\">\"video\"</span>===r&amp;&amp;(a&amp;&amp;!c&amp;&amp;(s=vn.ts.parsePesTime(n))&amp;&amp;(s.type=<span class=\"code-string\">\"video\"</span>,i.video.push(s),c=!<span class=\"code-number\">0</span>),!i.firstKeyFrame)){<span class=\"code-keyword\">if</span>(a&amp;&amp;<span class=\"code-number\">0</span>!==f.size){<span class=\"code-keyword\">for</span>(o=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(f.size),u=<span class=\"code-number\">0</span>;f.data.length;)d=f.data.shift(),o.set(d,u),u+=d.byteLength;<span class=\"code-keyword\">if</span>(vn.ts.videoPacketContainsKeyFrame(o)){<span class=\"code-keyword\">var</span> p=vn.ts.parsePesTime(o);p?(i.firstKeyFrame=p,i.firstKeyFrame.type=<span class=\"code-string\">\"video\"</span>):<span class=\"code-built_in\">console</span>.warn(<span class=\"code-string\">\"Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.\"</span>)}f.size=<span class=\"code-number\">0</span>}f.data.push(n),f.size+=n.byteLength}}<span class=\"code-keyword\">if</span>(c&amp;&amp;i.firstKeyFrame)<span class=\"code-keyword\">break</span>;l+=<span class=\"code-number\">188</span>,h+=<span class=\"code-number\">188</span>}<span class=\"code-keyword\">for</span>(l=(h=e.byteLength)<span class=\"code-number\">-188</span>,c=!<span class=\"code-number\">1</span>;l&gt;=<span class=\"code-number\">0</span>;)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">71</span>!==e[l]||<span class=\"code-number\">71</span>!==e[h])l--,h--;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">switch</span>(n=e.subarray(l,h),vn.ts.parseType(n,t.pid)){<span class=\"code-keyword\">case</span><span class=\"code-string\">\"pes\"</span>:r=vn.ts.parsePesType(n,t.table),a=vn.ts.parsePayloadUnitStartIndicator(n),<span class=\"code-string\">\"video\"</span>===r&amp;&amp;a&amp;&amp;(s=vn.ts.parsePesTime(n))&amp;&amp;(s.type=<span class=\"code-string\">\"video\"</span>,i.video.push(s),c=!<span class=\"code-number\">0</span>)}<span class=\"code-keyword\">if</span>(c)<span class=\"code-keyword\">break</span>;l-=<span class=\"code-number\">188</span>,h-=<span class=\"code-number\">188</span>}},kn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t={<span class=\"code-attr\">pid</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">table</span>:<span class=\"code-literal\">null</span>},i={};<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i,n=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">188</span>;r&lt;e.byteLength;)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">71</span>!==e[n]||<span class=\"code-number\">71</span>!==e[r])n++,r++;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">switch</span>(i=e.subarray(n,r),vn.ts.parseType(i,t.pid)){<span class=\"code-keyword\">case</span><span class=\"code-string\">\"pat\"</span>:t.pid||(t.pid=vn.ts.parsePat(i));<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span><span class=\"code-string\">\"pmt\"</span>:t.table||(t.table=vn.ts.parsePmt(i))}<span class=\"code-keyword\">if</span>(t.pid&amp;&amp;t.table)<span class=\"code-keyword\">return</span>;n+=<span class=\"code-number\">188</span>,r+=<span class=\"code-number\">188</span>}}(e,t),t.table){<span class=\"code-keyword\">if</span>(t.table.hasOwnProperty(n))<span class=\"code-keyword\">switch</span>(t.table[n]){<span class=\"code-keyword\">case</span> Zi:i.video=[],Sn(e,t,i),<span class=\"code-number\">0</span>===i.video.length&amp;&amp;<span class=\"code-keyword\">delete</span> i.video;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> en:i.audio=[],Tn(e,t,i),<span class=\"code-number\">0</span>===i.audio.length&amp;&amp;<span class=\"code-keyword\">delete</span> i.audio}}<span class=\"code-keyword\">return</span> i},wn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i;<span class=\"code-keyword\">return</span>(i=vn.aac.isLikelyAacData(e)?<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t,i=!<span class=\"code-number\">1</span>,n=<span class=\"code-number\">0</span>,r=<span class=\"code-literal\">null</span>,a=<span class=\"code-literal\">null</span>,s=<span class=\"code-number\">0</span>,o=<span class=\"code-number\">0</span>;e.length-o&gt;=<span class=\"code-number\">3</span>;){<span class=\"code-keyword\">switch</span>(vn.aac.parseType(e,o)){<span class=\"code-keyword\">case</span><span class=\"code-string\">\"timed-metadata\"</span>:<span class=\"code-keyword\">if</span>(e.length-o&lt;<span class=\"code-number\">10</span>){i=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-keyword\">if</span>((s=vn.aac.parseId3TagSize(e,o))&gt;e.length){i=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-literal\">null</span>===a&amp;&amp;(t=e.subarray(o,o+s),a=vn.aac.parseAacTimestamp(t)),o+=s;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span><span class=\"code-string\">\"audio\"</span>:<span class=\"code-keyword\">if</span>(e.length-o&lt;<span class=\"code-number\">7</span>){i=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-keyword\">if</span>((s=vn.aac.parseAdtsSize(e,o))&gt;e.length){i=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-literal\">null</span>===r&amp;&amp;(t=e.subarray(o,o+s),r=vn.aac.parseSampleRate(t)),n++,o+=s;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">default</span>:o++}<span class=\"code-keyword\">if</span>(i)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>===r||<span class=\"code-literal\">null</span>===a)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> u=bn/r;<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">audio</span>:[{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>,<span class=\"code-attr\">dts</span>:a,<span class=\"code-attr\">pts</span>:a},{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>,<span class=\"code-attr\">dts</span>:a+<span class=\"code-number\">1024</span>*n*u,<span class=\"code-attr\">pts</span>:a+<span class=\"code-number\">1024</span>*n*u}]}}(e):kn(e))&amp;&amp;(i.audio||i.video)?(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(e.audio&amp;&amp;e.audio.length){<span class=\"code-keyword\">var</span> i=t;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i=e.audio[<span class=\"code-number\">0</span>].dts),e.audio.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.dts=_n(e.dts,i),e.pts=_n(e.pts,i),e.dtsTime=e.dts/bn,e.ptsTime=e.pts/bn})}<span class=\"code-keyword\">if</span>(e.video&amp;&amp;e.video.length){<span class=\"code-keyword\">var</span> n=t;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n=e.video[<span class=\"code-number\">0</span>].dts),e.video.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.dts=_n(e.dts,n),e.pts=_n(e.pts,n),e.dtsTime=e.dts/bn,e.ptsTime=e.pts/bn}),e.firstKeyFrame){<span class=\"code-keyword\">var</span> r=e.firstKeyFrame;r.dts=_n(r.dts,n),r.pts=_n(r.pts,n),r.dtsTime=r.dts/bn,r.ptsTime=r.dts/bn}}}(i,t),i):<span class=\"code-literal\">null</span>},Ln=[{<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"VOD\"</span>,<span class=\"code-attr\">run</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r</span>)</span>{<span class=\"code-keyword\">if</span>(i!==<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>){<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">time</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">segmentIndex</span>:<span class=\"code-number\">0</span>}}<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}},{<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"ProgramDateTime\"</span>,<span class=\"code-attr\">run</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r</span>)</span>{<span class=\"code-keyword\">if</span>(!e.datetimeToDisplayTime)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> a=t.segments||[],s=<span class=\"code-literal\">null</span>,o=<span class=\"code-literal\">null</span>;r=r||<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> u=<span class=\"code-number\">0</span>;u&lt;a.length;u++){<span class=\"code-keyword\">var</span> d=a[u];<span class=\"code-keyword\">if</span>(d.dateTimeObject){<span class=\"code-keyword\">var</span> l=d.dateTimeObject.getTime()/<span class=\"code-number\">1e3</span>+e.datetimeToDisplayTime,h=<span class=\"code-built_in\">Math</span>.abs(r-l);<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>!==o&amp;&amp;(<span class=\"code-number\">0</span>===h||o&lt;h))<span class=\"code-keyword\">break</span>;o=h,s={<span class=\"code-attr\">time</span>:l,<span class=\"code-attr\">segmentIndex</span>:u}}}<span class=\"code-keyword\">return</span> s}},{<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"Segment\"</span>,<span class=\"code-attr\">run</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r</span>)</span>{<span class=\"code-keyword\">var</span> a=t.segments||[],s=<span class=\"code-literal\">null</span>,o=<span class=\"code-literal\">null</span>;r=r||<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> u=<span class=\"code-number\">0</span>;u&lt;a.length;u++){<span class=\"code-keyword\">var</span> d=a[u];<span class=\"code-keyword\">if</span>(d.timeline===n&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==d.start){<span class=\"code-keyword\">var</span> l=<span class=\"code-built_in\">Math</span>.abs(r-d.start);<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>!==o&amp;&amp;o&lt;l)<span class=\"code-keyword\">break</span>;(!s||<span class=\"code-literal\">null</span>===o||o&gt;=l)&amp;&amp;(o=l,s={<span class=\"code-attr\">time</span>:d.start,<span class=\"code-attr\">segmentIndex</span>:u})}}<span class=\"code-keyword\">return</span> s}},{<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"Discontinuity\"</span>,<span class=\"code-attr\">run</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r</span>)</span>{<span class=\"code-keyword\">var</span> a=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(r=r||<span class=\"code-number\">0</span>,t.discontinuityStarts&amp;&amp;t.discontinuityStarts.length)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> s=<span class=\"code-literal\">null</span>,o=<span class=\"code-number\">0</span>;o&lt;t.discontinuityStarts.length;o++){<span class=\"code-keyword\">var</span> u=t.discontinuityStarts[o],d=t.discontinuitySequence+o+<span class=\"code-number\">1</span>,l=e.discontinuities[d];<span class=\"code-keyword\">if</span>(l){<span class=\"code-keyword\">var</span> h=<span class=\"code-built_in\">Math</span>.abs(r-l.time);<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>!==s&amp;&amp;s&lt;h)<span class=\"code-keyword\">break</span>;(!a||<span class=\"code-literal\">null</span>===s||s&gt;=h)&amp;&amp;(s=h,a={<span class=\"code-attr\">time</span>:l.time,<span class=\"code-attr\">segmentIndex</span>:u})}}<span class=\"code-keyword\">return</span> a}},{<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"Playlist\"</span>,<span class=\"code-attr\">run</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r</span>)</span>{<span class=\"code-keyword\">return</span> t.syncInfo?{<span class=\"code-attr\">time</span>:t.syncInfo.time,<span class=\"code-attr\">segmentIndex</span>:t.syncInfo.mediaSequence-t.mediaSequence}:<span class=\"code-literal\">null</span>}}],En=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\"></span>)</span>{_(<span class=\"code-keyword\">this</span>,t);<span class=\"code-keyword\">var</span> e=T(<span class=\"code-keyword\">this</span>,(t.__proto__||<span class=\"code-built_in\">Object</span>.getPrototypeOf(t)).call(<span class=\"code-keyword\">this</span>));<span class=\"code-keyword\">return</span> e.inspectCache_=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,e.timelines=[],e.discontinuities=[],e.datetimeToDisplayTime=<span class=\"code-literal\">null</span>,e.logger_=si(<span class=\"code-string\">\"SyncController\"</span>),e}<span class=\"code-keyword\">return</span> b(t,e),v(t,[{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"getSyncPoint\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">this</span>.runStrategies_(e,t,i,n);<span class=\"code-keyword\">return</span> r.length?<span class=\"code-keyword\">this</span>.selectSyncPoint_(r,{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"time\"</span>,<span class=\"code-attr\">value</span>:n}):<span class=\"code-literal\">null</span>}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"getExpiredTime\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!e||!e.segments)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.runStrategies_(e,t,e.discontinuitySequence,<span class=\"code-number\">0</span>);<span class=\"code-keyword\">if</span>(!i.length)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>.selectSyncPoint_(i,{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"segmentIndex\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-number\">0</span>});<span class=\"code-keyword\">return</span> n.segmentIndex&gt;<span class=\"code-number\">0</span>&amp;&amp;(n.time*=<span class=\"code-number\">-1</span>),<span class=\"code-built_in\">Math</span>.abs(n.time+x(e,n.segmentIndex,<span class=\"code-number\">0</span>))}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"runStrategies_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=[],a=<span class=\"code-number\">0</span>;a&lt;Ln.length;a++){<span class=\"code-keyword\">var</span> s=Ln[a],o=s.run(<span class=\"code-keyword\">this</span>,e,t,i,n);o&amp;&amp;(o.strategy=s.name,r.push({<span class=\"code-attr\">strategy</span>:s.name,<span class=\"code-attr\">syncPoint</span>:o}))}<span class=\"code-keyword\">return</span> r}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"selectSyncPoint_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=e[<span class=\"code-number\">0</span>].syncPoint,n=<span class=\"code-built_in\">Math</span>.abs(e[<span class=\"code-number\">0</span>].syncPoint[t.key]-t.value),r=e[<span class=\"code-number\">0</span>].strategy,a=<span class=\"code-number\">1</span>;a&lt;e.length;a++){<span class=\"code-keyword\">var</span> s=<span class=\"code-built_in\">Math</span>.abs(e[a].syncPoint[t.key]-t.value);s&lt;n&amp;&amp;(n=s,i=e[a].syncPoint,r=e[a].strategy)}<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"syncPoint for [\"</span>+t.key+<span class=\"code-string\">\": \"</span>+t.value+<span class=\"code-string\">\"] chosen with strategy [\"</span>+r+<span class=\"code-string\">\"]: [time:\"</span>+i.time+<span class=\"code-string\">\", segmentIndex:\"</span>+i.segmentIndex+<span class=\"code-string\">\"]\"</span>),i}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"saveExpiredSegmentInfo\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=t.mediaSequence-e.mediaSequence<span class=\"code-number\">-1</span>;i&gt;=<span class=\"code-number\">0</span>;i--){<span class=\"code-keyword\">var</span> n=e.segments[i];<span class=\"code-keyword\">if</span>(n&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==n.start){t.syncInfo={<span class=\"code-attr\">mediaSequence</span>:e.mediaSequence+i,<span class=\"code-attr\">time</span>:n.start},<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"playlist refresh sync: [time:\"</span>+t.syncInfo.time+<span class=\"code-string\">\", mediaSequence: \"</span>+t.syncInfo.mediaSequence+<span class=\"code-string\">\"]\"</span>),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"syncinfoupdate\"</span>);<span class=\"code-keyword\">break</span>}}}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"setDateTimeMapping\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.datetimeToDisplayTime&amp;&amp;e.segments&amp;&amp;e.segments.length&amp;&amp;e.segments[<span class=\"code-number\">0</span>].dateTimeObject){<span class=\"code-keyword\">var</span> t=e.segments[<span class=\"code-number\">0</span>].dateTimeObject.getTime()/<span class=\"code-number\">1e3</span>;<span class=\"code-keyword\">this</span>.datetimeToDisplayTime=-t}}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"reset\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.inspectCache_=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"probeSegmentInfo\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segment,i=e.playlist,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span>(n=t.map?<span class=\"code-keyword\">this</span>.probeMp4Segment_(e):<span class=\"code-keyword\">this</span>.probeTsSegment_(e))&amp;&amp;<span class=\"code-keyword\">this</span>.calculateSegmentTimeMapping_(e,n)&amp;&amp;(<span class=\"code-keyword\">this</span>.saveDiscontinuitySyncInfo_(e),i.syncInfo||(i.syncInfo={<span class=\"code-attr\">mediaSequence</span>:i.mediaSequence+e.mediaIndex,<span class=\"code-attr\">time</span>:t.start})),n}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"probeMp4Segment_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segment,i=yi.timescale(t.map.bytes),n=yi.compositionStartTime(i,e.bytes);<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>!==e.timestampOffset&amp;&amp;(e.timestampOffset-=n),{<span class=\"code-attr\">start</span>:n,<span class=\"code-attr\">end</span>:n+t.duration}}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"probeTsSegment_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=wn(e.bytes,<span class=\"code-keyword\">this</span>.inspectCache_),i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> t?(t.video&amp;&amp;<span class=\"code-number\">2</span>===t.video.length?(<span class=\"code-keyword\">this</span>.inspectCache_=t.video[<span class=\"code-number\">1</span>].dts,i=t.video[<span class=\"code-number\">0</span>].dtsTime,n=t.video[<span class=\"code-number\">1</span>].dtsTime,r=t.video):t.audio&amp;&amp;<span class=\"code-number\">2</span>===t.audio.length&amp;&amp;(<span class=\"code-keyword\">this</span>.inspectCache_=t.audio[<span class=\"code-number\">1</span>].dts,i=t.audio[<span class=\"code-number\">0</span>].dtsTime,n=t.audio[<span class=\"code-number\">1</span>].dtsTime,r=t.audio),{<span class=\"code-attr\">segmentTimestampInfo</span>:r,<span class=\"code-attr\">start</span>:i,<span class=\"code-attr\">end</span>:n,<span class=\"code-attr\">containsVideo</span>:t.video&amp;&amp;<span class=\"code-number\">2</span>===t.video.length,<span class=\"code-attr\">containsAudio</span>:t.audio&amp;&amp;<span class=\"code-number\">2</span>===t.audio.length}):<span class=\"code-literal\">null</span>}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"timestampOffsetForTimeline\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.timelines[e]?<span class=\"code-literal\">null</span>:<span class=\"code-keyword\">this</span>.timelines[e].time}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"mappingForTimeline\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.timelines[e]?<span class=\"code-literal\">null</span>:<span class=\"code-keyword\">this</span>.timelines[e].mapping}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"calculateSegmentTimeMapping_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.segment,n=<span class=\"code-keyword\">this</span>.timelines[e.timeline];<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>!==e.timestampOffset)n={<span class=\"code-attr\">time</span>:e.startOfSegment,<span class=\"code-attr\">mapping</span>:e.startOfSegment-t.start},<span class=\"code-keyword\">this</span>.timelines[e.timeline]=n,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timestampoffset\"</span>),<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"time mapping for timeline \"</span>+e.timeline+<span class=\"code-string\">\": [time: \"</span>+n.time+<span class=\"code-string\">\"] [mapping: \"</span>+n.mapping+<span class=\"code-string\">\"]\"</span>),i.start=e.startOfSegment,i.end=t.end+n.mapping;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(!n)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;i.start=t.start+n.mapping,i.end=t.end+n.mapping}<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"saveDiscontinuitySyncInfo_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.playlist,i=e.segment;<span class=\"code-keyword\">if</span>(i.discontinuity)<span class=\"code-keyword\">this</span>.discontinuities[i.timeline]={<span class=\"code-attr\">time</span>:i.start,<span class=\"code-attr\">accuracy</span>:<span class=\"code-number\">0</span>};<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t.discontinuityStarts&amp;&amp;t.discontinuityStarts.length)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=<span class=\"code-number\">0</span>;n&lt;t.discontinuityStarts.length;n++){<span class=\"code-keyword\">var</span> r=t.discontinuityStarts[n],a=t.discontinuitySequence+n+<span class=\"code-number\">1</span>,s=r-e.mediaIndex,o=<span class=\"code-built_in\">Math</span>.abs(s);<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.discontinuities[a]||<span class=\"code-keyword\">this</span>.discontinuities[a].accuracy&gt;o){<span class=\"code-keyword\">var</span> u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;u=s&lt;<span class=\"code-number\">0</span>?i.start-x(t,e.mediaIndex,r):i.end+x(t,e.mediaIndex+<span class=\"code-number\">1</span>,r),<span class=\"code-keyword\">this</span>.discontinuities[a]={<span class=\"code-attr\">time</span>:u,<span class=\"code-attr\">accuracy</span>:o}}}}}]),t}(t.EventTarget),Un=<span class=\"code-keyword\">new</span> De(<span class=\"code-string\">\"./decrypter-worker.worker.js\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>;!<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!(e <span class=\"code-keyword\">instanceof</span> t))<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">TypeError</span>(<span class=\"code-string\">\"Cannot call a class as a function\"</span>)},t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;t.length;i++){<span class=\"code-keyword\">var</span> n=t[i];n.enumerable=n.enumerable||!<span class=\"code-number\">1</span>,n.configurable=!<span class=\"code-number\">0</span>,<span class=\"code-string\">\"value\"</span><span class=\"code-keyword\">in</span> n&amp;&amp;(n.writable=!<span class=\"code-number\">0</span>),<span class=\"code-built_in\">Object</span>.defineProperty(e,n.key,n)}}<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i,n</span>)</span>{<span class=\"code-keyword\">return</span> i&amp;&amp;e(t.prototype,i),n&amp;&amp;e(t,n),t}}(),n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">ReferenceError</span>(<span class=\"code-string\">\"this hasn't been initialised - super() hasn't been called\"</span>);<span class=\"code-keyword\">return</span>!t||<span class=\"code-string\">\"object\"</span>!=<span class=\"code-keyword\">typeof</span> t&amp;&amp;<span class=\"code-string\">\"function\"</span>!=<span class=\"code-keyword\">typeof</span> t?e:t},r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[<span class=\"code-number\">0</span>],i=e[<span class=\"code-number\">1</span>],n=t[<span class=\"code-number\">4</span>],r=i[<span class=\"code-number\">4</span>],a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,s=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,o=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,u=[],d=[],l=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,h=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,c=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,f=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,p=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(a=<span class=\"code-number\">0</span>;a&lt;<span class=\"code-number\">256</span>;a++)d[(u[a]=a&lt;&lt;<span class=\"code-number\">1</span>^<span class=\"code-number\">283</span>*(a&gt;&gt;<span class=\"code-number\">7</span>))^a]=a;<span class=\"code-keyword\">for</span>(s=o=<span class=\"code-number\">0</span>;!n[s];s^=l||<span class=\"code-number\">1</span>,o=d[o]||<span class=\"code-number\">1</span>)<span class=\"code-keyword\">for</span>(c=(c=o^o&lt;&lt;<span class=\"code-number\">1</span>^o&lt;&lt;<span class=\"code-number\">2</span>^o&lt;&lt;<span class=\"code-number\">3</span>^o&lt;&lt;<span class=\"code-number\">4</span>)&gt;&gt;<span class=\"code-number\">8</span>^<span class=\"code-number\">255</span>&amp;c^<span class=\"code-number\">99</span>,n[s]=c,r[c]=s,p=<span class=\"code-number\">16843009</span>*u[h=u[l=u[s]]]^<span class=\"code-number\">65537</span>*h^<span class=\"code-number\">257</span>*l^<span class=\"code-number\">16843008</span>*s,f=<span class=\"code-number\">257</span>*u[c]^<span class=\"code-number\">16843008</span>*c,a=<span class=\"code-number\">0</span>;a&lt;<span class=\"code-number\">4</span>;a++)t[a][s]=f=f&lt;&lt;<span class=\"code-number\">24</span>^f&gt;&gt;&gt;<span class=\"code-number\">8</span>,i[a][c]=p=p&lt;&lt;<span class=\"code-number\">24</span>^p&gt;&gt;&gt;<span class=\"code-number\">8</span>;<span class=\"code-keyword\">for</span>(a=<span class=\"code-number\">0</span>;a&lt;<span class=\"code-number\">5</span>;a++)t[a]=t[a].slice(<span class=\"code-number\">0</span>),i[a]=i[a].slice(<span class=\"code-number\">0</span>);<span class=\"code-keyword\">return</span> e},a=<span class=\"code-literal\">null</span>,s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">i</span>)</span>{e(<span class=\"code-keyword\">this</span>,t),a||(a=r()),<span class=\"code-keyword\">this</span>._tables=[[a[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>].slice(),a[<span class=\"code-number\">0</span>][<span class=\"code-number\">1</span>].slice(),a[<span class=\"code-number\">0</span>][<span class=\"code-number\">2</span>].slice(),a[<span class=\"code-number\">0</span>][<span class=\"code-number\">3</span>].slice(),a[<span class=\"code-number\">0</span>][<span class=\"code-number\">4</span>].slice()],[a[<span class=\"code-number\">1</span>][<span class=\"code-number\">0</span>].slice(),a[<span class=\"code-number\">1</span>][<span class=\"code-number\">1</span>].slice(),a[<span class=\"code-number\">1</span>][<span class=\"code-number\">2</span>].slice(),a[<span class=\"code-number\">1</span>][<span class=\"code-number\">3</span>].slice(),a[<span class=\"code-number\">1</span>][<span class=\"code-number\">4</span>].slice()]];<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,s=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,o=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,d=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,l=<span class=\"code-keyword\">this</span>._tables[<span class=\"code-number\">0</span>][<span class=\"code-number\">4</span>],h=<span class=\"code-keyword\">this</span>._tables[<span class=\"code-number\">1</span>],c=i.length,f=<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">4</span>!==c&amp;&amp;<span class=\"code-number\">6</span>!==c&amp;&amp;<span class=\"code-number\">8</span>!==c)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Invalid aes key size\"</span>);<span class=\"code-keyword\">for</span>(u=i.slice(<span class=\"code-number\">0</span>),d=[],<span class=\"code-keyword\">this</span>._key=[u,d],n=c;n&lt;<span class=\"code-number\">4</span>*c+<span class=\"code-number\">28</span>;n++)o=u[n<span class=\"code-number\">-1</span>],(n%c==<span class=\"code-number\">0</span>||<span class=\"code-number\">8</span>===c&amp;&amp;n%c==<span class=\"code-number\">4</span>)&amp;&amp;(o=l[o&gt;&gt;&gt;<span class=\"code-number\">24</span>]&lt;&lt;<span class=\"code-number\">24</span>^l[o&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]&lt;&lt;<span class=\"code-number\">16</span>^l[o&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]&lt;&lt;<span class=\"code-number\">8</span>^l[<span class=\"code-number\">255</span>&amp;o],n%c==<span class=\"code-number\">0</span>&amp;&amp;(o=o&lt;&lt;<span class=\"code-number\">8</span>^o&gt;&gt;&gt;<span class=\"code-number\">24</span>^f&lt;&lt;<span class=\"code-number\">24</span>,f=f&lt;&lt;<span class=\"code-number\">1</span>^<span class=\"code-number\">283</span>*(f&gt;&gt;<span class=\"code-number\">7</span>))),u[n]=u[n-c]^o;<span class=\"code-keyword\">for</span>(s=<span class=\"code-number\">0</span>;n;s++,n--)o=u[<span class=\"code-number\">3</span>&amp;s?n:n<span class=\"code-number\">-4</span>],d[s]=n&lt;=<span class=\"code-number\">4</span>||s&lt;<span class=\"code-number\">4</span>?o:h[<span class=\"code-number\">0</span>][l[o&gt;&gt;&gt;<span class=\"code-number\">24</span>]]^h[<span class=\"code-number\">1</span>][l[o&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]]^h[<span class=\"code-number\">2</span>][l[o&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]]^h[<span class=\"code-number\">3</span>][l[<span class=\"code-number\">255</span>&amp;o]]}<span class=\"code-keyword\">return</span> t.prototype.decrypt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r,a</span>)</span>{<span class=\"code-keyword\">var</span> s=<span class=\"code-keyword\">this</span>._key[<span class=\"code-number\">1</span>],o=e^s[<span class=\"code-number\">0</span>],u=n^s[<span class=\"code-number\">1</span>],d=i^s[<span class=\"code-number\">2</span>],l=t^s[<span class=\"code-number\">3</span>],h=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,c=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,f=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,p=s.length/<span class=\"code-number\">4</span><span class=\"code-number\">-2</span>,m=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,g=<span class=\"code-number\">4</span>,y=<span class=\"code-keyword\">this</span>._tables[<span class=\"code-number\">1</span>],_=y[<span class=\"code-number\">0</span>],v=y[<span class=\"code-number\">1</span>],b=y[<span class=\"code-number\">2</span>],T=y[<span class=\"code-number\">3</span>],S=y[<span class=\"code-number\">4</span>];<span class=\"code-keyword\">for</span>(m=<span class=\"code-number\">0</span>;m&lt;p;m++)h=_[o&gt;&gt;&gt;<span class=\"code-number\">24</span>]^v[u&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]^b[d&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]^T[<span class=\"code-number\">255</span>&amp;l]^s[g],c=_[u&gt;&gt;&gt;<span class=\"code-number\">24</span>]^v[d&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]^b[l&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]^T[<span class=\"code-number\">255</span>&amp;o]^s[g+<span class=\"code-number\">1</span>],f=_[d&gt;&gt;&gt;<span class=\"code-number\">24</span>]^v[l&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]^b[o&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]^T[<span class=\"code-number\">255</span>&amp;u]^s[g+<span class=\"code-number\">2</span>],l=_[l&gt;&gt;&gt;<span class=\"code-number\">24</span>]^v[o&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]^b[u&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]^T[<span class=\"code-number\">255</span>&amp;d]^s[g+<span class=\"code-number\">3</span>],g+=<span class=\"code-number\">4</span>,o=h,u=c,d=f;<span class=\"code-keyword\">for</span>(m=<span class=\"code-number\">0</span>;m&lt;<span class=\"code-number\">4</span>;m++)r[(<span class=\"code-number\">3</span>&amp;-m)+a]=S[o&gt;&gt;&gt;<span class=\"code-number\">24</span>]&lt;&lt;<span class=\"code-number\">24</span>^S[u&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]&lt;&lt;<span class=\"code-number\">16</span>^S[d&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]&lt;&lt;<span class=\"code-number\">8</span>^S[<span class=\"code-number\">255</span>&amp;l]^s[g++],h=o,o=u,u=d,d=l,l=h},t}(),o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\"></span>)</span>{e(<span class=\"code-keyword\">this</span>,t),<span class=\"code-keyword\">this</span>.listeners={}}<span class=\"code-keyword\">return</span> t.prototype.on=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.listeners[e]||(<span class=\"code-keyword\">this</span>.listeners[e]=[]),<span class=\"code-keyword\">this</span>.listeners[e].push(t)},t.prototype.off=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.listeners[e])<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.listeners[e].indexOf(t);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.listeners[e].splice(i,<span class=\"code-number\">1</span>),i&gt;<span class=\"code-number\">-1</span>},t.prototype.trigger=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.listeners[e];<span class=\"code-keyword\">if</span>(t)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">2</span>===<span class=\"code-built_in\">arguments</span>.length)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=t.length,n=<span class=\"code-number\">0</span>;n&lt;i;++n)t[n].call(<span class=\"code-keyword\">this</span>,<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-built_in\">Array</span>.prototype.slice.call(<span class=\"code-built_in\">arguments</span>,<span class=\"code-number\">1</span>),a=t.length,s=<span class=\"code-number\">0</span>;s&lt;a;++s)t[s].apply(<span class=\"code-keyword\">this</span>,r)},t.prototype.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.listeners={}},t.prototype.pipe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.push(t)})},t}(),u=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">i</span>(<span class=\"code-params\"></span>)</span>{e(<span class=\"code-keyword\">this</span>,i);<span class=\"code-keyword\">var</span> r=n(<span class=\"code-keyword\">this</span>,t.call(<span class=\"code-keyword\">this</span>,o));<span class=\"code-keyword\">return</span> r.jobs=[],r.delay=<span class=\"code-number\">1</span>,r.timeout_=<span class=\"code-literal\">null</span>,r}<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"function\"</span>!=<span class=\"code-keyword\">typeof</span> t&amp;&amp;<span class=\"code-literal\">null</span>!==t)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">TypeError</span>(<span class=\"code-string\">\"Super expression must either be null or a function, not \"</span>+<span class=\"code-keyword\">typeof</span> t);e.prototype=<span class=\"code-built_in\">Object</span>.create(t&amp;&amp;t.prototype,{<span class=\"code-attr\">constructor</span>:{<span class=\"code-attr\">value</span>:e,<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">1</span>,<span class=\"code-attr\">writable</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">configurable</span>:!<span class=\"code-number\">0</span>}}),t&amp;&amp;(<span class=\"code-built_in\">Object</span>.setPrototypeOf?<span class=\"code-built_in\">Object</span>.setPrototypeOf(e,t):e.__proto__=t)}(i,t),i.prototype.processJob_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.jobs.shift()(),<span class=\"code-keyword\">this</span>.jobs.length?<span class=\"code-keyword\">this</span>.timeout_=setTimeout(<span class=\"code-keyword\">this</span>.processJob_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.delay):<span class=\"code-keyword\">this</span>.timeout_=<span class=\"code-literal\">null</span>},i.prototype.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.jobs.push(e),<span class=\"code-keyword\">this</span>.timeout_||(<span class=\"code-keyword\">this</span>.timeout_=setTimeout(<span class=\"code-keyword\">this</span>.processJob_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.delay))},i}(o),d=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&lt;&lt;<span class=\"code-number\">24</span>|(<span class=\"code-number\">65280</span>&amp;e)&lt;&lt;<span class=\"code-number\">8</span>|(<span class=\"code-number\">16711680</span>&amp;e)&gt;&gt;<span class=\"code-number\">8</span>|e&gt;&gt;&gt;<span class=\"code-number\">24</span>},l=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">i</span>(<span class=\"code-params\">t,n,r,a</span>)</span>{e(<span class=\"code-keyword\">this</span>,i);<span class=\"code-keyword\">var</span> s=i.STEP,o=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Int32Array</span>(t.buffer),l=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(t.byteLength),h=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">this</span>.asyncStream_=<span class=\"code-keyword\">new</span> u,<span class=\"code-keyword\">this</span>.asyncStream_.push(<span class=\"code-keyword\">this</span>.decryptChunk_(o.subarray(h,h+s),n,r,l)),h=s;h&lt;o.length;h+=s)r=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>([d(o[h<span class=\"code-number\">-4</span>]),d(o[h<span class=\"code-number\">-3</span>]),d(o[h<span class=\"code-number\">-2</span>]),d(o[h<span class=\"code-number\">-1</span>])]),<span class=\"code-keyword\">this</span>.asyncStream_.push(<span class=\"code-keyword\">this</span>.decryptChunk_(o.subarray(h,h+s),n,r,l));<span class=\"code-keyword\">this</span>.asyncStream_.push(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e;a(<span class=\"code-literal\">null</span>,(e=l).subarray(<span class=\"code-number\">0</span>,e.byteLength-e[e.byteLength<span class=\"code-number\">-1</span>]))})}<span class=\"code-keyword\">return</span> i.prototype.decryptChunk_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Int32Array</span>(e.buffer,e.byteOffset,e.byteLength&gt;&gt;<span class=\"code-number\">2</span>),r=<span class=\"code-keyword\">new</span> s(<span class=\"code-built_in\">Array</span>.prototype.slice.call(t)),a=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.byteLength),o=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Int32Array</span>(a.buffer),u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,l=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,h=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,c=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,f=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,p=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,m=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,g=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,y=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(u=i[<span class=\"code-number\">0</span>],l=i[<span class=\"code-number\">1</span>],h=i[<span class=\"code-number\">2</span>],c=i[<span class=\"code-number\">3</span>],y=<span class=\"code-number\">0</span>;y&lt;n.length;y+=<span class=\"code-number\">4</span>)f=d(n[y]),p=d(n[y+<span class=\"code-number\">1</span>]),m=d(n[y+<span class=\"code-number\">2</span>]),g=d(n[y+<span class=\"code-number\">3</span>]),r.decrypt(f,p,m,g,o,y),o[y]=d(o[y]^u),o[y+<span class=\"code-number\">1</span>]=d(o[y+<span class=\"code-number\">1</span>]^l),o[y+<span class=\"code-number\">2</span>]=d(o[y+<span class=\"code-number\">2</span>]^h),o[y+<span class=\"code-number\">3</span>]=d(o[y+<span class=\"code-number\">3</span>]^c),u=f,l=p,h=m,c=g;<span class=\"code-keyword\">return</span> a}(e,t,i);n.set(r,e.byteOffset)}},t(i,<span class=\"code-literal\">null</span>,[{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"STEP\"</span>,<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">32e3</span>}}]),i}();<span class=\"code-keyword\">new</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.onmessage=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.data,n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(i.encrypted.bytes,i.encrypted.byteOffset,i.encrypted.byteLength),r=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>(i.key.bytes,i.key.byteOffset,i.key.byteLength/<span class=\"code-number\">4</span>),a=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>(i.iv.bytes,i.iv.byteOffset,i.iv.byteLength/<span class=\"code-number\">4</span>);<span class=\"code-keyword\">new</span> l(n,r,a,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,n</span>)</span>{<span class=\"code-keyword\">var</span> r,a;e.postMessage((r={<span class=\"code-attr\">source</span>:i.source,<span class=\"code-attr\">decrypted</span>:n},a={},<span class=\"code-built_in\">Object</span>.keys(r).forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=r[e];<span class=\"code-built_in\">ArrayBuffer</span>.isView(t)?a[e]={<span class=\"code-attr\">bytes</span>:t.buffer,<span class=\"code-attr\">byteOffset</span>:t.byteOffset,<span class=\"code-attr\">byteLength</span>:t.byteLength}:a[e]=t}),a),[n.buffer])})}}(i)}()}),In=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.default?<span class=\"code-string\">\"main\"</span>:<span class=\"code-string\">\"alternative\"</span>;<span class=\"code-keyword\">return</span> e.characteristics&amp;&amp;e.characteristics.indexOf(<span class=\"code-string\">\"public.accessibility.describes-video\"</span>)&gt;=<span class=\"code-number\">0</span>&amp;&amp;(t=<span class=\"code-string\">\"main-desc\"</span>),t},An=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{e.abort(),e.pause(),t&amp;&amp;t.activePlaylistLoader&amp;&amp;(t.activePlaylistLoader.pause(),t.activePlaylistLoader=<span class=\"code-literal\">null</span>)},On=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{t.activePlaylistLoader=e,e.load()},Cn={<span class=\"code-attr\">AUDIO</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> n=i.segmentLoaders[e],r=i.mediaTypes[e],a=i.blacklistCurrentPlaylist;An(n,r);<span class=\"code-keyword\">var</span> s=r.activeTrack(),o=r.activeGroup(),u=(o.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.default})[<span class=\"code-number\">0</span>]||o[<span class=\"code-number\">0</span>]).id,d=r.tracks[u];<span class=\"code-keyword\">if</span>(s!==d){<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> l <span class=\"code-keyword\">in</span> t.log.warn(<span class=\"code-string\">\"Problem encountered loading the alternate audio track.Switching back to default.\"</span>),r.tracks)r.tracks[l].enabled=r.tracks[l]===d;r.onTrackChanged()}<span class=\"code-keyword\">else</span> a({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Problem encountered loading the default audio track.\"</span>})}},<span class=\"code-attr\">SUBTITLES</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> n=i.segmentLoaders[e],r=i.mediaTypes[e];t.log.warn(<span class=\"code-string\">\"Problem encountered loading the subtitle track.Disabling subtitle track.\"</span>),An(n,r);<span class=\"code-keyword\">var</span> a=r.activeTrack();a&amp;&amp;(a.mode=<span class=\"code-string\">\"disabled\"</span>),r.onTrackChanged()}}},Pn={<span class=\"code-attr\">AUDIO</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(t){<span class=\"code-keyword\">var</span> n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e];t.on(<span class=\"code-string\">\"loadedmetadata\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=t.media();a.playlist(e,r),(!n.paused()||e.endList&amp;&amp;<span class=\"code-string\">\"none\"</span>!==n.preload())&amp;&amp;a.load()}),t.on(<span class=\"code-string\">\"loadedplaylist\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{a.playlist(t.media(),r),n.paused()||a.load()}),t.on(<span class=\"code-string\">\"error\"</span>,Cn[e](e,i))}},<span class=\"code-attr\">SUBTITLES</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e],s=i.mediaTypes[e];t.on(<span class=\"code-string\">\"loadedmetadata\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=t.media();a.playlist(e,r),a.track(s.activeTrack()),(!n.paused()||e.endList&amp;&amp;<span class=\"code-string\">\"none\"</span>!==n.preload())&amp;&amp;a.load()}),t.on(<span class=\"code-string\">\"loadedplaylist\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{a.playlist(t.media(),r),n.paused()||a.load()}),t.on(<span class=\"code-string\">\"error\"</span>,Cn[e](e,i))}},Dn={<span class=\"code-attr\">AUDIO</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">var</span> n=i.hls,r=i.sourceType,a=i.segmentLoaders[e],s=i.requestOptions,o=i.master.mediaGroups,u=i.mediaTypes[e],d=u.groups,l=u.tracks,h=i.masterPlaylistLoader;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> c <span class=\"code-keyword\">in</span> o[e]&amp;&amp;<span class=\"code-number\">0</span>!==<span class=\"code-built_in\">Object</span>.keys(o[e]).length||(o[e]={<span class=\"code-attr\">main</span>:{<span class=\"code-attr\">default</span>:{<span class=\"code-attr\">default</span>:!<span class=\"code-number\">0</span>}}}),o[e])<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> f <span class=\"code-keyword\">in</span> d[c]||(d[c]=[]),o[e][c]){<span class=\"code-keyword\">var</span> p=o[e][c][f],m=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(m=p.resolvedUri?<span class=\"code-keyword\">new</span> C(p.resolvedUri,n,s):p.playlists&amp;&amp;<span class=\"code-string\">\"dash\"</span>===r?<span class=\"code-keyword\">new</span> ai(p.playlists[<span class=\"code-number\">0</span>],n,s,h):<span class=\"code-literal\">null</span>,p=t.mergeOptions({<span class=\"code-attr\">id</span>:f,<span class=\"code-attr\">playlistLoader</span>:m},p),Pn[e](e,p.playlistLoader,i),d[c].push(p),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===l[f]){<span class=\"code-keyword\">var</span> g=<span class=\"code-keyword\">new</span> t.AudioTrack({<span class=\"code-attr\">id</span>:f,<span class=\"code-attr\">kind</span>:In(p),<span class=\"code-attr\">enabled</span>:!<span class=\"code-number\">1</span>,<span class=\"code-attr\">language</span>:p.language,<span class=\"code-attr\">default</span>:p.default,<span class=\"code-attr\">label</span>:f});l[f]=g}}a.on(<span class=\"code-string\">\"error\"</span>,Cn[e](e,i))},<span class=\"code-attr\">SUBTITLES</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">var</span> n=i.tech,r=i.hls,a=i.sourceType,s=i.segmentLoaders[e],o=i.requestOptions,u=i.master.mediaGroups,d=i.mediaTypes[e],l=d.groups,h=d.tracks,c=i.masterPlaylistLoader;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> f <span class=\"code-keyword\">in</span> u[e])<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> p <span class=\"code-keyword\">in</span> l[f]||(l[f]=[]),u[e][f])<span class=\"code-keyword\">if</span>(!u[e][f][p].forced){<span class=\"code-keyword\">var</span> m=u[e][f][p],g=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"hls\"</span>===a?g=<span class=\"code-keyword\">new</span> C(m.resolvedUri,r,o):<span class=\"code-string\">\"dash\"</span>===a&amp;&amp;(g=<span class=\"code-keyword\">new</span> ai(m.playlists[<span class=\"code-number\">0</span>],r,o,c)),m=t.mergeOptions({<span class=\"code-attr\">id</span>:p,<span class=\"code-attr\">playlistLoader</span>:g},m),Pn[e](e,m.playlistLoader,i),l[f].push(m),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===h[p]){<span class=\"code-keyword\">var</span> y=n.addRemoteTextTrack({<span class=\"code-attr\">id</span>:p,<span class=\"code-attr\">kind</span>:<span class=\"code-string\">\"subtitles\"</span>,<span class=\"code-attr\">default</span>:m.default&amp;&amp;m.autoselect,<span class=\"code-attr\">language</span>:m.language,<span class=\"code-attr\">label</span>:p},!<span class=\"code-number\">1</span>).track;h[p]=y}}s.on(<span class=\"code-string\">\"error\"</span>,Cn[e](e,i))},<span class=\"code-string\">\"CLOSED-CAPTIONS\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">var</span> n=i.tech,r=i.master.mediaGroups,a=i.mediaTypes[e],s=a.groups,o=a.tracks;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> u <span class=\"code-keyword\">in</span> r[e])<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> d <span class=\"code-keyword\">in</span> s[u]||(s[u]=[]),r[e][u]){<span class=\"code-keyword\">var</span> l=r[e][u][d];<span class=\"code-keyword\">if</span>(l.instreamId.match(<span class=\"code-regexp\">/CC\\d/</span>)&amp;&amp;(s[u].push(t.mergeOptions({<span class=\"code-attr\">id</span>:d},l)),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===o[d])){<span class=\"code-keyword\">var</span> h=n.addRemoteTextTrack({<span class=\"code-attr\">id</span>:l.instreamId,<span class=\"code-attr\">kind</span>:<span class=\"code-string\">\"captions\"</span>,<span class=\"code-attr\">default</span>:l.default&amp;&amp;l.autoselect,<span class=\"code-attr\">language</span>:l.language,<span class=\"code-attr\">label</span>:d},!<span class=\"code-number\">1</span>).track;o[d]=h}}}},Rn={<span class=\"code-attr\">AUDIO</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i=t.mediaTypes[e].tracks;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> i)<span class=\"code-keyword\">if</span>(i[n].enabled)<span class=\"code-keyword\">return</span> i[n];<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}},<span class=\"code-attr\">SUBTITLES</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i=t.mediaTypes[e].tracks;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> i)<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"showing\"</span>===i[n].mode)<span class=\"code-keyword\">return</span> i[n];<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}}},xn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{[<span class=\"code-string\">\"AUDIO\"</span>,<span class=\"code-string\">\"SUBTITLES\"</span>,<span class=\"code-string\">\"CLOSED-CAPTIONS\"</span>].forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{Dn[t](t,e)});<span class=\"code-keyword\">var</span> t=e.mediaTypes,i=e.masterPlaylistLoader,n=e.tech,r=e.hls;[<span class=\"code-string\">\"AUDIO\"</span>,<span class=\"code-string\">\"SUBTITLES\"</span>].forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{t[i].activeGroup=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n=t.masterPlaylistLoader,r=t.mediaTypes[e].groups,a=n.media();<span class=\"code-keyword\">if</span>(!a)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> s=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">return</span> a.attributes[e]&amp;&amp;(s=r[a.attributes[e]]),s=s||r.main,<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i?s:<span class=\"code-literal\">null</span>===i?<span class=\"code-literal\">null</span>:s.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.id===i.id})[<span class=\"code-number\">0</span>]||<span class=\"code-literal\">null</span>}}(i,e),t[i].activeTrack=Rn[i](i,e),t[i].onGroupChanged=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i=t.segmentLoaders,n=i[e],r=i.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),u=a.activePlaylistLoader;An(n,a),o&amp;&amp;(o.playlistLoader?(n.resyncLoader(),On(o.playlistLoader,a)):u&amp;&amp;r.resetEverything())}}(i,e),t[i].onTrackChanged=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i=t.segmentLoaders,n=i[e],r=i.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),u=a.activePlaylistLoader;An(n,a),o&amp;&amp;(o.playlistLoader?u!==o.playlistLoader?(n.track&amp;&amp;n.track(s),n.resetEverything(),On(o.playlistLoader,a)):On(o.playlistLoader,a):r.resetEverything())}}(i,e)});<span class=\"code-keyword\">var</span> a=t.AUDIO.activeGroup(),s=(a.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.default})[<span class=\"code-number\">0</span>]||a[<span class=\"code-number\">0</span>]).id;t.AUDIO.tracks[s].enabled=!<span class=\"code-number\">0</span>,t.AUDIO.onTrackChanged(),i.on(<span class=\"code-string\">\"mediachange\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{[<span class=\"code-string\">\"AUDIO\"</span>,<span class=\"code-string\">\"SUBTITLES\"</span>].forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t[e].onGroupChanged()})});<span class=\"code-keyword\">var</span> o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t.AUDIO.onTrackChanged(),n.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-audio-change\"</span>})};<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> u <span class=\"code-keyword\">in</span> n.audioTracks().addEventListener(<span class=\"code-string\">\"change\"</span>,o),n.remoteTextTracks().addEventListener(<span class=\"code-string\">\"change\"</span>,t.SUBTITLES.onTrackChanged),r.on(<span class=\"code-string\">\"dispose\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n.audioTracks().removeEventListener(<span class=\"code-string\">\"change\"</span>,o),n.remoteTextTracks().removeEventListener(<span class=\"code-string\">\"change\"</span>,t.SUBTITLES.onTrackChanged)}),n.clearTracks(<span class=\"code-string\">\"audio\"</span>),t.AUDIO.tracks)n.audioTracks().addTrack(t.AUDIO.tracks[u])},Mn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e={};<span class=\"code-keyword\">return</span>[<span class=\"code-string\">\"AUDIO\"</span>,<span class=\"code-string\">\"SUBTITLES\"</span>,<span class=\"code-string\">\"CLOSED-CAPTIONS\"</span>].forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e[t]={<span class=\"code-attr\">groups</span>:{},<span class=\"code-attr\">tracks</span>:{},<span class=\"code-attr\">activePlaylistLoader</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">activeGroup</span>:oi,<span class=\"code-attr\">activeTrack</span>:oi,<span class=\"code-attr\">onGroupChanged</span>:oi,<span class=\"code-attr\">onTrackChanged</span>:oi}}),e},Bn=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,Nn=[<span class=\"code-string\">\"mediaRequests\"</span>,<span class=\"code-string\">\"mediaRequestsAborted\"</span>,<span class=\"code-string\">\"mediaRequestsTimedout\"</span>,<span class=\"code-string\">\"mediaRequestsErrored\"</span>,<span class=\"code-string\">\"mediaTransferDuration\"</span>,<span class=\"code-string\">\"mediaBytesTransferred\"</span>],qn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.audioSegmentLoader_[e]+<span class=\"code-keyword\">this</span>.mainSegmentLoader_[e]},Fn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">i</span>(<span class=\"code-params\">e</span>)</span>{_(<span class=\"code-keyword\">this</span>,i);<span class=\"code-keyword\">var</span> n=T(<span class=\"code-keyword\">this</span>,(i.__proto__||<span class=\"code-built_in\">Object</span>.getPrototypeOf(i)).call(<span class=\"code-keyword\">this</span>)),r=e.url,a=e.handleManifestRedirects,s=e.withCredentials,o=e.tech,u=e.bandwidth,d=e.externHls,l=e.useCueTags,h=e.blacklistDuration,c=e.enableLowInitialPlaylist,f=e.sourceType,p=e.seekTo,m=e.cacheEncryptionKeys;<span class=\"code-keyword\">if</span>(!r)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"A non-empty playlist URL is required\"</span>);Bn=d,n.withCredentials=s,n.tech_=o,n.hls_=o.hls,n.seekTo_=p,n.sourceType_=f,n.useCueTags_=l,n.blacklistDuration=h,n.enableLowInitialPlaylist=c,n.useCueTags_&amp;&amp;(n.cueTagsTrack_=n.tech_.addTextTrack(<span class=\"code-string\">\"metadata\"</span>,<span class=\"code-string\">\"ad-cues\"</span>),n.cueTagsTrack_.inBandMetadataTrackDispatchType=<span class=\"code-string\">\"\"</span>),n.requestOptions_={<span class=\"code-attr\">withCredentials</span>:s,<span class=\"code-attr\">handleManifestRedirects</span>:a,<span class=\"code-attr\">timeout</span>:<span class=\"code-literal\">null</span>},n.mediaTypes_=Mn(),n.mediaSource=<span class=\"code-keyword\">new</span> t.MediaSource,n.mediaSource.addEventListener(<span class=\"code-string\">\"sourceopen\"</span>,n.handleSourceOpen_.bind(n)),n.seekable_=t.createTimeRanges(),n.hasPlayed_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>},n.syncController_=<span class=\"code-keyword\">new</span> En(e),n.segmentMetadataTrack_=o.addRemoteTextTrack({<span class=\"code-attr\">kind</span>:<span class=\"code-string\">\"metadata\"</span>,<span class=\"code-attr\">label</span>:<span class=\"code-string\">\"segment-metadata\"</span>},!<span class=\"code-number\">1</span>).track,n.decrypter_=<span class=\"code-keyword\">new</span> Un,n.inbandTextTracks_={};<span class=\"code-keyword\">var</span> g={<span class=\"code-attr\">hls</span>:n.hls_,<span class=\"code-attr\">mediaSource</span>:n.mediaSource,<span class=\"code-attr\">currentTime</span>:n.tech_.currentTime.bind(n.tech_),<span class=\"code-attr\">seekable</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.seekable()},<span class=\"code-attr\">seeking</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.tech_.seeking()},<span class=\"code-attr\">duration</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.mediaSource.duration},<span class=\"code-attr\">hasPlayed</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.hasPlayed_()},<span class=\"code-attr\">goalBufferLength</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.goalBufferLength()},<span class=\"code-attr\">bandwidth</span>:u,<span class=\"code-attr\">syncController</span>:n.syncController_,<span class=\"code-attr\">decrypter</span>:n.decrypter_,<span class=\"code-attr\">sourceType</span>:n.sourceType_,<span class=\"code-attr\">inbandTextTracks</span>:n.inbandTextTracks_,<span class=\"code-attr\">cacheEncryptionKeys</span>:m};<span class=\"code-keyword\">return</span> n.masterPlaylistLoader_=<span class=\"code-string\">\"dash\"</span>===n.sourceType_?<span class=\"code-keyword\">new</span> ai(r,n.hls_,n.requestOptions_):<span class=\"code-keyword\">new</span> C(r,n.hls_,n.requestOptions_),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=<span class=\"code-keyword\">new</span> Yi(t.mergeOptions(g,{<span class=\"code-attr\">segmentMetadataTrack</span>:n.segmentMetadataTrack_,<span class=\"code-attr\">loaderType</span>:<span class=\"code-string\">\"main\"</span>}),e),n.audioSegmentLoader_=<span class=\"code-keyword\">new</span> Yi(t.mergeOptions(g,{<span class=\"code-attr\">loaderType</span>:<span class=\"code-string\">\"audio\"</span>}),e),n.subtitleSegmentLoader_=<span class=\"code-keyword\">new</span> Qi(t.mergeOptions(g,{<span class=\"code-attr\">loaderType</span>:<span class=\"code-string\">\"vtt\"</span>}),e),n.setupSegmentLoaderListeners_(),Nn.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{n[e+<span class=\"code-string\">\"_\"</span>]=qn.bind(n,e)}),n.logger_=si(<span class=\"code-string\">\"MPC\"</span>),n.masterPlaylistLoader_.load(),n}<span class=\"code-keyword\">return</span> b(i,e),v(i,[{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"setupMasterPlaylistLoaderListeners_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"loadedmetadata\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i=e.masterPlaylistLoader_.media(),n=<span class=\"code-number\">1.5</span>*i.targetDuration*<span class=\"code-number\">1e3</span>;z(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=<span class=\"code-number\">0</span>:e.requestOptions_.timeout=n,i.endList&amp;&amp;<span class=\"code-string\">\"none\"</span>!==e.tech_.preload()&amp;&amp;(e.mainSegmentLoader_.playlist(i,e.requestOptions_),e.mainSegmentLoader_.load()),xn({<span class=\"code-attr\">sourceType</span>:e.sourceType_,<span class=\"code-attr\">segmentLoaders</span>:{<span class=\"code-attr\">AUDIO</span>:e.audioSegmentLoader_,<span class=\"code-attr\">SUBTITLES</span>:e.subtitleSegmentLoader_,<span class=\"code-attr\">main</span>:e.mainSegmentLoader_},<span class=\"code-attr\">tech</span>:e.tech_,<span class=\"code-attr\">requestOptions</span>:e.requestOptions_,<span class=\"code-attr\">masterPlaylistLoader</span>:e.masterPlaylistLoader_,<span class=\"code-attr\">hls</span>:e.hls_,<span class=\"code-attr\">master</span>:e.master(),<span class=\"code-attr\">mediaTypes</span>:e.mediaTypes_,<span class=\"code-attr\">blacklistCurrentPlaylist</span>:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),i);<span class=\"code-keyword\">try</span>{e.setupSourceBuffers_()}<span class=\"code-keyword\">catch</span>(i){<span class=\"code-keyword\">return</span> t.log.warn(<span class=\"code-string\">\"Failed to create SourceBuffers\"</span>,i),e.mediaSource.endOfStream(<span class=\"code-string\">\"decode\"</span>)}e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger(<span class=\"code-string\">\"selectedinitialmedia\"</span>):e.mediaTypes_.AUDIO.activePlaylistLoader.one(<span class=\"code-string\">\"loadedmetadata\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"selectedinitialmedia\"</span>)})}),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"loadedplaylist\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t=e.masterPlaylistLoader_.media();<span class=\"code-keyword\">if</span>(!t){e.excludeUnsupportedVariants_();<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> e.enableLowInitialPlaylist&amp;&amp;(i=e.selectInitialPlaylist()),i||(i=e.selectPlaylist()),e.initialMedia_=i,<span class=\"code-keyword\">void</span> e.masterPlaylistLoader_.media(e.initialMedia_)}<span class=\"code-keyword\">if</span>(e.useCueTags_&amp;&amp;e.updateAdCues_(t),e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.updateDuration(),e.tech_.paused()||(e.mainSegmentLoader_.load(),e.audioSegmentLoader_&amp;&amp;e.audioSegmentLoader_.load()),!t.endList){<span class=\"code-keyword\">var</span> n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t=e.seekable();<span class=\"code-number\">0</span>!==t.length&amp;&amp;e.mediaSource.addSeekableRange_(t.start(<span class=\"code-number\">0</span>),t.end(<span class=\"code-number\">0</span>))};<span class=\"code-keyword\">if</span>(e.duration()!==<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>){e.tech_.one(<span class=\"code-string\">\"durationchange\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\"></span>)</span>{e.duration()===<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>?n():e.tech_.one(<span class=\"code-string\">\"durationchange\"</span>,t)})}<span class=\"code-keyword\">else</span> n()}}),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"error\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"mediachanging\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"mediachange\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t=e.masterPlaylistLoader_.media(),i=<span class=\"code-number\">1.5</span>*t.targetDuration*<span class=\"code-number\">1e3</span>;z(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=<span class=\"code-number\">0</span>:e.requestOptions_.timeout=i,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"mediachange\"</span>,<span class=\"code-attr\">bubbles</span>:!<span class=\"code-number\">0</span>})}),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"playlistunchanged\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t=e.masterPlaylistLoader_.media();e.stuckAtPlaylistEnd_(t)&amp;&amp;(e.blacklistCurrentPlaylist({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Playlist no longer updating.\"</span>}),e.tech_.trigger(<span class=\"code-string\">\"playliststuck\"</span>))}),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"renditiondisabled\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-rendition-disabled\"</span>})}),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"renditionenabled\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-rendition-enabled\"</span>})})}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"triggerPresenceUsage_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.mediaGroups||{},n=!<span class=\"code-number\">0</span>,r=<span class=\"code-built_in\">Object</span>.keys(i.AUDIO);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a <span class=\"code-keyword\">in</span> i.AUDIO)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> s <span class=\"code-keyword\">in</span> i.AUDIO[a]){i.AUDIO[a][s].uri||(n=!<span class=\"code-number\">1</span>)}n&amp;&amp;<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-demuxed\"</span>}),<span class=\"code-built_in\">Object</span>.keys(i.SUBTITLES).length&amp;&amp;<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-webvtt\"</span>}),Bn.Playlist.isAes(t)&amp;&amp;<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-aes\"</span>}),Bn.Playlist.isFmp4(t)&amp;&amp;<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-fmp4\"</span>}),r.length&amp;&amp;<span class=\"code-built_in\">Object</span>.keys(i.AUDIO[r[<span class=\"code-number\">0</span>]]).length&gt;<span class=\"code-number\">1</span>&amp;&amp;<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-alternate-audio\"</span>}),<span class=\"code-keyword\">this</span>.useCueTags_&amp;&amp;<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-playlist-cue-tags\"</span>})}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"setupSegmentLoaderListeners_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"bandwidthupdate\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t=e.selectPlaylist(),i=e.masterPlaylistLoader_.media(),n=e.tech_.buffered(),r=n.length?n.end(n.length<span class=\"code-number\">-1</span>)-e.tech_.currentTime():<span class=\"code-number\">0</span>,a=e.bufferLowWaterLine();(!i.endList||e.duration()&lt;pi.MAX_BUFFER_LOW_WATER_LINE||t.attributes.BANDWIDTH&lt;i.attributes.BANDWIDTH||r&gt;=a)&amp;&amp;e.masterPlaylistLoader_.media(t),e.tech_.trigger(<span class=\"code-string\">\"bandwidthupdate\"</span>)}),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"progress\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"progress\"</span>)}),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"error\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"syncinfoupdate\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.onSyncInfoUpdate_()}),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"timestampoffset\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-timestamp-offset\"</span>})}),<span class=\"code-keyword\">this</span>.audioSegmentLoader_.on(<span class=\"code-string\">\"syncinfoupdate\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.onSyncInfoUpdate_()}),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"ended\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.onEndOfStream()}),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"earlyabort\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.blacklistCurrentPlaylist({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Aborted early because there isn't enough bandwidth to complete the request without rebuffering.\"</span>},<span class=\"code-number\">120</span>)}),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"reseteverything\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.tech_.trigger(<span class=\"code-string\">\"hls-reset\"</span>)}),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"segmenttimemapping\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"hls-segment-time-mapping\"</span>,<span class=\"code-attr\">mapping</span>:t.mapping})}),<span class=\"code-keyword\">this</span>.audioSegmentLoader_.on(<span class=\"code-string\">\"ended\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.onEndOfStream()})}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"mediaSecondsLoaded_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Math</span>.max(<span class=\"code-keyword\">this</span>.audioSegmentLoader_.mediaSecondsLoaded+<span class=\"code-keyword\">this</span>.mainSegmentLoader_.mediaSecondsLoaded)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"load\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.mainSegmentLoader_.load(),<span class=\"code-keyword\">this</span>.mediaTypes_.AUDIO.activePlaylistLoader&amp;&amp;<span class=\"code-keyword\">this</span>.audioSegmentLoader_.load(),<span class=\"code-keyword\">this</span>.mediaTypes_.SUBTITLES.activePlaylistLoader&amp;&amp;<span class=\"code-keyword\">this</span>.subtitleSegmentLoader_.load()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"smoothQualityChange_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.selectPlaylist();e!==<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media()&amp;&amp;(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media(e),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.resetLoader())}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"fastQualityChange_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>,i=<span class=\"code-keyword\">this</span>.selectPlaylist();i!==<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media()&amp;&amp;(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media(i),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.resetEverything(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t.browser.IE_VERSION||t.browser.IS_EDGE?e.tech_.setCurrentTime(e.tech_.currentTime()+<span class=\"code-number\">.04</span>):e.tech_.setCurrentTime(e.tech_.currentTime())}))}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"play\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.setupFirstPlay()){<span class=\"code-keyword\">this</span>.tech_.ended()&amp;&amp;<span class=\"code-keyword\">this</span>.seekTo_(<span class=\"code-number\">0</span>),<span class=\"code-keyword\">this</span>.hasPlayed_()&amp;&amp;<span class=\"code-keyword\">this</span>.load();<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.tech_.seekable();<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.tech_.duration()===<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>&amp;&amp;<span class=\"code-keyword\">this</span>.tech_.currentTime()&lt;e.start(<span class=\"code-number\">0</span>)?<span class=\"code-keyword\">this</span>.seekTo_(e.end(e.length<span class=\"code-number\">-1</span>)):<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>}}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"setupFirstPlay\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>,i=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media();<span class=\"code-keyword\">if</span>(!i||<span class=\"code-keyword\">this</span>.tech_.paused()||<span class=\"code-keyword\">this</span>.hasPlayed_())<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(!i.endList){<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>.seekable();<span class=\"code-keyword\">if</span>(!n.length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(t.browser.IE_VERSION&amp;&amp;<span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.tech_.readyState())<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.tech_.one(<span class=\"code-string\">\"loadedmetadata\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"firstplay\"</span>),e.seekTo_(n.end(<span class=\"code-number\">0</span>)),e.hasPlayed_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>}}),!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"firstplay\"</span>),<span class=\"code-keyword\">this</span>.seekTo_(n.end(<span class=\"code-number\">0</span>))}<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.hasPlayed_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>},<span class=\"code-keyword\">this</span>.load(),!<span class=\"code-number\">0</span>}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"handleSourceOpen_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">try</span>{<span class=\"code-keyword\">this</span>.setupSourceBuffers_()}<span class=\"code-keyword\">catch</span>(e){<span class=\"code-keyword\">return</span> t.log.warn(<span class=\"code-string\">\"Failed to create Source Buffers\"</span>,e),<span class=\"code-keyword\">this</span>.mediaSource.endOfStream(<span class=\"code-string\">\"decode\"</span>)}<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.tech_.autoplay()){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.tech_.play();<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e&amp;&amp;<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> e.then&amp;&amp;e.then(<span class=\"code-literal\">null</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{})}<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"sourceopen\"</span>)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"onEndOfStream\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.mainSegmentLoader_.ended_;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.mediaTypes_.AUDIO.activePlaylistLoader&amp;&amp;(e=!<span class=\"code-keyword\">this</span>.mainSegmentLoader_.startingMedia_||<span class=\"code-keyword\">this</span>.mainSegmentLoader_.startingMedia_.containsVideo?e&amp;&amp;<span class=\"code-keyword\">this</span>.audioSegmentLoader_.ended_:<span class=\"code-keyword\">this</span>.audioSegmentLoader_.ended_),e){<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"calling mediaSource.endOfStream()\"</span>);<span class=\"code-keyword\">try</span>{<span class=\"code-keyword\">this</span>.mediaSource.endOfStream()}<span class=\"code-keyword\">catch</span>(e){t.log.warn(<span class=\"code-string\">\"Failed to call media source endOfStream\"</span>,e)}}}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"stuckAtPlaylistEnd_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.seekable().length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.syncController_.getExpiredTime(e,<span class=\"code-keyword\">this</span>.mediaSource.duration);<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>===t)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> i=Bn.Playlist.playlistEnd(e,t),n=<span class=\"code-keyword\">this</span>.tech_.currentTime(),r=<span class=\"code-keyword\">this</span>.tech_.buffered();<span class=\"code-keyword\">if</span>(!r.length)<span class=\"code-keyword\">return</span> i-n&lt;=<span class=\"code-number\">.1</span>;<span class=\"code-keyword\">var</span> a=r.end(r.length<span class=\"code-number\">-1</span>);<span class=\"code-keyword\">return</span> a-n&lt;=<span class=\"code-number\">.1</span>&amp;&amp;i-a&lt;=<span class=\"code-number\">.1</span>}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"blacklistCurrentPlaylist\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,i=<span class=\"code-built_in\">arguments</span>.length&gt;<span class=\"code-number\">0</span>&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">0</span>]?<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">0</span>]:{},n=<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>],r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(r=i.playlist||<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media(),n=n||i.blacklistDuration||<span class=\"code-keyword\">this</span>.blacklistDuration,!r){<span class=\"code-keyword\">this</span>.error=i;<span class=\"code-keyword\">try</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.mediaSource.endOfStream(<span class=\"code-string\">\"network\"</span>)}<span class=\"code-keyword\">catch</span>(e){<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"error\"</span>)}}<span class=\"code-keyword\">var</span> a=<span class=\"code-number\">1</span>===<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master.playlists.filter(V).length,s=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master.playlists;<span class=\"code-keyword\">return</span> <span class=\"code-number\">1</span>===s.length?(t.log.warn(<span class=\"code-string\">\"Problem encountered with the current HLS playlist. Trying again since it is the only playlist.\"</span>),<span class=\"code-keyword\">this</span>.tech_.trigger(<span class=\"code-string\">\"retryplaylist\"</span>),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.load(a)):(a&amp;&amp;(t.log.warn(<span class=\"code-string\">\"Removing all playlists from the blacklist because the last rendition is about to be blacklisted.\"</span>),s.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.excludeUntil!==<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>&amp;&amp;<span class=\"code-keyword\">delete</span> e.excludeUntil}),<span class=\"code-keyword\">this</span>.tech_.trigger(<span class=\"code-string\">\"retryplaylist\"</span>)),r.excludeUntil=<span class=\"code-built_in\">Date</span>.now()+<span class=\"code-number\">1e3</span>*n,<span class=\"code-keyword\">this</span>.tech_.trigger(<span class=\"code-string\">\"blacklistplaylist\"</span>),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-rendition-blacklisted\"</span>}),e=<span class=\"code-keyword\">this</span>.selectPlaylist(),t.log.warn(<span class=\"code-string\">\"Problem encountered with the current HLS playlist.\"</span>+(i.message?<span class=\"code-string\">\" \"</span>+i.message:<span class=\"code-string\">\"\"</span>)+<span class=\"code-string\">\" Switching to another playlist.\"</span>),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media(e,a))}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"pauseLoading\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.mainSegmentLoader_.pause(),<span class=\"code-keyword\">this</span>.mediaTypes_.AUDIO.activePlaylistLoader&amp;&amp;<span class=\"code-keyword\">this</span>.audioSegmentLoader_.pause(),<span class=\"code-keyword\">this</span>.mediaTypes_.SUBTITLES.activePlaylistLoader&amp;&amp;<span class=\"code-keyword\">this</span>.subtitleSegmentLoader_.pause()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"setCurrentTime\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=be(<span class=\"code-keyword\">this</span>.tech_.buffered(),e);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistLoader_&amp;&amp;<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media()&amp;&amp;<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media().segments?t&amp;&amp;t.length?e:(<span class=\"code-keyword\">this</span>.mainSegmentLoader_.resetEverything(),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.abort(),<span class=\"code-keyword\">this</span>.mediaTypes_.AUDIO.activePlaylistLoader&amp;&amp;(<span class=\"code-keyword\">this</span>.audioSegmentLoader_.resetEverything(),<span class=\"code-keyword\">this</span>.audioSegmentLoader_.abort()),<span class=\"code-keyword\">this</span>.mediaTypes_.SUBTITLES.activePlaylistLoader&amp;&amp;(<span class=\"code-keyword\">this</span>.subtitleSegmentLoader_.resetEverything(),<span class=\"code-keyword\">this</span>.subtitleSegmentLoader_.abort()),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.load()):<span class=\"code-number\">0</span>}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"duration\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistLoader_?<span class=\"code-keyword\">this</span>.mediaSource?<span class=\"code-keyword\">this</span>.mediaSource.duration:Bn.Playlist.duration(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media()):<span class=\"code-number\">0</span>}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"seekable\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.seekable_}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"onSyncInfoUpdate_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_){<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media();<span class=\"code-keyword\">if</span>(n){<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">this</span>.syncController_.getExpiredTime(n,<span class=\"code-keyword\">this</span>.mediaSource.duration);<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>!==r&amp;&amp;<span class=\"code-number\">0</span>!==(e=Bn.Playlist.seekable(n,r)).length){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.mediaTypes_.AUDIO.activePlaylistLoader){<span class=\"code-keyword\">if</span>(n=<span class=\"code-keyword\">this</span>.mediaTypes_.AUDIO.activePlaylistLoader.media(),<span class=\"code-literal\">null</span>===(r=<span class=\"code-keyword\">this</span>.syncController_.getExpiredTime(n,<span class=\"code-keyword\">this</span>.mediaSource.duration)))<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===(i=Bn.Playlist.seekable(n,r)).length)<span class=\"code-keyword\">return</span>}<span class=\"code-keyword\">var</span> a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,s=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">this</span>.seekable_&amp;&amp;<span class=\"code-keyword\">this</span>.seekable_.length&amp;&amp;(a=<span class=\"code-keyword\">this</span>.seekable_.end(<span class=\"code-number\">0</span>),s=<span class=\"code-keyword\">this</span>.seekable_.start(<span class=\"code-number\">0</span>)),i?i.start(<span class=\"code-number\">0</span>)&gt;e.end(<span class=\"code-number\">0</span>)||e.start(<span class=\"code-number\">0</span>)&gt;i.end(<span class=\"code-number\">0</span>)?<span class=\"code-keyword\">this</span>.seekable_=e:<span class=\"code-keyword\">this</span>.seekable_=t.createTimeRanges([[i.start(<span class=\"code-number\">0</span>)&gt;e.start(<span class=\"code-number\">0</span>)?i.start(<span class=\"code-number\">0</span>):e.start(<span class=\"code-number\">0</span>),i.end(<span class=\"code-number\">0</span>)&lt;e.end(<span class=\"code-number\">0</span>)?i.end(<span class=\"code-number\">0</span>):e.end(<span class=\"code-number\">0</span>)]]):<span class=\"code-keyword\">this</span>.seekable_=e,<span class=\"code-keyword\">this</span>.seekable_&amp;&amp;<span class=\"code-keyword\">this</span>.seekable_.length&amp;&amp;<span class=\"code-keyword\">this</span>.seekable_.end(<span class=\"code-number\">0</span>)===a&amp;&amp;<span class=\"code-keyword\">this</span>.seekable_.start(<span class=\"code-number\">0</span>)===s||(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"seekable updated [\"</span>+Se(<span class=\"code-keyword\">this</span>.seekable_)+<span class=\"code-string\">\"]\"</span>),<span class=\"code-keyword\">this</span>.tech_.trigger(<span class=\"code-string\">\"seekablechanged\"</span>))}}}}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"updateDuration\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>,i=<span class=\"code-keyword\">this</span>.mediaSource.duration,n=Bn.Playlist.duration(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media()),r=<span class=\"code-keyword\">this</span>.tech_.buffered(),a=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">i</span>(<span class=\"code-params\"></span>)</span>{e.logger_(<span class=\"code-string\">\"Setting duration from \"</span>+e.mediaSource.duration+<span class=\"code-string\">\" =&gt; \"</span>+n);<span class=\"code-keyword\">try</span>{e.mediaSource.duration=n}<span class=\"code-keyword\">catch</span>(e){t.log.warn(<span class=\"code-string\">\"Failed to set media source duration\"</span>,e)}e.tech_.trigger(<span class=\"code-string\">\"durationchange\"</span>),e.mediaSource.removeEventListener(<span class=\"code-string\">\"sourceopen\"</span>,i)};r.length&gt;<span class=\"code-number\">0</span>&amp;&amp;(n=<span class=\"code-built_in\">Math</span>.max(n,r.end(r.length<span class=\"code-number\">-1</span>))),i!==n&amp;&amp;(<span class=\"code-string\">\"open\"</span>!==<span class=\"code-keyword\">this</span>.mediaSource.readyState?<span class=\"code-keyword\">this</span>.mediaSource.addEventListener(<span class=\"code-string\">\"sourceopen\"</span>,a):a())}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"dispose\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.decrypter_.terminate(),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.dispose(),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.dispose(),[<span class=\"code-string\">\"AUDIO\"</span>,<span class=\"code-string\">\"SUBTITLES\"</span>].forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.mediaTypes_[t].groups;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> i)i[n].forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.playlistLoader&amp;&amp;e.playlistLoader.dispose()})}),<span class=\"code-keyword\">this</span>.audioSegmentLoader_.dispose(),<span class=\"code-keyword\">this</span>.subtitleSegmentLoader_.dispose()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"master\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"media\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media()||<span class=\"code-keyword\">this</span>.initialMedia_}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"setupSourceBuffers_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media();<span class=\"code-keyword\">if</span>(t&amp;&amp;<span class=\"code-string\">\"open\"</span>===<span class=\"code-keyword\">this</span>.mediaSource.readyState){<span class=\"code-keyword\">if</span>((e=je(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master,t)).length&lt;<span class=\"code-number\">1</span>)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.error=<span class=\"code-string\">\"No compatible SourceBuffer configuration for the variant stream:\"</span>+t.resolvedUri,<span class=\"code-keyword\">this</span>.mediaSource.endOfStream(<span class=\"code-string\">\"decode\"</span>);<span class=\"code-keyword\">this</span>.configureLoaderMimeTypes_(e),<span class=\"code-keyword\">this</span>.excludeIncompatibleVariants_(t)}}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"configureLoaderMimeTypes_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=e.length&gt;<span class=\"code-number\">1</span>&amp;&amp;<span class=\"code-number\">-1</span>===e[<span class=\"code-number\">0</span>].indexOf(<span class=\"code-string\">\",\"</span>)&amp;&amp;e[<span class=\"code-number\">0</span>]!==e[<span class=\"code-number\">1</span>]?<span class=\"code-keyword\">new</span> t.EventTarget:<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">this</span>.mainSegmentLoader_.mimeType(e[<span class=\"code-number\">0</span>],i),e[<span class=\"code-number\">1</span>]&amp;&amp;<span class=\"code-keyword\">this</span>.audioSegmentLoader_.mimeType(e[<span class=\"code-number\">1</span>],i)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"excludeUnsupportedVariants_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.master().playlists.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t;e.attributes.CODECS&amp;&amp;u.MediaSource&amp;&amp;u.MediaSource.isTypeSupported&amp;&amp;!u.MediaSource.isTypeSupported(<span class=\"code-string\">'video/mp4; codecs=\"'</span>+(t=e.attributes.CODECS,t.replace(<span class=\"code-regexp\">/avc1\\.(\\d+)\\.(\\d+)/i</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Fe([e])[<span class=\"code-number\">0</span>]}))+<span class=\"code-string\">'\"'</span>)&amp;&amp;(e.excludeUntil=<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>)})}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"excludeIncompatibleVariants_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">2</span>,i=<span class=\"code-literal\">null</span>,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;e.attributes.CODECS&amp;&amp;(n=He(e.attributes.CODECS),i=n.videoCodec,t=n.codecCount),<span class=\"code-keyword\">this</span>.master().playlists.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> n={<span class=\"code-attr\">codecCount</span>:<span class=\"code-number\">2</span>,<span class=\"code-attr\">videoCodec</span>:<span class=\"code-literal\">null</span>};e.attributes.CODECS&amp;&amp;(n=He(e.attributes.CODECS)),n.codecCount!==t&amp;&amp;(e.excludeUntil=<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>),n.videoCodec!==i&amp;&amp;(e.excludeUntil=<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>)})}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"updateAdCues_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>,i=<span class=\"code-keyword\">this</span>.seekable();i.length&amp;&amp;(t=i.start(<span class=\"code-number\">0</span>)),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-built_in\">arguments</span>.length&gt;<span class=\"code-number\">2</span>&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">2</span>]?<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">2</span>]:<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(e.segments)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=i,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,a=<span class=\"code-number\">0</span>;a&lt;e.segments.length;a++){<span class=\"code-keyword\">var</span> s=e.segments[a];<span class=\"code-keyword\">if</span>(r||(r=Ji(t,n+s.duration/<span class=\"code-number\">2</span>)),r){<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"cueIn\"</span><span class=\"code-keyword\">in</span> s){r.endTime=n,r.adEndTime=n,n+=s.duration,r=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">continue</span>}<span class=\"code-keyword\">if</span>(n&lt;r.endTime){n+=s.duration;<span class=\"code-keyword\">continue</span>}r.endTime+=s.duration}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"cueOut\"</span><span class=\"code-keyword\">in</span> s&amp;&amp;((r=<span class=\"code-keyword\">new</span> u.VTTCue(n,n+s.duration,s.cueOut)).adStartTime=n,r.adEndTime=n+<span class=\"code-built_in\">parseFloat</span>(s.cueOut),t.addCue(r)),<span class=\"code-string\">\"cueOutCont\"</span><span class=\"code-keyword\">in</span> s){<span class=\"code-keyword\">var</span> o,d,l=s.cueOutCont.split(<span class=\"code-string\">\"/\"</span>).map(<span class=\"code-built_in\">parseFloat</span>),h=S(l,<span class=\"code-number\">2</span>);o=h[<span class=\"code-number\">0</span>],d=h[<span class=\"code-number\">1</span>],(r=<span class=\"code-keyword\">new</span> u.VTTCue(n,n+s.duration,<span class=\"code-string\">\"\"</span>)).adStartTime=n-o,r.adEndTime=r.adStartTime+d,t.addCue(r)}n+=s.duration}}(e,<span class=\"code-keyword\">this</span>.cueTagsTrack_,t)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"goalBufferLength\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.tech_.currentTime(),t=pi.GOAL_BUFFER_LENGTH,i=pi.GOAL_BUFFER_LENGTH_RATE,n=<span class=\"code-built_in\">Math</span>.max(t,pi.MAX_GOAL_BUFFER_LENGTH);<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Math</span>.min(t+e*i,n)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"bufferLowWaterLine\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.tech_.currentTime(),t=pi.BUFFER_LOW_WATER_LINE,i=pi.BUFFER_LOW_WATER_LINE_RATE,n=<span class=\"code-built_in\">Math</span>.max(t,pi.MAX_BUFFER_LOW_WATER_LINE);<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Math</span>.min(t+e*i,n)}}]),i}(t.EventTarget),Hn=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i,n</span>)</span>{_(<span class=\"code-keyword\">this</span>,e);<span class=\"code-keyword\">var</span> r,a,s,o=t.masterPlaylistController_,u=o[(t.options_.smoothQualityChange?<span class=\"code-string\">\"smooth\"</span>:<span class=\"code-string\">\"fast\"</span>)+<span class=\"code-string\">\"QualityChange_\"</span>].bind(o);<span class=\"code-keyword\">if</span>(i.attributes.RESOLUTION){<span class=\"code-keyword\">var</span> d=i.attributes.RESOLUTION;<span class=\"code-keyword\">this</span>.width=d.width,<span class=\"code-keyword\">this</span>.height=d.height}<span class=\"code-keyword\">this</span>.bandwidth=i.attributes.BANDWIDTH,<span class=\"code-keyword\">this</span>.id=n,<span class=\"code-keyword\">this</span>.enabled=(r=t.playlists,a=i.uri,s=u,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=r.master.playlists[a],i=j(t),n=V(t);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e?n:(e?<span class=\"code-keyword\">delete</span> t.disabled:t.disabled=!<span class=\"code-number\">0</span>,e===n||i||(s(),e?r.trigger(<span class=\"code-string\">\"renditionenabled\"</span>):r.trigger(<span class=\"code-string\">\"renditiondisabled\"</span>)),e)})},Gn=[<span class=\"code-string\">\"seeking\"</span>,<span class=\"code-string\">\"seeked\"</span>,<span class=\"code-string\">\"pause\"</span>,<span class=\"code-string\">\"playing\"</span>,<span class=\"code-string\">\"error\"</span>],jn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>;_(<span class=\"code-keyword\">this</span>,e),<span class=\"code-keyword\">this</span>.tech_=t.tech,<span class=\"code-keyword\">this</span>.seekable=t.seekable,<span class=\"code-keyword\">this</span>.seekTo=t.seekTo,<span class=\"code-keyword\">this</span>.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,<span class=\"code-keyword\">this</span>.media=t.media,<span class=\"code-keyword\">this</span>.consecutiveUpdates=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.lastRecordedTime=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.timer_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.checkCurrentTimeTimeout_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.logger_=si(<span class=\"code-string\">\"PlaybackWatcher\"</span>),<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"initialize\"</span>);<span class=\"code-keyword\">var</span> n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.monitorCurrentTime_()},r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.techWaiting_()},a=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.cancelTimer_()},s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.fixesBadSeeks_()};<span class=\"code-keyword\">this</span>.tech_.on(<span class=\"code-string\">\"seekablechanged\"</span>,s),<span class=\"code-keyword\">this</span>.tech_.on(<span class=\"code-string\">\"waiting\"</span>,r),<span class=\"code-keyword\">this</span>.tech_.on(Gn,a),<span class=\"code-keyword\">this</span>.tech_.on(<span class=\"code-string\">\"canplay\"</span>,n),<span class=\"code-keyword\">this</span>.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i.logger_(<span class=\"code-string\">\"dispose\"</span>),i.tech_.off(<span class=\"code-string\">\"seekablechanged\"</span>,s),i.tech_.off(<span class=\"code-string\">\"waiting\"</span>,r),i.tech_.off(Gn,a),i.tech_.off(<span class=\"code-string\">\"canplay\"</span>,n),i.checkCurrentTimeTimeout_&amp;&amp;u.clearTimeout(i.checkCurrentTimeTimeout_),i.cancelTimer_()}}<span class=\"code-keyword\">return</span> v(e,[{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"monitorCurrentTime_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.checkCurrentTime_(),<span class=\"code-keyword\">this</span>.checkCurrentTimeTimeout_&amp;&amp;u.clearTimeout(<span class=\"code-keyword\">this</span>.checkCurrentTimeTimeout_),<span class=\"code-keyword\">this</span>.checkCurrentTimeTimeout_=u.setTimeout(<span class=\"code-keyword\">this</span>.monitorCurrentTime_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-number\">250</span>)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"checkCurrentTime_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.tech_.seeking()&amp;&amp;<span class=\"code-keyword\">this</span>.fixesBadSeeks_())<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.consecutiveUpdates=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.lastRecordedTime=<span class=\"code-keyword\">this</span>.tech_.currentTime());<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.tech_.paused()&amp;&amp;!<span class=\"code-keyword\">this</span>.tech_.seeking()){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.tech_.currentTime(),t=<span class=\"code-keyword\">this</span>.tech_.buffered();<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.lastRecordedTime===e&amp;&amp;(!t.length||e+<span class=\"code-number\">.1</span>&gt;=t.end(t.length<span class=\"code-number\">-1</span>)))<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.techWaiting_();<span class=\"code-keyword\">this</span>.consecutiveUpdates&gt;=<span class=\"code-number\">5</span>&amp;&amp;e===<span class=\"code-keyword\">this</span>.lastRecordedTime?(<span class=\"code-keyword\">this</span>.consecutiveUpdates++,<span class=\"code-keyword\">this</span>.waiting_()):e===<span class=\"code-keyword\">this</span>.lastRecordedTime?<span class=\"code-keyword\">this</span>.consecutiveUpdates++:(<span class=\"code-keyword\">this</span>.consecutiveUpdates=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.lastRecordedTime=e)}}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"cancelTimer_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.consecutiveUpdates=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.timer_&amp;&amp;(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"cancelTimer_\"</span>),clearTimeout(<span class=\"code-keyword\">this</span>.timer_)),<span class=\"code-keyword\">this</span>.timer_=<span class=\"code-literal\">null</span>}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"fixesBadSeeks_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.tech_.seeking())<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.seekable(),t=<span class=\"code-keyword\">this</span>.tech_.currentTime(),i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">this</span>.afterSeekableWindow_(e,t,<span class=\"code-keyword\">this</span>.media(),<span class=\"code-keyword\">this</span>.allowSeeksWithinUnsafeLiveWindow)&amp;&amp;(i=e.end(e.length<span class=\"code-number\">-1</span>));<span class=\"code-keyword\">this</span>.beforeSeekableWindow_(e,t)&amp;&amp;(i=e.start(<span class=\"code-number\">0</span>)+<span class=\"code-number\">.1</span>);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==i&amp;&amp;(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Trying to seek outside of seekable at time \"</span>+t+<span class=\"code-string\">\" with seekable range \"</span>+Se(e)+<span class=\"code-string\">\". Seeking to \"</span>+i+<span class=\"code-string\">\".\"</span>),<span class=\"code-keyword\">this</span>.seekTo(i),!<span class=\"code-number\">0</span>)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"waiting_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.techWaiting_()){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.tech_.currentTime(),t=<span class=\"code-keyword\">this</span>.tech_.buffered(),i=be(t,e);<span class=\"code-keyword\">return</span> i.length&amp;&amp;e+<span class=\"code-number\">3</span>&lt;=i.end(<span class=\"code-number\">0</span>)?(<span class=\"code-keyword\">this</span>.cancelTimer_(),<span class=\"code-keyword\">this</span>.seekTo(e),<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Stopped at \"</span>+e+<span class=\"code-string\">\" while inside a buffered region [\"</span>+i.start(<span class=\"code-number\">0</span>)+<span class=\"code-string\">\" -&gt; \"</span>+i.end(<span class=\"code-number\">0</span>)+<span class=\"code-string\">\"]. Attempting to resume playback by seeking to the current time.\"</span>),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-unknown-waiting\"</span>})):<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>}}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"techWaiting_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.seekable(),t=<span class=\"code-keyword\">this</span>.tech_.currentTime();<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.tech_.seeking()&amp;&amp;<span class=\"code-keyword\">this</span>.fixesBadSeeks_())<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.tech_.seeking()||<span class=\"code-literal\">null</span>!==<span class=\"code-keyword\">this</span>.timer_)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.beforeSeekableWindow_(e,t)){<span class=\"code-keyword\">var</span> i=e.end(e.length<span class=\"code-number\">-1</span>);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Fell out of live window at time \"</span>+t+<span class=\"code-string\">\". Seeking to live point (seekable end) \"</span>+i),<span class=\"code-keyword\">this</span>.cancelTimer_(),<span class=\"code-keyword\">this</span>.seekTo(i),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-live-resync\"</span>}),!<span class=\"code-number\">0</span>}<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>.tech_.buffered(),r=Te(n,t);<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.videoUnderflow_(r,n,t))<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.cancelTimer_(),<span class=\"code-keyword\">this</span>.seekTo(t),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-video-underflow\"</span>}),!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(r.length&gt;<span class=\"code-number\">0</span>){<span class=\"code-keyword\">var</span> a=r.start(<span class=\"code-number\">0</span>)-t;<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Stopped at \"</span>+t+<span class=\"code-string\">\", setting timer for \"</span>+a+<span class=\"code-string\">\", seeking to \"</span>+r.start(<span class=\"code-number\">0</span>)),<span class=\"code-keyword\">this</span>.timer_=setTimeout(<span class=\"code-keyword\">this</span>.skipTheGap_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-number\">1e3</span>*a,t),!<span class=\"code-number\">0</span>}<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"afterSeekableWindow_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-built_in\">arguments</span>.length&gt;<span class=\"code-number\">3</span>&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">3</span>]&amp;&amp;<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">3</span>];<span class=\"code-keyword\">if</span>(!e.length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> r=e.end(e.length<span class=\"code-number\">-1</span>)+<span class=\"code-number\">.1</span>;<span class=\"code-keyword\">return</span>!i.endList&amp;&amp;n&amp;&amp;(r=e.end(e.length<span class=\"code-number\">-1</span>)+<span class=\"code-number\">3</span>*i.targetDuration),t&gt;r}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"beforeSeekableWindow_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span>!!(e.length&amp;&amp;e.start(<span class=\"code-number\">0</span>)&gt;<span class=\"code-number\">0</span>&amp;&amp;t&lt;e.start(<span class=\"code-number\">0</span>)<span class=\"code-number\">-.1</span>)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"videoUnderflow_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===e.length){<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>.gapFromVideoUnderflow_(t,i);<span class=\"code-keyword\">if</span>(n)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Encountered a gap in video from \"</span>+n.start+<span class=\"code-string\">\" to \"</span>+n.end+<span class=\"code-string\">\". Seeking to current time \"</span>+i),!<span class=\"code-number\">0</span>}<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"skipTheGap_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.tech_.buffered(),i=<span class=\"code-keyword\">this</span>.tech_.currentTime(),n=Te(t,i);<span class=\"code-keyword\">this</span>.cancelTimer_(),<span class=\"code-number\">0</span>!==n.length&amp;&amp;i===e&amp;&amp;(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"skipTheGap_:\"</span>,<span class=\"code-string\">\"currentTime:\"</span>,i,<span class=\"code-string\">\"scheduled currentTime:\"</span>,e,<span class=\"code-string\">\"nextRange start:\"</span>,n.start(<span class=\"code-number\">0</span>)),<span class=\"code-keyword\">this</span>.seekTo(n.start(<span class=\"code-number\">0</span>)+<span class=\"code-number\">1</span>/<span class=\"code-number\">30</span>),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-gap-skip\"</span>}))}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"gapFromVideoUnderflow_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(e.length&lt;<span class=\"code-number\">2</span>)<span class=\"code-keyword\">return</span> t.createTimeRanges();<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=[],n=<span class=\"code-number\">1</span>;n&lt;e.length;n++){<span class=\"code-keyword\">var</span> r=e.end(n<span class=\"code-number\">-1</span>),a=e.start(n);i.push([r,a])}<span class=\"code-keyword\">return</span> t.createTimeRanges(i)}(e),r=<span class=\"code-number\">0</span>;r&lt;n.length;r++){<span class=\"code-keyword\">var</span> a=n.start(r),s=n.end(r);<span class=\"code-keyword\">if</span>(i-a&lt;<span class=\"code-number\">4</span>&amp;&amp;i-a&gt;<span class=\"code-number\">2</span>)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">start</span>:a,<span class=\"code-attr\">end</span>:s}}<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}}]),e}(),Vn={<span class=\"code-attr\">errorInterval</span>:<span class=\"code-number\">30</span>,<span class=\"code-attr\">getSource</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e(<span class=\"code-keyword\">this</span>.tech({<span class=\"code-attr\">IWillNotUseThisInPlugins</span>:!<span class=\"code-number\">0</span>}).currentSource_)}},Wn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{!<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">i,n</span>)</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>,a=<span class=\"code-number\">0</span>,s=t.mergeOptions(Vn,n);i.ready(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-error-reload-initialized\"</span>})});<span class=\"code-keyword\">var</span> o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{a&amp;&amp;i.currentTime(a)},u=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-literal\">null</span>!==e&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e&amp;&amp;(a=i.duration()!==<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>&amp;&amp;i.currentTime()||<span class=\"code-number\">0</span>,i.one(<span class=\"code-string\">\"loadedmetadata\"</span>,o),i.src(e),i.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-error-reload\"</span>}),i.play())},d=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-built_in\">Date</span>.now()-r&lt;<span class=\"code-number\">1e3</span>*s.errorInterval)i.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-error-reload-canceled\"</span>});<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(s.getSource&amp;&amp;<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> s.getSource)<span class=\"code-keyword\">return</span> r=<span class=\"code-built_in\">Date</span>.now(),s.getSource.call(i,u);t.log.error(<span class=\"code-string\">\"ERROR: reloadSourceOnError - The option getSource must be a function!\"</span>)}},l=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\"></span>)</span>{i.off(<span class=\"code-string\">\"loadedmetadata\"</span>,o),i.off(<span class=\"code-string\">\"error\"</span>,d),i.off(<span class=\"code-string\">\"dispose\"</span>,e)};i.on(<span class=\"code-string\">\"error\"</span>,d),i.on(<span class=\"code-string\">\"dispose\"</span>,l),i.reloadSourceOnError=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{l(),e(i,t)}}(<span class=\"code-keyword\">this</span>,e)};t.use(<span class=\"code-string\">\"*\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">setSource</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{t(<span class=\"code-literal\">null</span>,e)},<span class=\"code-attr\">setCurrentTime</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span> e.vhs&amp;&amp;e.currentSource().src===e.vhs.source_.src&amp;&amp;e.vhs.setCurrentTime(t),t},<span class=\"code-attr\">play</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.vhs&amp;&amp;e.currentSource().src===e.vhs.source_.src&amp;&amp;e.vhs.setCurrentTime(e.tech_.currentTime())}}});<span class=\"code-keyword\">var</span> zn={<span class=\"code-attr\">PlaylistLoader</span>:C,<span class=\"code-attr\">Playlist</span>:X,<span class=\"code-attr\">Decrypter</span>:ue,<span class=\"code-attr\">AsyncStream</span>:ae,<span class=\"code-attr\">decrypt</span>:oe,<span class=\"code-attr\">utils</span>:ge,<span class=\"code-attr\">STANDARD_PLAYLIST_SELECTOR</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r</span>)</span>{<span class=\"code-keyword\">var</span> a=e.playlists.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i;<span class=\"code-keyword\">return</span> t=e.attributes.RESOLUTION&amp;&amp;e.attributes.RESOLUTION.width,i=e.attributes.RESOLUTION&amp;&amp;e.attributes.RESOLUTION.height,{<span class=\"code-attr\">bandwidth</span>:e.attributes.BANDWIDTH||u.Number.MAX_VALUE,<span class=\"code-attr\">width</span>:t,<span class=\"code-attr\">height</span>:i,<span class=\"code-attr\">playlist</span>:e}});Ui(a,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.bandwidth-t.bandwidth});<span class=\"code-keyword\">var</span> s=(a=a.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!X.isIncompatible(e.playlist)})).filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> X.isEnabled(e.playlist)});s.length||(s=a.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!X.isDisabled(e.playlist)}));<span class=\"code-keyword\">var</span> o=s.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.bandwidth*pi.BANDWIDTH_VARIANCE&lt;t}),d=o[o.length<span class=\"code-number\">-1</span>],l=o.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.bandwidth===d.bandwidth})[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(!<span class=\"code-number\">1</span>===r){<span class=\"code-keyword\">var</span> h=l||s[<span class=\"code-number\">0</span>]||a[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">return</span> h?h.playlist:<span class=\"code-literal\">null</span>}<span class=\"code-keyword\">var</span> c=o.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.width&amp;&amp;e.height});Ui(c,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.width-t.width});<span class=\"code-keyword\">var</span> f=c.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.width===i&amp;&amp;e.height===n});d=f[f.length<span class=\"code-number\">-1</span>];<span class=\"code-keyword\">var</span> p=f.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.bandwidth===d.bandwidth})[<span class=\"code-number\">0</span>],m=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,g=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,y=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;p||(g=(m=c.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.width&gt;i||e.height&gt;n})).filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.width===m[<span class=\"code-number\">0</span>].width&amp;&amp;e.height===m[<span class=\"code-number\">0</span>].height}),d=g[g.length<span class=\"code-number\">-1</span>],y=g.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.bandwidth===d.bandwidth})[<span class=\"code-number\">0</span>]);<span class=\"code-keyword\">var</span> _=y||p||l||s[<span class=\"code-number\">0</span>]||a[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">return</span> _?_.playlist:<span class=\"code-literal\">null</span>}(<span class=\"code-keyword\">this</span>.playlists.master,<span class=\"code-keyword\">this</span>.systemBandwidth,<span class=\"code-built_in\">parseInt</span>(Ei(<span class=\"code-keyword\">this</span>.tech_.el(),<span class=\"code-string\">\"width\"</span>),<span class=\"code-number\">10</span>),<span class=\"code-built_in\">parseInt</span>(Ei(<span class=\"code-keyword\">this</span>.tech_.el(),<span class=\"code-string\">\"height\"</span>),<span class=\"code-number\">10</span>),<span class=\"code-keyword\">this</span>.limitRenditionByPlayerDimensions)},<span class=\"code-attr\">INITIAL_PLAYLIST_SELECTOR</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.playlists.master.playlists.filter(X.isEnabled);<span class=\"code-keyword\">return</span> Ui(e,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> Ii(e,t)}),e.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> He(e.attributes.CODECS).videoCodec})[<span class=\"code-number\">0</span>]||<span class=\"code-literal\">null</span>},<span class=\"code-attr\">comparePlaylistBandwidth</span>:Ii,<span class=\"code-attr\">comparePlaylistResolution</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> e.attributes.RESOLUTION&amp;&amp;e.attributes.RESOLUTION.width&amp;&amp;(i=e.attributes.RESOLUTION.width),i=i||u.Number.MAX_VALUE,t.attributes.RESOLUTION&amp;&amp;t.attributes.RESOLUTION.width&amp;&amp;(n=t.attributes.RESOLUTION.width),i===(n=n||u.Number.MAX_VALUE)&amp;&amp;e.attributes.BANDWIDTH&amp;&amp;t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:i-n},<span class=\"code-attr\">xhr</span>:$()};[<span class=\"code-string\">\"GOAL_BUFFER_LENGTH\"</span>,<span class=\"code-string\">\"MAX_GOAL_BUFFER_LENGTH\"</span>,<span class=\"code-string\">\"GOAL_BUFFER_LENGTH_RATE\"</span>,<span class=\"code-string\">\"BUFFER_LOW_WATER_LINE\"</span>,<span class=\"code-string\">\"MAX_BUFFER_LOW_WATER_LINE\"</span>,<span class=\"code-string\">\"BUFFER_LOW_WATER_LINE_RATE\"</span>,<span class=\"code-string\">\"BANDWIDTH_VARIANCE\"</span>].forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-built_in\">Object</span>.defineProperty(zn,e,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.log.warn(<span class=\"code-string\">\"using Hls.\"</span>+e+<span class=\"code-string\">\" is UNSAFE be sure you know what you are doing\"</span>),pi[e]},<span class=\"code-attr\">set</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{t.log.warn(<span class=\"code-string\">\"using Hls.\"</span>+e+<span class=\"code-string\">\" is UNSAFE be sure you know what you are doing\"</span>),<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> i||i&lt;<span class=\"code-number\">0</span>?t.log.warn(<span class=\"code-string\">\"value of Hls.\"</span>+e+<span class=\"code-string\">\" must be greater than or equal to 0\"</span>):pi[e]=i}})});<span class=\"code-keyword\">var</span> Xn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-regexp\">/^(audio|video|application)\\/(x-|vnd\\.apple\\.)?mpegurl/i</span>.test(e))<span class=\"code-keyword\">return</span><span class=\"code-string\">\"hls\"</span>;<span class=\"code-keyword\">return</span><span class=\"code-regexp\">/^application\\/dash\\+xml/i</span>.test(e)?<span class=\"code-string\">\"dash\"</span>:<span class=\"code-literal\">null</span>},Yn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=t.media(),n=<span class=\"code-number\">-1</span>,r=<span class=\"code-number\">0</span>;r&lt;e.length;r++)<span class=\"code-keyword\">if</span>(e[r].id===i.uri){n=r;<span class=\"code-keyword\">break</span>}e.selectedIndex_=n,e.trigger({<span class=\"code-attr\">selectedIndex</span>:n,<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"change\"</span>})};zn.canPlaySource=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.log.warn(<span class=\"code-string\">\"HLS is no longer a tech. Please remove it from your player's techOrder.\"</span>)};<span class=\"code-keyword\">var</span> Kn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i,n</span>)</span>{<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">return</span> e;<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(n.mimeType_)r=i.mimeType_,a=n.mimeType_;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">var</span> s=Ve(i.mimeType_),o=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;s.parameters.codecs.split(<span class=\"code-string\">\",\"</span>).forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e=e.trim(),We(e)?o=e:ze(e)&amp;&amp;(u=e)}),r=s.type+<span class=\"code-string\">'; codecs=\"'</span>+u+<span class=\"code-string\">'\"'</span>,a=s.type.replace(<span class=\"code-string\">\"video\"</span>,<span class=\"code-string\">\"audio\"</span>)+<span class=\"code-string\">'; codecs=\"'</span>+o+<span class=\"code-string\">'\"'</span>}<span class=\"code-keyword\">var</span> d={},l=i.playlist_;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> h <span class=\"code-keyword\">in</span> e)d[h]={<span class=\"code-attr\">audioContentType</span>:a,<span class=\"code-attr\">videoContentType</span>:r},l.contentProtection&amp;&amp;l.contentProtection[h]&amp;&amp;l.contentProtection[h].pssh&amp;&amp;(d[h].pssh=l.contentProtection[h].pssh),<span class=\"code-string\">\"string\"</span>==<span class=\"code-keyword\">typeof</span> e[h]&amp;&amp;(d[h].url=e[h]);<span class=\"code-keyword\">return</span> t.mergeOptions(e,d)},$n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-built_in\">window</span>.localStorage)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> e=<span class=\"code-built_in\">window</span>.localStorage.getItem(<span class=\"code-string\">\"videojs-vhs\"</span>);<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">try</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">JSON</span>.parse(e)}<span class=\"code-keyword\">catch</span>(e){<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}};zn.supportsNativeHls=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=s.createElement(<span class=\"code-string\">\"video\"</span>);<span class=\"code-keyword\">if</span>(!t.getTech(<span class=\"code-string\">\"Html5\"</span>).isSupported())<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">return</span>[<span class=\"code-string\">\"application/vnd.apple.mpegurl\"</span>,<span class=\"code-string\">\"audio/mpegurl\"</span>,<span class=\"code-string\">\"audio/x-mpegurl\"</span>,<span class=\"code-string\">\"application/x-mpegurl\"</span>,<span class=\"code-string\">\"video/x-mpegurl\"</span>,<span class=\"code-string\">\"video/mpegurl\"</span>,<span class=\"code-string\">\"application/mpegurl\"</span>].some(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-regexp\">/maybe|probably/i</span>.test(e.canPlayType(t))})}(),zn.supportsNativeDash=!!t.getTech(<span class=\"code-string\">\"Html5\"</span>).isSupported()&amp;&amp;<span class=\"code-regexp\">/maybe|probably/i</span>.test(s.createElement(<span class=\"code-string\">\"video\"</span>).canPlayType(<span class=\"code-string\">\"application/dash+xml\"</span>)),zn.supportsTypeNatively=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"hls\"</span>===e?zn.supportsNativeHls:<span class=\"code-string\">\"dash\"</span>===e&amp;&amp;zn.supportsNativeDash},zn.isSupported=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.log.warn(<span class=\"code-string\">\"HLS is no longer a tech. Please remove it from your player's techOrder.\"</span>)};<span class=\"code-keyword\">var</span> Qn=t.getComponent(<span class=\"code-string\">\"Component\"</span>),Jn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">i</span>(<span class=\"code-params\">e,n,r</span>)</span>{_(<span class=\"code-keyword\">this</span>,i);<span class=\"code-keyword\">var</span> a=T(<span class=\"code-keyword\">this</span>,(i.__proto__||<span class=\"code-built_in\">Object</span>.getPrototypeOf(i)).call(<span class=\"code-keyword\">this</span>,n,r.hls));<span class=\"code-keyword\">if</span>(n.options_&amp;&amp;n.options_.playerId){<span class=\"code-keyword\">var</span> o=t(n.options_.playerId);o.hasOwnProperty(<span class=\"code-string\">\"hls\"</span>)||<span class=\"code-built_in\">Object</span>.defineProperty(o,<span class=\"code-string\">\"hls\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.log.warn(<span class=\"code-string\">\"player.hls is deprecated. Use player.tech().hls instead.\"</span>),n.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-player-access\"</span>}),a},<span class=\"code-attr\">configurable</span>:!<span class=\"code-number\">0</span>}),o.vhs=a,o.dash=a,a.player_=o}<span class=\"code-keyword\">if</span>(a.tech_=n,a.source_=e,a.stats={},a.setOptions_(),a.options_.overrideNative&amp;&amp;n.overrideNativeAudioTracks&amp;&amp;n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!<span class=\"code-number\">0</span>),n.overrideNativeVideoTracks(!<span class=\"code-number\">0</span>);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(a.options_.overrideNative&amp;&amp;(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Overriding native HLS requires emulated tracks. See https://git.io/vMpjB\"</span>);<span class=\"code-keyword\">return</span> a.on(s,[<span class=\"code-string\">\"fullscreenchange\"</span>,<span class=\"code-string\">\"webkitfullscreenchange\"</span>,<span class=\"code-string\">\"mozfullscreenchange\"</span>,<span class=\"code-string\">\"MSFullscreenChange\"</span>],<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=s.fullscreenElement||s.webkitFullscreenElement||s.mozFullScreenElement||s.msFullscreenElement;t&amp;&amp;t.contains(a.tech_.el())&amp;&amp;a.masterPlaylistController_.smoothQualityChange_()}),a.on(a.tech_,<span class=\"code-string\">\"seeking\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.tech_.currentTime()&amp;&amp;<span class=\"code-keyword\">this</span>.tech_.player_.loop()&amp;&amp;<span class=\"code-keyword\">this</span>.setCurrentTime(<span class=\"code-number\">0</span>)}),a.on(a.tech_,<span class=\"code-string\">\"error\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.masterPlaylistController_&amp;&amp;<span class=\"code-keyword\">this</span>.masterPlaylistController_.pauseLoading()}),a.on(a.tech_,<span class=\"code-string\">\"play\"</span>,a.play),a}<span class=\"code-keyword\">return</span> b(i,Qn),v(i,[{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"setOptions_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.options_.withCredentials=<span class=\"code-keyword\">this</span>.options_.withCredentials||!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.options_.handleManifestRedirects=<span class=\"code-keyword\">this</span>.options_.handleManifestRedirects||!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.options_.limitRenditionByPlayerDimensions=!<span class=\"code-number\">1</span>!==<span class=\"code-keyword\">this</span>.options_.limitRenditionByPlayerDimensions,<span class=\"code-keyword\">this</span>.options_.smoothQualityChange=<span class=\"code-keyword\">this</span>.options_.smoothQualityChange||!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.options_.useBandwidthFromLocalStorage=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-keyword\">this</span>.source_.useBandwidthFromLocalStorage?<span class=\"code-keyword\">this</span>.source_.useBandwidthFromLocalStorage:<span class=\"code-keyword\">this</span>.options_.useBandwidthFromLocalStorage||!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.options_.customTagParsers=<span class=\"code-keyword\">this</span>.options_.customTagParsers||[],<span class=\"code-keyword\">this</span>.options_.customTagMappers=<span class=\"code-keyword\">this</span>.options_.customTagMappers||[],<span class=\"code-keyword\">this</span>.options_.cacheEncryptionKeys=<span class=\"code-keyword\">this</span>.options_.cacheEncryptionKeys||!<span class=\"code-number\">1</span>,<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-keyword\">this</span>.options_.blacklistDuration&amp;&amp;(<span class=\"code-keyword\">this</span>.options_.blacklistDuration=<span class=\"code-number\">300</span>),<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-keyword\">this</span>.options_.bandwidth&amp;&amp;<span class=\"code-keyword\">this</span>.options_.useBandwidthFromLocalStorage){<span class=\"code-keyword\">var</span> t=$n();t&amp;&amp;t.bandwidth&amp;&amp;(<span class=\"code-keyword\">this</span>.options_.bandwidth=t.bandwidth,<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-bandwidth-from-local-storage\"</span>})),t&amp;&amp;t.throughput&amp;&amp;(<span class=\"code-keyword\">this</span>.options_.throughput=t.throughput,<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-throughput-from-local-storage\"</span>}))}<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-keyword\">this</span>.options_.bandwidth&amp;&amp;(<span class=\"code-keyword\">this</span>.options_.bandwidth=pi.INITIAL_BANDWIDTH),<span class=\"code-keyword\">this</span>.options_.enableLowInitialPlaylist=<span class=\"code-keyword\">this</span>.options_.enableLowInitialPlaylist&amp;&amp;<span class=\"code-keyword\">this</span>.options_.bandwidth===pi.INITIAL_BANDWIDTH,[<span class=\"code-string\">\"withCredentials\"</span>,<span class=\"code-string\">\"limitRenditionByPlayerDimensions\"</span>,<span class=\"code-string\">\"bandwidth\"</span>,<span class=\"code-string\">\"smoothQualityChange\"</span>,<span class=\"code-string\">\"customTagParsers\"</span>,<span class=\"code-string\">\"customTagMappers\"</span>,<span class=\"code-string\">\"handleManifestRedirects\"</span>,<span class=\"code-string\">\"cacheEncryptionKeys\"</span>].forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e.source_[t]&amp;&amp;(e.options_[t]=e.source_[t])}),<span class=\"code-keyword\">this</span>.limitRenditionByPlayerDimensions=<span class=\"code-keyword\">this</span>.options_.limitRenditionByPlayerDimensions}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"src\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>;e&amp;&amp;(<span class=\"code-keyword\">this</span>.setOptions_(),<span class=\"code-keyword\">this</span>.options_.url=<span class=\"code-keyword\">this</span>.source_.src,<span class=\"code-keyword\">this</span>.options_.tech=<span class=\"code-keyword\">this</span>.tech_,<span class=\"code-keyword\">this</span>.options_.externHls=zn,<span class=\"code-keyword\">this</span>.options_.sourceType=Xn(i),<span class=\"code-keyword\">this</span>.options_.seekTo=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{n.tech_.setCurrentTime(e),n.setCurrentTime(e)},<span class=\"code-keyword\">this</span>.masterPlaylistController_=<span class=\"code-keyword\">new</span> Fn(<span class=\"code-keyword\">this</span>.options_),<span class=\"code-keyword\">this</span>.playbackWatcher_=<span class=\"code-keyword\">new</span> jn(t.mergeOptions(<span class=\"code-keyword\">this</span>.options_,{<span class=\"code-attr\">seekable</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.seekable()},<span class=\"code-attr\">media</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.masterPlaylistController_.media()}})),<span class=\"code-keyword\">this</span>.masterPlaylistController_.on(<span class=\"code-string\">\"error\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t.players[n.tech_.options_.playerId].error(n.masterPlaylistController_.error)}),<span class=\"code-keyword\">this</span>.masterPlaylistController_.selectPlaylist=<span class=\"code-keyword\">this</span>.selectPlaylist?<span class=\"code-keyword\">this</span>.selectPlaylist.bind(<span class=\"code-keyword\">this</span>):zn.STANDARD_PLAYLIST_SELECTOR.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.masterPlaylistController_.selectInitialPlaylist=zn.INITIAL_PLAYLIST_SELECTOR.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.playlists=<span class=\"code-keyword\">this</span>.masterPlaylistController_.masterPlaylistLoader_,<span class=\"code-keyword\">this</span>.mediaSource=<span class=\"code-keyword\">this</span>.masterPlaylistController_.mediaSource,<span class=\"code-built_in\">Object</span>.defineProperties(<span class=\"code-keyword\">this</span>,{<span class=\"code-attr\">selectPlaylist</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistController_.selectPlaylist},<span class=\"code-attr\">set</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.masterPlaylistController_.selectPlaylist=e.bind(<span class=\"code-keyword\">this</span>)}},<span class=\"code-attr\">throughput</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput.rate},<span class=\"code-attr\">set</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,<span class=\"code-keyword\">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput.count=<span class=\"code-number\">1</span>}},<span class=\"code-attr\">bandwidth</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistController_.mainSegmentLoader_.bandwidth},<span class=\"code-attr\">set</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,<span class=\"code-keyword\">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput={<span class=\"code-attr\">rate</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">count</span>:<span class=\"code-number\">0</span>}}},<span class=\"code-attr\">systemBandwidth</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-number\">1</span>/(<span class=\"code-keyword\">this</span>.bandwidth||<span class=\"code-number\">1</span>),t=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> t=<span class=\"code-keyword\">this</span>.throughput&gt;<span class=\"code-number\">0</span>?<span class=\"code-number\">1</span>/<span class=\"code-keyword\">this</span>.throughput:<span class=\"code-number\">0</span>,<span class=\"code-built_in\">Math</span>.floor(<span class=\"code-number\">1</span>/(e+t))},<span class=\"code-attr\">set</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t.log.error(<span class=\"code-string\">'The \"systemBandwidth\" property is read-only'</span>)}}}),<span class=\"code-keyword\">this</span>.options_.bandwidth&amp;&amp;(<span class=\"code-keyword\">this</span>.bandwidth=<span class=\"code-keyword\">this</span>.options_.bandwidth),<span class=\"code-keyword\">this</span>.options_.throughput&amp;&amp;(<span class=\"code-keyword\">this</span>.throughput=<span class=\"code-keyword\">this</span>.options_.throughput),<span class=\"code-built_in\">Object</span>.defineProperties(<span class=\"code-keyword\">this</span>.stats,{<span class=\"code-attr\">bandwidth</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.bandwidth||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mediaRequests</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.masterPlaylistController_.mediaRequests_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mediaRequestsAborted</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.masterPlaylistController_.mediaRequestsAborted_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mediaRequestsTimedout</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.masterPlaylistController_.mediaRequestsTimedout_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mediaRequestsErrored</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.masterPlaylistController_.mediaRequestsErrored_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mediaTransferDuration</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.masterPlaylistController_.mediaTransferDuration_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mediaBytesTransferred</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.masterPlaylistController_.mediaBytesTransferred_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mediaSecondsLoaded</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.masterPlaylistController_.mediaSecondsLoaded_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">buffered</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> ke(n.tech_.buffered())},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">currentTime</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.tech_.currentTime()},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">currentSource</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.tech_.currentSource_},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">currentTech</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.tech_.name_},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">duration</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.tech_.duration()},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">master</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.playlists.master},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">playerDimensions</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.tech_.currentDimensions()},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">seekable</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> ke(n.tech_.seekable())},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">timestamp</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Date</span>.now()},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">videoPlaybackQuality</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.tech_.getVideoPlaybackQuality()},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>}}),<span class=\"code-keyword\">this</span>.tech_.one(<span class=\"code-string\">\"canplay\"</span>,<span class=\"code-keyword\">this</span>.masterPlaylistController_.setupFirstPlay.bind(<span class=\"code-keyword\">this</span>.masterPlaylistController_)),<span class=\"code-keyword\">this</span>.tech_.on(<span class=\"code-string\">\"bandwidthupdate\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n.options_.useBandwidthFromLocalStorage&amp;&amp;<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-built_in\">window</span>.localStorage)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> i=$n();i=i?t.mergeOptions(i,e):e;<span class=\"code-keyword\">try</span>{<span class=\"code-built_in\">window</span>.localStorage.setItem(<span class=\"code-string\">\"videojs-vhs\"</span>,<span class=\"code-built_in\">JSON</span>.stringify(i))}<span class=\"code-keyword\">catch</span>(e){<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>}}({<span class=\"code-attr\">bandwidth</span>:n.bandwidth,<span class=\"code-attr\">throughput</span>:<span class=\"code-built_in\">Math</span>.round(n.throughput)})}),<span class=\"code-keyword\">this</span>.masterPlaylistController_.on(<span class=\"code-string\">\"selectedinitialmedia\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,i;i=(e=n).playlists,e.representations=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.master.playlists.filter(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!j(e)}).map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">new</span> Hn(e,t,t.uri)})},<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=e.masterPlaylistController_.mainSegmentLoader_,n=e.masterPlaylistController_.audioSegmentLoader_,r=t.players[e.tech_.options_.playerId];<span class=\"code-keyword\">if</span>(r.eme){<span class=\"code-keyword\">var</span> a=Kn(e.source_.keySystems,i,n);a&amp;&amp;(r.currentSource().keySystems=a,r.eme.initializeMediaKeys&amp;&amp;r.eme.initializeMediaKeys())}}(n)}),<span class=\"code-keyword\">this</span>.on(<span class=\"code-keyword\">this</span>.masterPlaylistController_,<span class=\"code-string\">\"progress\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.tech_.trigger(<span class=\"code-string\">\"progress\"</span>)}),<span class=\"code-keyword\">this</span>.tech_.ready(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.setupQualityLevels_()}),<span class=\"code-keyword\">this</span>.tech_.el()&amp;&amp;<span class=\"code-keyword\">this</span>.tech_.src(t.URL.createObjectURL(<span class=\"code-keyword\">this</span>.masterPlaylistController_.mediaSource)))}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"setupQualityLevels_\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>,i=t.players[<span class=\"code-keyword\">this</span>.tech_.options_.playerId];i&amp;&amp;i.qualityLevels&amp;&amp;(<span class=\"code-keyword\">this</span>.qualityLevels_=i.qualityLevels(),<span class=\"code-keyword\">this</span>.masterPlaylistController_.on(<span class=\"code-string\">\"selectedinitialmedia\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t,i;t=e.qualityLevels_,(i=e).representations().forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{t.addQualityLevel(e)}),Yn(t,i.playlists)}),<span class=\"code-keyword\">this</span>.playlists.on(<span class=\"code-string\">\"mediachange\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{Yn(e.qualityLevels_,e.playlists)}))}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"play\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.masterPlaylistController_.play()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"setCurrentTime\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.masterPlaylistController_.setCurrentTime(e)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"duration\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistController_.duration()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"seekable\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistController_.seekable()}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"dispose\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.playbackWatcher_&amp;&amp;<span class=\"code-keyword\">this</span>.playbackWatcher_.dispose(),<span class=\"code-keyword\">this</span>.masterPlaylistController_&amp;&amp;<span class=\"code-keyword\">this</span>.masterPlaylistController_.dispose(),<span class=\"code-keyword\">this</span>.qualityLevels_&amp;&amp;<span class=\"code-keyword\">this</span>.qualityLevels_.dispose(),<span class=\"code-keyword\">this</span>.player_&amp;&amp;(<span class=\"code-keyword\">delete</span> <span class=\"code-keyword\">this</span>.player_.vhs,<span class=\"code-keyword\">delete</span> <span class=\"code-keyword\">this</span>.player_.dash,<span class=\"code-keyword\">delete</span> <span class=\"code-keyword\">this</span>.player_.hls),<span class=\"code-keyword\">this</span>.tech_&amp;&amp;<span class=\"code-keyword\">this</span>.tech_.hls&amp;&amp;<span class=\"code-keyword\">delete</span> <span class=\"code-keyword\">this</span>.tech_.hls,<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i,n</span>)</span>{<span class=\"code-literal\">null</span>===t&amp;&amp;(t=<span class=\"code-built_in\">Function</span>.prototype);<span class=\"code-keyword\">var</span> r=<span class=\"code-built_in\">Object</span>.getOwnPropertyDescriptor(t,i);<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===r){<span class=\"code-keyword\">var</span> a=<span class=\"code-built_in\">Object</span>.getPrototypeOf(t);<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>===a?<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>:e(a,i,n)}<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"value\"</span><span class=\"code-keyword\">in</span> r)<span class=\"code-keyword\">return</span> r.value;<span class=\"code-keyword\">var</span> s=r.get;<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==s?s.call(n):<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>}(i.prototype.__proto__||<span class=\"code-built_in\">Object</span>.getPrototypeOf(i.prototype),<span class=\"code-string\">\"dispose\"</span>,<span class=\"code-keyword\">this</span>).call(<span class=\"code-keyword\">this</span>)}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"convertToProgramTime\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> ye({<span class=\"code-attr\">playlist</span>:<span class=\"code-keyword\">this</span>.masterPlaylistController_.media(),<span class=\"code-attr\">time</span>:e,<span class=\"code-attr\">callback</span>:t})}},{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"seekToProgramTime\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=!(<span class=\"code-built_in\">arguments</span>.length&gt;<span class=\"code-number\">2</span>&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">2</span>])||<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">2</span>],n=<span class=\"code-built_in\">arguments</span>.length&gt;<span class=\"code-number\">3</span>&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">3</span>]?<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">3</span>]:<span class=\"code-number\">2</span>;<span class=\"code-keyword\">return</span> _e({<span class=\"code-attr\">programTime</span>:e,<span class=\"code-attr\">playlist</span>:<span class=\"code-keyword\">this</span>.masterPlaylistController_.media(),<span class=\"code-attr\">retryCount</span>:n,<span class=\"code-attr\">pauseAfterSeek</span>:i,<span class=\"code-attr\">seekTo</span>:<span class=\"code-keyword\">this</span>.options_.seekTo,<span class=\"code-attr\">tech</span>:<span class=\"code-keyword\">this</span>.options_.tech,<span class=\"code-attr\">callback</span>:t})}}]),i}(),Zn={<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"videojs-http-streaming\"</span>,<span class=\"code-attr\">VERSION</span>:<span class=\"code-string\">\"1.11.1\"</span>,<span class=\"code-attr\">canHandleSource</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-built_in\">arguments</span>.length&gt;<span class=\"code-number\">1</span>&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]?<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]:{},n=t.mergeOptions(t.options,i);<span class=\"code-keyword\">return</span> Zn.canPlayType(e.type,n)},<span class=\"code-attr\">handleSource</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-built_in\">arguments</span>.length&gt;<span class=\"code-number\">2</span>&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">2</span>]?<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">2</span>]:{},r=t.mergeOptions(t.options,n);<span class=\"code-keyword\">return</span> i.hls=<span class=\"code-keyword\">new</span> Jn(e,i,r),i.hls.xhr=$(),i.hls.src(e.src,e.type),i.hls},<span class=\"code-attr\">canPlayType</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-built_in\">arguments</span>.length&gt;<span class=\"code-number\">1</span>&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]?<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]:{},n=t.mergeOptions(t.options,i).hls.overrideNative,r=Xn(e);<span class=\"code-keyword\">return</span> r&amp;&amp;(!zn.supportsTypeNatively(r)||n)?<span class=\"code-string\">\"maybe\"</span>:<span class=\"code-string\">\"\"</span>}};<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==t.MediaSource&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==t.URL||(t.MediaSource=Ze,t.URL=et),Ze.supportsNativeMediaSources()&amp;&amp;t.getTech(<span class=\"code-string\">\"Html5\"</span>).registerSourceHandler(Zn,<span class=\"code-number\">0</span>),t.HlsHandler=Jn,t.HlsSourceHandler=Zn,t.Hls=zn,t.use||t.registerComponent(<span class=\"code-string\">\"Hls\"</span>,zn),t.options.hls=t.options.hls||{},t.registerPlugin?t.registerPlugin(<span class=\"code-string\">\"reloadSourceOnError\"</span>,Wn):t.plugin(<span class=\"code-string\">\"reloadSourceOnError\"</span>,Wn),e.LOCAL_STORAGE_KEY=<span class=\"code-string\">\"videojs-vhs\"</span>,e.Hls=zn,e.HlsHandler=Jn,e.HlsSourceHandler=Zn,e.emeKeySystems=Kn,e.simpleTypeFromSourceType=Xn,<span class=\"code-built_in\">Object</span>.defineProperty(e,<span class=\"code-string\">\"__esModule\"</span>,{<span class=\"code-attr\">value</span>:!<span class=\"code-number\">0</span>})});\n",""]}}}</script></head><body><div id="root"><style data-emotion-css="262b4o">html{box-sizing:border-box;}*,*:before,*:after{box-sizing:inherit;}html,body,#root{height:100%;margin:0;}body{font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;font-size:16px;line-height:1.5;background:white;color:black;}code{font-family:Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace;}th,td{padding:0;}select{font-size:inherit;}#root{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><style data-emotion-css="1r6h1r6">.code-listing{background:#fbfdff;color:#383a42;}.code-comment,.code-quote{color:#a0a1a7;font-style:italic;}.code-doctag,.code-keyword,.code-link,.code-formula{color:#a626a4;}.code-section,.code-name,.code-selector-tag,.code-deletion,.code-subst{color:#e45649;}.code-literal{color:#0184bb;}.code-string,.code-regexp,.code-addition,.code-attribute,.code-meta-string{color:#50a14f;}.code-built_in,.code-class .code-title{color:#c18401;}.code-attr,.code-variable,.code-template-variable,.code-type,.code-selector-class,.code-selector-attr,.code-selector-pseudo,.code-number{color:#986801;}.code-symbol,.code-bullet,.code-meta,.code-selector-id,.code-title{color:#4078f2;}.code-emphasis{font-style:italic;}.code-strong{font-weight:bold;}</style><style data-emotion-css="1c3h18e">.css-1c3h18e{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;}</style><div class="css-1c3h18e"><style data-emotion-css="1cfuj1t">.css-1cfuj1t{max-width:940px;padding:0 20px;margin:0 auto;}</style><div class="css-1cfuj1t"><style data-emotion-css="xi606m">.css-xi606m{text-align:center;}</style><header class="css-xi606m"><style data-emotion-css="17kjije">.css-17kjije{font-size:3rem;margin-top:2rem;}</style><h1 class="css-17kjije"><style data-emotion-css="1ydg16i">.css-1ydg16i{color:#000;-webkit-text-decoration:none;text-decoration:none;}</style><a href="/" class="css-1ydg16i">UNPKG</a></h1></header><style data-emotion-css="93o42g">.css-93o42g{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}@media (max-width:700px){.css-93o42g{-webkit-flex-direction:column-reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}</style><header class="css-93o42g"><style data-emotion-css="k4kplh">.css-k4kplh{font-size:1.5rem;font-weight:normal;-webkit-flex:1;-ms-flex:1;flex:1;}</style><h1 class="css-k4kplh"><nav><span><style data-emotion-css="xt128v">.css-xt128v{color:#0076ff;-webkit-text-decoration:none;text-decoration:none;}.css-xt128v:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="/browse/@videojs/http-streaming@1.11.1/" class="css-xt128v">@videojs/http-streaming</a></span><span><style data-emotion-css="lllnmq">.css-lllnmq{padding-left:5px;padding-right:5px;}</style><span class="css-lllnmq">/</span><a href="/browse/@videojs/http-streaming@1.11.1/dist/" class="css-xt128v">dist</a></span><span><span class="css-lllnmq">/</span><strong>videojs-http-streaming.min.js</strong></span></nav></h1><style data-emotion-css="1nr3dab">.css-1nr3dab{margin-left:20px;}@media (max-width:700px){.css-1nr3dab{margin-left:0;margin-bottom:0;}}</style><p class="css-1nr3dab"><label>Version:<!-- --> <style data-emotion-css="un3bt6">.css-un3bt6{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;padding:4px 24px 4px 8px;font-weight:600;font-size:0.9em;color:#24292e;border:1px solid rgba(27,31,35,.2);border-radius:3px;background-color:#eff3f6;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAAAAXNSR0IArs4c6QAAARFJREFUKBVjZAACNS39RhBNKrh17WI9o4quoT3Dn78HSNUMUs/CzOTI/O7Vi4dCYpJ3/jP+92BkYGAlyiBGhm8MjIxJt65e3MQM0vDu9YvLYmISILYZELOBxHABRkaGr0yMzF23r12YDFIDNgDEePv65SEhEXENBkYGFSAXuyGMjF8Z/jOsvX3tYiFIDwgwQSgIaaijnvj/P8M5IO8HsjiY/f//D4b//88A1SQhywG9jQr09PS4v/1mPAeUUPzP8B8cJowMjL+Bqu6xMQmaXL164AuyDgwDQJLa2qYSP//9vARkCoMVMzK8YeVkNbh+9uxzMB+JwGoASF5Vx0jz/98/18BqmZi171w9D2EjaaYKEwAEK00XQLdJuwAAAABJRU5ErkJggg==);background-position:right 8px center;background-repeat:no-repeat;background-size:auto 25%;}.css-un3bt6:hover{background-color:#e6ebf1;border-color:rgba(27,31,35,.35);}.css-un3bt6:active{background-color:#e9ecef;border-color:rgba(27,31,35,.35);box-shadow:inset 0 0.15em 0.3em rgba(27,31,35,.15);}</style><select name="version" class="css-un3bt6"><option value="0.1.0">0.1.0</option><option value="0.2.0">0.2.0</option><option value="0.2.1">0.2.1</option><option value="0.3.0">0.3.0</option><option value="0.3.1">0.3.1</option><option value="0.4.0">0.4.0</option><option value="0.5.0">0.5.0</option><option value="0.5.1">0.5.1</option><option value="0.5.2">0.5.2</option><option value="0.5.3">0.5.3</option><option value="0.6.1">0.6.1</option><option value="0.7.0">0.7.0</option><option value="0.7.1">0.7.1</option><option value="0.7.2">0.7.2</option><option value="0.8.0">0.8.0</option><option value="0.9.0">0.9.0</option><option value="1.0.0">1.0.0</option><option value="1.0.1">1.0.1</option><option value="1.0.2">1.0.2</option><option value="1.1.0">1.1.0</option><option value="1.2.0">1.2.0</option><option value="1.2.1">1.2.1</option><option value="1.2.2">1.2.2</option><option value="1.2.3">1.2.3</option><option value="1.2.4">1.2.4</option><option value="1.2.5">1.2.5</option><option value="1.2.6">1.2.6</option><option value="1.3.0">1.3.0</option><option value="1.3.1">1.3.1</option><option value="1.4.0">1.4.0</option><option value="1.4.1">1.4.1</option><option value="1.4.2">1.4.2</option><option value="1.5.0">1.5.0</option><option value="1.5.1">1.5.1</option><option value="1.6.0">1.6.0</option><option value="1.7.0">1.7.0</option><option value="1.8.0">1.8.0</option><option value="1.9.0">1.9.0</option><option value="1.9.1">1.9.1</option><option value="1.9.2">1.9.2</option><option value="1.9.3">1.9.3</option><option value="1.10.0">1.10.0</option><option value="1.10.1">1.10.1</option><option value="1.10.2">1.10.2</option><option value="1.10.3-alpha.0">1.10.3-alpha.0</option><option value="1.10.3">1.10.3</option><option value="1.10.4">1.10.4</option><option value="1.10.5-0">1.10.5-0</option><option value="1.10.5-1">1.10.5-1</option><option value="1.10.5">1.10.5</option><option value="1.10.6">1.10.6</option><option value="1.11.0-0">1.11.0-0</option><option value="1.11.0-alpha.0">1.11.0-alpha.0</option><option value="1.11.0-alpha.1">1.11.0-alpha.1</option><option value="1.11.0">1.11.0</option><option selected="" value="1.11.1">1.11.1</option></select></label></p></header></div><style data-emotion-css="107j3ms">.css-107j3ms{max-width:940px;padding:0 20px;margin:0 auto;}@media (max-width:700px){.css-107j3ms{padding:0;margin:0;}}</style><div class="css-107j3ms"><style data-emotion-css="q3frg4">.css-q3frg4{border:1px solid #dfe2e5;border-radius:3px;}@media (max-width:700px){.css-q3frg4{border-right-width:0;border-left-width:0;}}</style><div class="css-q3frg4"><style data-emotion-css="10o5omr">.css-10o5omr{padding:10px;background:#f6f8fa;color:#424242;border:1px solid #d1d5da;border-top-left-radius:3px;border-top-right-radius:3px;margin:-1px -1px 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}@media (max-width:700px){.css-10o5omr{padding-right:20px;padding-left:20px;}}</style><div class="css-10o5omr"><span>253 kB</span> <span>JavaScript</span> <style data-emotion-css="12cxnkg">.css-12cxnkg{display:inline-block;-webkit-text-decoration:none;text-decoration:none;padding:2px 8px;font-weight:600;font-size:0.9rem;color:#24292e;background-color:#eff3f6;border:1px solid rgba(27,31,35,.2);border-radius:3px;}.css-12cxnkg:hover{background-color:#e6ebf1;border-color:rgba(27,31,35,.35);}.css-12cxnkg:active{background-color:#e9ecef;border-color:rgba(27,31,35,.35);box-shadow:inset 0 0.15em 0.3em rgba(27,31,35,.15);}</style><a title="videojs-http-streaming.min.js" href="/@videojs/http-streaming@1.11.1/dist/videojs-http-streaming.min.js" class="css-12cxnkg">View Raw</a></div><style data-emotion-css="1i31ihw">.css-1i31ihw{overflow-x:auto;overflow-y:hidden;padding-top:5px;padding-bottom:5px;}</style><div class="code-listing css-1i31ihw"><style data-emotion-css="173nir8">.css-173nir8{border:none;border-collapse:collapse;border-spacing:0;}</style><table class="css-173nir8"><tbody><tr><style data-emotion-css="a4x74f">.css-a4x74f{padding-left:10px;padding-right:10px;color:rgba(27,31,35,.3);text-align:right;vertical-align:top;width:1%;min-width:50px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}</style><td id="L1" class="css-a4x74f"><span>1</span></td><style data-emotion-css="1dcdqdg">.css-1dcdqdg{padding-left:10px;padding-right:10px;color:#24292e;white-space:pre;}</style><td id="LC1" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2" class="css-a4x74f"><span>2</span></td><td id="LC2" class="css-1dcdqdg"><code><span class="code-comment"> * @videojs/http-streaming
</span></code></td></tr><tr><td id="L3" class="css-a4x74f"><span>3</span></td><td id="LC3" class="css-1dcdqdg"><code><span class="code-comment"> * @version 1.11.1
</span></code></td></tr><tr><td id="L4" class="css-a4x74f"><span>4</span></td><td id="LC4" class="css-1dcdqdg"><code><span class="code-comment"> * @copyright 2019 Brightcove, Inc
</span></code></td></tr><tr><td id="L5" class="css-a4x74f"><span>5</span></td><td id="LC5" class="css-1dcdqdg"><code><span class="code-comment"> * @license Apache-2.0
</span></code></td></tr><tr><td id="L6" class="css-a4x74f"><span>6</span></td><td id="LC6" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L7" class="css-a4x74f"><span>7</span></td><td id="LC7" class="css-1dcdqdg"><code>!<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-string">"object"</span>==<span class="code-keyword">typeof</span> exports&amp;&amp;<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> <span class="code-built_in">module</span>?t(exports,<span class="code-built_in">require</span>(<span class="code-string">"video.js"</span>)):<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> define&amp;&amp;define.amd?define([<span class="code-string">"exports"</span>,<span class="code-string">"video.js"</span>],t):t(e.videojsHttpStreaming={},e.videojs)}(<span class="code-keyword">this</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-string">"use strict"</span>;t=t&amp;&amp;t.hasOwnProperty(<span class="code-string">"default"</span>)?t.default:t;<span class="code-keyword">var</span> i=<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> globalThis?globalThis:<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> <span class="code-built_in">window</span>?<span class="code-built_in">window</span>:<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> global?global:<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> self?self:{};<span class="code-keyword">var</span> n,r=<span class="code-keyword">void</span> <span class="code-number">0</span>!==i?i:<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> <span class="code-built_in">window</span>?<span class="code-built_in">window</span>:{};<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> <span class="code-built_in">document</span>?n=<span class="code-built_in">document</span>:(n=r[<span class="code-string">"__GLOBAL_DOCUMENT_CACHE@4"</span>])||(n=r[<span class="code-string">"__GLOBAL_DOCUMENT_CACHE@4"</span>]={});<span class="code-keyword">var</span> a,s=n,o=(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n,r,a,s;i=<span class="code-regexp">/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/</span>,n=<span class="code-regexp">/^([^\/?#]*)(.*)$/</span>,r=<span class="code-regexp">/(?:\/|^)\.(?=\/)/g</span>,a=<span class="code-regexp">/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g</span>,s={<span class="code-attr">buildAbsoluteURL</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(i=i||{},e=e.trim(),!(t=t.trim())){<span class="code-keyword">if</span>(!i.alwaysNormalize)<span class="code-keyword">return</span> e;<span class="code-keyword">var</span> r=s.parseURL(e);<span class="code-keyword">if</span>(!r)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Error trying to parse base URL."</span>);<span class="code-keyword">return</span> r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}<span class="code-keyword">var</span> a=s.parseURL(t);<span class="code-keyword">if</span>(!a)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Error trying to parse relative URL."</span>);<span class="code-keyword">if</span>(a.scheme)<span class="code-keyword">return</span> i.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;<span class="code-keyword">var</span> o=s.parseURL(e);<span class="code-keyword">if</span>(!o)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Error trying to parse base URL."</span>);<span class="code-keyword">if</span>(!o.netLoc&amp;&amp;o.path&amp;&amp;<span class="code-string">"/"</span>!==o.path[<span class="code-number">0</span>]){<span class="code-keyword">var</span> u=n.exec(o.path);o.netLoc=u[<span class="code-number">1</span>],o.path=u[<span class="code-number">2</span>]}o.netLoc&amp;&amp;!o.path&amp;&amp;(o.path=<span class="code-string">"/"</span>);<span class="code-keyword">var</span> d={<span class="code-attr">scheme</span>:o.scheme,<span class="code-attr">netLoc</span>:a.netLoc,<span class="code-attr">path</span>:<span class="code-literal">null</span>,<span class="code-attr">params</span>:a.params,<span class="code-attr">query</span>:a.query,<span class="code-attr">fragment</span>:a.fragment};<span class="code-keyword">if</span>(!a.netLoc&amp;&amp;(d.netLoc=o.netLoc,<span class="code-string">"/"</span>!==a.path[<span class="code-number">0</span>]))<span class="code-keyword">if</span>(a.path){<span class="code-keyword">var</span> l=o.path,h=l.substring(<span class="code-number">0</span>,l.lastIndexOf(<span class="code-string">"/"</span>)+<span class="code-number">1</span>)+a.path;d.path=s.normalizePath(h)}<span class="code-keyword">else</span> d.path=o.path,a.params||(d.params=o.params,a.query||(d.query=o.query));<span class="code-keyword">return</span> <span class="code-literal">null</span>===d.path&amp;&amp;(d.path=i.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(d)},<span class="code-attr">parseURL</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=i.exec(e);<span class="code-keyword">return</span> t?{<span class="code-attr">scheme</span>:t[<span class="code-number">1</span>]||<span class="code-string">""</span>,<span class="code-attr">netLoc</span>:t[<span class="code-number">2</span>]||<span class="code-string">""</span>,<span class="code-attr">path</span>:t[<span class="code-number">3</span>]||<span class="code-string">""</span>,<span class="code-attr">params</span>:t[<span class="code-number">4</span>]||<span class="code-string">""</span>,<span class="code-attr">query</span>:t[<span class="code-number">5</span>]||<span class="code-string">""</span>,<span class="code-attr">fragment</span>:t[<span class="code-number">6</span>]||<span class="code-string">""</span>}:<span class="code-literal">null</span>},<span class="code-attr">normalizePath</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(e=e.split(<span class="code-string">""</span>).reverse().join(<span class="code-string">""</span>).replace(r,<span class="code-string">""</span>);e.length!==(e=e.replace(a,<span class="code-string">""</span>)).length;);<span class="code-keyword">return</span> e.split(<span class="code-string">""</span>).reverse().join(<span class="code-string">""</span>)},<span class="code-attr">buildURLFromParts</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s}(a={<span class="code-attr">exports</span>:{}},a.exports),a.exports),u=<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> <span class="code-built_in">window</span>?<span class="code-built_in">window</span>:<span class="code-keyword">void</span> <span class="code-number">0</span>!==i?i:<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> self?self:{},d=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span><span class="code-regexp">/^[a-z]+:/i</span>.test(t)?t:(<span class="code-regexp">/\/\//i</span>.test(e)||(e=o.buildAbsoluteURL(u.location.href,e)),o.buildAbsoluteURL(e,t))},l=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> e&amp;&amp;i.responseURL&amp;&amp;t!==i.responseURL?i.responseURL:t};
</code></td></tr><tr><td id="L8" class="css-a4x74f"><span>8</span></td><td id="LC8" class="css-1dcdqdg"><code><span class="code-comment">/*! @name m3u8-parser @version 4.4.0 @license Apache-2.0 */</span>
</code></td></tr><tr><td id="L9" class="css-a4x74f"><span>9</span></td><td id="LC9" class="css-1dcdqdg"><code><span class="code-function"><span class="code-keyword">function</span> <span class="code-title">h</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span>(h=<span class="code-built_in">Object</span>.assign||<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">1</span>;t&lt;<span class="code-built_in">arguments</span>.length;t++){<span class="code-keyword">var</span> i=<span class="code-built_in">arguments</span>[t];<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> i)<span class="code-built_in">Object</span>.prototype.hasOwnProperty.call(i,n)&amp;&amp;(e[n]=i[n])}<span class="code-keyword">return</span> e}).apply(<span class="code-keyword">this</span>,<span class="code-built_in">arguments</span>)}<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">c</span>(<span class="code-params">e,t</span>)</span>{e.prototype=<span class="code-built_in">Object</span>.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}<span class="code-keyword">var</span> f=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.listeners={}}<span class="code-keyword">var</span> t=e.prototype;<span class="code-keyword">return</span> t.on=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.listeners[e]||(<span class="code-keyword">this</span>.listeners[e]=[]),<span class="code-keyword">this</span>.listeners[e].push(t)},t.off=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.listeners[e])<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.listeners[e].indexOf(t);<span class="code-keyword">return</span> <span class="code-keyword">this</span>.listeners[e].splice(i,<span class="code-number">1</span>),i&gt;<span class="code-number">-1</span>},t.trigger=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n,r=<span class="code-keyword">this</span>.listeners[e];<span class="code-keyword">if</span>(r)<span class="code-keyword">if</span>(<span class="code-number">2</span>===<span class="code-built_in">arguments</span>.length)<span class="code-keyword">for</span>(i=r.length,t=<span class="code-number">0</span>;t&lt;i;++t)r[t].call(<span class="code-keyword">this</span>,<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]);<span class="code-keyword">else</span> <span class="code-keyword">for</span>(n=<span class="code-built_in">Array</span>.prototype.slice.call(<span class="code-built_in">arguments</span>,<span class="code-number">1</span>),i=r.length,t=<span class="code-number">0</span>;t&lt;i;++t)r[t].apply(<span class="code-keyword">this</span>,n)},t.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.listeners={}},t.pipe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.on(<span class="code-string">"data"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.push(t)})},e}(),p=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">return</span>(t=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>).buffer=<span class="code-string">""</span>,t}<span class="code-keyword">return</span> c(t,e),t.prototype.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">for</span>(<span class="code-keyword">this</span>.buffer+=e,t=<span class="code-keyword">this</span>.buffer.indexOf(<span class="code-string">"\n"</span>);t&gt;<span class="code-number">-1</span>;t=<span class="code-keyword">this</span>.buffer.indexOf(<span class="code-string">"\n"</span>))<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,<span class="code-keyword">this</span>.buffer.substring(<span class="code-number">0</span>,t)),<span class="code-keyword">this</span>.buffer=<span class="code-keyword">this</span>.buffer.substring(t+<span class="code-number">1</span>)},t}(f),m=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t,i=e.split(<span class="code-keyword">new</span> <span class="code-built_in">RegExp</span>(<span class="code-string">'(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'</span>)),n={},r=i.length;r--;)<span class="code-string">""</span>!==i[r]&amp;&amp;((t=<span class="code-regexp">/([^=]*)=(.*)/</span>.exec(i[r]).slice(<span class="code-number">1</span>))[<span class="code-number">0</span>]=t[<span class="code-number">0</span>].replace(<span class="code-regexp">/^\s+|\s+$/g</span>,<span class="code-string">""</span>),t[<span class="code-number">1</span>]=t[<span class="code-number">1</span>].replace(<span class="code-regexp">/^\s+|\s+$/g</span>,<span class="code-string">""</span>),t[<span class="code-number">1</span>]=t[<span class="code-number">1</span>].replace(<span class="code-regexp">/^['"](.*)['"]$/g</span>,<span class="code-string">"$1"</span>),n[t[<span class="code-number">0</span>]]=t[<span class="code-number">1</span>]);<span class="code-keyword">return</span> n},g=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">return</span>(t=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>).customParsers=[],t.tagMappers=[],t}c(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=<span class="code-keyword">this</span>;<span class="code-number">0</span>!==(e=e.trim()).length&amp;&amp;(<span class="code-string">"#"</span>===e[<span class="code-number">0</span>]?<span class="code-keyword">this</span>.tagMappers.reduce(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n=i(e);<span class="code-keyword">return</span> n===e?t:t.concat([n])},[e]).forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;n.customParsers.length;r++)<span class="code-keyword">if</span>(n.customParsers[r].call(n,e))<span class="code-keyword">return</span>;<span class="code-keyword">if</span>(<span class="code-number">0</span>===e.indexOf(<span class="code-string">"#EXT"</span>))<span class="code-keyword">if</span>(e=e.replace(<span class="code-string">"\r"</span>,<span class="code-string">""</span>),t=<span class="code-regexp">/^#EXTM3U/</span>.exec(e))n.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"m3u"</span>});<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXTINF:?([0-9\.]*)?,?(.*)?$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"inf"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.duration=<span class="code-built_in">parseFloat</span>(t[<span class="code-number">1</span>])),t[<span class="code-number">2</span>]&amp;&amp;(i.title=t[<span class="code-number">2</span>]),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-TARGETDURATION:?([0-9.]*)?/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"targetduration"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.duration=<span class="code-built_in">parseInt</span>(t[<span class="code-number">1</span>],<span class="code-number">10</span>)),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"totalduration"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.duration=<span class="code-built_in">parseInt</span>(t[<span class="code-number">1</span>],<span class="code-number">10</span>)),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-VERSION:?([0-9.]*)?/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"version"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.version=<span class="code-built_in">parseInt</span>(t[<span class="code-number">1</span>],<span class="code-number">10</span>)),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"media-sequence"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.number=<span class="code-built_in">parseInt</span>(t[<span class="code-number">1</span>],<span class="code-number">10</span>)),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"discontinuity-sequence"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.number=<span class="code-built_in">parseInt</span>(t[<span class="code-number">1</span>],<span class="code-number">10</span>)),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"playlist-type"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.playlistType=t[<span class="code-number">1</span>]),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"byterange"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.length=<span class="code-built_in">parseInt</span>(t[<span class="code-number">1</span>],<span class="code-number">10</span>)),t[<span class="code-number">2</span>]&amp;&amp;(i.offset=<span class="code-built_in">parseInt</span>(t[<span class="code-number">2</span>],<span class="code-number">10</span>)),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"allow-cache"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.allowed=!<span class="code-regexp">/NO/</span>.test(t[<span class="code-number">1</span>])),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-MAP:?(.*)$/</span>.exec(e)){<span class="code-keyword">if</span>(i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"map"</span>},t[<span class="code-number">1</span>]){<span class="code-keyword">var</span> a=m(t[<span class="code-number">1</span>]);<span class="code-keyword">if</span>(a.URI&amp;&amp;(i.uri=a.URI),a.BYTERANGE){<span class="code-keyword">var</span> s=a.BYTERANGE.split(<span class="code-string">"@"</span>),o=s[<span class="code-number">0</span>],u=s[<span class="code-number">1</span>];i.byterange={},o&amp;&amp;(i.byterange.length=<span class="code-built_in">parseInt</span>(o,<span class="code-number">10</span>)),u&amp;&amp;(i.byterange.offset=<span class="code-built_in">parseInt</span>(u,<span class="code-number">10</span>))}}n.trigger(<span class="code-string">"data"</span>,i)}<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-STREAM-INF:?(.*)$/</span>.exec(e)){<span class="code-keyword">if</span>(i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"stream-inf"</span>},t[<span class="code-number">1</span>]){<span class="code-keyword">if</span>(i.attributes=m(t[<span class="code-number">1</span>]),i.attributes.RESOLUTION){<span class="code-keyword">var</span> d=i.attributes.RESOLUTION.split(<span class="code-string">"x"</span>),l={};d[<span class="code-number">0</span>]&amp;&amp;(l.width=<span class="code-built_in">parseInt</span>(d[<span class="code-number">0</span>],<span class="code-number">10</span>)),d[<span class="code-number">1</span>]&amp;&amp;(l.height=<span class="code-built_in">parseInt</span>(d[<span class="code-number">1</span>],<span class="code-number">10</span>)),i.attributes.RESOLUTION=l}i.attributes.BANDWIDTH&amp;&amp;(i.attributes.BANDWIDTH=<span class="code-built_in">parseInt</span>(i.attributes.BANDWIDTH,<span class="code-number">10</span>)),i.attributes[<span class="code-string">"PROGRAM-ID"</span>]&amp;&amp;(i.attributes[<span class="code-string">"PROGRAM-ID"</span>]=<span class="code-built_in">parseInt</span>(i.attributes[<span class="code-string">"PROGRAM-ID"</span>],<span class="code-number">10</span>))}n.trigger(<span class="code-string">"data"</span>,i)}<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-MEDIA:?(.*)$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"media"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.attributes=m(t[<span class="code-number">1</span>])),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-ENDLIST/</span>.exec(e))n.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"endlist"</span>});<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-DISCONTINUITY/</span>.exec(e))n.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"discontinuity"</span>});<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"program-date-time"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.dateTimeString=t[<span class="code-number">1</span>],i.dateTimeObject=<span class="code-keyword">new</span> <span class="code-built_in">Date</span>(t[<span class="code-number">1</span>])),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-KEY:?(.*)$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"key"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.attributes=m(t[<span class="code-number">1</span>]),i.attributes.IV&amp;&amp;(<span class="code-string">"0x"</span>===i.attributes.IV.substring(<span class="code-number">0</span>,<span class="code-number">2</span>).toLowerCase()&amp;&amp;(i.attributes.IV=i.attributes.IV.substring(<span class="code-number">2</span>)),i.attributes.IV=i.attributes.IV.match(<span class="code-regexp">/.{8}/g</span>),i.attributes.IV[<span class="code-number">0</span>]=<span class="code-built_in">parseInt</span>(i.attributes.IV[<span class="code-number">0</span>],<span class="code-number">16</span>),i.attributes.IV[<span class="code-number">1</span>]=<span class="code-built_in">parseInt</span>(i.attributes.IV[<span class="code-number">1</span>],<span class="code-number">16</span>),i.attributes.IV[<span class="code-number">2</span>]=<span class="code-built_in">parseInt</span>(i.attributes.IV[<span class="code-number">2</span>],<span class="code-number">16</span>),i.attributes.IV[<span class="code-number">3</span>]=<span class="code-built_in">parseInt</span>(i.attributes.IV[<span class="code-number">3</span>],<span class="code-number">16</span>),i.attributes.IV=<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>(i.attributes.IV))),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-START:?(.*)$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"start"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.attributes=m(t[<span class="code-number">1</span>]),i.attributes[<span class="code-string">"TIME-OFFSET"</span>]=<span class="code-built_in">parseFloat</span>(i.attributes[<span class="code-string">"TIME-OFFSET"</span>]),i.attributes.PRECISE=<span class="code-regexp">/YES/</span>.test(i.attributes.PRECISE)),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-CUE-OUT-CONT:?(.*)?$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"cue-out-cont"</span>},t[<span class="code-number">1</span>]?i.data=t[<span class="code-number">1</span>]:i.data=<span class="code-string">""</span>,<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-CUE-OUT:?(.*)?$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"cue-out"</span>},t[<span class="code-number">1</span>]?i.data=t[<span class="code-number">1</span>]:i.data=<span class="code-string">""</span>,<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-CUE-IN:?(.*)?$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"cue-in"</span>},t[<span class="code-number">1</span>]?i.data=t[<span class="code-number">1</span>]:i.data=<span class="code-string">""</span>,<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);n.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">data</span>:e.slice(<span class="code-number">4</span>)})}}}<span class="code-keyword">else</span> n.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"comment"</span>,<span class="code-attr">text</span>:e.slice(<span class="code-number">1</span>)})}):<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"uri"</span>,<span class="code-attr">uri</span>:e}))},i.addParser=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>,i=e.expression,n=e.customType,r=e.dataParser,a=e.segment;<span class="code-string">"function"</span>!=<span class="code-keyword">typeof</span> r&amp;&amp;(r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e}),<span class="code-keyword">this</span>.customParsers.push(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(i.exec(e))<span class="code-keyword">return</span> t.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"custom"</span>,<span class="code-attr">data</span>:r(e),<span class="code-attr">customType</span>:n,<span class="code-attr">segment</span>:a}),!<span class="code-number">0</span>})},i.addTagMapper=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.expression,i=e.map;<span class="code-keyword">this</span>.tagMappers.push(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t.test(e)?i(e):e})},t}(f);<span class="code-keyword">var</span> y=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t;(t=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>).lineStream=<span class="code-keyword">new</span> p,t.parseStream=<span class="code-keyword">new</span> g,t.lineStream.pipe(t.parseStream);<span class="code-keyword">var</span> i,n,r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===e)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">ReferenceError</span>(<span class="code-string">"this hasn't been initialised - super() hasn't been called"</span>);<span class="code-keyword">return</span> e}(t),a=[],s={},o={<span class="code-attr">AUDIO</span>:{},<span class="code-attr">VIDEO</span>:{},<span class="code-string">"CLOSED-CAPTIONS"</span>:{},<span class="code-attr">SUBTITLES</span>:{}},d=<span class="code-number">0</span>;<span class="code-keyword">return</span> t.manifest={<span class="code-attr">allowCache</span>:!<span class="code-number">0</span>,<span class="code-attr">discontinuityStarts</span>:[],<span class="code-attr">segments</span>:[]},t.parseStream.on(<span class="code-string">"data"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,l;({<span class="code-attr">tag</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{(({<span class="code-string">"allow-cache"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.manifest.allowCache=e.allowed,<span class="code-string">"allowed"</span><span class="code-keyword">in</span> e||(<span class="code-keyword">this</span>.trigger(<span class="code-string">"info"</span>,{<span class="code-attr">message</span>:<span class="code-string">"defaulting allowCache to YES"</span>}),<span class="code-keyword">this</span>.manifest.allowCache=!<span class="code-number">0</span>)},<span class="code-attr">byterange</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t={};<span class="code-string">"length"</span><span class="code-keyword">in</span> e&amp;&amp;(s.byterange=t,t.length=e.length,<span class="code-string">"offset"</span><span class="code-keyword">in</span> e||(<span class="code-keyword">this</span>.trigger(<span class="code-string">"info"</span>,{<span class="code-attr">message</span>:<span class="code-string">"defaulting offset to zero"</span>}),e.offset=<span class="code-number">0</span>)),<span class="code-string">"offset"</span><span class="code-keyword">in</span> e&amp;&amp;(s.byterange=t,t.offset=e.offset)},<span class="code-attr">endlist</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.manifest.endList=!<span class="code-number">0</span>},<span class="code-attr">inf</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-string">"mediaSequence"</span><span class="code-keyword">in</span> <span class="code-keyword">this</span>.manifest||(<span class="code-keyword">this</span>.manifest.mediaSequence=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"info"</span>,{<span class="code-attr">message</span>:<span class="code-string">"defaulting media sequence to zero"</span>})),<span class="code-string">"discontinuitySequence"</span><span class="code-keyword">in</span> <span class="code-keyword">this</span>.manifest||(<span class="code-keyword">this</span>.manifest.discontinuitySequence=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"info"</span>,{<span class="code-attr">message</span>:<span class="code-string">"defaulting discontinuity sequence to zero"</span>})),e.duration&gt;<span class="code-number">0</span>&amp;&amp;(s.duration=e.duration),<span class="code-number">0</span>===e.duration&amp;&amp;(s.duration=<span class="code-number">.01</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"info"</span>,{<span class="code-attr">message</span>:<span class="code-string">"updating zero segment duration to a small value"</span>})),<span class="code-keyword">this</span>.manifest.segments=a},<span class="code-attr">key</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(e.attributes)<span class="code-keyword">if</span>(<span class="code-string">"NONE"</span>!==e.attributes.METHOD)<span class="code-keyword">if</span>(e.attributes.URI){<span class="code-keyword">if</span>(<span class="code-string">"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"</span>===e.attributes.KEYFORMAT){<span class="code-keyword">return</span><span class="code-number">-1</span>===[<span class="code-string">"SAMPLE-AES"</span>,<span class="code-string">"SAMPLE-AES-CTR"</span>,<span class="code-string">"SAMPLE-AES-CENC"</span>].indexOf(e.attributes.METHOD)?<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"invalid key method provided for Widevine"</span>}):(<span class="code-string">"SAMPLE-AES-CENC"</span>===e.attributes.METHOD&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"</span>}),<span class="code-string">"data:text/plain;base64,"</span>!==e.attributes.URI.substring(<span class="code-number">0</span>,<span class="code-number">23</span>)?<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"invalid key URI provided for Widevine"</span>}):e.attributes.KEYID&amp;&amp;<span class="code-string">"0x"</span>===e.attributes.KEYID.substring(<span class="code-number">0</span>,<span class="code-number">2</span>)?<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.manifest.contentProtection={<span class="code-string">"com.widevine.alpha"</span>:{<span class="code-attr">attributes</span>:{<span class="code-attr">schemeIdUri</span>:e.attributes.KEYFORMAT,<span class="code-attr">keyId</span>:e.attributes.KEYID.substring(<span class="code-number">2</span>)},<span class="code-attr">pssh</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=u.atob(e||<span class="code-string">""</span>),i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(t.length),n=<span class="code-number">0</span>;n&lt;t.length;n++)i[n]=t.charCodeAt(n);<span class="code-keyword">return</span> i}(e.attributes.URI.split(<span class="code-string">","</span>)[<span class="code-number">1</span>])}}):<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"invalid key ID provided for Widevine"</span>}))}e.attributes.METHOD||<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"defaulting key method to AES-128"</span>}),n={<span class="code-attr">method</span>:e.attributes.METHOD||<span class="code-string">"AES-128"</span>,<span class="code-attr">uri</span>:e.attributes.URI},<span class="code-keyword">void</span> <span class="code-number">0</span>!==e.attributes.IV&amp;&amp;(n.iv=e.attributes.IV)}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring key declaration without URI"</span>});<span class="code-keyword">else</span> n=<span class="code-literal">null</span>;<span class="code-keyword">else</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring key declaration without attribute list"</span>})},<span class="code-string">"media-sequence"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-built_in">isFinite</span>(e.number)?<span class="code-keyword">this</span>.manifest.mediaSequence=e.number:<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring invalid media sequence: "</span>+e.number})},<span class="code-string">"discontinuity-sequence"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-built_in">isFinite</span>(e.number)?(<span class="code-keyword">this</span>.manifest.discontinuitySequence=e.number,d=e.number):<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring invalid discontinuity sequence: "</span>+e.number})},<span class="code-string">"playlist-type"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{/VOD|EVENT/.test(e.playlistType)?<span class="code-keyword">this</span>.manifest.playlistType=e.playlistType:<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring unknown playlist type: "</span>+e.playlist})},<span class="code-attr">map</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i={},e.uri&amp;&amp;(i.uri=e.uri),e.byterange&amp;&amp;(i.byterange=e.byterange)},<span class="code-string">"stream-inf"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.manifest.playlists=a,<span class="code-keyword">this</span>.manifest.mediaGroups=<span class="code-keyword">this</span>.manifest.mediaGroups||o,e.attributes?(s.attributes||(s.attributes={}),h(s.attributes,e.attributes)):<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring empty stream-inf attributes"</span>})},<span class="code-attr">media</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.manifest.mediaGroups=<span class="code-keyword">this</span>.manifest.mediaGroups||o,e.attributes&amp;&amp;e.attributes.TYPE&amp;&amp;e.attributes[<span class="code-string">"GROUP-ID"</span>]&amp;&amp;e.attributes.NAME){<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.manifest.mediaGroups[e.attributes.TYPE];i[e.attributes[<span class="code-string">"GROUP-ID"</span>]]=i[e.attributes[<span class="code-string">"GROUP-ID"</span>]]||{},t=i[e.attributes[<span class="code-string">"GROUP-ID"</span>]],(l={<span class="code-attr">default</span>:<span class="code-regexp">/yes/i</span>.test(e.attributes.DEFAULT)}).default?l.autoselect=!<span class="code-number">0</span>:l.autoselect=<span class="code-regexp">/yes/i</span>.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&amp;&amp;(l.language=e.attributes.LANGUAGE),e.attributes.URI&amp;&amp;(l.uri=e.attributes.URI),e.attributes[<span class="code-string">"INSTREAM-ID"</span>]&amp;&amp;(l.instreamId=e.attributes[<span class="code-string">"INSTREAM-ID"</span>]),e.attributes.CHARACTERISTICS&amp;&amp;(l.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&amp;&amp;(l.forced=<span class="code-regexp">/yes/i</span>.test(e.attributes.FORCED)),t[e.attributes.NAME]=l}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring incomplete or missing media group"</span>})},<span class="code-attr">discontinuity</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{d+=<span class="code-number">1</span>,s.discontinuity=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.manifest.discontinuityStarts.push(a.length)},<span class="code-string">"program-date-time"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===<span class="code-keyword">this</span>.manifest.dateTimeString&amp;&amp;(<span class="code-keyword">this</span>.manifest.dateTimeString=e.dateTimeString,<span class="code-keyword">this</span>.manifest.dateTimeObject=e.dateTimeObject),s.dateTimeString=e.dateTimeString,s.dateTimeObject=e.dateTimeObject},<span class="code-attr">targetduration</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{!<span class="code-built_in">isFinite</span>(e.duration)||e.duration&lt;<span class="code-number">0</span>?<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring invalid target duration: "</span>+e.duration}):<span class="code-keyword">this</span>.manifest.targetDuration=e.duration},<span class="code-attr">totalduration</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{!<span class="code-built_in">isFinite</span>(e.duration)||e.duration&lt;<span class="code-number">0</span>?<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring invalid total duration: "</span>+e.duration}):<span class="code-keyword">this</span>.manifest.totalDuration=e.duration},<span class="code-attr">start</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.attributes&amp;&amp;!<span class="code-built_in">isNaN</span>(e.attributes[<span class="code-string">"TIME-OFFSET"</span>])?<span class="code-keyword">this</span>.manifest.start={<span class="code-attr">timeOffset</span>:e.attributes[<span class="code-string">"TIME-OFFSET"</span>],<span class="code-attr">precise</span>:e.attributes.PRECISE}:<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring start declaration without appropriate attribute list"</span>})},<span class="code-string">"cue-out"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{s.cueOut=e.data},<span class="code-string">"cue-out-cont"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{s.cueOutCont=e.data},<span class="code-string">"cue-in"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{s.cueIn=e.data}})[e.tagType]||<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{}).call(r)},<span class="code-attr">uri</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{s.uri=e.uri,a.push(s),!<span class="code-keyword">this</span>.manifest.targetDuration||<span class="code-string">"duration"</span><span class="code-keyword">in</span> s||(<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"defaulting segment duration to the target duration"</span>}),s.duration=<span class="code-keyword">this</span>.manifest.targetDuration),n&amp;&amp;(s.key=n),s.timeline=d,i&amp;&amp;(s.map=i),s={}},<span class="code-attr">comment</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{},<span class="code-attr">custom</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.segment?(s.custom=s.custom||{},s.custom[e.customType]=e.data):(<span class="code-keyword">this</span>.manifest.custom=<span class="code-keyword">this</span>.manifest.custom||{},<span class="code-keyword">this</span>.manifest.custom[e.customType]=e.data)}})[e.type].call(r)}),t}c(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.lineStream.push(e)},i.end=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.lineStream.push(<span class="code-string">"\n"</span>)},i.addParser=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.parseStream.addParser(e)},i.addTagMapper=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.parseStream.addTagMapper(e)},t}(f),_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!(e <span class="code-keyword">instanceof</span> t))<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">TypeError</span>(<span class="code-string">"Cannot call a class as a function"</span>)},v=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;t.length;i++){<span class="code-keyword">var</span> n=t[i];n.enumerable=n.enumerable||!<span class="code-number">1</span>,n.configurable=!<span class="code-number">0</span>,<span class="code-string">"value"</span><span class="code-keyword">in</span> n&amp;&amp;(n.writable=!<span class="code-number">0</span>),<span class="code-built_in">Object</span>.defineProperty(e,n.key,n)}}<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i,n</span>)</span>{<span class="code-keyword">return</span> i&amp;&amp;e(t.prototype,i),n&amp;&amp;e(t,n),t}}(),b=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"function"</span>!=<span class="code-keyword">typeof</span> t&amp;&amp;<span class="code-literal">null</span>!==t)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">TypeError</span>(<span class="code-string">"Super expression must either be null or a function, not "</span>+<span class="code-keyword">typeof</span> t);e.prototype=<span class="code-built_in">Object</span>.create(t&amp;&amp;t.prototype,{<span class="code-attr">constructor</span>:{<span class="code-attr">value</span>:e,<span class="code-attr">enumerable</span>:!<span class="code-number">1</span>,<span class="code-attr">writable</span>:!<span class="code-number">0</span>,<span class="code-attr">configurable</span>:!<span class="code-number">0</span>}}),t&amp;&amp;(<span class="code-built_in">Object</span>.setPrototypeOf?<span class="code-built_in">Object</span>.setPrototypeOf(e,t):e.__proto__=t)},T=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!e)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">ReferenceError</span>(<span class="code-string">"this hasn't been initialised - super() hasn't been called"</span>);<span class="code-keyword">return</span>!t||<span class="code-string">"object"</span>!=<span class="code-keyword">typeof</span> t&amp;&amp;<span class="code-string">"function"</span>!=<span class="code-keyword">typeof</span> t?e:t},S=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-built_in">Array</span>.isArray(e))<span class="code-keyword">return</span> e;<span class="code-keyword">if</span>(<span class="code-built_in">Symbol</span>.iterator <span class="code-keyword">in</span> <span class="code-built_in">Object</span>(e))<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=[],n=!<span class="code-number">0</span>,r=!<span class="code-number">1</span>,a=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">try</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> s,o=e[<span class="code-built_in">Symbol</span>.iterator]();!(n=(s=o.next()).done)&amp;&amp;(i.push(s.value),!t||i.length!==t);n=!<span class="code-number">0</span>);}<span class="code-keyword">catch</span>(e){r=!<span class="code-number">0</span>,a=e}<span class="code-keyword">finally</span>{<span class="code-keyword">try</span>{!n&amp;&amp;o.return&amp;&amp;o.return()}<span class="code-keyword">finally</span>{<span class="code-keyword">if</span>(r)<span class="code-keyword">throw</span> a}}<span class="code-keyword">return</span> i}(e,t);<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">TypeError</span>(<span class="code-string">"Invalid attempt to destructure non-iterable instance"</span>)}}(),k=t.mergeOptions,w=t.EventTarget,L=t.log,E=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{[<span class="code-string">"AUDIO"</span>,<span class="code-string">"SUBTITLES"</span>].forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> e.mediaGroups[i])<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r <span class="code-keyword">in</span> e.mediaGroups[i][n]){<span class="code-keyword">var</span> a=e.mediaGroups[i][n][r];t(a,i,n,r)}})},U=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=k(e,{}),n=i.playlists[t.uri];<span class="code-keyword">if</span>(!n)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(n.segments&amp;&amp;t.segments&amp;&amp;n.segments.length===t.segments.length&amp;&amp;n.endList===t.endList&amp;&amp;n.mediaSequence===t.mediaSequence)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> r=k(n,t);n.segments&amp;&amp;(r.segments=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=t.slice();i=i||<span class="code-number">0</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-built_in">Math</span>.min(e.length,t.length+i),a=i;a&lt;r;a++)n[a-i]=k(e[a],n[a-i]);<span class="code-keyword">return</span> n}(n.segments,t.segments,t.mediaSequence-n.mediaSequence)),r.segments.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{!<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{e.resolvedUri||(e.resolvedUri=d(t,e.uri)),e.key&amp;&amp;!e.key.resolvedUri&amp;&amp;(e.key.resolvedUri=d(t,e.key.uri)),e.map&amp;&amp;!e.map.resolvedUri&amp;&amp;(e.map.resolvedUri=d(t,e.map.uri))}(e,r.resolvedUri)});<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a=<span class="code-number">0</span>;a&lt;i.playlists.length;a++)i.playlists[a].uri===t.uri&amp;&amp;(i.playlists[a]=r);<span class="code-keyword">return</span> i.playlists[t.uri]=r,i},I=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=e.playlists.length;t--;){<span class="code-keyword">var</span> i=e.playlists[t];e.playlists[i.uri]=i,i.resolvedUri=d(e.uri,i.uri),i.id=t,i.attributes||(i.attributes={},L.warn(<span class="code-string">"Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."</span>))}},A=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{E(e,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{t.uri&amp;&amp;(t.resolvedUri=d(e.uri,t.uri))})},O=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e.segments[e.segments.length<span class="code-number">-1</span>];<span class="code-keyword">return</span> t&amp;&amp;i&amp;&amp;i.duration?<span class="code-number">1e3</span>*i.duration:<span class="code-number">500</span>*(e.targetDuration||<span class="code-number">10</span>)},C=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-built_in">arguments</span>.length&gt;<span class="code-number">2</span>&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-built_in">arguments</span>[<span class="code-number">2</span>]?<span class="code-built_in">arguments</span>[<span class="code-number">2</span>]:{};_(<span class="code-keyword">this</span>,t);<span class="code-keyword">var</span> r=T(<span class="code-keyword">this</span>,(t.__proto__||<span class="code-built_in">Object</span>.getPrototypeOf(t)).call(<span class="code-keyword">this</span>)),a=n.withCredentials,s=<span class="code-keyword">void</span> <span class="code-number">0</span>!==a&amp;&amp;a,o=n.handleManifestRedirects,u=<span class="code-keyword">void</span> <span class="code-number">0</span>!==o&amp;&amp;o;r.srcUrl=e,r.hls_=i,r.withCredentials=s,r.handleManifestRedirects=u;<span class="code-keyword">var</span> l=i.options_;<span class="code-keyword">if</span>(r.customTagParsers=l&amp;&amp;l.customTagParsers||[],r.customTagMappers=l&amp;&amp;l.customTagMappers||[],!r.srcUrl)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"A non-empty playlist URL is required"</span>);<span class="code-keyword">return</span> r.state=<span class="code-string">"HAVE_NOTHING"</span>,r.on(<span class="code-string">"mediaupdatetimeout"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-string">"HAVE_METADATA"</span>===r.state&amp;&amp;(r.state=<span class="code-string">"HAVE_CURRENT_METADATA"</span>,r.request=r.hls_.xhr({<span class="code-attr">uri</span>:d(r.master.uri,r.media().uri),<span class="code-attr">withCredentials</span>:r.withCredentials},<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(r.request)<span class="code-keyword">return</span> e?r.playlistRequestError(r.request,r.media().uri,<span class="code-string">"HAVE_METADATA"</span>):<span class="code-keyword">void</span> r.haveMetadata(r.request,r.media().uri)}))}),r}<span class="code-keyword">return</span> b(t,w),v(t,[{<span class="code-attr">key</span>:<span class="code-string">"playlistRequestError"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">this</span>.request=<span class="code-literal">null</span>,i&amp;&amp;(<span class="code-keyword">this</span>.state=i),<span class="code-keyword">this</span>.error={<span class="code-attr">playlist</span>:<span class="code-keyword">this</span>.master.playlists[t],<span class="code-attr">status</span>:e.status,<span class="code-attr">message</span>:<span class="code-string">"HLS playlist request error at URL: "</span>+t+<span class="code-string">"."</span>,<span class="code-attr">responseText</span>:e.responseText,<span class="code-attr">code</span>:e.status&gt;=<span class="code-number">500</span>?<span class="code-number">4</span>:<span class="code-number">2</span>},<span class="code-keyword">this</span>.trigger(<span class="code-string">"error"</span>)}},{<span class="code-attr">key</span>:<span class="code-string">"haveMetadata"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.request=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_METADATA"</span>;<span class="code-keyword">var</span> n=<span class="code-keyword">new</span> y;<span class="code-keyword">this</span>.customTagParsers.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> n.addParser(e)}),<span class="code-keyword">this</span>.customTagMappers.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> n.addTagMapper(e)}),n.push(e.responseText),n.end(),n.manifest.uri=t,n.manifest.attributes=n.manifest.attributes||{};<span class="code-keyword">var</span> r=U(<span class="code-keyword">this</span>.master,n.manifest);<span class="code-keyword">this</span>.targetDuration=n.manifest.targetDuration,r?(<span class="code-keyword">this</span>.master=r,<span class="code-keyword">this</span>.media_=<span class="code-keyword">this</span>.master.playlists[n.manifest.uri]):<span class="code-keyword">this</span>.trigger(<span class="code-string">"playlistunchanged"</span>),<span class="code-keyword">this</span>.media().endList||(u.clearTimeout(<span class="code-keyword">this</span>.mediaUpdateTimeout),<span class="code-keyword">this</span>.mediaUpdateTimeout=u.setTimeout(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i.trigger(<span class="code-string">"mediaupdatetimeout"</span>)},O(<span class="code-keyword">this</span>.media(),!!r))),<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedplaylist"</span>)}},{<span class="code-attr">key</span>:<span class="code-string">"dispose"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.stopRequest(),u.clearTimeout(<span class="code-keyword">this</span>.mediaUpdateTimeout),u.clearTimeout(<span class="code-keyword">this</span>.finalRenditionTimeout)}},{<span class="code-attr">key</span>:<span class="code-string">"stopRequest"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.request){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.request;<span class="code-keyword">this</span>.request=<span class="code-literal">null</span>,e.onreadystatechange=<span class="code-literal">null</span>,e.abort()}}},{<span class="code-attr">key</span>:<span class="code-string">"media"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(!e)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.media_;<span class="code-keyword">if</span>(<span class="code-string">"HAVE_NOTHING"</span>===<span class="code-keyword">this</span>.state)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Cannot switch media playlist from "</span>+<span class="code-keyword">this</span>.state);<span class="code-keyword">if</span>(<span class="code-string">"string"</span>==<span class="code-keyword">typeof</span> e){<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.master.playlists[e])<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Unknown playlist URI: "</span>+e);e=<span class="code-keyword">this</span>.master.playlists[e]}<span class="code-keyword">if</span>(u.clearTimeout(<span class="code-keyword">this</span>.finalRenditionTimeout),t){<span class="code-keyword">var</span> n=e.targetDuration/<span class="code-number">2</span>*<span class="code-number">1e3</span>||<span class="code-number">5e3</span>;<span class="code-keyword">this</span>.finalRenditionTimeout=u.setTimeout(<span class="code-keyword">this</span>.media.bind(<span class="code-keyword">this</span>,e,!<span class="code-number">1</span>),n)}<span class="code-keyword">else</span>{<span class="code-keyword">var</span> r=<span class="code-keyword">this</span>.state,a=!<span class="code-keyword">this</span>.media_||e.uri!==<span class="code-keyword">this</span>.media_.uri;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.master.playlists[e.uri].endList)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.request&amp;&amp;(<span class="code-keyword">this</span>.request.onreadystatechange=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.request.abort(),<span class="code-keyword">this</span>.request=<span class="code-literal">null</span>),<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_METADATA"</span>,<span class="code-keyword">this</span>.media_=e,<span class="code-keyword">void</span>(a&amp;&amp;(<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediachanging"</span>),<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediachange"</span>)));<span class="code-keyword">if</span>(a){<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.state=<span class="code-string">"SWITCHING_MEDIA"</span>,<span class="code-keyword">this</span>.request){<span class="code-keyword">if</span>(e.resolvedUri===<span class="code-keyword">this</span>.request.url)<span class="code-keyword">return</span>;<span class="code-keyword">this</span>.request.onreadystatechange=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.request.abort(),<span class="code-keyword">this</span>.request=<span class="code-literal">null</span>}<span class="code-keyword">this</span>.media_&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediachanging"</span>),<span class="code-keyword">this</span>.request=<span class="code-keyword">this</span>.hls_.xhr({<span class="code-attr">uri</span>:e.resolvedUri,<span class="code-attr">withCredentials</span>:<span class="code-keyword">this</span>.withCredentials},<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,n</span>)</span>{<span class="code-keyword">if</span>(i.request){<span class="code-keyword">if</span>(e.resolvedUri=l(i.handleManifestRedirects,e.resolvedUri,n),t)<span class="code-keyword">return</span> i.playlistRequestError(i.request,e.uri,r);i.haveMetadata(n,e.uri),<span class="code-string">"HAVE_MASTER"</span>===r?i.trigger(<span class="code-string">"loadedmetadata"</span>):i.trigger(<span class="code-string">"mediachange"</span>)}})}}}},{<span class="code-attr">key</span>:<span class="code-string">"pause"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.stopRequest(),u.clearTimeout(<span class="code-keyword">this</span>.mediaUpdateTimeout),<span class="code-string">"HAVE_NOTHING"</span>===<span class="code-keyword">this</span>.state&amp;&amp;(<span class="code-keyword">this</span>.started=!<span class="code-number">1</span>),<span class="code-string">"SWITCHING_MEDIA"</span>===<span class="code-keyword">this</span>.state?<span class="code-keyword">this</span>.media_?<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_METADATA"</span>:<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_MASTER"</span>:<span class="code-string">"HAVE_CURRENT_METADATA"</span>===<span class="code-keyword">this</span>.state&amp;&amp;(<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_METADATA"</span>)}},{<span class="code-attr">key</span>:<span class="code-string">"load"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;u.clearTimeout(<span class="code-keyword">this</span>.mediaUpdateTimeout);<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.media();<span class="code-keyword">if</span>(e){<span class="code-keyword">var</span> n=i?i.targetDuration/<span class="code-number">2</span>*<span class="code-number">1e3</span>:<span class="code-number">5e3</span>;<span class="code-keyword">this</span>.mediaUpdateTimeout=u.setTimeout(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.load()},n)}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.started?i&amp;&amp;!i.endList?<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediaupdatetimeout"</span>):<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedplaylist"</span>):<span class="code-keyword">this</span>.start()}},{<span class="code-attr">key</span>:<span class="code-string">"start"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.started=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.request=<span class="code-keyword">this</span>.hls_.xhr({<span class="code-attr">uri</span>:<span class="code-keyword">this</span>.srcUrl,<span class="code-attr">withCredentials</span>:<span class="code-keyword">this</span>.withCredentials},<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">if</span>(e.request){<span class="code-keyword">if</span>(e.request=<span class="code-literal">null</span>,t)<span class="code-keyword">return</span> e.error={<span class="code-attr">status</span>:i.status,<span class="code-attr">message</span>:<span class="code-string">"HLS playlist request error at URL: "</span>+e.srcUrl+<span class="code-string">"."</span>,<span class="code-attr">responseText</span>:i.responseText,<span class="code-attr">code</span>:<span class="code-number">2</span>},<span class="code-string">"HAVE_NOTHING"</span>===e.state&amp;&amp;(e.started=!<span class="code-number">1</span>),e.trigger(<span class="code-string">"error"</span>);<span class="code-keyword">var</span> n=<span class="code-keyword">new</span> y;<span class="code-keyword">return</span> e.customTagParsers.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> n.addParser(e)}),e.customTagMappers.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> n.addTagMapper(e)}),n.push(i.responseText),n.end(),e.state=<span class="code-string">"HAVE_MASTER"</span>,e.srcUrl=l(e.handleManifestRedirects,e.srcUrl,i),n.manifest.uri=e.srcUrl,n.manifest.playlists?(e.master=n.manifest,I(e.master),A(e.master),e.trigger(<span class="code-string">"loadedplaylist"</span>),<span class="code-keyword">void</span>(e.request||e.media(n.manifest.playlists[<span class="code-number">0</span>]))):(e.master={<span class="code-attr">mediaGroups</span>:{<span class="code-attr">AUDIO</span>:{},<span class="code-attr">VIDEO</span>:{},<span class="code-string">"CLOSED-CAPTIONS"</span>:{},<span class="code-attr">SUBTITLES</span>:{}},<span class="code-attr">uri</span>:u.location.href,<span class="code-attr">playlists</span>:[{<span class="code-attr">uri</span>:e.srcUrl,<span class="code-attr">id</span>:<span class="code-number">0</span>,<span class="code-attr">resolvedUri</span>:e.srcUrl,<span class="code-attr">attributes</span>:{}}]},e.master.playlists[e.srcUrl]=e.master.playlists[<span class="code-number">0</span>],e.haveMetadata(i,e.srcUrl),e.trigger(<span class="code-string">"loadedmetadata"</span>))}})}}]),t}(),P=t.createTimeRange,D=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r;<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t=e.mediaSequence+e.segments.length),t&lt;e.mediaSequence?<span class="code-number">0</span>:(n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-number">0</span>,n=t-e.mediaSequence,r=e.segments[n];<span class="code-keyword">if</span>(r){<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>!==r.start)<span class="code-keyword">return</span>{<span class="code-attr">result</span>:r.start,<span class="code-attr">precise</span>:!<span class="code-number">0</span>};<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>!==r.end)<span class="code-keyword">return</span>{<span class="code-attr">result</span>:r.end-r.duration,<span class="code-attr">precise</span>:!<span class="code-number">0</span>}}<span class="code-keyword">for</span>(;n--;){<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>!==(r=e.segments[n]).end)<span class="code-keyword">return</span>{<span class="code-attr">result</span>:i+r.end,<span class="code-attr">precise</span>:!<span class="code-number">0</span>};<span class="code-keyword">if</span>(i+=r.duration,<span class="code-keyword">void</span> <span class="code-number">0</span>!==r.start)<span class="code-keyword">return</span>{<span class="code-attr">result</span>:i+r.start,<span class="code-attr">precise</span>:!<span class="code-number">0</span>}}<span class="code-keyword">return</span>{<span class="code-attr">result</span>:i,<span class="code-attr">precise</span>:!<span class="code-number">1</span>}}(e,t)).precise?n.result:(r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>,n=<span class="code-keyword">void</span> <span class="code-number">0</span>,r=t-e.mediaSequence;r&lt;e.segments.length;r++){<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>!==(n=e.segments[r]).start)<span class="code-keyword">return</span>{<span class="code-attr">result</span>:n.start-i,<span class="code-attr">precise</span>:!<span class="code-number">0</span>};<span class="code-keyword">if</span>(i+=n.duration,<span class="code-keyword">void</span> <span class="code-number">0</span>!==n.end)<span class="code-keyword">return</span>{<span class="code-attr">result</span>:n.end-i,<span class="code-attr">precise</span>:!<span class="code-number">0</span>}}<span class="code-keyword">return</span>{<span class="code-attr">result</span>:<span class="code-number">-1</span>,<span class="code-attr">precise</span>:!<span class="code-number">1</span>}}(e,t)).precise?r.result:n.result+i},R=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(!e)<span class="code-keyword">return</span> <span class="code-number">0</span>;<span class="code-keyword">if</span>(<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> i&amp;&amp;(i=<span class="code-number">0</span>),<span class="code-keyword">void</span> <span class="code-number">0</span>===t){<span class="code-keyword">if</span>(e.totalDuration)<span class="code-keyword">return</span> e.totalDuration;<span class="code-keyword">if</span>(!e.endList)<span class="code-keyword">return</span> u.Infinity}<span class="code-keyword">return</span> D(e,t,i)},x=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-number">0</span>;<span class="code-keyword">if</span>(t&gt;i){<span class="code-keyword">var</span> r=[i,t];t=r[<span class="code-number">0</span>],i=r[<span class="code-number">1</span>]}<span class="code-keyword">if</span>(t&lt;<span class="code-number">0</span>){<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a=t;a&lt;<span class="code-built_in">Math</span>.min(<span class="code-number">0</span>,i);a++)n+=e.targetDuration;t=<span class="code-number">0</span>}<span class="code-keyword">for</span>(<span class="code-keyword">var</span> s=t;s&lt;i;s++)n+=e.segments[s].duration;<span class="code-keyword">return</span> n},M=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!e.segments.length)<span class="code-keyword">return</span> <span class="code-number">0</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=e.segments.length<span class="code-number">-1</span>,i=e.segments[t].duration||e.targetDuration,n=i+<span class="code-number">2</span>*e.targetDuration;t--&amp;&amp;!((i+=e.segments[t].duration)&gt;=n););<span class="code-keyword">return</span> <span class="code-built_in">Math</span>.max(<span class="code-number">0</span>,t)},B=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(!e||!e.segments)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(e.endList)<span class="code-keyword">return</span> R(e);<span class="code-keyword">if</span>(<span class="code-literal">null</span>===t)<span class="code-keyword">return</span> <span class="code-literal">null</span>;t=t||<span class="code-number">0</span>;<span class="code-keyword">var</span> n=i?M(e):e.segments.length;<span class="code-keyword">return</span> D(e,e.mediaSequence+n,t)},N=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e-<span class="code-built_in">Math</span>.floor(e)==<span class="code-number">0</span>},q=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(N(t))<span class="code-keyword">return</span> t+<span class="code-number">.1</span>*e;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=t.toString().split(<span class="code-string">"."</span>)[<span class="code-number">1</span>].length,n=<span class="code-number">1</span>;n&lt;=i;n++){<span class="code-keyword">var</span> r=<span class="code-built_in">Math</span>.pow(<span class="code-number">10</span>,n),a=t*r;<span class="code-keyword">if</span>(N(a)||n===i)<span class="code-keyword">return</span>(a+e)/r}},F=q.bind(<span class="code-literal">null</span>,<span class="code-number">1</span>),H=q.bind(<span class="code-literal">null</span>,<span class="code-number">-1</span>),G=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.excludeUntil&amp;&amp;e.excludeUntil&gt;<span class="code-built_in">Date</span>.now()},j=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.excludeUntil&amp;&amp;e.excludeUntil===<span class="code-number">1</span>/<span class="code-number">0</span>},V=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=G(e);<span class="code-keyword">return</span>!e.disabled&amp;&amp;!t},W=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> t.attributes&amp;&amp;t.attributes[e]},z=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-number">1</span>===e.playlists.length)<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">var</span> i=t.attributes.BANDWIDTH||<span class="code-built_in">Number</span>.MAX_VALUE;<span class="code-keyword">return</span> <span class="code-number">0</span>===e.playlists.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!!V(e)&amp;&amp;(e.attributes.BANDWIDTH||<span class="code-number">0</span>)&lt;i}).length},X={<span class="code-attr">duration</span>:R,<span class="code-attr">seekable</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=t||<span class="code-number">0</span>,n=B(e,t,!<span class="code-number">0</span>);<span class="code-keyword">return</span> <span class="code-literal">null</span>===n?P():P(i,n)},<span class="code-attr">safeLiveIndex</span>:M,<span class="code-attr">getMediaInfoForTime</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">var</span> r=<span class="code-keyword">void</span> <span class="code-number">0</span>,a=<span class="code-keyword">void</span> <span class="code-number">0</span>,s=e.segments.length,o=t-n;<span class="code-keyword">if</span>(o&lt;<span class="code-number">0</span>){<span class="code-keyword">if</span>(i&gt;<span class="code-number">0</span>)<span class="code-keyword">for</span>(r=i<span class="code-number">-1</span>;r&gt;=<span class="code-number">0</span>;r--)<span class="code-keyword">if</span>(a=e.segments[r],(o+=H(a.duration))&gt;<span class="code-number">0</span>)<span class="code-keyword">return</span>{<span class="code-attr">mediaIndex</span>:r,<span class="code-attr">startTime</span>:n-x(e,i,r)};<span class="code-keyword">return</span>{<span class="code-attr">mediaIndex</span>:<span class="code-number">0</span>,<span class="code-attr">startTime</span>:t}}<span class="code-keyword">if</span>(i&lt;<span class="code-number">0</span>){<span class="code-keyword">for</span>(r=i;r&lt;<span class="code-number">0</span>;r++)<span class="code-keyword">if</span>((o-=e.targetDuration)&lt;<span class="code-number">0</span>)<span class="code-keyword">return</span>{<span class="code-attr">mediaIndex</span>:<span class="code-number">0</span>,<span class="code-attr">startTime</span>:t};i=<span class="code-number">0</span>}<span class="code-keyword">for</span>(r=i;r&lt;s;r++)<span class="code-keyword">if</span>(a=e.segments[r],(o-=F(a.duration))&lt;<span class="code-number">0</span>)<span class="code-keyword">return</span>{<span class="code-attr">mediaIndex</span>:r,<span class="code-attr">startTime</span>:n+x(e,i,r)};<span class="code-keyword">return</span>{<span class="code-attr">mediaIndex</span>:s<span class="code-number">-1</span>,<span class="code-attr">startTime</span>:t}},<span class="code-attr">isEnabled</span>:V,<span class="code-attr">isDisabled</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.disabled},<span class="code-attr">isBlacklisted</span>:G,<span class="code-attr">isIncompatible</span>:j,<span class="code-attr">playlistEnd</span>:B,<span class="code-attr">isAes</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">0</span>;t&lt;e.segments.length;t++)<span class="code-keyword">if</span>(e.segments[t].key)<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">return</span>!<span class="code-number">1</span>},<span class="code-attr">isFmp4</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">0</span>;t&lt;e.segments.length;t++)<span class="code-keyword">if</span>(e.segments[t].map)<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">return</span>!<span class="code-number">1</span>},<span class="code-attr">hasAttribute</span>:W,<span class="code-attr">estimateSegmentRequestTime</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-built_in">arguments</span>.length&gt;<span class="code-number">3</span>&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-built_in">arguments</span>[<span class="code-number">3</span>]?<span class="code-built_in">arguments</span>[<span class="code-number">3</span>]:<span class="code-number">0</span>;<span class="code-keyword">return</span> W(<span class="code-string">"BANDWIDTH"</span>,i)?(e*i.attributes.BANDWIDTH<span class="code-number">-8</span>*n)/t:<span class="code-literal">NaN</span>},<span class="code-attr">isLowestEnabledRendition</span>:z},Y=t.xhr,K=t.mergeOptions,$=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">i,n</span>)</span>{i=K({<span class="code-attr">timeout</span>:<span class="code-number">45e3</span>},i);<span class="code-keyword">var</span> r=e.beforeRequest||t.Hls.xhr.beforeRequest;<span class="code-keyword">if</span>(r&amp;&amp;<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> r){<span class="code-keyword">var</span> a=r(i);a&amp;&amp;(i=a)}<span class="code-keyword">var</span> s=Y(i,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=s.response;!e&amp;&amp;i&amp;&amp;(s.responseTime=<span class="code-built_in">Date</span>.now(),s.roundTripTime=s.responseTime-s.requestTime,s.bytesReceived=i.byteLength||i.length,s.bandwidth||(s.bandwidth=<span class="code-built_in">Math</span>.floor(s.bytesReceived/s.roundTripTime*<span class="code-number">8</span>*<span class="code-number">1e3</span>))),t.headers&amp;&amp;(s.responseHeaders=t.headers),e&amp;&amp;<span class="code-string">"ETIMEDOUT"</span>===e.code&amp;&amp;(s.timedout=!<span class="code-number">0</span>),e||s.aborted||<span class="code-number">200</span>===t.statusCode||<span class="code-number">206</span>===t.statusCode||<span class="code-number">0</span>===t.statusCode||(e=<span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"XHR Failed with a response of: "</span>+(s&amp;&amp;(i||s.responseText)))),n(e,s)}),o=s.abort;<span class="code-keyword">return</span> s.abort=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> s.aborted=!<span class="code-number">0</span>,o.apply(s,<span class="code-built_in">arguments</span>)},s.uri=i.uri,s.requestTime=<span class="code-built_in">Date</span>.now(),s}},Q=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n={};<span class="code-keyword">return</span> e.byterange&amp;&amp;(n.Range=(t=e.byterange,i=t.offset+t.length<span class="code-number">-1</span>,<span class="code-string">"bytes="</span>+t.offset+<span class="code-string">"-"</span>+i)),n};<span class="code-keyword">var</span> J=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!(e <span class="code-keyword">instanceof</span> t))<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">TypeError</span>(<span class="code-string">"Cannot call a class as a function"</span>)},Z=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;t.length;i++){<span class="code-keyword">var</span> n=t[i];n.enumerable=n.enumerable||!<span class="code-number">1</span>,n.configurable=!<span class="code-number">0</span>,<span class="code-string">"value"</span><span class="code-keyword">in</span> n&amp;&amp;(n.writable=!<span class="code-number">0</span>),<span class="code-built_in">Object</span>.defineProperty(e,n.key,n)}}<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i,n</span>)</span>{<span class="code-keyword">return</span> i&amp;&amp;e(t.prototype,i),n&amp;&amp;e(t,n),t}}(),ee=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!e)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">ReferenceError</span>(<span class="code-string">"this hasn't been initialised - super() hasn't been called"</span>);<span class="code-keyword">return</span>!t||<span class="code-string">"object"</span>!=<span class="code-keyword">typeof</span> t&amp;&amp;<span class="code-string">"function"</span>!=<span class="code-keyword">typeof</span> t?e:t},te=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[<span class="code-number">0</span>],i=e[<span class="code-number">1</span>],n=t[<span class="code-number">4</span>],r=i[<span class="code-number">4</span>],a=<span class="code-keyword">void</span> <span class="code-number">0</span>,s=<span class="code-keyword">void</span> <span class="code-number">0</span>,o=<span class="code-keyword">void</span> <span class="code-number">0</span>,u=[],d=[],l=<span class="code-keyword">void</span> <span class="code-number">0</span>,h=<span class="code-keyword">void</span> <span class="code-number">0</span>,c=<span class="code-keyword">void</span> <span class="code-number">0</span>,f=<span class="code-keyword">void</span> <span class="code-number">0</span>,p=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">for</span>(a=<span class="code-number">0</span>;a&lt;<span class="code-number">256</span>;a++)d[(u[a]=a&lt;&lt;<span class="code-number">1</span>^<span class="code-number">283</span>*(a&gt;&gt;<span class="code-number">7</span>))^a]=a;<span class="code-keyword">for</span>(s=o=<span class="code-number">0</span>;!n[s];s^=l||<span class="code-number">1</span>,o=d[o]||<span class="code-number">1</span>)<span class="code-keyword">for</span>(c=(c=o^o&lt;&lt;<span class="code-number">1</span>^o&lt;&lt;<span class="code-number">2</span>^o&lt;&lt;<span class="code-number">3</span>^o&lt;&lt;<span class="code-number">4</span>)&gt;&gt;<span class="code-number">8</span>^<span class="code-number">255</span>&amp;c^<span class="code-number">99</span>,n[s]=c,r[c]=s,p=<span class="code-number">16843009</span>*u[h=u[l=u[s]]]^<span class="code-number">65537</span>*h^<span class="code-number">257</span>*l^<span class="code-number">16843008</span>*s,f=<span class="code-number">257</span>*u[c]^<span class="code-number">16843008</span>*c,a=<span class="code-number">0</span>;a&lt;<span class="code-number">4</span>;a++)t[a][s]=f=f&lt;&lt;<span class="code-number">24</span>^f&gt;&gt;&gt;<span class="code-number">8</span>,i[a][c]=p=p&lt;&lt;<span class="code-number">24</span>^p&gt;&gt;&gt;<span class="code-number">8</span>;<span class="code-keyword">for</span>(a=<span class="code-number">0</span>;a&lt;<span class="code-number">5</span>;a++)t[a]=t[a].slice(<span class="code-number">0</span>),i[a]=i[a].slice(<span class="code-number">0</span>);<span class="code-keyword">return</span> e},ie=<span class="code-literal">null</span>,ne=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t</span>)</span>{J(<span class="code-keyword">this</span>,e),ie||(ie=te()),<span class="code-keyword">this</span>._tables=[[ie[<span class="code-number">0</span>][<span class="code-number">0</span>].slice(),ie[<span class="code-number">0</span>][<span class="code-number">1</span>].slice(),ie[<span class="code-number">0</span>][<span class="code-number">2</span>].slice(),ie[<span class="code-number">0</span>][<span class="code-number">3</span>].slice(),ie[<span class="code-number">0</span>][<span class="code-number">4</span>].slice()],[ie[<span class="code-number">1</span>][<span class="code-number">0</span>].slice(),ie[<span class="code-number">1</span>][<span class="code-number">1</span>].slice(),ie[<span class="code-number">1</span>][<span class="code-number">2</span>].slice(),ie[<span class="code-number">1</span>][<span class="code-number">3</span>].slice(),ie[<span class="code-number">1</span>][<span class="code-number">4</span>].slice()]];<span class="code-keyword">var</span> i=<span class="code-keyword">void</span> <span class="code-number">0</span>,n=<span class="code-keyword">void</span> <span class="code-number">0</span>,r=<span class="code-keyword">void</span> <span class="code-number">0</span>,a=<span class="code-keyword">void</span> <span class="code-number">0</span>,s=<span class="code-keyword">void</span> <span class="code-number">0</span>,o=<span class="code-keyword">this</span>._tables[<span class="code-number">0</span>][<span class="code-number">4</span>],u=<span class="code-keyword">this</span>._tables[<span class="code-number">1</span>],d=t.length,l=<span class="code-number">1</span>;<span class="code-keyword">if</span>(<span class="code-number">4</span>!==d&amp;&amp;<span class="code-number">6</span>!==d&amp;&amp;<span class="code-number">8</span>!==d)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Invalid aes key size"</span>);<span class="code-keyword">for</span>(a=t.slice(<span class="code-number">0</span>),s=[],<span class="code-keyword">this</span>._key=[a,s],i=d;i&lt;<span class="code-number">4</span>*d+<span class="code-number">28</span>;i++)r=a[i<span class="code-number">-1</span>],(i%d==<span class="code-number">0</span>||<span class="code-number">8</span>===d&amp;&amp;i%d==<span class="code-number">4</span>)&amp;&amp;(r=o[r&gt;&gt;&gt;<span class="code-number">24</span>]&lt;&lt;<span class="code-number">24</span>^o[r&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]&lt;&lt;<span class="code-number">16</span>^o[r&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]&lt;&lt;<span class="code-number">8</span>^o[<span class="code-number">255</span>&amp;r],i%d==<span class="code-number">0</span>&amp;&amp;(r=r&lt;&lt;<span class="code-number">8</span>^r&gt;&gt;&gt;<span class="code-number">24</span>^l&lt;&lt;<span class="code-number">24</span>,l=l&lt;&lt;<span class="code-number">1</span>^<span class="code-number">283</span>*(l&gt;&gt;<span class="code-number">7</span>))),a[i]=a[i-d]^r;<span class="code-keyword">for</span>(n=<span class="code-number">0</span>;i;n++,i--)r=a[<span class="code-number">3</span>&amp;n?i:i<span class="code-number">-4</span>],s[n]=i&lt;=<span class="code-number">4</span>||n&lt;<span class="code-number">4</span>?r:u[<span class="code-number">0</span>][o[r&gt;&gt;&gt;<span class="code-number">24</span>]]^u[<span class="code-number">1</span>][o[r&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]]^u[<span class="code-number">2</span>][o[r&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]]^u[<span class="code-number">3</span>][o[<span class="code-number">255</span>&amp;r]]}<span class="code-keyword">return</span> e.prototype.decrypt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r,a</span>)</span>{<span class="code-keyword">var</span> s=<span class="code-keyword">this</span>._key[<span class="code-number">1</span>],o=e^s[<span class="code-number">0</span>],u=n^s[<span class="code-number">1</span>],d=i^s[<span class="code-number">2</span>],l=t^s[<span class="code-number">3</span>],h=<span class="code-keyword">void</span> <span class="code-number">0</span>,c=<span class="code-keyword">void</span> <span class="code-number">0</span>,f=<span class="code-keyword">void</span> <span class="code-number">0</span>,p=s.length/<span class="code-number">4</span><span class="code-number">-2</span>,m=<span class="code-keyword">void</span> <span class="code-number">0</span>,g=<span class="code-number">4</span>,y=<span class="code-keyword">this</span>._tables[<span class="code-number">1</span>],_=y[<span class="code-number">0</span>],v=y[<span class="code-number">1</span>],b=y[<span class="code-number">2</span>],T=y[<span class="code-number">3</span>],S=y[<span class="code-number">4</span>];<span class="code-keyword">for</span>(m=<span class="code-number">0</span>;m&lt;p;m++)h=_[o&gt;&gt;&gt;<span class="code-number">24</span>]^v[u&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]^b[d&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]^T[<span class="code-number">255</span>&amp;l]^s[g],c=_[u&gt;&gt;&gt;<span class="code-number">24</span>]^v[d&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]^b[l&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]^T[<span class="code-number">255</span>&amp;o]^s[g+<span class="code-number">1</span>],f=_[d&gt;&gt;&gt;<span class="code-number">24</span>]^v[l&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]^b[o&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]^T[<span class="code-number">255</span>&amp;u]^s[g+<span class="code-number">2</span>],l=_[l&gt;&gt;&gt;<span class="code-number">24</span>]^v[o&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]^b[u&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]^T[<span class="code-number">255</span>&amp;d]^s[g+<span class="code-number">3</span>],g+=<span class="code-number">4</span>,o=h,u=c,d=f;<span class="code-keyword">for</span>(m=<span class="code-number">0</span>;m&lt;<span class="code-number">4</span>;m++)r[(<span class="code-number">3</span>&amp;-m)+a]=S[o&gt;&gt;&gt;<span class="code-number">24</span>]&lt;&lt;<span class="code-number">24</span>^S[u&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]&lt;&lt;<span class="code-number">16</span>^S[d&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]&lt;&lt;<span class="code-number">8</span>^S[<span class="code-number">255</span>&amp;l]^s[g++],h=o,o=u,u=d,d=l,l=h},e}(),re=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params"></span>)</span>{J(<span class="code-keyword">this</span>,e),<span class="code-keyword">this</span>.listeners={}}<span class="code-keyword">return</span> e.prototype.on=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.listeners[e]||(<span class="code-keyword">this</span>.listeners[e]=[]),<span class="code-keyword">this</span>.listeners[e].push(t)},e.prototype.off=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.listeners[e])<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.listeners[e].indexOf(t);<span class="code-keyword">return</span> <span class="code-keyword">this</span>.listeners[e].splice(i,<span class="code-number">1</span>),i&gt;<span class="code-number">-1</span>},e.prototype.trigger=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.listeners[e];<span class="code-keyword">if</span>(t)<span class="code-keyword">if</span>(<span class="code-number">2</span>===<span class="code-built_in">arguments</span>.length)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=t.length,n=<span class="code-number">0</span>;n&lt;i;++n)t[n].call(<span class="code-keyword">this</span>,<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]);<span class="code-keyword">else</span> <span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-built_in">Array</span>.prototype.slice.call(<span class="code-built_in">arguments</span>,<span class="code-number">1</span>),a=t.length,s=<span class="code-number">0</span>;s&lt;a;++s)t[s].apply(<span class="code-keyword">this</span>,r)},e.prototype.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.listeners={}},e.prototype.pipe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.on(<span class="code-string">"data"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.push(t)})},e}(),ae=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params"></span>)</span>{J(<span class="code-keyword">this</span>,t);<span class="code-keyword">var</span> i=ee(<span class="code-keyword">this</span>,e.call(<span class="code-keyword">this</span>,re));<span class="code-keyword">return</span> i.jobs=[],i.delay=<span class="code-number">1</span>,i.timeout_=<span class="code-literal">null</span>,i}<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"function"</span>!=<span class="code-keyword">typeof</span> t&amp;&amp;<span class="code-literal">null</span>!==t)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">TypeError</span>(<span class="code-string">"Super expression must either be null or a function, not "</span>+<span class="code-keyword">typeof</span> t);e.prototype=<span class="code-built_in">Object</span>.create(t&amp;&amp;t.prototype,{<span class="code-attr">constructor</span>:{<span class="code-attr">value</span>:e,<span class="code-attr">enumerable</span>:!<span class="code-number">1</span>,<span class="code-attr">writable</span>:!<span class="code-number">0</span>,<span class="code-attr">configurable</span>:!<span class="code-number">0</span>}}),t&amp;&amp;(<span class="code-built_in">Object</span>.setPrototypeOf?<span class="code-built_in">Object</span>.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.processJob_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.jobs.shift()(),<span class="code-keyword">this</span>.jobs.length?<span class="code-keyword">this</span>.timeout_=setTimeout(<span class="code-keyword">this</span>.processJob_.bind(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.delay):<span class="code-keyword">this</span>.timeout_=<span class="code-literal">null</span>},t.prototype.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.jobs.push(e),<span class="code-keyword">this</span>.timeout_||(<span class="code-keyword">this</span>.timeout_=setTimeout(<span class="code-keyword">this</span>.processJob_.bind(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.delay))},t}(re),se=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&lt;&lt;<span class="code-number">24</span>|(<span class="code-number">65280</span>&amp;e)&lt;&lt;<span class="code-number">8</span>|(<span class="code-number">16711680</span>&amp;e)&gt;&gt;<span class="code-number">8</span>|e&gt;&gt;&gt;<span class="code-number">24</span>},oe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-keyword">new</span> <span class="code-built_in">Int32Array</span>(e.buffer,e.byteOffset,e.byteLength&gt;&gt;<span class="code-number">2</span>),r=<span class="code-keyword">new</span> ne(<span class="code-built_in">Array</span>.prototype.slice.call(t)),a=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.byteLength),s=<span class="code-keyword">new</span> <span class="code-built_in">Int32Array</span>(a.buffer),o=<span class="code-keyword">void</span> <span class="code-number">0</span>,u=<span class="code-keyword">void</span> <span class="code-number">0</span>,d=<span class="code-keyword">void</span> <span class="code-number">0</span>,l=<span class="code-keyword">void</span> <span class="code-number">0</span>,h=<span class="code-keyword">void</span> <span class="code-number">0</span>,c=<span class="code-keyword">void</span> <span class="code-number">0</span>,f=<span class="code-keyword">void</span> <span class="code-number">0</span>,p=<span class="code-keyword">void</span> <span class="code-number">0</span>,m=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">for</span>(o=i[<span class="code-number">0</span>],u=i[<span class="code-number">1</span>],d=i[<span class="code-number">2</span>],l=i[<span class="code-number">3</span>],m=<span class="code-number">0</span>;m&lt;n.length;m+=<span class="code-number">4</span>)h=se(n[m]),c=se(n[m+<span class="code-number">1</span>]),f=se(n[m+<span class="code-number">2</span>]),p=se(n[m+<span class="code-number">3</span>]),r.decrypt(h,c,f,p,s,m),s[m]=se(s[m]^o),s[m+<span class="code-number">1</span>]=se(s[m+<span class="code-number">1</span>]^u),s[m+<span class="code-number">2</span>]=se(s[m+<span class="code-number">2</span>]^d),s[m+<span class="code-number">3</span>]=se(s[m+<span class="code-number">3</span>]^l),o=h,u=c,d=f,l=p;<span class="code-keyword">return</span> a},ue=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i,n,r</span>)</span>{J(<span class="code-keyword">this</span>,e);<span class="code-keyword">var</span> a=e.STEP,s=<span class="code-keyword">new</span> <span class="code-built_in">Int32Array</span>(t.buffer),o=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(t.byteLength),u=<span class="code-number">0</span>;<span class="code-keyword">for</span>(<span class="code-keyword">this</span>.asyncStream_=<span class="code-keyword">new</span> ae,<span class="code-keyword">this</span>.asyncStream_.push(<span class="code-keyword">this</span>.decryptChunk_(s.subarray(u,u+a),i,n,o)),u=a;u&lt;s.length;u+=a)n=<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>([se(s[u<span class="code-number">-4</span>]),se(s[u<span class="code-number">-3</span>]),se(s[u<span class="code-number">-2</span>]),se(s[u<span class="code-number">-1</span>])]),<span class="code-keyword">this</span>.asyncStream_.push(<span class="code-keyword">this</span>.decryptChunk_(s.subarray(u,u+a),i,n,o));<span class="code-keyword">this</span>.asyncStream_.push(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e;r(<span class="code-literal">null</span>,(e=o).subarray(<span class="code-number">0</span>,e.byteLength-e[e.byteLength<span class="code-number">-1</span>]))})}<span class="code-keyword">return</span> e.prototype.decryptChunk_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> r=oe(e,t,i);n.set(r,e.byteOffset)}},Z(e,<span class="code-literal">null</span>,[{<span class="code-attr">key</span>:<span class="code-string">"STEP"</span>,<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-number">32e3</span>}}]),e}(),de=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.start(t)+<span class="code-string">"-"</span>+e.end(t)},le=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e.toString(<span class="code-number">16</span>);<span class="code-keyword">return</span><span class="code-string">"00"</span>.substring(<span class="code-number">0</span>,<span class="code-number">2</span>-i.length)+i+(t%<span class="code-number">2</span>?<span class="code-string">" "</span>:<span class="code-string">""</span>)},he=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&gt;=<span class="code-number">32</span>&amp;&amp;e&lt;<span class="code-number">126</span>?<span class="code-built_in">String</span>.fromCharCode(e):<span class="code-string">"."</span>},ce=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t={};<span class="code-keyword">return</span> <span class="code-built_in">Object</span>.keys(e).forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n=e[i];<span class="code-built_in">ArrayBuffer</span>.isView(n)?t[i]={<span class="code-attr">bytes</span>:n.buffer,<span class="code-attr">byteOffset</span>:n.byteOffset,<span class="code-attr">byteLength</span>:n.byteLength}:t[i]=n}),t},fe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.byterange||{<span class="code-attr">length</span>:<span class="code-number">1</span>/<span class="code-number">0</span>,<span class="code-attr">offset</span>:<span class="code-number">0</span>};<span class="code-keyword">return</span>[t.length,t.offset,e.resolvedUri].join(<span class="code-string">","</span>)},pe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.resolvedUri},me=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-built_in">Array</span>.prototype.slice.call(e),i=<span class="code-string">""</span>,n=<span class="code-number">0</span>;n&lt;t.length/<span class="code-number">16</span>;n++)i+=t.slice(<span class="code-number">16</span>*n,<span class="code-number">16</span>*n+<span class="code-number">16</span>).map(le).join(<span class="code-string">""</span>)+<span class="code-string">" "</span>+t.slice(<span class="code-number">16</span>*n,<span class="code-number">16</span>*n+<span class="code-number">16</span>).map(he).join(<span class="code-string">""</span>)+<span class="code-string">"\n"</span>;<span class="code-keyword">return</span> i},ge=<span class="code-built_in">Object</span>.freeze({<span class="code-attr">createTransferableMessage</span>:ce,<span class="code-attr">initSegmentId</span>:fe,<span class="code-attr">segmentKeyId</span>:pe,<span class="code-attr">hexDump</span>:me,<span class="code-attr">tagDump</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.bytes;<span class="code-keyword">return</span> me(t)},<span class="code-attr">textRanges</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-string">""</span>,i=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">for</span>(i=<span class="code-number">0</span>;i&lt;e.length;i++)t+=de(e,i)+<span class="code-string">" "</span>;<span class="code-keyword">return</span> t}}),ye=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.playlist,i=e.time,n=<span class="code-keyword">void</span> <span class="code-number">0</span>===i?<span class="code-keyword">void</span> <span class="code-number">0</span>:i,r=e.callback;<span class="code-keyword">if</span>(!r)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"getProgramTime: callback must be provided"</span>);<span class="code-keyword">if</span>(!t||<span class="code-keyword">void</span> <span class="code-number">0</span>===n)<span class="code-keyword">return</span> r({<span class="code-attr">message</span>:<span class="code-string">"getProgramTime: playlist and time must be provided"</span>});<span class="code-keyword">var</span> a=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!t||!t.segments||<span class="code-number">0</span>===t.segments.length)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>,n=<span class="code-keyword">void</span> <span class="code-number">0</span>,r=<span class="code-number">0</span>;r&lt;t.segments.length&amp;&amp;!(e&lt;=(i=(n=t.segments[r]).videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:i+n.duration));r++);<span class="code-keyword">var</span> a=t.segments[t.segments.length<span class="code-number">-1</span>];<span class="code-keyword">if</span>(a.videoTimingInfo&amp;&amp;a.videoTimingInfo.transmuxedPresentationEnd&lt;e)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(e&gt;i){<span class="code-keyword">if</span>(e&gt;i+<span class="code-number">.25</span>*a.duration)<span class="code-keyword">return</span> <span class="code-literal">null</span>;n=a}<span class="code-keyword">return</span>{<span class="code-attr">segment</span>:n,<span class="code-attr">estimatedStart</span>:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:i-n.duration,<span class="code-attr">type</span>:n.videoTimingInfo?<span class="code-string">"accurate"</span>:<span class="code-string">"estimate"</span>}}(n,t);<span class="code-keyword">if</span>(!a)<span class="code-keyword">return</span> r({<span class="code-attr">message</span>:<span class="code-string">"valid programTime was not found"</span>});<span class="code-keyword">if</span>(<span class="code-string">"estimate"</span>===a.type)<span class="code-keyword">return</span> r({<span class="code-attr">message</span>:<span class="code-string">"Accurate programTime could not be determined. Please seek to e.seekTime and try again"</span>,<span class="code-attr">seekTime</span>:a.estimatedStart});<span class="code-keyword">var</span> s={<span class="code-attr">mediaSeconds</span>:n},o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!t.dateTimeObject)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i=t.videoTimingInfo.transmuxerPrependedSeconds,n=e-(t.videoTimingInfo.transmuxedPresentationStart+i);<span class="code-keyword">return</span> <span class="code-keyword">new</span> <span class="code-built_in">Date</span>(t.dateTimeObject.getTime()+<span class="code-number">1e3</span>*n)}(n,a.segment);<span class="code-keyword">return</span> o&amp;&amp;(s.programDateTime=o.toISOString()),r(<span class="code-literal">null</span>,s)},_e=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i=t.programTime,n=t.playlist,r=t.retryCount,a=<span class="code-keyword">void</span> <span class="code-number">0</span>===r?<span class="code-number">2</span>:r,s=t.seekTo,o=t.pauseAfterSeek,u=<span class="code-keyword">void</span> <span class="code-number">0</span>===o||o,d=t.tech,l=t.callback;<span class="code-keyword">if</span>(!l)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"seekToProgramTime: callback must be provided"</span>);<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===i||!n||!s)<span class="code-keyword">return</span> l({<span class="code-attr">message</span>:<span class="code-string">"seekToProgramTime: programTime, seekTo and playlist must be provided"</span>});<span class="code-keyword">if</span>(!n.endList&amp;&amp;!d.hasStarted_)<span class="code-keyword">return</span> l({<span class="code-attr">message</span>:<span class="code-string">"player must be playing a live stream to start buffering"</span>});<span class="code-keyword">if</span>(!<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!e.segments||<span class="code-number">0</span>===e.segments.length)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">0</span>;t&lt;e.segments.length;t++)<span class="code-keyword">if</span>(!e.segments[t].dateTimeObject)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">return</span>!<span class="code-number">0</span>}(n))<span class="code-keyword">return</span> l({<span class="code-attr">message</span>:<span class="code-string">"programDateTime tags must be provided in the manifest "</span>+n.resolvedUri});<span class="code-keyword">var</span> h=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">try</span>{i=<span class="code-keyword">new</span> <span class="code-built_in">Date</span>(e)}<span class="code-keyword">catch</span>(e){<span class="code-keyword">return</span> <span class="code-literal">null</span>}<span class="code-keyword">if</span>(!t||!t.segments||<span class="code-number">0</span>===t.segments.length)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> n=t.segments[<span class="code-number">0</span>];<span class="code-keyword">if</span>(i&lt;n.dateTimeObject)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;t.segments.length<span class="code-number">-1</span>&amp;&amp;(n=t.segments[r],!(i&lt;t.segments[r+<span class="code-number">1</span>].dateTimeObject));r++);<span class="code-keyword">var</span> a,s=t.segments[t.segments.length<span class="code-number">-1</span>],o=s.dateTimeObject,u=s.videoTimingInfo?(a=s.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:s.duration+<span class="code-number">.25</span>*s.duration;<span class="code-keyword">return</span> i&gt;<span class="code-keyword">new</span> <span class="code-built_in">Date</span>(o.getTime()+<span class="code-number">1e3</span>*u)?<span class="code-literal">null</span>:(i&gt;o&amp;&amp;(n=s),{<span class="code-attr">segment</span>:n,<span class="code-attr">estimatedStart</span>:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:X.duration(t,t.mediaSequence+t.segments.indexOf(n)),<span class="code-attr">type</span>:n.videoTimingInfo?<span class="code-string">"accurate"</span>:<span class="code-string">"estimate"</span>})}(i,n);<span class="code-keyword">if</span>(!h)<span class="code-keyword">return</span> l({<span class="code-attr">message</span>:i+<span class="code-string">" was not found in the stream"</span>});<span class="code-keyword">var</span> c=h.segment,f=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">void</span> <span class="code-number">0</span>,n=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">try</span>{i=<span class="code-keyword">new</span> <span class="code-built_in">Date</span>(e),n=<span class="code-keyword">new</span> <span class="code-built_in">Date</span>(t)}<span class="code-keyword">catch</span>(e){}<span class="code-keyword">var</span> r=i.getTime();<span class="code-keyword">return</span>(n.getTime()-r)/<span class="code-number">1e3</span>}(c.dateTimeObject,i);<span class="code-keyword">if</span>(<span class="code-string">"estimate"</span>===h.type)<span class="code-keyword">return</span> <span class="code-number">0</span>===a?l({<span class="code-attr">message</span>:i+<span class="code-string">" is not buffered yet. Try again"</span>}):(s(h.estimatedStart+f),<span class="code-keyword">void</span> d.one(<span class="code-string">"seeked"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e({<span class="code-attr">programTime</span>:i,<span class="code-attr">playlist</span>:n,<span class="code-attr">retryCount</span>:a<span class="code-number">-1</span>,<span class="code-attr">seekTo</span>:s,<span class="code-attr">pauseAfterSeek</span>:u,<span class="code-attr">tech</span>:d,<span class="code-attr">callback</span>:l})}));<span class="code-keyword">var</span> p=c.start+f;d.one(<span class="code-string">"seeked"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> l(<span class="code-literal">null</span>,d.currentTime())}),u&amp;&amp;d.pause(),s(p)},ve=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">var</span> n=[],r=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">if</span>(e&amp;&amp;e.length)<span class="code-keyword">for</span>(r=<span class="code-number">0</span>;r&lt;e.length;r++)i(e.start(r),e.end(r))&amp;&amp;n.push([e.start(r),e.end(r)]);<span class="code-keyword">return</span> t.createTimeRanges(n)},be=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> ve(e,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">return</span> e<span class="code-number">-.1</span>&lt;=t&amp;&amp;i+<span class="code-number">.1</span>&gt;=t})},Te=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> ve(e,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e<span class="code-number">-1</span>/<span class="code-number">30</span>&gt;=t})},Se=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=[];<span class="code-keyword">if</span>(!e||!e.length)<span class="code-keyword">return</span><span class="code-string">""</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;e.length;i++)t.push(e.start(i)+<span class="code-string">" =&gt; "</span>+e.end(i));<span class="code-keyword">return</span> t.join(<span class="code-string">", "</span>)},ke=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=[],i=<span class="code-number">0</span>;i&lt;e.length;i++)t.push({<span class="code-attr">start</span>:e.start(i),<span class="code-attr">end</span>:e.end(i)});<span class="code-keyword">return</span> t},we=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-keyword">void</span> <span class="code-number">0</span>,r=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">if</span>(i&amp;&amp;i.cues)<span class="code-keyword">for</span>(n=i.cues.length;n--;)(r=i.cues[n]).startTime&lt;=t&amp;&amp;r.endTime&gt;=e&amp;&amp;i.removeCue(r)},Le=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">isNaN</span>(e)||<span class="code-built_in">Math</span>.abs(e)===<span class="code-number">1</span>/<span class="code-number">0</span>?<span class="code-built_in">Number</span>.MAX_VALUE:e},Ee=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i,n</span>)</span>{<span class="code-keyword">var</span> r=u.WebKitDataCue||u.VTTCue;<span class="code-keyword">if</span>(i&amp;&amp;i.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.stream;<span class="code-keyword">this</span>.inbandTextTracks_[t].addCue(<span class="code-keyword">new</span> r(e.startTime+<span class="code-keyword">this</span>.timestampOffset,e.endTime+<span class="code-keyword">this</span>.timestampOffset,e.text))},e),n){<span class="code-keyword">var</span> a=Le(e.mediaSource_.duration);<span class="code-keyword">if</span>(n.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=e.cueTime+<span class="code-keyword">this</span>.timestampOffset;!(<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> i||u.isNaN(i)||i&lt;<span class="code-number">0</span>)&amp;&amp;i&lt;<span class="code-number">1</span>/<span class="code-number">0</span>&amp;&amp;e.frames.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-keyword">new</span> r(i,i,e.value||e.url||e.data||<span class="code-string">""</span>);n.frame=e,n.value=e,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-built_in">Object</span>.defineProperties(e.frame,{<span class="code-attr">id</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.log.warn(<span class="code-string">"cue.frame.id is deprecated. Use cue.value.key instead."</span>),e.value.key}},<span class="code-attr">value</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.log.warn(<span class="code-string">"cue.frame.value is deprecated. Use cue.value.data instead."</span>),e.value.data}},<span class="code-attr">privateData</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.log.warn(<span class="code-string">"cue.frame.privateData is deprecated. Use cue.value.data instead."</span>),e.value.data}}})}(n),<span class="code-keyword">this</span>.metadataTrack_.addCue(n)},<span class="code-keyword">this</span>)},e),e.metadataTrack_&amp;&amp;e.metadataTrack_.cues&amp;&amp;e.metadataTrack_.cues.length){<span class="code-keyword">for</span>(<span class="code-keyword">var</span> s=e.metadataTrack_.cues,o=[],d=<span class="code-number">0</span>;d&lt;s.length;d++)s[d]&amp;&amp;o.push(s[d]);<span class="code-keyword">var</span> l=o.reduce(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e[t.startTime]||[];<span class="code-keyword">return</span> i.push(t),e[t.startTime]=i,e},{}),h=<span class="code-built_in">Object</span>.keys(l).sort(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">Number</span>(e)-<span class="code-built_in">Number</span>(t)});h.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=l[e],n=<span class="code-built_in">Number</span>(h[t+<span class="code-number">1</span>])||a;i.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.endTime=n})})}}},Ue=<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> <span class="code-built_in">window</span>?<span class="code-built_in">window</span>:{},Ie=<span class="code-string">"undefined"</span>==<span class="code-keyword">typeof</span> <span class="code-built_in">Symbol</span>?<span class="code-string">"__target"</span>:<span class="code-built_in">Symbol</span>(),Ae=<span class="code-string">"application/javascript"</span>,Oe=Ue.BlobBuilder||Ue.WebKitBlobBuilder||Ue.MozBlobBuilder||Ue.MSBlobBuilder,Ce=Ue.URL||Ue.webkitURL||Ce&amp;&amp;Ce.msURL,Pe=Ue.Worker;<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">De</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(!t)<span class="code-keyword">return</span> <span class="code-keyword">new</span> Pe(e);<span class="code-keyword">if</span>(Pe&amp;&amp;!i){<span class="code-keyword">var</span> r=Be(t.toString().replace(<span class="code-regexp">/^function.+?{/</span>,<span class="code-string">""</span>).slice(<span class="code-number">0</span>,<span class="code-number">-1</span>));<span class="code-keyword">return</span> <span class="code-keyword">this</span>[Ie]=<span class="code-keyword">new</span> Pe(r),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!e||!t)<span class="code-keyword">return</span>;<span class="code-keyword">var</span> i=e.terminate;e.objURL=t,e.terminate=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.objURL&amp;&amp;Ce.revokeObjectURL(e.objURL),i.call(e)}}(<span class="code-keyword">this</span>[Ie],r),<span class="code-keyword">this</span>[Ie]}<span class="code-keyword">var</span> a={<span class="code-attr">postMessage</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{n.onmessage&amp;&amp;setTimeout(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n.onmessage({<span class="code-attr">data</span>:e,<span class="code-attr">target</span>:a})})}};t.call(a),<span class="code-keyword">this</span>.postMessage=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{setTimeout(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{a.onmessage({<span class="code-attr">data</span>:e,<span class="code-attr">target</span>:n})})},<span class="code-keyword">this</span>.isThisThread=!<span class="code-number">0</span>}}<span class="code-keyword">if</span>(Pe){<span class="code-keyword">var</span> Re,xe=Be(<span class="code-string">"self.onmessage = function () {}"</span>),Me=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(<span class="code-number">1</span>);<span class="code-keyword">try</span>{(Re=<span class="code-keyword">new</span> Pe(xe)).postMessage(Me,[Me.buffer])}<span class="code-keyword">catch</span>(e){Pe=<span class="code-literal">null</span>}<span class="code-keyword">finally</span>{Ce.revokeObjectURL(xe),Re&amp;&amp;Re.terminate()}}<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">Be</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">try</span>{<span class="code-keyword">return</span> Ce.createObjectURL(<span class="code-keyword">new</span> Blob([e],{<span class="code-attr">type</span>:Ae}))}<span class="code-keyword">catch</span>(i){<span class="code-keyword">var</span> t=<span class="code-keyword">new</span> Oe;<span class="code-keyword">return</span> t.append(e),Ce.createObjectURL(t.getBlob(type))}}<span class="code-keyword">var</span> Ne=<span class="code-keyword">new</span> De(<span class="code-string">"./transmuxer-worker.worker.js"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>;!<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.init=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e={};<span class="code-keyword">this</span>.on=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{e[t]||(e[t]=[]),e[t]=e[t].concat(i)},<span class="code-keyword">this</span>.off=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n;<span class="code-keyword">return</span>!!e[t]&amp;&amp;(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,<span class="code-number">1</span>),n&gt;<span class="code-number">-1</span>)},<span class="code-keyword">this</span>.trigger=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i,n,r,a;<span class="code-keyword">if</span>(i=e[t])<span class="code-keyword">if</span>(<span class="code-number">2</span>===<span class="code-built_in">arguments</span>.length)<span class="code-keyword">for</span>(r=i.length,n=<span class="code-number">0</span>;n&lt;r;++n)i[n].call(<span class="code-keyword">this</span>,<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]);<span class="code-keyword">else</span>{<span class="code-keyword">for</span>(a=[],n=<span class="code-built_in">arguments</span>.length,n=<span class="code-number">1</span>;n&lt;<span class="code-built_in">arguments</span>.length;++n)a.push(<span class="code-built_in">arguments</span>[n]);<span class="code-keyword">for</span>(r=i.length,n=<span class="code-number">0</span>;n&lt;r;++n)i[n].apply(<span class="code-keyword">this</span>,a)}},<span class="code-keyword">this</span>.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e={}}}};e.prototype.pipe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.on(<span class="code-string">"data"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.push(t)}),<span class="code-keyword">this</span>.on(<span class="code-string">"done"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.flush(t)}),<span class="code-keyword">this</span>.on(<span class="code-string">"partialdone"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.partialFlush(t)}),<span class="code-keyword">this</span>.on(<span class="code-string">"endedtimeline"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.endTimeline(t)}),<span class="code-keyword">this</span>.on(<span class="code-string">"reset"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.reset(t)}),e},e.prototype.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,e)},e.prototype.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>,e)},e.prototype.partialFlush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"partialdone"</span>,e)},e.prototype.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>,e)},e.prototype.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>,e)};<span class="code-keyword">var</span> t,n,r,a,s,o,u,d,l,h,c,f,p,m,g,y,_,v,b,T,S,k,w,L,E,U,I,A,O,C,P,D,R,x,M,B,N,q,F,H,G=e,j=<span class="code-built_in">Math</span>.pow(<span class="code-number">2</span>,<span class="code-number">32</span>)<span class="code-number">-1</span>;!<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e;<span class="code-keyword">if</span>(k={<span class="code-attr">avc1</span>:[],<span class="code-attr">avcC</span>:[],<span class="code-attr">btrt</span>:[],<span class="code-attr">dinf</span>:[],<span class="code-attr">dref</span>:[],<span class="code-attr">esds</span>:[],<span class="code-attr">ftyp</span>:[],<span class="code-attr">hdlr</span>:[],<span class="code-attr">mdat</span>:[],<span class="code-attr">mdhd</span>:[],<span class="code-attr">mdia</span>:[],<span class="code-attr">mfhd</span>:[],<span class="code-attr">minf</span>:[],<span class="code-attr">moof</span>:[],<span class="code-attr">moov</span>:[],<span class="code-attr">mp4a</span>:[],<span class="code-attr">mvex</span>:[],<span class="code-attr">mvhd</span>:[],<span class="code-attr">pasp</span>:[],<span class="code-attr">sdtp</span>:[],<span class="code-attr">smhd</span>:[],<span class="code-attr">stbl</span>:[],<span class="code-attr">stco</span>:[],<span class="code-attr">stsc</span>:[],<span class="code-attr">stsd</span>:[],<span class="code-attr">stsz</span>:[],<span class="code-attr">stts</span>:[],<span class="code-attr">styp</span>:[],<span class="code-attr">tfdt</span>:[],<span class="code-attr">tfhd</span>:[],<span class="code-attr">traf</span>:[],<span class="code-attr">trak</span>:[],<span class="code-attr">trun</span>:[],<span class="code-attr">trex</span>:[],<span class="code-attr">tkhd</span>:[],<span class="code-attr">vmhd</span>:[]},<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> <span class="code-built_in">Uint8Array</span>){<span class="code-keyword">for</span>(e <span class="code-keyword">in</span> k)k.hasOwnProperty(e)&amp;&amp;(k[e]=[e.charCodeAt(<span class="code-number">0</span>),e.charCodeAt(<span class="code-number">1</span>),e.charCodeAt(<span class="code-number">2</span>),e.charCodeAt(<span class="code-number">3</span>)]);w=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-string">"i"</span>.charCodeAt(<span class="code-number">0</span>),<span class="code-string">"s"</span>.charCodeAt(<span class="code-number">0</span>),<span class="code-string">"o"</span>.charCodeAt(<span class="code-number">0</span>),<span class="code-string">"m"</span>.charCodeAt(<span class="code-number">0</span>)]),E=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-string">"a"</span>.charCodeAt(<span class="code-number">0</span>),<span class="code-string">"v"</span>.charCodeAt(<span class="code-number">0</span>),<span class="code-string">"c"</span>.charCodeAt(<span class="code-number">0</span>),<span class="code-string">"1"</span>.charCodeAt(<span class="code-number">0</span>)]),L=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>]),U=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">118</span>,<span class="code-number">105</span>,<span class="code-number">100</span>,<span class="code-number">101</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">86</span>,<span class="code-number">105</span>,<span class="code-number">100</span>,<span class="code-number">101</span>,<span class="code-number">111</span>,<span class="code-number">72</span>,<span class="code-number">97</span>,<span class="code-number">110</span>,<span class="code-number">100</span>,<span class="code-number">108</span>,<span class="code-number">101</span>,<span class="code-number">114</span>,<span class="code-number">0</span>]),I=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">115</span>,<span class="code-number">111</span>,<span class="code-number">117</span>,<span class="code-number">110</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">83</span>,<span class="code-number">111</span>,<span class="code-number">117</span>,<span class="code-number">110</span>,<span class="code-number">100</span>,<span class="code-number">72</span>,<span class="code-number">97</span>,<span class="code-number">110</span>,<span class="code-number">100</span>,<span class="code-number">108</span>,<span class="code-number">101</span>,<span class="code-number">114</span>,<span class="code-number">0</span>]),A={<span class="code-attr">video</span>:U,<span class="code-attr">audio</span>:I},P=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">12</span>,<span class="code-number">117</span>,<span class="code-number">114</span>,<span class="code-number">108</span>,<span class="code-number">32</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>]),C=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>]),D=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>]),R=D,x=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>]),M=D,O=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>])}}(),t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=[],r=<span class="code-number">0</span>;<span class="code-keyword">for</span>(t=<span class="code-number">1</span>;t&lt;<span class="code-built_in">arguments</span>.length;t++)n.push(<span class="code-built_in">arguments</span>[t]);<span class="code-keyword">for</span>(t=n.length;t--;)r+=n[t].byteLength;<span class="code-keyword">for</span>(i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(r+<span class="code-number">8</span>),<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(i.buffer,i.byteOffset,i.byteLength).setUint32(<span class="code-number">0</span>,i.byteLength),i.set(e,<span class="code-number">4</span>),t=<span class="code-number">0</span>,r=<span class="code-number">8</span>;t&lt;n.length;t++)i.set(n[t],r),r+=n[t].byteLength;<span class="code-keyword">return</span> i},n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t(k.dinf,t(k.dref,P))},r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(k.esds,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">3</span>,<span class="code-number">25</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">4</span>,<span class="code-number">17</span>,<span class="code-number">64</span>,<span class="code-number">21</span>,<span class="code-number">0</span>,<span class="code-number">6</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">218</span>,<span class="code-number">192</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">218</span>,<span class="code-number">192</span>,<span class="code-number">5</span>,<span class="code-number">2</span>,e.audioobjecttype&lt;&lt;<span class="code-number">3</span>|e.samplingfrequencyindex&gt;&gt;&gt;<span class="code-number">1</span>,e.samplingfrequencyindex&lt;&lt;<span class="code-number">7</span>|e.channelcount&lt;&lt;<span class="code-number">3</span>,<span class="code-number">6</span>,<span class="code-number">1</span>,<span class="code-number">2</span>]))},g=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(k.hdlr,A[e])},m=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">2</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">3</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">95</span>,<span class="code-number">144</span>,e.duration&gt;&gt;&gt;<span class="code-number">24</span>&amp;<span class="code-number">255</span>,e.duration&gt;&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>,e.duration&gt;&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>,<span class="code-number">255</span>&amp;e.duration,<span class="code-number">85</span>,<span class="code-number">196</span>,<span class="code-number">0</span>,<span class="code-number">0</span>]);<span class="code-keyword">return</span> e.samplerate&amp;&amp;(i[<span class="code-number">12</span>]=e.samplerate&gt;&gt;&gt;<span class="code-number">24</span>&amp;<span class="code-number">255</span>,i[<span class="code-number">13</span>]=e.samplerate&gt;&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>,i[<span class="code-number">14</span>]=e.samplerate&gt;&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>,i[<span class="code-number">15</span>]=<span class="code-number">255</span>&amp;e.samplerate),t(k.mdhd,i)},p=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(k.mdia,m(e),g(e.type),o(e))},s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(k.mfhd,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">4278190080</span>&amp;e)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;e)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;e)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e]))},o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(k.minf,<span class="code-string">"video"</span>===e.type?t(k.vmhd,O):t(k.smhd,C),n(),_(e))},u=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=[],r=i.length;r--;)n[r]=b(i[r]);<span class="code-keyword">return</span> t.apply(<span class="code-literal">null</span>,[k.moof,s(e)].concat(n))},d=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=e.length,n=[];i--;)n[i]=c(e[i]);<span class="code-keyword">return</span> t.apply(<span class="code-literal">null</span>,[k.moov,h(<span class="code-number">4294967295</span>)].concat(n).concat(l(e)))},l=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=e.length,n=[];i--;)n[i]=T(e[i]);<span class="code-keyword">return</span> t.apply(<span class="code-literal">null</span>,[k.mvex].concat(n))},h=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">2</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">95</span>,<span class="code-number">144</span>,(<span class="code-number">4278190080</span>&amp;e)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;e)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;e)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">64</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">255</span>,<span class="code-number">255</span>,<span class="code-number">255</span>,<span class="code-number">255</span>]);<span class="code-keyword">return</span> t(k.mvhd,i)},y=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i,n,r=e.samples||[],a=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(<span class="code-number">4</span>+r.length);<span class="code-keyword">for</span>(n=<span class="code-number">0</span>;n&lt;r.length;n++)i=r[n].flags,a[n+<span class="code-number">4</span>]=i.dependsOn&lt;&lt;<span class="code-number">4</span>|i.isDependedOn&lt;&lt;<span class="code-number">2</span>|i.hasRedundancy;<span class="code-keyword">return</span> t(k.sdtp,a)},_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(k.stbl,v(e),t(k.stts,M),t(k.stsc,R),t(k.stsz,x),t(k.stco,D))},v=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(k.stsd,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>]),<span class="code-string">"video"</span>===e.type?B(e):N(e))},B=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i,n,r=e.sps||[],a=e.pps||[],s=[],o=[];<span class="code-keyword">for</span>(i=<span class="code-number">0</span>;i&lt;r.length;i++)s.push((<span class="code-number">65280</span>&amp;r[i].byteLength)&gt;&gt;&gt;<span class="code-number">8</span>),s.push(<span class="code-number">255</span>&amp;r[i].byteLength),s=s.concat(<span class="code-built_in">Array</span>.prototype.slice.call(r[i]));<span class="code-keyword">for</span>(i=<span class="code-number">0</span>;i&lt;a.length;i++)o.push((<span class="code-number">65280</span>&amp;a[i].byteLength)&gt;&gt;&gt;<span class="code-number">8</span>),o.push(<span class="code-number">255</span>&amp;a[i].byteLength),o=o.concat(<span class="code-built_in">Array</span>.prototype.slice.call(a[i]));<span class="code-keyword">if</span>(n=[k.avc1,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">65280</span>&amp;e.width)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.width,(<span class="code-number">65280</span>&amp;e.height)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.height,<span class="code-number">0</span>,<span class="code-number">72</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">72</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">19</span>,<span class="code-number">118</span>,<span class="code-number">105</span>,<span class="code-number">100</span>,<span class="code-number">101</span>,<span class="code-number">111</span>,<span class="code-number">106</span>,<span class="code-number">115</span>,<span class="code-number">45</span>,<span class="code-number">99</span>,<span class="code-number">111</span>,<span class="code-number">110</span>,<span class="code-number">116</span>,<span class="code-number">114</span>,<span class="code-number">105</span>,<span class="code-number">98</span>,<span class="code-number">45</span>,<span class="code-number">104</span>,<span class="code-number">108</span>,<span class="code-number">115</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">24</span>,<span class="code-number">17</span>,<span class="code-number">17</span>]),t(k.avcC,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">1</span>,e.profileIdc,e.profileCompatibility,e.levelIdc,<span class="code-number">255</span>].concat([r.length],s,[a.length],o))),t(k.btrt,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">28</span>,<span class="code-number">156</span>,<span class="code-number">128</span>,<span class="code-number">0</span>,<span class="code-number">45</span>,<span class="code-number">198</span>,<span class="code-number">192</span>,<span class="code-number">0</span>,<span class="code-number">45</span>,<span class="code-number">198</span>,<span class="code-number">192</span>]))],e.sarRatio){<span class="code-keyword">var</span> u=e.sarRatio[<span class="code-number">0</span>],d=e.sarRatio[<span class="code-number">1</span>];n.push(t(k.pasp,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([(<span class="code-number">4278190080</span>&amp;u)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;u)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;u)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;u,(<span class="code-number">4278190080</span>&amp;d)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;d)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;d)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;d])))}<span class="code-keyword">return</span> t.apply(<span class="code-literal">null</span>,n)},N=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(k.mp4a,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">65280</span>&amp;e.channelcount)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.channelcount,(<span class="code-number">65280</span>&amp;e.samplesize)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.samplesize,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">65280</span>&amp;e.samplerate)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.samplerate,<span class="code-number">0</span>,<span class="code-number">0</span>]),r(e))},f=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">7</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">4278190080</span>&amp;e.id)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;e.id)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;e.id)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.id,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">4278190080</span>&amp;e.duration)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;e.duration)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;e.duration)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.duration,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">64</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">65280</span>&amp;e.width)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.width,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">65280</span>&amp;e.height)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.height,<span class="code-number">0</span>,<span class="code-number">0</span>]);<span class="code-keyword">return</span> t(k.tkhd,i)},b=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i,n,r,a,s,o;<span class="code-keyword">return</span> i=t(k.tfhd,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">58</span>,(<span class="code-number">4278190080</span>&amp;e.id)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;e.id)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;e.id)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.id,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>])),s=<span class="code-built_in">Math</span>.floor(e.baseMediaDecodeTime/(j+<span class="code-number">1</span>)),o=<span class="code-built_in">Math</span>.floor(e.baseMediaDecodeTime%(j+<span class="code-number">1</span>)),n=t(k.tfdt,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,s&gt;&gt;&gt;<span class="code-number">24</span>&amp;<span class="code-number">255</span>,s&gt;&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>,s&gt;&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>,<span class="code-number">255</span>&amp;s,o&gt;&gt;&gt;<span class="code-number">24</span>&amp;<span class="code-number">255</span>,o&gt;&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>,o&gt;&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>,<span class="code-number">255</span>&amp;o])),<span class="code-number">92</span>,<span class="code-string">"audio"</span>===e.type?(r=S(e,<span class="code-number">92</span>),t(k.traf,i,n,r)):(a=y(e),r=S(e,a.length+<span class="code-number">92</span>),t(k.traf,i,n,r,a))},c=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.duration=e.duration||<span class="code-number">4294967295</span>,t(k.trak,f(e),p(e))},T=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">4278190080</span>&amp;e.id)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;e.id)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;e.id)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.id,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">1</span>]);<span class="code-keyword">return</span><span class="code-string">"video"</span>!==e.type&amp;&amp;(i[i.length<span class="code-number">-1</span>]=<span class="code-number">0</span>),t(k.trex,i)},H=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-number">0</span>,n=<span class="code-number">0</span>,r=<span class="code-number">0</span>,a=<span class="code-number">0</span>;<span class="code-keyword">return</span> e.length&amp;&amp;(<span class="code-keyword">void</span> <span class="code-number">0</span>!==e[<span class="code-number">0</span>].duration&amp;&amp;(i=<span class="code-number">1</span>),<span class="code-keyword">void</span> <span class="code-number">0</span>!==e[<span class="code-number">0</span>].size&amp;&amp;(n=<span class="code-number">2</span>),<span class="code-keyword">void</span> <span class="code-number">0</span>!==e[<span class="code-number">0</span>].flags&amp;&amp;(r=<span class="code-number">4</span>),<span class="code-keyword">void</span> <span class="code-number">0</span>!==e[<span class="code-number">0</span>].compositionTimeOffset&amp;&amp;(a=<span class="code-number">8</span>)),[<span class="code-number">0</span>,<span class="code-number">0</span>,i|n|r|a,<span class="code-number">1</span>,(<span class="code-number">4278190080</span>&amp;e.length)&gt;&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;e.length)&gt;&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;e.length)&gt;&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.length,(<span class="code-number">4278190080</span>&amp;t)&gt;&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;t)&gt;&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;t)&gt;&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;t]},F=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">var</span> n,r,a,s;<span class="code-keyword">for</span>(i+=<span class="code-number">20</span>+<span class="code-number">16</span>*(r=e.samples||[]).length,n=H(r,i),s=<span class="code-number">0</span>;s&lt;r.length;s++)a=r[s],n=n.concat([(<span class="code-number">4278190080</span>&amp;a.duration)&gt;&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;a.duration)&gt;&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;a.duration)&gt;&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;a.duration,(<span class="code-number">4278190080</span>&amp;a.size)&gt;&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;a.size)&gt;&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;a.size)&gt;&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;a.size,a.flags.isLeading&lt;&lt;<span class="code-number">2</span>|a.flags.dependsOn,a.flags.isDependedOn&lt;&lt;<span class="code-number">6</span>|a.flags.hasRedundancy&lt;&lt;<span class="code-number">4</span>|a.flags.paddingValue&lt;&lt;<span class="code-number">1</span>|a.flags.isNonSyncSample,<span class="code-number">61440</span>&amp;a.flags.degradationPriority,<span class="code-number">15</span>&amp;a.flags.degradationPriority,(<span class="code-number">4278190080</span>&amp;a.compositionTimeOffset)&gt;&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;a.compositionTimeOffset)&gt;&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;a.compositionTimeOffset)&gt;&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;a.compositionTimeOffset]);<span class="code-keyword">return</span> t(k.trun,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(n))},q=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">var</span> n,r,a,s;<span class="code-keyword">for</span>(i+=<span class="code-number">20</span>+<span class="code-number">8</span>*(r=e.samples||[]).length,n=H(r,i),s=<span class="code-number">0</span>;s&lt;r.length;s++)a=r[s],n=n.concat([(<span class="code-number">4278190080</span>&amp;a.duration)&gt;&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;a.duration)&gt;&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;a.duration)&gt;&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;a.duration,(<span class="code-number">4278190080</span>&amp;a.size)&gt;&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;a.size)&gt;&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;a.size)&gt;&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;a.size]);<span class="code-keyword">return</span> t(k.trun,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(n))},S=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"audio"</span>===e.type?q(e,t):F(e,t)};a=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t(k.ftyp,w,L,w,E)};<span class="code-keyword">var</span> V,W,z,X,Y,K=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(k.mdat,e)},$=u,Q=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=a(),n=d(e);<span class="code-keyword">return</span>(t=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(i.byteLength+n.byteLength)).set(i),t.set(n,i.byteLength),t},J=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i={<span class="code-attr">size</span>:<span class="code-number">0</span>,<span class="code-attr">flags</span>:{<span class="code-attr">isLeading</span>:<span class="code-number">0</span>,<span class="code-attr">dependsOn</span>:<span class="code-number">1</span>,<span class="code-attr">isDependedOn</span>:<span class="code-number">0</span>,<span class="code-attr">hasRedundancy</span>:<span class="code-number">0</span>,<span class="code-attr">degradationPriority</span>:<span class="code-number">0</span>,<span class="code-attr">isNonSyncSample</span>:<span class="code-number">1</span>}};<span class="code-keyword">return</span> i.dataOffset=t,i.compositionTimeOffset=e.pts-e.dts,i.duration=e.duration,i.size=<span class="code-number">4</span>*e.length,i.size+=e.byteLength,e.keyFrame&amp;&amp;(i.flags.dependsOn=<span class="code-number">2</span>,i.flags.isNonSyncSample=<span class="code-number">0</span>),i},Z=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=[],r=[];<span class="code-keyword">for</span>(r.byteLength=<span class="code-number">0</span>,r.nalCount=<span class="code-number">0</span>,r.duration=<span class="code-number">0</span>,n.byteLength=<span class="code-number">0</span>,t=<span class="code-number">0</span>;t&lt;e.length;t++)<span class="code-string">"access_unit_delimiter_rbsp"</span>===(i=e[t]).nalUnitType?(n.length&amp;&amp;(n.duration=i.dts-n.dts,r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):(<span class="code-string">"slice_layer_without_partitioning_rbsp_idr"</span>===i.nalUnitType&amp;&amp;(n.keyFrame=!<span class="code-number">0</span>),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));<span class="code-keyword">return</span> r.length&amp;&amp;(!n.duration||n.duration&lt;=<span class="code-number">0</span>)&amp;&amp;(n.duration=r[r.length<span class="code-number">-1</span>].duration),r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n),r},ee=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=[],r=[];<span class="code-keyword">for</span>(n.byteLength=<span class="code-number">0</span>,n.nalCount=<span class="code-number">0</span>,n.duration=<span class="code-number">0</span>,n.pts=e[<span class="code-number">0</span>].pts,n.dts=e[<span class="code-number">0</span>].dts,r.byteLength=<span class="code-number">0</span>,r.nalCount=<span class="code-number">0</span>,r.duration=<span class="code-number">0</span>,r.pts=e[<span class="code-number">0</span>].pts,r.dts=e[<span class="code-number">0</span>].dts,t=<span class="code-number">0</span>;t&lt;e.length;t++)(i=e[t]).keyFrame?(n.length&amp;&amp;(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));<span class="code-keyword">return</span> r.length&amp;&amp;n.duration&lt;=<span class="code-number">0</span>&amp;&amp;(n.duration=r[r.length<span class="code-number">-1</span>].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r},te=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">return</span>!e[<span class="code-number">0</span>][<span class="code-number">0</span>].keyFrame&amp;&amp;e.length&gt;<span class="code-number">1</span>&amp;&amp;(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[<span class="code-number">0</span>][<span class="code-number">0</span>].dts=t.dts,e[<span class="code-number">0</span>][<span class="code-number">0</span>].pts=t.pts,e[<span class="code-number">0</span>][<span class="code-number">0</span>].duration+=t.duration),e},ie=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n,r,a,s,o=t||<span class="code-number">0</span>,u=[];<span class="code-keyword">for</span>(i=<span class="code-number">0</span>;i&lt;e.length;i++)<span class="code-keyword">for</span>(a=e[i],n=<span class="code-number">0</span>;n&lt;a.length;n++)s=a[n],o+=(r=J(s,o)).size,u.push(r);<span class="code-keyword">return</span> u},ne=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n,r,a,s,o=<span class="code-number">0</span>,u=e.byteLength,d=e.nalCount,l=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(u+<span class="code-number">4</span>*d),h=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(l.buffer);<span class="code-keyword">for</span>(t=<span class="code-number">0</span>;t&lt;e.length;t++)<span class="code-keyword">for</span>(r=e[t],i=<span class="code-number">0</span>;i&lt;r.length;i++)<span class="code-keyword">for</span>(a=r[i],n=<span class="code-number">0</span>;n&lt;a.length;n++)s=a[n],h.setUint32(o,s.data.byteLength),o+=<span class="code-number">4</span>,l.set(s.data,o),o+=s.data.byteLength;<span class="code-keyword">return</span> l},re=[<span class="code-number">33</span>,<span class="code-number">16</span>,<span class="code-number">5</span>,<span class="code-number">32</span>,<span class="code-number">164</span>,<span class="code-number">27</span>],ae=[<span class="code-number">33</span>,<span class="code-number">65</span>,<span class="code-number">108</span>,<span class="code-number">84</span>,<span class="code-number">1</span>,<span class="code-number">2</span>,<span class="code-number">4</span>,<span class="code-number">8</span>,<span class="code-number">168</span>,<span class="code-number">2</span>,<span class="code-number">4</span>,<span class="code-number">8</span>,<span class="code-number">17</span>,<span class="code-number">191</span>,<span class="code-number">252</span>],se=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=[];e--;)t.push(<span class="code-number">0</span>);<span class="code-keyword">return</span> t},oe={<span class="code-number">96000</span>:[re,[<span class="code-number">227</span>,<span class="code-number">64</span>],se(<span class="code-number">154</span>),[<span class="code-number">56</span>]],<span class="code-number">88200</span>:[re,[<span class="code-number">231</span>],se(<span class="code-number">170</span>),[<span class="code-number">56</span>]],<span class="code-number">64000</span>:[re,[<span class="code-number">248</span>,<span class="code-number">192</span>],se(<span class="code-number">240</span>),[<span class="code-number">56</span>]],<span class="code-number">48000</span>:[re,[<span class="code-number">255</span>,<span class="code-number">192</span>],se(<span class="code-number">268</span>),[<span class="code-number">55</span>,<span class="code-number">148</span>,<span class="code-number">128</span>],se(<span class="code-number">54</span>),[<span class="code-number">112</span>]],<span class="code-number">44100</span>:[re,[<span class="code-number">255</span>,<span class="code-number">192</span>],se(<span class="code-number">268</span>),[<span class="code-number">55</span>,<span class="code-number">163</span>,<span class="code-number">128</span>],se(<span class="code-number">84</span>),[<span class="code-number">112</span>]],<span class="code-number">32000</span>:[re,[<span class="code-number">255</span>,<span class="code-number">192</span>],se(<span class="code-number">268</span>),[<span class="code-number">55</span>,<span class="code-number">234</span>],se(<span class="code-number">226</span>),[<span class="code-number">112</span>]],<span class="code-number">24000</span>:[re,[<span class="code-number">255</span>,<span class="code-number">192</span>],se(<span class="code-number">268</span>),[<span class="code-number">55</span>,<span class="code-number">255</span>,<span class="code-number">128</span>],se(<span class="code-number">268</span>),[<span class="code-number">111</span>,<span class="code-number">112</span>],se(<span class="code-number">126</span>),[<span class="code-number">224</span>]],<span class="code-number">16000</span>:[re,[<span class="code-number">255</span>,<span class="code-number">192</span>],se(<span class="code-number">268</span>),[<span class="code-number">55</span>,<span class="code-number">255</span>,<span class="code-number">128</span>],se(<span class="code-number">268</span>),[<span class="code-number">111</span>,<span class="code-number">255</span>],se(<span class="code-number">269</span>),[<span class="code-number">223</span>,<span class="code-number">108</span>],se(<span class="code-number">195</span>),[<span class="code-number">1</span>,<span class="code-number">192</span>]],<span class="code-number">12000</span>:[ae,se(<span class="code-number">268</span>),[<span class="code-number">3</span>,<span class="code-number">127</span>,<span class="code-number">248</span>],se(<span class="code-number">268</span>),[<span class="code-number">6</span>,<span class="code-number">255</span>,<span class="code-number">240</span>],se(<span class="code-number">268</span>),[<span class="code-number">13</span>,<span class="code-number">255</span>,<span class="code-number">224</span>],se(<span class="code-number">268</span>),[<span class="code-number">27</span>,<span class="code-number">253</span>,<span class="code-number">128</span>],se(<span class="code-number">259</span>),[<span class="code-number">56</span>]],<span class="code-number">11025</span>:[ae,se(<span class="code-number">268</span>),[<span class="code-number">3</span>,<span class="code-number">127</span>,<span class="code-number">248</span>],se(<span class="code-number">268</span>),[<span class="code-number">6</span>,<span class="code-number">255</span>,<span class="code-number">240</span>],se(<span class="code-number">268</span>),[<span class="code-number">13</span>,<span class="code-number">255</span>,<span class="code-number">224</span>],se(<span class="code-number">268</span>),[<span class="code-number">27</span>,<span class="code-number">255</span>,<span class="code-number">192</span>],se(<span class="code-number">268</span>),[<span class="code-number">55</span>,<span class="code-number">175</span>,<span class="code-number">128</span>],se(<span class="code-number">108</span>),[<span class="code-number">112</span>]],<span class="code-number">8000</span>:[ae,se(<span class="code-number">268</span>),[<span class="code-number">3</span>,<span class="code-number">121</span>,<span class="code-number">16</span>],se(<span class="code-number">47</span>),[<span class="code-number">7</span>]]},ue=(V=oe,<span class="code-built_in">Object</span>.keys(V).reduce(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e[t]=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(V[t].reduce(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.concat(t)},[])),e},{})),de=<span class="code-number">9e4</span>,le=(W=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">9e4</span>*e},z=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e*t},X=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e/<span class="code-number">9e4</span>},Y=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e/t},<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> W(Y(e,t))}),he=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> z(X(e),t)},ce=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> X(i?e:e-t)},fe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">var</span> r,a,s,o,u,d=<span class="code-number">0</span>,l=<span class="code-number">0</span>,h=<span class="code-number">0</span>;<span class="code-keyword">if</span>(t.length&amp;&amp;(r=le(e.baseMediaDecodeTime,e.samplerate),a=<span class="code-built_in">Math</span>.ceil(de/(e.samplerate/<span class="code-number">1024</span>)),i&amp;&amp;n&amp;&amp;(d=r-<span class="code-built_in">Math</span>.max(i,n),h=(l=<span class="code-built_in">Math</span>.floor(d/a))*a),!(l&lt;<span class="code-number">1</span>||h&gt;de/<span class="code-number">2</span>))){<span class="code-keyword">for</span>((s=ue[e.samplerate])||(s=t[<span class="code-number">0</span>].data),o=<span class="code-number">0</span>;o&lt;l;o++)u=t[<span class="code-number">0</span>],t.splice(<span class="code-number">0</span>,<span class="code-number">0</span>,{<span class="code-attr">data</span>:s,<span class="code-attr">dts</span>:u.dts-a,<span class="code-attr">pts</span>:u.pts-a});e.baseMediaDecodeTime-=<span class="code-built_in">Math</span>.floor(he(h,e.samplerate))}},pe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> t.minSegmentDts&gt;=i?e:(t.minSegmentDts=<span class="code-number">1</span>/<span class="code-number">0</span>,e.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.dts&gt;=i&amp;&amp;(t.minSegmentDts=<span class="code-built_in">Math</span>.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!<span class="code-number">0</span>)}))},me=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=[];<span class="code-keyword">for</span>(t=<span class="code-number">0</span>;t&lt;e.length;t++)i=e[t],n.push({<span class="code-attr">size</span>:i.data.byteLength,<span class="code-attr">duration</span>:<span class="code-number">1024</span>});<span class="code-keyword">return</span> n},ge=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=<span class="code-number">0</span>,r=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=<span class="code-number">0</span>;<span class="code-keyword">for</span>(t=<span class="code-number">0</span>;t&lt;e.length;t++)i+=e[t].data.byteLength;<span class="code-keyword">return</span> i}(e));<span class="code-keyword">for</span>(t=<span class="code-number">0</span>;t&lt;e.length;t++)i=e[t],r.set(i.data,n),n+=i.data.byteLength;<span class="code-keyword">return</span> r},ye=de,_e=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">delete</span> e.minSegmentDts,<span class="code-keyword">delete</span> e.maxSegmentDts,<span class="code-keyword">delete</span> e.minSegmentPts,<span class="code-keyword">delete</span> e.maxSegmentPts},ve=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n=e.minSegmentDts;<span class="code-keyword">return</span> t||(n-=e.timelineStartInfo.dts),i=e.timelineStartInfo.baseMediaDecodeTime,i+=n,i=<span class="code-built_in">Math</span>.max(<span class="code-number">0</span>,i),<span class="code-string">"audio"</span>===e.type&amp;&amp;(i*=e.samplerate/ye,i=<span class="code-built_in">Math</span>.floor(i)),i},be=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> t.pts&amp;&amp;(<span class="code-keyword">void</span> <span class="code-number">0</span>===e.timelineStartInfo.pts&amp;&amp;(e.timelineStartInfo.pts=t.pts),<span class="code-keyword">void</span> <span class="code-number">0</span>===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=<span class="code-built_in">Math</span>.min(e.minSegmentPts,t.pts),<span class="code-keyword">void</span> <span class="code-number">0</span>===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=<span class="code-built_in">Math</span>.max(e.maxSegmentPts,t.pts)),<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> t.dts&amp;&amp;(<span class="code-keyword">void</span> <span class="code-number">0</span>===e.timelineStartInfo.dts&amp;&amp;(e.timelineStartInfo.dts=t.dts),<span class="code-keyword">void</span> <span class="code-number">0</span>===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=<span class="code-built_in">Math</span>.min(e.minSegmentDts,t.dts),<span class="code-keyword">void</span> <span class="code-number">0</span>===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=<span class="code-built_in">Math</span>.max(e.maxSegmentDts,t.dts))},Te=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">0</span>,i={<span class="code-attr">payloadType</span>:<span class="code-number">-1</span>,<span class="code-attr">payloadSize</span>:<span class="code-number">0</span>},n=<span class="code-number">0</span>,r=<span class="code-number">0</span>;t&lt;e.byteLength&amp;&amp;<span class="code-number">128</span>!==e[t];){<span class="code-keyword">for</span>(;<span class="code-number">255</span>===e[t];)n+=<span class="code-number">255</span>,t++;<span class="code-keyword">for</span>(n+=e[t++];<span class="code-number">255</span>===e[t];)r+=<span class="code-number">255</span>,t++;<span class="code-keyword">if</span>(r+=e[t++],!i.payload&amp;&amp;<span class="code-number">4</span>===n){i.payloadType=n,i.payloadSize=r,i.payload=e.subarray(t,t+r);<span class="code-keyword">break</span>}t+=r,n=<span class="code-number">0</span>,r=<span class="code-number">0</span>}<span class="code-keyword">return</span> i},Se=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">181</span>!==e.payload[<span class="code-number">0</span>]?<span class="code-literal">null</span>:<span class="code-number">49</span>!=(e.payload[<span class="code-number">1</span>]&lt;&lt;<span class="code-number">8</span>|e.payload[<span class="code-number">2</span>])?<span class="code-literal">null</span>:<span class="code-string">"GA94"</span>!==<span class="code-built_in">String</span>.fromCharCode(e.payload[<span class="code-number">3</span>],e.payload[<span class="code-number">4</span>],e.payload[<span class="code-number">5</span>],e.payload[<span class="code-number">6</span>])?<span class="code-literal">null</span>:<span class="code-number">3</span>!==e.payload[<span class="code-number">7</span>]?<span class="code-literal">null</span>:e.payload.subarray(<span class="code-number">8</span>,e.payload.length<span class="code-number">-1</span>)},ke=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n,r,a,s=[];<span class="code-keyword">if</span>(!(<span class="code-number">64</span>&amp;t[<span class="code-number">0</span>]))<span class="code-keyword">return</span> s;<span class="code-keyword">for</span>(n=<span class="code-number">31</span>&amp;t[<span class="code-number">0</span>],i=<span class="code-number">0</span>;i&lt;n;i++)a={<span class="code-attr">type</span>:<span class="code-number">3</span>&amp;t[<span class="code-number">2</span>+(r=<span class="code-number">3</span>*i)],<span class="code-attr">pts</span>:e},<span class="code-number">4</span>&amp;t[r+<span class="code-number">2</span>]&amp;&amp;(a.ccData=t[r+<span class="code-number">3</span>]&lt;&lt;<span class="code-number">8</span>|t[r+<span class="code-number">4</span>],s.push(a));<span class="code-keyword">return</span> s},we=<span class="code-number">4</span>,Le=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params"></span>)</span>{e.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.captionPackets_=[],<span class="code-keyword">this</span>.ccStreams_=[<span class="code-keyword">new</span> Oe(<span class="code-number">0</span>,<span class="code-number">0</span>),<span class="code-keyword">new</span> Oe(<span class="code-number">0</span>,<span class="code-number">1</span>),<span class="code-keyword">new</span> Oe(<span class="code-number">1</span>,<span class="code-number">0</span>),<span class="code-keyword">new</span> Oe(<span class="code-number">1</span>,<span class="code-number">1</span>)],<span class="code-keyword">this</span>.reset(),<span class="code-keyword">this</span>.ccStreams_.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.on(<span class="code-string">"data"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"data"</span>)),e.on(<span class="code-string">"partialdone"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"partialdone"</span>)),e.on(<span class="code-string">"done"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"done"</span>))},<span class="code-keyword">this</span>)};(Le.prototype=<span class="code-keyword">new</span> G).push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n;<span class="code-keyword">if</span>(<span class="code-string">"sei_rbsp"</span>===e.nalUnitType&amp;&amp;(t=Te(e.escapedRBSP)).payloadType===we&amp;&amp;(i=Se(t)))<span class="code-keyword">if</span>(e.dts&lt;<span class="code-keyword">this</span>.latestDts_)<span class="code-keyword">this</span>.ignoreNextEqualDts_=!<span class="code-number">0</span>;<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(e.dts===<span class="code-keyword">this</span>.latestDts_&amp;&amp;<span class="code-keyword">this</span>.ignoreNextEqualDts_)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.numSameDts_--,<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.numSameDts_||(<span class="code-keyword">this</span>.ignoreNextEqualDts_=!<span class="code-number">1</span>));n=ke(e.pts,i),<span class="code-keyword">this</span>.captionPackets_=<span class="code-keyword">this</span>.captionPackets_.concat(n),<span class="code-keyword">this</span>.latestDts_!==e.dts&amp;&amp;(<span class="code-keyword">this</span>.numSameDts_=<span class="code-number">0</span>),<span class="code-keyword">this</span>.numSameDts_++,<span class="code-keyword">this</span>.latestDts_=e.dts}},Le.prototype.flushCCStreams=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.ccStreams_.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"flush"</span>===e?t.flush():t.partialFlush()},<span class="code-keyword">this</span>)},Le.prototype.flushStream=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.captionPackets_.length?(<span class="code-keyword">this</span>.captionPackets_.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{e.presortIndex=t}),<span class="code-keyword">this</span>.captionPackets_.sort(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),<span class="code-keyword">this</span>.captionPackets_.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.type&lt;<span class="code-number">2</span>&amp;&amp;<span class="code-keyword">this</span>.dispatchCea608Packet(e)},<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.captionPackets_.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.flushCCStreams(e)):<span class="code-keyword">this</span>.flushCCStreams(e)},Le.prototype.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.flushStream(<span class="code-string">"flush"</span>)},Le.prototype.partialFlush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.flushStream(<span class="code-string">"partialFlush"</span>)},Le.prototype.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.latestDts_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.ignoreNextEqualDts_=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.numSameDts_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.activeCea608Channel_=[<span class="code-literal">null</span>,<span class="code-literal">null</span>],<span class="code-keyword">this</span>.ccStreams_.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.reset()})},Le.prototype.dispatchCea608Packet=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.setsTextOrXDSActive(e)?<span class="code-keyword">this</span>.activeCea608Channel_[e.type]=<span class="code-literal">null</span>:<span class="code-keyword">this</span>.setsChannel1Active(e)?<span class="code-keyword">this</span>.activeCea608Channel_[e.type]=<span class="code-number">0</span>:<span class="code-keyword">this</span>.setsChannel2Active(e)&amp;&amp;(<span class="code-keyword">this</span>.activeCea608Channel_[e.type]=<span class="code-number">1</span>),<span class="code-literal">null</span>!==<span class="code-keyword">this</span>.activeCea608Channel_[e.type]&amp;&amp;<span class="code-keyword">this</span>.ccStreams_[(e.type&lt;&lt;<span class="code-number">1</span>)+<span class="code-keyword">this</span>.activeCea608Channel_[e.type]].push(e)},Le.prototype.setsChannel1Active=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">4096</span>==(<span class="code-number">30720</span>&amp;e.ccData)},Le.prototype.setsChannel2Active=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">6144</span>==(<span class="code-number">30720</span>&amp;e.ccData)},Le.prototype.setsTextOrXDSActive=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">256</span>==(<span class="code-number">28928</span>&amp;e.ccData)||<span class="code-number">4138</span>==(<span class="code-number">30974</span>&amp;e.ccData)||<span class="code-number">6186</span>==(<span class="code-number">30974</span>&amp;e.ccData)};<span class="code-keyword">var</span> Ee={<span class="code-number">42</span>:<span class="code-number">225</span>,<span class="code-number">92</span>:<span class="code-number">233</span>,<span class="code-number">94</span>:<span class="code-number">237</span>,<span class="code-number">95</span>:<span class="code-number">243</span>,<span class="code-number">96</span>:<span class="code-number">250</span>,<span class="code-number">123</span>:<span class="code-number">231</span>,<span class="code-number">124</span>:<span class="code-number">247</span>,<span class="code-number">125</span>:<span class="code-number">209</span>,<span class="code-number">126</span>:<span class="code-number">241</span>,<span class="code-number">127</span>:<span class="code-number">9608</span>,<span class="code-number">304</span>:<span class="code-number">174</span>,<span class="code-number">305</span>:<span class="code-number">176</span>,<span class="code-number">306</span>:<span class="code-number">189</span>,<span class="code-number">307</span>:<span class="code-number">191</span>,<span class="code-number">308</span>:<span class="code-number">8482</span>,<span class="code-number">309</span>:<span class="code-number">162</span>,<span class="code-number">310</span>:<span class="code-number">163</span>,<span class="code-number">311</span>:<span class="code-number">9834</span>,<span class="code-number">312</span>:<span class="code-number">224</span>,<span class="code-number">313</span>:<span class="code-number">160</span>,<span class="code-number">314</span>:<span class="code-number">232</span>,<span class="code-number">315</span>:<span class="code-number">226</span>,<span class="code-number">316</span>:<span class="code-number">234</span>,<span class="code-number">317</span>:<span class="code-number">238</span>,<span class="code-number">318</span>:<span class="code-number">244</span>,<span class="code-number">319</span>:<span class="code-number">251</span>,<span class="code-number">544</span>:<span class="code-number">193</span>,<span class="code-number">545</span>:<span class="code-number">201</span>,<span class="code-number">546</span>:<span class="code-number">211</span>,<span class="code-number">547</span>:<span class="code-number">218</span>,<span class="code-number">548</span>:<span class="code-number">220</span>,<span class="code-number">549</span>:<span class="code-number">252</span>,<span class="code-number">550</span>:<span class="code-number">8216</span>,<span class="code-number">551</span>:<span class="code-number">161</span>,<span class="code-number">552</span>:<span class="code-number">42</span>,<span class="code-number">553</span>:<span class="code-number">39</span>,<span class="code-number">554</span>:<span class="code-number">8212</span>,<span class="code-number">555</span>:<span class="code-number">169</span>,<span class="code-number">556</span>:<span class="code-number">8480</span>,<span class="code-number">557</span>:<span class="code-number">8226</span>,<span class="code-number">558</span>:<span class="code-number">8220</span>,<span class="code-number">559</span>:<span class="code-number">8221</span>,<span class="code-number">560</span>:<span class="code-number">192</span>,<span class="code-number">561</span>:<span class="code-number">194</span>,<span class="code-number">562</span>:<span class="code-number">199</span>,<span class="code-number">563</span>:<span class="code-number">200</span>,<span class="code-number">564</span>:<span class="code-number">202</span>,<span class="code-number">565</span>:<span class="code-number">203</span>,<span class="code-number">566</span>:<span class="code-number">235</span>,<span class="code-number">567</span>:<span class="code-number">206</span>,<span class="code-number">568</span>:<span class="code-number">207</span>,<span class="code-number">569</span>:<span class="code-number">239</span>,<span class="code-number">570</span>:<span class="code-number">212</span>,<span class="code-number">571</span>:<span class="code-number">217</span>,<span class="code-number">572</span>:<span class="code-number">249</span>,<span class="code-number">573</span>:<span class="code-number">219</span>,<span class="code-number">574</span>:<span class="code-number">171</span>,<span class="code-number">575</span>:<span class="code-number">187</span>,<span class="code-number">800</span>:<span class="code-number">195</span>,<span class="code-number">801</span>:<span class="code-number">227</span>,<span class="code-number">802</span>:<span class="code-number">205</span>,<span class="code-number">803</span>:<span class="code-number">204</span>,<span class="code-number">804</span>:<span class="code-number">236</span>,<span class="code-number">805</span>:<span class="code-number">210</span>,<span class="code-number">806</span>:<span class="code-number">242</span>,<span class="code-number">807</span>:<span class="code-number">213</span>,<span class="code-number">808</span>:<span class="code-number">245</span>,<span class="code-number">809</span>:<span class="code-number">123</span>,<span class="code-number">810</span>:<span class="code-number">125</span>,<span class="code-number">811</span>:<span class="code-number">92</span>,<span class="code-number">812</span>:<span class="code-number">94</span>,<span class="code-number">813</span>:<span class="code-number">95</span>,<span class="code-number">814</span>:<span class="code-number">124</span>,<span class="code-number">815</span>:<span class="code-number">126</span>,<span class="code-number">816</span>:<span class="code-number">196</span>,<span class="code-number">817</span>:<span class="code-number">228</span>,<span class="code-number">818</span>:<span class="code-number">214</span>,<span class="code-number">819</span>:<span class="code-number">246</span>,<span class="code-number">820</span>:<span class="code-number">223</span>,<span class="code-number">821</span>:<span class="code-number">165</span>,<span class="code-number">822</span>:<span class="code-number">164</span>,<span class="code-number">823</span>:<span class="code-number">9474</span>,<span class="code-number">824</span>:<span class="code-number">197</span>,<span class="code-number">825</span>:<span class="code-number">229</span>,<span class="code-number">826</span>:<span class="code-number">216</span>,<span class="code-number">827</span>:<span class="code-number">248</span>,<span class="code-number">828</span>:<span class="code-number">9484</span>,<span class="code-number">829</span>:<span class="code-number">9488</span>,<span class="code-number">830</span>:<span class="code-number">9492</span>,<span class="code-number">831</span>:<span class="code-number">9496</span>},Ue=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-literal">null</span>===e?<span class="code-string">""</span>:(e=Ee[e]||e,<span class="code-built_in">String</span>.fromCharCode(e))},Ie=[<span class="code-number">4352</span>,<span class="code-number">4384</span>,<span class="code-number">4608</span>,<span class="code-number">4640</span>,<span class="code-number">5376</span>,<span class="code-number">5408</span>,<span class="code-number">5632</span>,<span class="code-number">5664</span>,<span class="code-number">5888</span>,<span class="code-number">5920</span>,<span class="code-number">4096</span>,<span class="code-number">4864</span>,<span class="code-number">4896</span>,<span class="code-number">5120</span>,<span class="code-number">5152</span>],Ae=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> e=[],t=<span class="code-number">15</span>;t--;)e.push(<span class="code-string">""</span>);<span class="code-keyword">return</span> e},Oe=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{e.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.field_=t||<span class="code-number">0</span>,<span class="code-keyword">this</span>.dataChannel_=i||<span class="code-number">0</span>,<span class="code-keyword">this</span>.name_=<span class="code-string">"CC"</span>+(<span class="code-number">1</span>+(<span class="code-keyword">this</span>.field_&lt;&lt;<span class="code-number">1</span>|<span class="code-keyword">this</span>.dataChannel_)),<span class="code-keyword">this</span>.setConstants(),<span class="code-keyword">this</span>.reset(),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n,r,a;<span class="code-keyword">if</span>((t=<span class="code-number">32639</span>&amp;e.ccData)!==<span class="code-keyword">this</span>.lastControlCode_){<span class="code-keyword">if</span>(<span class="code-number">4096</span>==(<span class="code-number">61440</span>&amp;t)?<span class="code-keyword">this</span>.lastControlCode_=t:t!==<span class="code-keyword">this</span>.PADDING_&amp;&amp;(<span class="code-keyword">this</span>.lastControlCode_=<span class="code-literal">null</span>),n=t&gt;&gt;&gt;<span class="code-number">8</span>,r=<span class="code-number">255</span>&amp;t,t!==<span class="code-keyword">this</span>.PADDING_)<span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.RESUME_CAPTION_LOADING_)<span class="code-keyword">this</span>.mode_=<span class="code-string">"popOn"</span>;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.END_OF_CAPTION_)<span class="code-keyword">this</span>.mode_=<span class="code-string">"popOn"</span>,<span class="code-keyword">this</span>.clearFormatting(e.pts),<span class="code-keyword">this</span>.flushDisplayed(e.pts),i=<span class="code-keyword">this</span>.displayed_,<span class="code-keyword">this</span>.displayed_=<span class="code-keyword">this</span>.nonDisplayed_,<span class="code-keyword">this</span>.nonDisplayed_=i,<span class="code-keyword">this</span>.startPts_=e.pts;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.ROLL_UP_2_ROWS_)<span class="code-keyword">this</span>.rollUpRows_=<span class="code-number">2</span>,<span class="code-keyword">this</span>.setRollUp(e.pts);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.ROLL_UP_3_ROWS_)<span class="code-keyword">this</span>.rollUpRows_=<span class="code-number">3</span>,<span class="code-keyword">this</span>.setRollUp(e.pts);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.ROLL_UP_4_ROWS_)<span class="code-keyword">this</span>.rollUpRows_=<span class="code-number">4</span>,<span class="code-keyword">this</span>.setRollUp(e.pts);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.CARRIAGE_RETURN_)<span class="code-keyword">this</span>.clearFormatting(e.pts),<span class="code-keyword">this</span>.flushDisplayed(e.pts),<span class="code-keyword">this</span>.shiftRowsUp_(),<span class="code-keyword">this</span>.startPts_=e.pts;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.BACKSPACE_)<span class="code-string">"popOn"</span>===<span class="code-keyword">this</span>.mode_?<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_]=<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_].slice(<span class="code-number">0</span>,<span class="code-number">-1</span>):<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_]=<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_].slice(<span class="code-number">0</span>,<span class="code-number">-1</span>);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.ERASE_DISPLAYED_MEMORY_)<span class="code-keyword">this</span>.flushDisplayed(e.pts),<span class="code-keyword">this</span>.displayed_=Ae();<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.ERASE_NON_DISPLAYED_MEMORY_)<span class="code-keyword">this</span>.nonDisplayed_=Ae();<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.RESUME_DIRECT_CAPTIONING_)<span class="code-string">"paintOn"</span>!==<span class="code-keyword">this</span>.mode_&amp;&amp;(<span class="code-keyword">this</span>.flushDisplayed(e.pts),<span class="code-keyword">this</span>.displayed_=Ae()),<span class="code-keyword">this</span>.mode_=<span class="code-string">"paintOn"</span>,<span class="code-keyword">this</span>.startPts_=e.pts;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isSpecialCharacter(n,r))a=Ue((n=(<span class="code-number">3</span>&amp;n)&lt;&lt;<span class="code-number">8</span>)|r),<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e.pts,a),<span class="code-keyword">this</span>.column_++;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isExtCharacter(n,r))<span class="code-string">"popOn"</span>===<span class="code-keyword">this</span>.mode_?<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_]=<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_].slice(<span class="code-number">0</span>,<span class="code-number">-1</span>):<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_]=<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_].slice(<span class="code-number">0</span>,<span class="code-number">-1</span>),a=Ue((n=(<span class="code-number">3</span>&amp;n)&lt;&lt;<span class="code-number">8</span>)|r),<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e.pts,a),<span class="code-keyword">this</span>.column_++;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isMidRowCode(n,r))<span class="code-keyword">this</span>.clearFormatting(e.pts),<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e.pts,<span class="code-string">" "</span>),<span class="code-keyword">this</span>.column_++,<span class="code-number">14</span>==(<span class="code-number">14</span>&amp;r)&amp;&amp;<span class="code-keyword">this</span>.addFormatting(e.pts,[<span class="code-string">"i"</span>]),<span class="code-number">1</span>==(<span class="code-number">1</span>&amp;r)&amp;&amp;<span class="code-keyword">this</span>.addFormatting(e.pts,[<span class="code-string">"u"</span>]);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isOffsetControlCode(n,r))<span class="code-keyword">this</span>.column_+=<span class="code-number">3</span>&amp;r;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isPAC(n,r)){<span class="code-keyword">var</span> s=Ie.indexOf(<span class="code-number">7968</span>&amp;t);<span class="code-string">"rollUp"</span>===<span class="code-keyword">this</span>.mode_&amp;&amp;(s-<span class="code-keyword">this</span>.rollUpRows_+<span class="code-number">1</span>&lt;<span class="code-number">0</span>&amp;&amp;(s=<span class="code-keyword">this</span>.rollUpRows_<span class="code-number">-1</span>),<span class="code-keyword">this</span>.setRollUp(e.pts,s)),s!==<span class="code-keyword">this</span>.row_&amp;&amp;(<span class="code-keyword">this</span>.clearFormatting(e.pts),<span class="code-keyword">this</span>.row_=s),<span class="code-number">1</span>&amp;r&amp;&amp;<span class="code-number">-1</span>===<span class="code-keyword">this</span>.formatting_.indexOf(<span class="code-string">"u"</span>)&amp;&amp;<span class="code-keyword">this</span>.addFormatting(e.pts,[<span class="code-string">"u"</span>]),<span class="code-number">16</span>==(<span class="code-number">16</span>&amp;t)&amp;&amp;(<span class="code-keyword">this</span>.column_=<span class="code-number">4</span>*((<span class="code-number">14</span>&amp;t)&gt;&gt;<span class="code-number">1</span>)),<span class="code-keyword">this</span>.isColorPAC(r)&amp;&amp;<span class="code-number">14</span>==(<span class="code-number">14</span>&amp;r)&amp;&amp;<span class="code-keyword">this</span>.addFormatting(e.pts,[<span class="code-string">"i"</span>])}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.isNormalChar(n)&amp;&amp;(<span class="code-number">0</span>===r&amp;&amp;(r=<span class="code-literal">null</span>),a=Ue(n),a+=Ue(r),<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e.pts,a),<span class="code-keyword">this</span>.column_+=a.length)}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.lastControlCode_=<span class="code-literal">null</span>}};Oe.prototype=<span class="code-keyword">new</span> G,Oe.prototype.flushDisplayed=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.displayed_.map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">try</span>{<span class="code-keyword">return</span> e.trim()}<span class="code-keyword">catch</span>(e){<span class="code-keyword">return</span> <span class="code-built_in">console</span>.error(<span class="code-string">"Skipping malformed caption."</span>),<span class="code-string">""</span>}}).join(<span class="code-string">"\n"</span>).replace(<span class="code-regexp">/^\n+|\n+$/g</span>,<span class="code-string">""</span>);t.length&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">startPts</span>:<span class="code-keyword">this</span>.startPts_,<span class="code-attr">endPts</span>:e,<span class="code-attr">text</span>:t,<span class="code-attr">stream</span>:<span class="code-keyword">this</span>.name_})},Oe.prototype.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.mode_=<span class="code-string">"popOn"</span>,<span class="code-keyword">this</span>.topRow_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.startPts_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.displayed_=Ae(),<span class="code-keyword">this</span>.nonDisplayed_=Ae(),<span class="code-keyword">this</span>.lastControlCode_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.column_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.row_=<span class="code-number">14</span>,<span class="code-keyword">this</span>.rollUpRows_=<span class="code-number">2</span>,<span class="code-keyword">this</span>.formatting_=[]},Oe.prototype.setConstants=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-number">0</span>===<span class="code-keyword">this</span>.dataChannel_?(<span class="code-keyword">this</span>.BASE_=<span class="code-number">16</span>,<span class="code-keyword">this</span>.EXT_=<span class="code-number">17</span>,<span class="code-keyword">this</span>.CONTROL_=(<span class="code-number">20</span>|<span class="code-keyword">this</span>.field_)&lt;&lt;<span class="code-number">8</span>,<span class="code-keyword">this</span>.OFFSET_=<span class="code-number">23</span>):<span class="code-number">1</span>===<span class="code-keyword">this</span>.dataChannel_&amp;&amp;(<span class="code-keyword">this</span>.BASE_=<span class="code-number">24</span>,<span class="code-keyword">this</span>.EXT_=<span class="code-number">25</span>,<span class="code-keyword">this</span>.CONTROL_=(<span class="code-number">28</span>|<span class="code-keyword">this</span>.field_)&lt;&lt;<span class="code-number">8</span>,<span class="code-keyword">this</span>.OFFSET_=<span class="code-number">31</span>),<span class="code-keyword">this</span>.PADDING_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.RESUME_CAPTION_LOADING_=<span class="code-number">32</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.END_OF_CAPTION_=<span class="code-number">47</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.ROLL_UP_2_ROWS_=<span class="code-number">37</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.ROLL_UP_3_ROWS_=<span class="code-number">38</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.ROLL_UP_4_ROWS_=<span class="code-number">39</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.CARRIAGE_RETURN_=<span class="code-number">45</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.RESUME_DIRECT_CAPTIONING_=<span class="code-number">41</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.BACKSPACE_=<span class="code-number">33</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.ERASE_DISPLAYED_MEMORY_=<span class="code-number">44</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.ERASE_NON_DISPLAYED_MEMORY_=<span class="code-number">46</span>|<span class="code-keyword">this</span>.CONTROL_},Oe.prototype.isSpecialCharacter=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e===<span class="code-keyword">this</span>.EXT_&amp;&amp;t&gt;=<span class="code-number">48</span>&amp;&amp;t&lt;=<span class="code-number">63</span>},Oe.prototype.isExtCharacter=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span>(e===<span class="code-keyword">this</span>.EXT_+<span class="code-number">1</span>||e===<span class="code-keyword">this</span>.EXT_+<span class="code-number">2</span>)&amp;&amp;t&gt;=<span class="code-number">32</span>&amp;&amp;t&lt;=<span class="code-number">63</span>},Oe.prototype.isMidRowCode=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e===<span class="code-keyword">this</span>.EXT_&amp;&amp;t&gt;=<span class="code-number">32</span>&amp;&amp;t&lt;=<span class="code-number">47</span>},Oe.prototype.isOffsetControlCode=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e===<span class="code-keyword">this</span>.OFFSET_&amp;&amp;t&gt;=<span class="code-number">33</span>&amp;&amp;t&lt;=<span class="code-number">35</span>},Oe.prototype.isPAC=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e&gt;=<span class="code-keyword">this</span>.BASE_&amp;&amp;e&lt;<span class="code-keyword">this</span>.BASE_+<span class="code-number">8</span>&amp;&amp;t&gt;=<span class="code-number">64</span>&amp;&amp;t&lt;=<span class="code-number">127</span>},Oe.prototype.isColorPAC=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&gt;=<span class="code-number">64</span>&amp;&amp;e&lt;=<span class="code-number">79</span>||e&gt;=<span class="code-number">96</span>&amp;&amp;e&lt;=<span class="code-number">127</span>},Oe.prototype.isNormalChar=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&gt;=<span class="code-number">32</span>&amp;&amp;e&lt;=<span class="code-number">127</span>},Oe.prototype.setRollUp=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"rollUp"</span>!==<span class="code-keyword">this</span>.mode_&amp;&amp;(<span class="code-keyword">this</span>.row_=<span class="code-number">14</span>,<span class="code-keyword">this</span>.mode_=<span class="code-string">"rollUp"</span>,<span class="code-keyword">this</span>.flushDisplayed(e),<span class="code-keyword">this</span>.nonDisplayed_=Ae(),<span class="code-keyword">this</span>.displayed_=Ae()),<span class="code-keyword">void</span> <span class="code-number">0</span>!==t&amp;&amp;t!==<span class="code-keyword">this</span>.row_)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;<span class="code-keyword">this</span>.rollUpRows_;i++)<span class="code-keyword">this</span>.displayed_[t-i]=<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_-i],<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_-i]=<span class="code-string">""</span>;<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t=<span class="code-keyword">this</span>.row_),<span class="code-keyword">this</span>.topRow_=t-<span class="code-keyword">this</span>.rollUpRows_+<span class="code-number">1</span>},Oe.prototype.addFormatting=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.formatting_=<span class="code-keyword">this</span>.formatting_.concat(t);<span class="code-keyword">var</span> i=t.reduce(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e+<span class="code-string">"&lt;"</span>+t+<span class="code-string">"&gt;"</span>},<span class="code-string">""</span>);<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e,i)},Oe.prototype.clearFormatting=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.formatting_.length){<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.formatting_.reverse().reduce(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e+<span class="code-string">"&lt;/"</span>+t+<span class="code-string">"&gt;"</span>},<span class="code-string">""</span>);<span class="code-keyword">this</span>.formatting_=[],<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e,t)}},Oe.prototype.popOn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_];i+=t,<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_]=i},Oe.prototype.rollUp=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_];i+=t,<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_]=i},Oe.prototype.shiftRowsUp_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e;<span class="code-keyword">for</span>(e=<span class="code-number">0</span>;e&lt;<span class="code-keyword">this</span>.topRow_;e++)<span class="code-keyword">this</span>.displayed_[e]=<span class="code-string">""</span>;<span class="code-keyword">for</span>(e=<span class="code-keyword">this</span>.row_+<span class="code-number">1</span>;e&lt;<span class="code-number">15</span>;e++)<span class="code-keyword">this</span>.displayed_[e]=<span class="code-string">""</span>;<span class="code-keyword">for</span>(e=<span class="code-keyword">this</span>.topRow_;e&lt;<span class="code-keyword">this</span>.row_;e++)<span class="code-keyword">this</span>.displayed_[e]=<span class="code-keyword">this</span>.displayed_[e+<span class="code-number">1</span>];<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_]=<span class="code-string">""</span>},Oe.prototype.paintOn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_];i+=t,<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_]=i};<span class="code-keyword">var</span> Ce={<span class="code-attr">CaptionStream</span>:Le,<span class="code-attr">Cea608Stream</span>:Oe},Pe={<span class="code-attr">H264_STREAM_TYPE</span>:<span class="code-number">27</span>,<span class="code-attr">ADTS_STREAM_TYPE</span>:<span class="code-number">15</span>,<span class="code-attr">METADATA_STREAM_TYPE</span>:<span class="code-number">21</span>},De=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-number">1</span>;<span class="code-keyword">for</span>(e&gt;t&amp;&amp;(i=<span class="code-number">-1</span>);<span class="code-built_in">Math</span>.abs(t-e)&gt;<span class="code-number">4294967296</span>;)e+=<span class="code-number">8589934592</span>*i;<span class="code-keyword">return</span> e},Re=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i,n;e.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.type_=t||<span class="code-string">"shared"</span>,<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-string">"shared"</span>!==<span class="code-keyword">this</span>.type_&amp;&amp;e.type!==<span class="code-keyword">this</span>.type_||(<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n=e.dts),e.dts=De(e.dts,n),e.pts=De(e.pts,n),i=e.dts,<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,e))},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n=i,<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>)},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.flush(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>)},<span class="code-keyword">this</span>.discontinuity=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n=<span class="code-keyword">void</span> <span class="code-number">0</span>,i=<span class="code-keyword">void</span> <span class="code-number">0</span>},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.discontinuity(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)}};Re.prototype=<span class="code-keyword">new</span> G;<span class="code-keyword">var</span> xe,Me=Re,Be=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r=<span class="code-string">""</span>;<span class="code-keyword">for</span>(n=t;n&lt;i;n++)r+=<span class="code-string">"%"</span>+(<span class="code-string">"00"</span>+e[n].toString(<span class="code-number">16</span>)).slice(<span class="code-number">-2</span>);<span class="code-keyword">return</span> r},Ne=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">decodeURIComponent</span>(Be(e,t,i))},qe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e[<span class="code-number">0</span>]&lt;&lt;<span class="code-number">21</span>|e[<span class="code-number">1</span>]&lt;&lt;<span class="code-number">14</span>|e[<span class="code-number">2</span>]&lt;&lt;<span class="code-number">7</span>|e[<span class="code-number">3</span>]},Fe={<span class="code-attr">TXXX</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">if</span>(<span class="code-number">3</span>===e.data[<span class="code-number">0</span>]){<span class="code-keyword">for</span>(t=<span class="code-number">1</span>;t&lt;e.data.length;t++)<span class="code-keyword">if</span>(<span class="code-number">0</span>===e.data[t]){e.description=Ne(e.data,<span class="code-number">1</span>,t),e.value=Ne(e.data,t+<span class="code-number">1</span>,e.data.length).replace(<span class="code-regexp">/\0*$/</span>,<span class="code-string">""</span>);<span class="code-keyword">break</span>}e.data=e.value}},<span class="code-attr">WXXX</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">if</span>(<span class="code-number">3</span>===e.data[<span class="code-number">0</span>])<span class="code-keyword">for</span>(t=<span class="code-number">1</span>;t&lt;e.data.length;t++)<span class="code-keyword">if</span>(<span class="code-number">0</span>===e.data[t]){e.description=Ne(e.data,<span class="code-number">1</span>,t),e.url=Ne(e.data,t+<span class="code-number">1</span>,e.data.length);<span class="code-keyword">break</span>}},<span class="code-attr">PRIV</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i;<span class="code-keyword">for</span>(t=<span class="code-number">0</span>;t&lt;e.data.length;t++)<span class="code-keyword">if</span>(<span class="code-number">0</span>===e.data[t]){e.owner=(i=e.data,<span class="code-built_in">unescape</span>(Be(i,<span class="code-number">0</span>,t)));<span class="code-keyword">break</span>}e.privateData=e.data.subarray(t+<span class="code-number">1</span>),e.data=e.privateData}};(xe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i={<span class="code-attr">debug</span>:!(!e||!e.debug),<span class="code-attr">descriptor</span>:e&amp;&amp;e.descriptor},n=<span class="code-number">0</span>,r=[],a=<span class="code-number">0</span>;<span class="code-keyword">if</span>(xe.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.dispatchType=Pe.METADATA_STREAM_TYPE.toString(<span class="code-number">16</span>),i.descriptor)<span class="code-keyword">for</span>(t=<span class="code-number">0</span>;t&lt;i.descriptor.length;t++)<span class="code-keyword">this</span>.dispatchType+=(<span class="code-string">"00"</span>+i.descriptor[t].toString(<span class="code-number">16</span>)).slice(<span class="code-number">-2</span>);<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,s,o,u,d;<span class="code-keyword">if</span>(<span class="code-string">"timed-metadata"</span>===e.type)<span class="code-keyword">if</span>(e.dataAlignmentIndicator&amp;&amp;(a=<span class="code-number">0</span>,r.length=<span class="code-number">0</span>),<span class="code-number">0</span>===r.length&amp;&amp;(e.data.length&lt;<span class="code-number">10</span>||e.data[<span class="code-number">0</span>]!==<span class="code-string">"I"</span>.charCodeAt(<span class="code-number">0</span>)||e.data[<span class="code-number">1</span>]!==<span class="code-string">"D"</span>.charCodeAt(<span class="code-number">0</span>)||e.data[<span class="code-number">2</span>]!==<span class="code-string">"3"</span>.charCodeAt(<span class="code-number">0</span>)))i.debug&amp;&amp;<span class="code-built_in">console</span>.log(<span class="code-string">"Skipping unrecognized metadata packet"</span>);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(r.push(e),a+=e.data.byteLength,<span class="code-number">1</span>===r.length&amp;&amp;(n=qe(e.data.subarray(<span class="code-number">6</span>,<span class="code-number">10</span>)),n+=<span class="code-number">10</span>),!(a&lt;n)){<span class="code-keyword">for</span>(t={<span class="code-attr">data</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(n),<span class="code-attr">frames</span>:[],<span class="code-attr">pts</span>:r[<span class="code-number">0</span>].pts,<span class="code-attr">dts</span>:r[<span class="code-number">0</span>].dts},d=<span class="code-number">0</span>;d&lt;n;)t.data.set(r[<span class="code-number">0</span>].data.subarray(<span class="code-number">0</span>,n-d),d),d+=r[<span class="code-number">0</span>].data.byteLength,a-=r[<span class="code-number">0</span>].data.byteLength,r.shift();s=<span class="code-number">10</span>,<span class="code-number">64</span>&amp;t.data[<span class="code-number">5</span>]&amp;&amp;(s+=<span class="code-number">4</span>,s+=qe(t.data.subarray(<span class="code-number">10</span>,<span class="code-number">14</span>)),n-=qe(t.data.subarray(<span class="code-number">16</span>,<span class="code-number">20</span>)));<span class="code-keyword">do</span>{<span class="code-keyword">if</span>((o=qe(t.data.subarray(s+<span class="code-number">4</span>,s+<span class="code-number">8</span>)))&lt;<span class="code-number">1</span>)<span class="code-keyword">return</span> <span class="code-built_in">console</span>.log(<span class="code-string">"Malformed ID3 frame encountered. Skipping metadata parsing."</span>);<span class="code-keyword">if</span>((u={<span class="code-attr">id</span>:<span class="code-built_in">String</span>.fromCharCode(t.data[s],t.data[s+<span class="code-number">1</span>],t.data[s+<span class="code-number">2</span>],t.data[s+<span class="code-number">3</span>]),<span class="code-attr">data</span>:t.data.subarray(s+<span class="code-number">10</span>,s+o+<span class="code-number">10</span>)}).key=u.id,Fe[u.id]&amp;&amp;(Fe[u.id](u),<span class="code-string">"com.apple.streaming.transportStreamTimestamp"</span>===u.owner)){<span class="code-keyword">var</span> l=u.data,h=(<span class="code-number">1</span>&amp;l[<span class="code-number">3</span>])&lt;&lt;<span class="code-number">30</span>|l[<span class="code-number">4</span>]&lt;&lt;<span class="code-number">22</span>|l[<span class="code-number">5</span>]&lt;&lt;<span class="code-number">14</span>|l[<span class="code-number">6</span>]&lt;&lt;<span class="code-number">6</span>|l[<span class="code-number">7</span>]&gt;&gt;&gt;<span class="code-number">2</span>;h*=<span class="code-number">4</span>,h+=<span class="code-number">3</span>&amp;l[<span class="code-number">7</span>],u.timeStamp=h,<span class="code-keyword">void</span> <span class="code-number">0</span>===t.pts&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>===t.dts&amp;&amp;(t.pts=u.timeStamp,t.dts=u.timeStamp),<span class="code-keyword">this</span>.trigger(<span class="code-string">"timestamp"</span>,u)}t.frames.push(u),s+=<span class="code-number">10</span>,s+=o}<span class="code-keyword">while</span>(s&lt;n);<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,t)}}}).prototype=<span class="code-keyword">new</span> G;<span class="code-keyword">var</span> He,Ge,je,Ve=xe,We=Me;(He=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(<span class="code-number">188</span>),t=<span class="code-number">0</span>;He.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n,r=<span class="code-number">0</span>,a=<span class="code-number">188</span>;<span class="code-keyword">for</span>(t?((n=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(i.byteLength+t)).set(e.subarray(<span class="code-number">0</span>,t)),n.set(i,t),t=<span class="code-number">0</span>):n=i;a&lt;n.byteLength;)<span class="code-number">71</span>!==n[r]||<span class="code-number">71</span>!==n[a]?(r++,a++):(<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,n.subarray(r,a)),r+=<span class="code-number">188</span>,a+=<span class="code-number">188</span>);r&lt;n.byteLength&amp;&amp;(e.set(n.subarray(r),<span class="code-number">0</span>),t=n.byteLength-r)},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-number">188</span>===t&amp;&amp;<span class="code-number">71</span>===e[<span class="code-number">0</span>]&amp;&amp;(<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,e),t=<span class="code-number">0</span>),<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>)},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.flush(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>)},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)}}).prototype=<span class="code-keyword">new</span> G,(Ge=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t,i,n;Ge.prototype.init.call(<span class="code-keyword">this</span>),n=<span class="code-keyword">this</span>,<span class="code-keyword">this</span>.packetsWaitingForPmt=[],<span class="code-keyword">this</span>.programMapTable=<span class="code-keyword">void</span> <span class="code-number">0</span>,e=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,n</span>)</span>{<span class="code-keyword">var</span> r=<span class="code-number">0</span>;n.payloadUnitStartIndicator&amp;&amp;(r+=e[r]+<span class="code-number">1</span>),<span class="code-string">"pat"</span>===n.type?t(e.subarray(r),n):i(e.subarray(r),n)},t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{t.section_number=e[<span class="code-number">7</span>],t.last_section_number=e[<span class="code-number">8</span>],n.pmtPid=(<span class="code-number">31</span>&amp;e[<span class="code-number">10</span>])&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">11</span>],t.pmtPid=n.pmtPid},i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,r;<span class="code-keyword">if</span>(<span class="code-number">1</span>&amp;e[<span class="code-number">5</span>]){<span class="code-keyword">for</span>(n.programMapTable={<span class="code-attr">video</span>:<span class="code-literal">null</span>,<span class="code-attr">audio</span>:<span class="code-literal">null</span>,<span class="code-string">"timed-metadata"</span>:{}},i=<span class="code-number">3</span>+((<span class="code-number">15</span>&amp;e[<span class="code-number">1</span>])&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">2</span>])<span class="code-number">-4</span>,r=<span class="code-number">12</span>+((<span class="code-number">15</span>&amp;e[<span class="code-number">10</span>])&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">11</span>]);r&lt;i;){<span class="code-keyword">var</span> a=e[r],s=(<span class="code-number">31</span>&amp;e[r+<span class="code-number">1</span>])&lt;&lt;<span class="code-number">8</span>|e[r+<span class="code-number">2</span>];a===Pe.H264_STREAM_TYPE&amp;&amp;<span class="code-literal">null</span>===n.programMapTable.video?n.programMapTable.video=s:a===Pe.ADTS_STREAM_TYPE&amp;&amp;<span class="code-literal">null</span>===n.programMapTable.audio?n.programMapTable.audio=s:a===Pe.METADATA_STREAM_TYPE&amp;&amp;(n.programMapTable[<span class="code-string">"timed-metadata"</span>][s]=a),r+=<span class="code-number">5</span>+((<span class="code-number">15</span>&amp;e[r+<span class="code-number">3</span>])&lt;&lt;<span class="code-number">8</span>|e[r+<span class="code-number">4</span>])}t.programMapTable=n.programMapTable}},<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i={},n=<span class="code-number">4</span>;<span class="code-keyword">if</span>(i.payloadUnitStartIndicator=!!(<span class="code-number">64</span>&amp;t[<span class="code-number">1</span>]),i.pid=<span class="code-number">31</span>&amp;t[<span class="code-number">1</span>],i.pid&lt;&lt;=<span class="code-number">8</span>,i.pid|=t[<span class="code-number">2</span>],(<span class="code-number">48</span>&amp;t[<span class="code-number">3</span>])&gt;&gt;&gt;<span class="code-number">4</span>&gt;<span class="code-number">1</span>&amp;&amp;(n+=t[n]+<span class="code-number">1</span>),<span class="code-number">0</span>===i.pid)i.type=<span class="code-string">"pat"</span>,e(t.subarray(n),i),<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(i.pid===<span class="code-keyword">this</span>.pmtPid)<span class="code-keyword">for</span>(i.type=<span class="code-string">"pmt"</span>,e(t.subarray(n),i),<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">this</span>.packetsWaitingForPmt.length;)<span class="code-keyword">this</span>.processPes_.apply(<span class="code-keyword">this</span>,<span class="code-keyword">this</span>.packetsWaitingForPmt.shift());<span class="code-keyword">else</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===<span class="code-keyword">this</span>.programMapTable?<span class="code-keyword">this</span>.packetsWaitingForPmt.push([t,n,i]):<span class="code-keyword">this</span>.processPes_(t,n,i)},<span class="code-keyword">this</span>.processPes_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{i.pid===<span class="code-keyword">this</span>.programMapTable.video?i.streamType=Pe.H264_STREAM_TYPE:i.pid===<span class="code-keyword">this</span>.programMapTable.audio?i.streamType=Pe.ADTS_STREAM_TYPE:i.streamType=<span class="code-keyword">this</span>.programMapTable[<span class="code-string">"timed-metadata"</span>][i.pid],i.type=<span class="code-string">"pes"</span>,i.data=e.subarray(t),<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,i)}}).prototype=<span class="code-keyword">new</span> G,Ge.STREAM_TYPES={<span class="code-attr">h264</span>:<span class="code-number">27</span>,<span class="code-attr">adts</span>:<span class="code-number">15</span>},(je=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t=<span class="code-keyword">this</span>,i={<span class="code-attr">data</span>:[],<span class="code-attr">size</span>:<span class="code-number">0</span>},n={<span class="code-attr">data</span>:[],<span class="code-attr">size</span>:<span class="code-number">0</span>},r={<span class="code-attr">data</span>:[],<span class="code-attr">size</span>:<span class="code-number">0</span>},a=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i,n</span>)</span>{<span class="code-keyword">var</span> r,a,s=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.size),o={<span class="code-attr">type</span>:i},u=<span class="code-number">0</span>,d=<span class="code-number">0</span>;<span class="code-keyword">if</span>(e.data.length&amp;&amp;!(e.size&lt;<span class="code-number">9</span>)){<span class="code-keyword">for</span>(o.trackId=e.data[<span class="code-number">0</span>].pid,u=<span class="code-number">0</span>;u&lt;e.data.length;u++)a=e.data[u],s.set(a.data,d),d+=a.data.byteLength;<span class="code-keyword">var</span> l,h,c;l=s,(h=o).packetLength=<span class="code-number">6</span>+(l[<span class="code-number">4</span>]&lt;&lt;<span class="code-number">8</span>|l[<span class="code-number">5</span>]),h.dataAlignmentIndicator=<span class="code-number">0</span>!=(<span class="code-number">4</span>&amp;l[<span class="code-number">6</span>]),<span class="code-number">192</span>&amp;(c=l[<span class="code-number">7</span>])&amp;&amp;(h.pts=(<span class="code-number">14</span>&amp;l[<span class="code-number">9</span>])&lt;&lt;<span class="code-number">27</span>|(<span class="code-number">255</span>&amp;l[<span class="code-number">10</span>])&lt;&lt;<span class="code-number">20</span>|(<span class="code-number">254</span>&amp;l[<span class="code-number">11</span>])&lt;&lt;<span class="code-number">12</span>|(<span class="code-number">255</span>&amp;l[<span class="code-number">12</span>])&lt;&lt;<span class="code-number">5</span>|(<span class="code-number">254</span>&amp;l[<span class="code-number">13</span>])&gt;&gt;&gt;<span class="code-number">3</span>,h.pts*=<span class="code-number">4</span>,h.pts+=(<span class="code-number">6</span>&amp;l[<span class="code-number">13</span>])&gt;&gt;&gt;<span class="code-number">1</span>,h.dts=h.pts,<span class="code-number">64</span>&amp;c&amp;&amp;(h.dts=(<span class="code-number">14</span>&amp;l[<span class="code-number">14</span>])&lt;&lt;<span class="code-number">27</span>|(<span class="code-number">255</span>&amp;l[<span class="code-number">15</span>])&lt;&lt;<span class="code-number">20</span>|(<span class="code-number">254</span>&amp;l[<span class="code-number">16</span>])&lt;&lt;<span class="code-number">12</span>|(<span class="code-number">255</span>&amp;l[<span class="code-number">17</span>])&lt;&lt;<span class="code-number">5</span>|(<span class="code-number">254</span>&amp;l[<span class="code-number">18</span>])&gt;&gt;&gt;<span class="code-number">3</span>,h.dts*=<span class="code-number">4</span>,h.dts+=(<span class="code-number">6</span>&amp;l[<span class="code-number">18</span>])&gt;&gt;&gt;<span class="code-number">1</span>)),h.data=l.subarray(<span class="code-number">9</span>+l[<span class="code-number">8</span>]),r=<span class="code-string">"video"</span>===i||o.packetLength&lt;=e.size,(n||r)&amp;&amp;(e.size=<span class="code-number">0</span>,e.data.length=<span class="code-number">0</span>),r&amp;&amp;t.trigger(<span class="code-string">"data"</span>,o)}};je.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">s</span>)</span>{({<span class="code-attr">pat</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{},<span class="code-attr">pes</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t;<span class="code-keyword">switch</span>(s.streamType){<span class="code-keyword">case</span> Pe.H264_STREAM_TYPE:<span class="code-keyword">case</span> Pe.H264_STREAM_TYPE:e=i,t=<span class="code-string">"video"</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span> Pe.ADTS_STREAM_TYPE:e=n,t=<span class="code-string">"audio"</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span> Pe.METADATA_STREAM_TYPE:e=r,t=<span class="code-string">"timed-metadata"</span>;<span class="code-keyword">break</span>;<span class="code-keyword">default</span>:<span class="code-keyword">return</span>}s.payloadUnitStartIndicator&amp;&amp;a(e,t,!<span class="code-number">0</span>),e.data.push(s),e.size+=s.data.byteLength},<span class="code-attr">pmt</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i={<span class="code-attr">type</span>:<span class="code-string">"metadata"</span>,<span class="code-attr">tracks</span>:[]};<span class="code-literal">null</span>!==(e=s.programMapTable).video&amp;&amp;i.tracks.push({<span class="code-attr">timelineStartInfo</span>:{<span class="code-attr">baseMediaDecodeTime</span>:<span class="code-number">0</span>},<span class="code-attr">id</span>:+e.video,<span class="code-attr">codec</span>:<span class="code-string">"avc"</span>,<span class="code-attr">type</span>:<span class="code-string">"video"</span>}),<span class="code-literal">null</span>!==e.audio&amp;&amp;i.tracks.push({<span class="code-attr">timelineStartInfo</span>:{<span class="code-attr">baseMediaDecodeTime</span>:<span class="code-number">0</span>},<span class="code-attr">id</span>:+e.audio,<span class="code-attr">codec</span>:<span class="code-string">"adts"</span>,<span class="code-attr">type</span>:<span class="code-string">"audio"</span>}),t.trigger(<span class="code-string">"data"</span>,i)}})[s.type]()},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i.size=<span class="code-number">0</span>,i.data.length=<span class="code-number">0</span>,n.size=<span class="code-number">0</span>,n.data.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)},<span class="code-keyword">this</span>.flushStreams_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{a(i,<span class="code-string">"video"</span>),a(n,<span class="code-string">"audio"</span>),a(r,<span class="code-string">"timed-metadata"</span>)},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.flushStreams_(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>)}}).prototype=<span class="code-keyword">new</span> G;<span class="code-keyword">var</span> ze={<span class="code-attr">PAT_PID</span>:<span class="code-number">0</span>,<span class="code-attr">MP2T_PACKET_LENGTH</span>:<span class="code-number">188</span>,<span class="code-attr">TransportPacketStream</span>:He,<span class="code-attr">TransportParseStream</span>:Ge,<span class="code-attr">ElementaryStream</span>:je,<span class="code-attr">TimestampRolloverStream</span>:We,<span class="code-attr">CaptionStream</span>:Ce.CaptionStream,<span class="code-attr">Cea608Stream</span>:Ce.Cea608Stream,<span class="code-attr">MetadataStream</span>:Ve};<span class="code-keyword">for</span>(<span class="code-keyword">var</span> Xe <span class="code-keyword">in</span> Pe)Pe.hasOwnProperty(Xe)&amp;&amp;(ze[Xe]=Pe[Xe]);<span class="code-keyword">var</span> Ye,Ke=ze,$e=de,Qe=[<span class="code-number">96e3</span>,<span class="code-number">88200</span>,<span class="code-number">64e3</span>,<span class="code-number">48e3</span>,<span class="code-number">44100</span>,<span class="code-number">32e3</span>,<span class="code-number">24e3</span>,<span class="code-number">22050</span>,<span class="code-number">16e3</span>,<span class="code-number">12e3</span>,<span class="code-number">11025</span>,<span class="code-number">8e3</span>,<span class="code-number">7350</span>];(Ye=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=<span class="code-number">0</span>;Ye.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-keyword">var</span> r,a,s,o,u,d,l=<span class="code-number">0</span>;<span class="code-keyword">if</span>(e||(i=<span class="code-number">0</span>),<span class="code-string">"audio"</span>===n.type)<span class="code-keyword">for</span>(t?(o=t,(t=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(o.byteLength+n.data.byteLength)).set(o),t.set(n.data,o.byteLength)):t=n.data;l+<span class="code-number">5</span>&lt;t.length;)<span class="code-keyword">if</span>(<span class="code-number">255</span>===t[l]&amp;&amp;<span class="code-number">240</span>==(<span class="code-number">246</span>&amp;t[l+<span class="code-number">1</span>])){<span class="code-keyword">if</span>(a=<span class="code-number">2</span>*(<span class="code-number">1</span>&amp;~t[l+<span class="code-number">1</span>]),r=(<span class="code-number">3</span>&amp;t[l+<span class="code-number">3</span>])&lt;&lt;<span class="code-number">11</span>|t[l+<span class="code-number">4</span>]&lt;&lt;<span class="code-number">3</span>|(<span class="code-number">224</span>&amp;t[l+<span class="code-number">5</span>])&gt;&gt;<span class="code-number">5</span>,d=(u=<span class="code-number">1024</span>*(<span class="code-number">1</span>+(<span class="code-number">3</span>&amp;t[l+<span class="code-number">6</span>])))*$e/Qe[(<span class="code-number">60</span>&amp;t[l+<span class="code-number">2</span>])&gt;&gt;&gt;<span class="code-number">2</span>],s=l+r,t.byteLength&lt;s)<span class="code-keyword">return</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">pts</span>:n.pts+i*d,<span class="code-attr">dts</span>:n.dts+i*d,<span class="code-attr">sampleCount</span>:u,<span class="code-attr">audioobjecttype</span>:<span class="code-number">1</span>+(t[l+<span class="code-number">2</span>]&gt;&gt;&gt;<span class="code-number">6</span>&amp;<span class="code-number">3</span>),<span class="code-attr">channelcount</span>:(<span class="code-number">1</span>&amp;t[l+<span class="code-number">2</span>])&lt;&lt;<span class="code-number">2</span>|(<span class="code-number">192</span>&amp;t[l+<span class="code-number">3</span>])&gt;&gt;&gt;<span class="code-number">6</span>,<span class="code-attr">samplerate</span>:Qe[(<span class="code-number">60</span>&amp;t[l+<span class="code-number">2</span>])&gt;&gt;&gt;<span class="code-number">2</span>],<span class="code-attr">samplingfrequencyindex</span>:(<span class="code-number">60</span>&amp;t[l+<span class="code-number">2</span>])&gt;&gt;&gt;<span class="code-number">2</span>,<span class="code-attr">samplesize</span>:<span class="code-number">16</span>,<span class="code-attr">data</span>:t.subarray(l+<span class="code-number">7</span>+a,s)}),i++,t.byteLength===s)<span class="code-keyword">return</span> <span class="code-keyword">void</span>(t=<span class="code-keyword">void</span> <span class="code-number">0</span>);t=t.subarray(s)}<span class="code-keyword">else</span> l++},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>)},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t=<span class="code-keyword">void</span> <span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t=<span class="code-keyword">void</span> <span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>)}}).prototype=<span class="code-keyword">new</span> G;<span class="code-keyword">var</span> Je,Ze,et,tt=Ye,it=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.byteLength,i=<span class="code-number">0</span>,n=<span class="code-number">0</span>;<span class="code-keyword">this</span>.length=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-number">8</span>*t},<span class="code-keyword">this</span>.bitsAvailable=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-number">8</span>*t+n},<span class="code-keyword">this</span>.loadWord=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> r=e.byteLength-t,a=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(<span class="code-number">4</span>),s=<span class="code-built_in">Math</span>.min(<span class="code-number">4</span>,t);<span class="code-keyword">if</span>(<span class="code-number">0</span>===s)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"no bytes available"</span>);a.set(e.subarray(r,r+s)),i=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(a.buffer).getUint32(<span class="code-number">0</span>),n=<span class="code-number">8</span>*s,t-=s},<span class="code-keyword">this</span>.skipBits=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> r;n&gt;e?(i&lt;&lt;=e,n-=e):(e-=n,e-=<span class="code-number">8</span>*(r=<span class="code-built_in">Math</span>.floor(e/<span class="code-number">8</span>)),t-=r,<span class="code-keyword">this</span>.loadWord(),i&lt;&lt;=e,n-=e)},<span class="code-keyword">this</span>.readBits=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> r=<span class="code-built_in">Math</span>.min(n,e),a=i&gt;&gt;&gt;<span class="code-number">32</span>-r;<span class="code-keyword">return</span>(n-=r)&gt;<span class="code-number">0</span>?i&lt;&lt;=r:t&gt;<span class="code-number">0</span>&amp;&amp;<span class="code-keyword">this</span>.loadWord(),(r=e-r)&gt;<span class="code-number">0</span>?a&lt;&lt;r|<span class="code-keyword">this</span>.readBits(r):a},<span class="code-keyword">this</span>.skipLeadingZeros=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e;<span class="code-keyword">for</span>(e=<span class="code-number">0</span>;e&lt;n;++e)<span class="code-keyword">if</span>(<span class="code-number">0</span>!=(i&amp;<span class="code-number">2147483648</span>&gt;&gt;&gt;e))<span class="code-keyword">return</span> i&lt;&lt;=e,n-=e,e;<span class="code-keyword">return</span> <span class="code-keyword">this</span>.loadWord(),e+<span class="code-keyword">this</span>.skipLeadingZeros()},<span class="code-keyword">this</span>.skipUnsignedExpGolomb=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.skipBits(<span class="code-number">1</span>+<span class="code-keyword">this</span>.skipLeadingZeros())},<span class="code-keyword">this</span>.skipExpGolomb=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.skipBits(<span class="code-number">1</span>+<span class="code-keyword">this</span>.skipLeadingZeros())},<span class="code-keyword">this</span>.readUnsignedExpGolomb=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.skipLeadingZeros();<span class="code-keyword">return</span> <span class="code-keyword">this</span>.readBits(e+<span class="code-number">1</span>)<span class="code-number">-1</span>},<span class="code-keyword">this</span>.readExpGolomb=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.readUnsignedExpGolomb();<span class="code-keyword">return</span> <span class="code-number">1</span>&amp;e?<span class="code-number">1</span>+e&gt;&gt;&gt;<span class="code-number">1</span>:<span class="code-number">-1</span>*(e&gt;&gt;&gt;<span class="code-number">1</span>)},<span class="code-keyword">this</span>.readBoolean=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-number">1</span>===<span class="code-keyword">this</span>.readBits(<span class="code-number">1</span>)},<span class="code-keyword">this</span>.readUnsignedByte=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.readBits(<span class="code-number">8</span>)},<span class="code-keyword">this</span>.loadWord()};(Ze=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t,i=<span class="code-number">0</span>;Ze.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-keyword">var</span> r;t?((r=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(t.byteLength+n.data.byteLength)).set(t),r.set(n.data,t.byteLength),t=r):t=n.data;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a=t.byteLength;i&lt;a<span class="code-number">-3</span>;i++)<span class="code-keyword">if</span>(<span class="code-number">1</span>===t[i+<span class="code-number">2</span>]){e=i+<span class="code-number">5</span>;<span class="code-keyword">break</span>}<span class="code-keyword">for</span>(;e&lt;a;)<span class="code-keyword">switch</span>(t[e]){<span class="code-keyword">case</span> <span class="code-number">0</span>:<span class="code-keyword">if</span>(<span class="code-number">0</span>!==t[e<span class="code-number">-1</span>]){e+=<span class="code-number">2</span>;<span class="code-keyword">break</span>}<span class="code-keyword">if</span>(<span class="code-number">0</span>!==t[e<span class="code-number">-2</span>]){e++;<span class="code-keyword">break</span>}i+<span class="code-number">3</span>!==e<span class="code-number">-2</span>&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,t.subarray(i+<span class="code-number">3</span>,e<span class="code-number">-2</span>));<span class="code-keyword">do</span>{e++}<span class="code-keyword">while</span>(<span class="code-number">1</span>!==t[e]&amp;&amp;e&lt;a);i=e<span class="code-number">-2</span>,e+=<span class="code-number">3</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">1</span>:<span class="code-keyword">if</span>(<span class="code-number">0</span>!==t[e<span class="code-number">-1</span>]||<span class="code-number">0</span>!==t[e<span class="code-number">-2</span>]){e+=<span class="code-number">3</span>;<span class="code-keyword">break</span>}<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,t.subarray(i+<span class="code-number">3</span>,e<span class="code-number">-2</span>)),i=e<span class="code-number">-2</span>,e+=<span class="code-number">3</span>;<span class="code-keyword">break</span>;<span class="code-keyword">default</span>:e+=<span class="code-number">3</span>}t=t.subarray(i),e-=i,i=<span class="code-number">0</span>},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t=<span class="code-literal">null</span>,i=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t&amp;&amp;t.byteLength&gt;<span class="code-number">3</span>&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,t.subarray(i+<span class="code-number">3</span>)),t=<span class="code-literal">null</span>,i=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>)},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.flush(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>)}}).prototype=<span class="code-keyword">new</span> G,et={<span class="code-number">100</span>:!<span class="code-number">0</span>,<span class="code-number">110</span>:!<span class="code-number">0</span>,<span class="code-number">122</span>:!<span class="code-number">0</span>,<span class="code-number">244</span>:!<span class="code-number">0</span>,<span class="code-number">44</span>:!<span class="code-number">0</span>,<span class="code-number">83</span>:!<span class="code-number">0</span>,<span class="code-number">86</span>:!<span class="code-number">0</span>,<span class="code-number">118</span>:!<span class="code-number">0</span>,<span class="code-number">128</span>:!<span class="code-number">0</span>,<span class="code-number">138</span>:!<span class="code-number">0</span>,<span class="code-number">139</span>:!<span class="code-number">0</span>,<span class="code-number">134</span>:!<span class="code-number">0</span>},(Je=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t,i,n,r,a,s,o=<span class="code-keyword">new</span> Ze;Je.prototype.init.call(<span class="code-keyword">this</span>),e=<span class="code-keyword">this</span>,<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-string">"video"</span>===e.type&amp;&amp;(t=e.trackId,i=e.pts,n=e.dts,o.push(e))},o.on(<span class="code-string">"data"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">s</span>)</span>{<span class="code-keyword">var</span> o={<span class="code-attr">trackId</span>:t,<span class="code-attr">pts</span>:i,<span class="code-attr">dts</span>:n,<span class="code-attr">data</span>:s};<span class="code-keyword">switch</span>(<span class="code-number">31</span>&amp;s[<span class="code-number">0</span>]){<span class="code-keyword">case</span> <span class="code-number">5</span>:o.nalUnitType=<span class="code-string">"slice_layer_without_partitioning_rbsp_idr"</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">6</span>:o.nalUnitType=<span class="code-string">"sei_rbsp"</span>,o.escapedRBSP=r(s.subarray(<span class="code-number">1</span>));<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">7</span>:o.nalUnitType=<span class="code-string">"seq_parameter_set_rbsp"</span>,o.escapedRBSP=r(s.subarray(<span class="code-number">1</span>)),o.config=a(o.escapedRBSP);<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">8</span>:o.nalUnitType=<span class="code-string">"pic_parameter_set_rbsp"</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">9</span>:o.nalUnitType=<span class="code-string">"access_unit_delimiter_rbsp"</span>}e.trigger(<span class="code-string">"data"</span>,o)}),o.on(<span class="code-string">"done"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"done"</span>)}),o.on(<span class="code-string">"partialdone"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"partialdone"</span>)}),o.on(<span class="code-string">"reset"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"reset"</span>)}),o.on(<span class="code-string">"endedtimeline"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"endedtimeline"</span>)}),<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{o.flush()},<span class="code-keyword">this</span>.partialFlush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{o.partialFlush()},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{o.reset()},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{o.endTimeline()},s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n=<span class="code-number">8</span>,r=<span class="code-number">8</span>;<span class="code-keyword">for</span>(i=<span class="code-number">0</span>;i&lt;e;i++)<span class="code-number">0</span>!==r&amp;&amp;(r=(n+t.readExpGolomb()+<span class="code-number">256</span>)%<span class="code-number">256</span>),n=<span class="code-number">0</span>===r?n:r},r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t,i,n=e.byteLength,r=[],a=<span class="code-number">1</span>;a&lt;n<span class="code-number">-2</span>;)<span class="code-number">0</span>===e[a]&amp;&amp;<span class="code-number">0</span>===e[a+<span class="code-number">1</span>]&amp;&amp;<span class="code-number">3</span>===e[a+<span class="code-number">2</span>]?(r.push(a+<span class="code-number">2</span>),a+=<span class="code-number">2</span>):a++;<span class="code-keyword">if</span>(<span class="code-number">0</span>===r.length)<span class="code-keyword">return</span> e;t=n-r.length,i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(t);<span class="code-keyword">var</span> s=<span class="code-number">0</span>;<span class="code-keyword">for</span>(a=<span class="code-number">0</span>;a&lt;t;s++,a++)s===r[<span class="code-number">0</span>]&amp;&amp;(s++,r.shift()),i[a]=e[s];<span class="code-keyword">return</span> i},a=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n,r,a,o,u,d,l,h,c,f,p,m=<span class="code-number">0</span>,g=<span class="code-number">0</span>,y=<span class="code-number">0</span>,_=<span class="code-number">0</span>,v=<span class="code-number">1</span>;<span class="code-keyword">if</span>(i=(t=<span class="code-keyword">new</span> it(e)).readUnsignedByte(),r=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),et[i]&amp;&amp;(<span class="code-number">3</span>===(a=t.readUnsignedExpGolomb())&amp;&amp;t.skipBits(<span class="code-number">1</span>),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(<span class="code-number">1</span>),t.readBoolean()))<span class="code-keyword">for</span>(c=<span class="code-number">3</span>!==a?<span class="code-number">8</span>:<span class="code-number">12</span>,p=<span class="code-number">0</span>;p&lt;c;p++)t.readBoolean()&amp;&amp;s(p&lt;<span class="code-number">6</span>?<span class="code-number">16</span>:<span class="code-number">64</span>,t);<span class="code-keyword">if</span>(t.skipUnsignedExpGolomb(),<span class="code-number">0</span>===(o=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-number">1</span>===o)<span class="code-keyword">for</span>(t.skipBits(<span class="code-number">1</span>),t.skipExpGolomb(),t.skipExpGolomb(),u=t.readUnsignedExpGolomb(),p=<span class="code-number">0</span>;p&lt;u;p++)t.skipExpGolomb();<span class="code-keyword">if</span>(t.skipUnsignedExpGolomb(),t.skipBits(<span class="code-number">1</span>),d=t.readUnsignedExpGolomb(),l=t.readUnsignedExpGolomb(),<span class="code-number">0</span>===(h=t.readBits(<span class="code-number">1</span>))&amp;&amp;t.skipBits(<span class="code-number">1</span>),t.skipBits(<span class="code-number">1</span>),t.readBoolean()&amp;&amp;(m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb(),_=t.readUnsignedExpGolomb()),t.readBoolean()&amp;&amp;t.readBoolean()){<span class="code-keyword">switch</span>(t.readUnsignedByte()){<span class="code-keyword">case</span> <span class="code-number">1</span>:f=[<span class="code-number">1</span>,<span class="code-number">1</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">2</span>:f=[<span class="code-number">12</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">3</span>:f=[<span class="code-number">10</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">4</span>:f=[<span class="code-number">16</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">5</span>:f=[<span class="code-number">40</span>,<span class="code-number">33</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">6</span>:f=[<span class="code-number">24</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">7</span>:f=[<span class="code-number">20</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">8</span>:f=[<span class="code-number">32</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">9</span>:f=[<span class="code-number">80</span>,<span class="code-number">33</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">10</span>:f=[<span class="code-number">18</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">11</span>:f=[<span class="code-number">15</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">12</span>:f=[<span class="code-number">64</span>,<span class="code-number">33</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">13</span>:f=[<span class="code-number">160</span>,<span class="code-number">99</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">14</span>:f=[<span class="code-number">4</span>,<span class="code-number">3</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">15</span>:f=[<span class="code-number">3</span>,<span class="code-number">2</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">16</span>:f=[<span class="code-number">2</span>,<span class="code-number">1</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">255</span>:f=[t.readUnsignedByte()&lt;&lt;<span class="code-number">8</span>|t.readUnsignedByte(),t.readUnsignedByte()&lt;&lt;<span class="code-number">8</span>|t.readUnsignedByte()]}f&amp;&amp;(v=f[<span class="code-number">0</span>]/f[<span class="code-number">1</span>])}<span class="code-keyword">return</span>{<span class="code-attr">profileIdc</span>:i,<span class="code-attr">levelIdc</span>:n,<span class="code-attr">profileCompatibility</span>:r,<span class="code-attr">width</span>:<span class="code-built_in">Math</span>.ceil((<span class="code-number">16</span>*(d+<span class="code-number">1</span>)<span class="code-number">-2</span>*m<span class="code-number">-2</span>*g)*v),<span class="code-attr">height</span>:(<span class="code-number">2</span>-h)*(l+<span class="code-number">1</span>)*<span class="code-number">16</span><span class="code-number">-2</span>*y<span class="code-number">-2</span>*_,<span class="code-attr">sarRatio</span>:f}}}).prototype=<span class="code-keyword">new</span> G;<span class="code-keyword">var</span> nt,rt={<span class="code-attr">H264Stream</span>:Je,<span class="code-attr">NalByteStream</span>:Ze},at=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e[<span class="code-number">0</span>]===<span class="code-string">"I"</span>.charCodeAt(<span class="code-number">0</span>)&amp;&amp;e[<span class="code-number">1</span>]===<span class="code-string">"D"</span>.charCodeAt(<span class="code-number">0</span>)&amp;&amp;e[<span class="code-number">2</span>]===<span class="code-string">"3"</span>.charCodeAt(<span class="code-number">0</span>)},st=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e[t+<span class="code-number">6</span>]&lt;&lt;<span class="code-number">21</span>|e[t+<span class="code-number">7</span>]&lt;&lt;<span class="code-number">14</span>|e[t+<span class="code-number">8</span>]&lt;&lt;<span class="code-number">7</span>|e[t+<span class="code-number">9</span>];<span class="code-keyword">return</span>(<span class="code-number">16</span>&amp;e[t+<span class="code-number">5</span>])&gt;&gt;<span class="code-number">4</span>?i+<span class="code-number">20</span>:i+<span class="code-number">10</span>},ot=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=(<span class="code-number">224</span>&amp;e[t+<span class="code-number">5</span>])&gt;&gt;<span class="code-number">5</span>,n=e[t+<span class="code-number">4</span>]&lt;&lt;<span class="code-number">3</span>;<span class="code-keyword">return</span> <span class="code-number">6144</span>&amp;e[t+<span class="code-number">3</span>]|n|i};(nt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>,t=<span class="code-number">0</span>;nt.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.setTimestamp=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{t=e},<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n,r,a,s,o=<span class="code-number">0</span>,u=<span class="code-number">0</span>;<span class="code-keyword">for</span>(e.length?(s=e.length,(e=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(i.byteLength+s)).set(e.subarray(<span class="code-number">0</span>,s)),e.set(i,s)):e=i;e.length-u&gt;=<span class="code-number">3</span>;)<span class="code-keyword">if</span>(e[u]!==<span class="code-string">"I"</span>.charCodeAt(<span class="code-number">0</span>)||e[u+<span class="code-number">1</span>]!==<span class="code-string">"D"</span>.charCodeAt(<span class="code-number">0</span>)||e[u+<span class="code-number">2</span>]!==<span class="code-string">"3"</span>.charCodeAt(<span class="code-number">0</span>))<span class="code-keyword">if</span>(<span class="code-number">255</span>!=(<span class="code-number">255</span>&amp;e[u])||<span class="code-number">240</span>!=(<span class="code-number">240</span>&amp;e[u+<span class="code-number">1</span>]))u++;<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(e.length-u&lt;<span class="code-number">7</span>)<span class="code-keyword">break</span>;<span class="code-keyword">if</span>(u+(o=ot(e,u))&gt;e.length)<span class="code-keyword">break</span>;a={<span class="code-attr">type</span>:<span class="code-string">"audio"</span>,<span class="code-attr">data</span>:e.subarray(u,u+o),<span class="code-attr">pts</span>:t,<span class="code-attr">dts</span>:t},<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,a),u+=o}<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(e.length-u&lt;<span class="code-number">10</span>)<span class="code-keyword">break</span>;<span class="code-keyword">if</span>(u+(o=st(e,u))&gt;e.length)<span class="code-keyword">break</span>;r={<span class="code-attr">type</span>:<span class="code-string">"timed-metadata"</span>,<span class="code-attr">data</span>:e.subarray(u,u+o)},<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,r),u+=o}n=e.length-u,e=n&gt;<span class="code-number">0</span>?e.subarray(u):<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>)}}).prototype=<span class="code-keyword">new</span> G;<span class="code-keyword">var</span> ut,dt,lt,ht,ct=nt,ft=rt.H264Stream,pt=at,mt=de,gt=[<span class="code-string">"audioobjecttype"</span>,<span class="code-string">"channelcount"</span>,<span class="code-string">"samplerate"</span>,<span class="code-string">"samplingfrequencyindex"</span>,<span class="code-string">"samplesize"</span>],yt=[<span class="code-string">"width"</span>,<span class="code-string">"height"</span>,<span class="code-string">"profileIdc"</span>,<span class="code-string">"levelIdc"</span>,<span class="code-string">"profileCompatibility"</span>,<span class="code-string">"sarRatio"</span>],_t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i;<span class="code-keyword">if</span>(e.length!==t.length)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">for</span>(i=<span class="code-number">0</span>;i&lt;e.length;i++)<span class="code-keyword">if</span>(e[i]!==t[i])<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">return</span>!<span class="code-number">0</span>},vt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r,a</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">start</span>:{<span class="code-attr">dts</span>:e,<span class="code-attr">pts</span>:e+(i-t)},<span class="code-attr">end</span>:{<span class="code-attr">dts</span>:e+(n-t),<span class="code-attr">pts</span>:e+(r-i)},<span class="code-attr">prependedContentDuration</span>:a,<span class="code-attr">baseMediaDecodeTime</span>:e}};(dt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=[],n=<span class="code-number">0</span>,r=<span class="code-number">0</span>,a=<span class="code-number">0</span>,s=<span class="code-number">1</span>/<span class="code-number">0</span>;t=t||{},dt.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{be(e,t),e&amp;&amp;gt.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{e[i]=t[i]}),i.push(t)},<span class="code-keyword">this</span>.setEarliestDts=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{r=t-e.timelineStartInfo.baseMediaDecodeTime},<span class="code-keyword">this</span>.setVideoBaseMediaDecodeTime=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{s=e},<span class="code-keyword">this</span>.setAudioAppendStart=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{a=e},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> o,u,d,l,h;<span class="code-number">0</span>!==i.length?(o=pe(i,e,r),e.baseMediaDecodeTime=ve(e,t.keepOriginalTimestamps),fe(e,o,a,s),e.samples=me(o),d=K(ge(o)),i=[],u=$(n,[e]),l=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(u.byteLength+d.byteLength),n++,l.set(u),l.set(d,u.byteLength),_e(e),h=<span class="code-built_in">Math</span>.ceil(<span class="code-number">1024</span>*mt/e.samplerate),o.length&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"timingInfo"</span>,{<span class="code-attr">start</span>:o[<span class="code-number">0</span>].dts,<span class="code-attr">end</span>:o[<span class="code-number">0</span>].dts+o.length*h}),<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">track</span>:e,<span class="code-attr">boxes</span>:l}),<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>,<span class="code-string">"AudioSegmentStream"</span>)):<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>,<span class="code-string">"AudioSegmentStream"</span>)},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{_e(e),i=[],<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)}}).prototype=<span class="code-keyword">new</span> G,(ut=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n,r=<span class="code-number">0</span>,a=[],s=[];t=t||{},ut.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">delete</span> e.minPTS,<span class="code-keyword">this</span>.gopCache_=[],<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{be(e,t),<span class="code-string">"seq_parameter_set_rbsp"</span>!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],yt.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e[t]=i[t]},<span class="code-keyword">this</span>)),<span class="code-string">"pic_parameter_set_rbsp"</span>!==t.nalUnitType||n||(n=t.data,e.pps=[t.data]),a.push(t)},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i,n,o,u,d,l,h,c,f=<span class="code-number">0</span>;a.length&amp;&amp;<span class="code-string">"access_unit_delimiter_rbsp"</span>!==a[<span class="code-number">0</span>].nalUnitType;)a.shift();<span class="code-keyword">if</span>(<span class="code-number">0</span>===a.length)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.resetStream_(),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>,<span class="code-string">"VideoSegmentStream"</span>);<span class="code-keyword">if</span>(i=Z(a),(o=ee(i))[<span class="code-number">0</span>][<span class="code-number">0</span>].keyFrame||((n=<span class="code-keyword">this</span>.getGopForFusion_(a[<span class="code-number">0</span>],e))?(f=n.duration,o.unshift(n),o.byteLength+=n.byteLength,o.nalCount+=n.nalCount,o.pts=n.pts,o.dts=n.dts,o.duration+=n.duration):o=te(o)),s.length){<span class="code-keyword">var</span> p;<span class="code-keyword">if</span>(!(p=t.alignGopsAtEnd?<span class="code-keyword">this</span>.alignGopsAtEnd_(o):<span class="code-keyword">this</span>.alignGopsAtStart_(o)))<span class="code-keyword">return</span> <span class="code-keyword">this</span>.gopCache_.unshift({<span class="code-attr">gop</span>:o.pop(),<span class="code-attr">pps</span>:e.pps,<span class="code-attr">sps</span>:e.sps}),<span class="code-keyword">this</span>.gopCache_.length=<span class="code-built_in">Math</span>.min(<span class="code-number">6</span>,<span class="code-keyword">this</span>.gopCache_.length),a=[],<span class="code-keyword">this</span>.resetStream_(),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>,<span class="code-string">"VideoSegmentStream"</span>);_e(e),o=p}be(e,o),e.samples=ie(o),d=K(ne(o)),e.baseMediaDecodeTime=ve(e,t.keepOriginalTimestamps),<span class="code-keyword">this</span>.trigger(<span class="code-string">"processedGopsInfo"</span>,o.map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">pts</span>:e.pts,<span class="code-attr">dts</span>:e.dts,<span class="code-attr">byteLength</span>:e.byteLength}})),h=o[<span class="code-number">0</span>],c=o[o.length<span class="code-number">-1</span>],<span class="code-keyword">this</span>.trigger(<span class="code-string">"segmentTimingInfo"</span>,vt(e.baseMediaDecodeTime,h.dts,h.pts,c.dts+c.duration,c.pts+c.duration,f)),<span class="code-keyword">this</span>.trigger(<span class="code-string">"timingInfo"</span>,{<span class="code-attr">start</span>:o[<span class="code-number">0</span>].dts,<span class="code-attr">end</span>:o[o.length<span class="code-number">-1</span>].dts+o[o.length<span class="code-number">-1</span>].duration}),<span class="code-keyword">this</span>.gopCache_.unshift({<span class="code-attr">gop</span>:o.pop(),<span class="code-attr">pps</span>:e.pps,<span class="code-attr">sps</span>:e.sps}),<span class="code-keyword">this</span>.gopCache_.length=<span class="code-built_in">Math</span>.min(<span class="code-number">6</span>,<span class="code-keyword">this</span>.gopCache_.length),a=[],<span class="code-keyword">this</span>.trigger(<span class="code-string">"baseMediaDecodeTime"</span>,e.baseMediaDecodeTime),<span class="code-keyword">this</span>.trigger(<span class="code-string">"timelineStartInfo"</span>,e.timelineStartInfo),u=$(r,[e]),l=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(u.byteLength+d.byteLength),r++,l.set(u),l.set(d,u.byteLength),<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">track</span>:e,<span class="code-attr">boxes</span>:l}),<span class="code-keyword">this</span>.resetStream_(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>,<span class="code-string">"VideoSegmentStream"</span>)},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.resetStream_(),a=[],<span class="code-keyword">this</span>.gopCache_.length=<span class="code-number">0</span>,s.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)},<span class="code-keyword">this</span>.resetStream_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{_e(e),i=<span class="code-keyword">void</span> <span class="code-number">0</span>,n=<span class="code-keyword">void</span> <span class="code-number">0</span>},<span class="code-keyword">this</span>.getGopForFusion_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i,n,r,a,s,o=<span class="code-number">1</span>/<span class="code-number">0</span>;<span class="code-keyword">for</span>(s=<span class="code-number">0</span>;s&lt;<span class="code-keyword">this</span>.gopCache_.length;s++)r=(a=<span class="code-keyword">this</span>.gopCache_[s]).gop,e.pps&amp;&amp;_t(e.pps[<span class="code-number">0</span>],a.pps[<span class="code-number">0</span>])&amp;&amp;e.sps&amp;&amp;_t(e.sps[<span class="code-number">0</span>],a.sps[<span class="code-number">0</span>])&amp;&amp;(r.dts&lt;e.timelineStartInfo.dts||(i=t.dts-r.dts-r.duration)&gt;=<span class="code-number">-1e4</span>&amp;&amp;i&lt;=<span class="code-number">45e3</span>&amp;&amp;(!n||o&gt;i)&amp;&amp;(n=a,o=i));<span class="code-keyword">return</span> n?n.gop:<span class="code-literal">null</span>},<span class="code-keyword">this</span>.alignGopsAtStart_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n,r,a,o,u,d;<span class="code-keyword">for</span>(a=e.byteLength,o=e.nalCount,u=e.duration,t=i=<span class="code-number">0</span>;t&lt;s.length&amp;&amp;i&lt;e.length&amp;&amp;(n=s[t],r=e[i],n.pts!==r.pts);)r.pts&gt;n.pts?t++:(i++,a-=r.byteLength,o-=r.nalCount,u-=r.duration);<span class="code-keyword">return</span> <span class="code-number">0</span>===i?e:i===e.length?<span class="code-literal">null</span>:((d=e.slice(i)).byteLength=a,d.duration=u,d.nalCount=o,d.pts=d[<span class="code-number">0</span>].pts,d.dts=d[<span class="code-number">0</span>].dts,d)},<span class="code-keyword">this</span>.alignGopsAtEnd_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n,r,a,o,u;<span class="code-keyword">for</span>(t=s.length<span class="code-number">-1</span>,i=e.length<span class="code-number">-1</span>,a=<span class="code-literal">null</span>,o=!<span class="code-number">1</span>;t&gt;=<span class="code-number">0</span>&amp;&amp;i&gt;=<span class="code-number">0</span>;){<span class="code-keyword">if</span>(n=s[t],r=e[i],n.pts===r.pts){o=!<span class="code-number">0</span>;<span class="code-keyword">break</span>}n.pts&gt;r.pts?t--:(t===s.length<span class="code-number">-1</span>&amp;&amp;(a=i),i--)}<span class="code-keyword">if</span>(!o&amp;&amp;<span class="code-literal">null</span>===a)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(<span class="code-number">0</span>===(u=o?i:a))<span class="code-keyword">return</span> e;<span class="code-keyword">var</span> d=e.slice(u),l=d.reduce(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{<span class="code-attr">byteLength</span>:<span class="code-number">0</span>,<span class="code-attr">duration</span>:<span class="code-number">0</span>,<span class="code-attr">nalCount</span>:<span class="code-number">0</span>});<span class="code-keyword">return</span> d.byteLength=l.byteLength,d.duration=l.duration,d.nalCount=l.nalCount,d.pts=d[<span class="code-number">0</span>].pts,d.dts=d[<span class="code-number">0</span>].dts,d},<span class="code-keyword">this</span>.alignGopsWith=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{s=e}}).prototype=<span class="code-keyword">new</span> G,(ht=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.numberOfTracks=<span class="code-number">0</span>,<span class="code-keyword">this</span>.metadataStream=t,<span class="code-keyword">void</span> <span class="code-number">0</span>!==(e=e||{}).remux?<span class="code-keyword">this</span>.remuxTracks=!!e.remux:<span class="code-keyword">this</span>.remuxTracks=!<span class="code-number">0</span>,<span class="code-string">"boolean"</span>==<span class="code-keyword">typeof</span> e.keepOriginalTimestamps?<span class="code-keyword">this</span>.keepOriginalTimestamps=e.keepOriginalTimestamps:<span class="code-keyword">this</span>.keepOriginalTimestamps=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.pendingTracks=[],<span class="code-keyword">this</span>.videoTrack=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.pendingBoxes=[],<span class="code-keyword">this</span>.pendingCaptions=[],<span class="code-keyword">this</span>.pendingMetadata=[],<span class="code-keyword">this</span>.pendingBytes=<span class="code-number">0</span>,<span class="code-keyword">this</span>.emittedTracks=<span class="code-number">0</span>,ht.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.text?<span class="code-keyword">this</span>.pendingCaptions.push(e):e.frames?<span class="code-keyword">this</span>.pendingMetadata.push(e):(<span class="code-keyword">this</span>.pendingTracks.push(e.track),<span class="code-keyword">this</span>.pendingBytes+=e.boxes.byteLength,<span class="code-string">"video"</span>===e.track.type&amp;&amp;(<span class="code-keyword">this</span>.videoTrack=e.track,<span class="code-keyword">this</span>.pendingBoxes.push(e.boxes)),<span class="code-keyword">void</span>(<span class="code-string">"audio"</span>===e.track.type&amp;&amp;(<span class="code-keyword">this</span>.audioTrack=e.track,<span class="code-keyword">this</span>.pendingBoxes.unshift(e.boxes))))}}).prototype=<span class="code-keyword">new</span> G,ht.prototype.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n,r,a=<span class="code-number">0</span>,s={<span class="code-attr">captions</span>:[],<span class="code-attr">captionStreams</span>:{},<span class="code-attr">metadata</span>:[],<span class="code-attr">info</span>:{}},o=<span class="code-number">0</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.pendingTracks.length&lt;<span class="code-keyword">this</span>.numberOfTracks){<span class="code-keyword">if</span>(<span class="code-string">"VideoSegmentStream"</span>!==e&amp;&amp;<span class="code-string">"AudioSegmentStream"</span>!==e)<span class="code-keyword">return</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.remuxTracks)<span class="code-keyword">return</span>;<span class="code-keyword">if</span>(<span class="code-number">0</span>===<span class="code-keyword">this</span>.pendingTracks.length)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.emittedTracks++,<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.emittedTracks&gt;=<span class="code-keyword">this</span>.numberOfTracks&amp;&amp;(<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>),<span class="code-keyword">this</span>.emittedTracks=<span class="code-number">0</span>))}<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.videoTrack?(o=<span class="code-keyword">this</span>.videoTrack.timelineStartInfo.pts,yt.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{s.info[e]=<span class="code-keyword">this</span>.videoTrack[e]},<span class="code-keyword">this</span>)):<span class="code-keyword">this</span>.audioTrack&amp;&amp;(o=<span class="code-keyword">this</span>.audioTrack.timelineStartInfo.pts,gt.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{s.info[e]=<span class="code-keyword">this</span>.audioTrack[e]},<span class="code-keyword">this</span>)),<span class="code-keyword">this</span>.videoTrack||<span class="code-keyword">this</span>.audioTrack){<span class="code-keyword">for</span>(<span class="code-number">1</span>===<span class="code-keyword">this</span>.pendingTracks.length?s.type=<span class="code-keyword">this</span>.pendingTracks[<span class="code-number">0</span>].type:s.type=<span class="code-string">"combined"</span>,<span class="code-keyword">this</span>.emittedTracks+=<span class="code-keyword">this</span>.pendingTracks.length,n=Q(<span class="code-keyword">this</span>.pendingTracks),s.initSegment=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(n.byteLength),s.initSegment.set(n),s.data=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(<span class="code-keyword">this</span>.pendingBytes),r=<span class="code-number">0</span>;r&lt;<span class="code-keyword">this</span>.pendingBoxes.length;r++)s.data.set(<span class="code-keyword">this</span>.pendingBoxes[r],a),a+=<span class="code-keyword">this</span>.pendingBoxes[r].byteLength;<span class="code-keyword">for</span>(r=<span class="code-number">0</span>;r&lt;<span class="code-keyword">this</span>.pendingCaptions.length;r++)(t=<span class="code-keyword">this</span>.pendingCaptions[r]).startTime=ce(t.startPts,o,<span class="code-keyword">this</span>.keepOriginalTimestamps),t.endTime=ce(t.endPts,o,<span class="code-keyword">this</span>.keepOriginalTimestamps),s.captionStreams[t.stream]=!<span class="code-number">0</span>,s.captions.push(t);<span class="code-keyword">for</span>(r=<span class="code-number">0</span>;r&lt;<span class="code-keyword">this</span>.pendingMetadata.length;r++)(i=<span class="code-keyword">this</span>.pendingMetadata[r]).cueTime=ce(i.pts,o,<span class="code-keyword">this</span>.keepOriginalTimestamps),s.metadata.push(i);<span class="code-keyword">for</span>(s.metadata.dispatchType=<span class="code-keyword">this</span>.metadataStream.dispatchType,<span class="code-keyword">this</span>.pendingTracks.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.videoTrack=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.pendingBoxes.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.pendingCaptions.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.pendingBytes=<span class="code-number">0</span>,<span class="code-keyword">this</span>.pendingMetadata.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,s),r=<span class="code-number">0</span>;r&lt;s.captions.length;r++)t=s.captions[r],<span class="code-keyword">this</span>.trigger(<span class="code-string">"caption"</span>,t);<span class="code-keyword">for</span>(r=<span class="code-number">0</span>;r&lt;s.metadata.length;r++)i=s.metadata[r],<span class="code-keyword">this</span>.trigger(<span class="code-string">"id3Frame"</span>,i)}<span class="code-keyword">this</span>.emittedTracks&gt;=<span class="code-keyword">this</span>.numberOfTracks&amp;&amp;(<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>),<span class="code-keyword">this</span>.emittedTracks=<span class="code-number">0</span>)},ht.prototype.setRemux=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.remuxTracks=e},(lt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=<span class="code-keyword">this</span>,r=!<span class="code-number">0</span>;lt.prototype.init.call(<span class="code-keyword">this</span>),e=e||{},<span class="code-keyword">this</span>.baseMediaDecodeTime=e.baseMediaDecodeTime||<span class="code-number">0</span>,<span class="code-keyword">this</span>.transmuxPipeline_={},<span class="code-keyword">this</span>.setupAacPipeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> r={};<span class="code-keyword">this</span>.transmuxPipeline_=r,r.type=<span class="code-string">"aac"</span>,r.metadataStream=<span class="code-keyword">new</span> Ke.MetadataStream,r.aacStream=<span class="code-keyword">new</span> ct,r.audioTimestampRolloverStream=<span class="code-keyword">new</span> Ke.TimestampRolloverStream(<span class="code-string">"audio"</span>),r.timedMetadataTimestampRolloverStream=<span class="code-keyword">new</span> Ke.TimestampRolloverStream(<span class="code-string">"timed-metadata"</span>),r.adtsStream=<span class="code-keyword">new</span> tt,r.coalesceStream=<span class="code-keyword">new</span> ht(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on(<span class="code-string">"timestamp"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{r.aacStream.setTimestamp(e.timeStamp)}),r.aacStream.on(<span class="code-string">"data"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">a</span>)</span>{<span class="code-string">"timed-metadata"</span>!==a.type||r.audioSegmentStream||(i=i||{<span class="code-attr">timelineStartInfo</span>:{<span class="code-attr">baseMediaDecodeTime</span>:n.baseMediaDecodeTime},<span class="code-attr">codec</span>:<span class="code-string">"adts"</span>,<span class="code-attr">type</span>:<span class="code-string">"audio"</span>},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=<span class="code-keyword">new</span> dt(i,e),r.audioSegmentStream.on(<span class="code-string">"timingInfo"</span>,n.trigger.bind(n,<span class="code-string">"audioTimingInfo"</span>)),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),n.trigger(<span class="code-string">"trackinfo"</span>,{<span class="code-attr">hasAudio</span>:!!i,<span class="code-attr">hasVideo</span>:!!t})}),r.coalesceStream.on(<span class="code-string">"data"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"data"</span>)),r.coalesceStream.on(<span class="code-string">"done"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"done"</span>))},<span class="code-keyword">this</span>.setupTsPipeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> r={};<span class="code-keyword">this</span>.transmuxPipeline_=r,r.type=<span class="code-string">"ts"</span>,r.metadataStream=<span class="code-keyword">new</span> Ke.MetadataStream,r.packetStream=<span class="code-keyword">new</span> Ke.TransportPacketStream,r.parseStream=<span class="code-keyword">new</span> Ke.TransportParseStream,r.elementaryStream=<span class="code-keyword">new</span> Ke.ElementaryStream,r.timestampRolloverStream=<span class="code-keyword">new</span> Ke.TimestampRolloverStream,r.adtsStream=<span class="code-keyword">new</span> tt,r.h264Stream=<span class="code-keyword">new</span> ft,r.captionStream=<span class="code-keyword">new</span> Ke.CaptionStream,r.coalesceStream=<span class="code-keyword">new</span> ht(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on(<span class="code-string">"data"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">a</span>)</span>{<span class="code-keyword">var</span> s;<span class="code-keyword">if</span>(<span class="code-string">"metadata"</span>===a.type){<span class="code-keyword">for</span>(s=a.tracks.length;s--;)t||<span class="code-string">"video"</span>!==a.tracks[s].type?i||<span class="code-string">"audio"</span>!==a.tracks[s].type||((i=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(t=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime;t&amp;&amp;!r.videoSegmentStream&amp;&amp;(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=<span class="code-keyword">new</span> ut(t,e),r.videoSegmentStream.on(<span class="code-string">"timelineStartInfo"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i&amp;&amp;(i.timelineStartInfo=e,r.audioSegmentStream.setEarliestDts(e.dts))}),r.videoSegmentStream.on(<span class="code-string">"processedGopsInfo"</span>,n.trigger.bind(n,<span class="code-string">"gopInfo"</span>)),r.videoSegmentStream.on(<span class="code-string">"segmentTimingInfo"</span>,n.trigger.bind(n,<span class="code-string">"videoSegmentTimingInfo"</span>)),r.videoSegmentStream.on(<span class="code-string">"baseMediaDecodeTime"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i&amp;&amp;r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),r.videoSegmentStream.on(<span class="code-string">"timingInfo"</span>,n.trigger.bind(n,<span class="code-string">"videoTimingInfo"</span>)),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),i&amp;&amp;!r.audioSegmentStream&amp;&amp;(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=<span class="code-keyword">new</span> dt(i,e),r.audioSegmentStream.on(<span class="code-string">"timingInfo"</span>,n.trigger.bind(n,<span class="code-string">"audioTimingInfo"</span>)),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),n.trigger(<span class="code-string">"trackinfo"</span>,{<span class="code-attr">hasAudio</span>:!!i,<span class="code-attr">hasVideo</span>:!!t})}}),r.coalesceStream.on(<span class="code-string">"data"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"data"</span>)),r.coalesceStream.on(<span class="code-string">"id3Frame"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.dispatchType=r.metadataStream.dispatchType,n.trigger(<span class="code-string">"id3Frame"</span>,e)}),r.coalesceStream.on(<span class="code-string">"caption"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"caption"</span>)),r.coalesceStream.on(<span class="code-string">"done"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"done"</span>))},<span class="code-keyword">this</span>.setBaseMediaDecodeTime=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-keyword">var</span> r=<span class="code-keyword">this</span>.transmuxPipeline_;e.keepOriginalTimestamps||(<span class="code-keyword">this</span>.baseMediaDecodeTime=n),i&amp;&amp;(i.timelineStartInfo.dts=<span class="code-keyword">void</span> <span class="code-number">0</span>,i.timelineStartInfo.pts=<span class="code-keyword">void</span> <span class="code-number">0</span>,_e(i),e.keepOriginalTimestamps||(i.timelineStartInfo.baseMediaDecodeTime=n),r.audioTimestampRolloverStream&amp;&amp;r.audioTimestampRolloverStream.discontinuity()),t&amp;&amp;(r.videoSegmentStream&amp;&amp;(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=<span class="code-keyword">void</span> <span class="code-number">0</span>,t.timelineStartInfo.pts=<span class="code-keyword">void</span> <span class="code-number">0</span>,_e(t),r.captionStream.reset(),e.keepOriginalTimestamps||(t.timelineStartInfo.baseMediaDecodeTime=n)),r.timestampRolloverStream&amp;&amp;r.timestampRolloverStream.discontinuity()},<span class="code-keyword">this</span>.setAudioAppendStart=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i&amp;&amp;<span class="code-keyword">this</span>.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},<span class="code-keyword">this</span>.setRemux=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.transmuxPipeline_;e.remux=t,i&amp;&amp;i.coalesceStream&amp;&amp;i.coalesceStream.setRemux(t)},<span class="code-keyword">this</span>.alignGopsWith=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{t&amp;&amp;<span class="code-keyword">this</span>.transmuxPipeline_.videoSegmentStream&amp;&amp;<span class="code-keyword">this</span>.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(r){<span class="code-keyword">var</span> t=pt(e);t&amp;&amp;<span class="code-string">"aac"</span>!==<span class="code-keyword">this</span>.transmuxPipeline_.type?<span class="code-keyword">this</span>.setupAacPipeline():t||<span class="code-string">"ts"</span>===<span class="code-keyword">this</span>.transmuxPipeline_.type||<span class="code-keyword">this</span>.setupTsPipeline(),r=!<span class="code-number">1</span>}<span class="code-keyword">this</span>.transmuxPipeline_.headOfPipeline.push(e)},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{r=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.transmuxPipeline_.headOfPipeline.flush()},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.transmuxPipeline_.headOfPipeline.endTimeline()},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.transmuxPipeline_.headOfPipeline&amp;&amp;<span class="code-keyword">this</span>.transmuxPipeline_.headOfPipeline.reset()},<span class="code-keyword">this</span>.resetCaptions=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.transmuxPipeline_.captionStream&amp;&amp;<span class="code-keyword">this</span>.transmuxPipeline_.captionStream.reset()}}).prototype=<span class="code-keyword">new</span> G;<span class="code-keyword">var</span> bt={<span class="code-attr">Transmuxer</span>:lt,<span class="code-attr">VideoSegmentStream</span>:ut,<span class="code-attr">AudioSegmentStream</span>:dt,<span class="code-attr">AUDIO_PROPERTIES</span>:gt,<span class="code-attr">VIDEO_PROPERTIES</span>:yt,<span class="code-attr">generateVideoSegmentTimingInfo</span>:vt},Tt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!(e <span class="code-keyword">instanceof</span> t))<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">TypeError</span>(<span class="code-string">"Cannot call a class as a function"</span>)},St=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;t.length;i++){<span class="code-keyword">var</span> n=t[i];n.enumerable=n.enumerable||!<span class="code-number">1</span>,n.configurable=!<span class="code-number">0</span>,<span class="code-string">"value"</span><span class="code-keyword">in</span> n&amp;&amp;(n.writable=!<span class="code-number">0</span>),<span class="code-built_in">Object</span>.defineProperty(e,n.key,n)}}<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i,n</span>)</span>{<span class="code-keyword">return</span> i&amp;&amp;e(t.prototype,i),n&amp;&amp;e(t,n),t}}(),kt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{Tt(<span class="code-keyword">this</span>,e),<span class="code-keyword">this</span>.options=i||{},<span class="code-keyword">this</span>.self=t,<span class="code-keyword">this</span>.init()}<span class="code-keyword">return</span> St(e,[{<span class="code-attr">key</span>:<span class="code-string">"init"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t;<span class="code-keyword">this</span>.transmuxer&amp;&amp;<span class="code-keyword">this</span>.transmuxer.dispose(),<span class="code-keyword">this</span>.transmuxer=<span class="code-keyword">new</span> bt.Transmuxer(<span class="code-keyword">this</span>.options),e=<span class="code-keyword">this</span>.self,(t=<span class="code-keyword">this</span>.transmuxer).on(<span class="code-string">"data"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i=t.initSegment;t.initSegment={<span class="code-attr">data</span>:i.buffer,<span class="code-attr">byteOffset</span>:i.byteOffset,<span class="code-attr">byteLength</span>:i.byteLength};<span class="code-keyword">var</span> n=t.data;t.data=n.buffer,e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"data"</span>,<span class="code-attr">segment</span>:t,<span class="code-attr">byteOffset</span>:n.byteOffset,<span class="code-attr">byteLength</span>:n.byteLength},[t.data])}),t.captionStream&amp;&amp;t.captionStream.on(<span class="code-string">"data"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"caption"</span>,<span class="code-attr">data</span>:t})}),t.on(<span class="code-string">"done"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"done"</span>})}),t.on(<span class="code-string">"gopInfo"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"gopInfo"</span>,<span class="code-attr">gopInfo</span>:t})}),t.on(<span class="code-string">"videoSegmentTimingInfo"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"videoSegmentTimingInfo"</span>,<span class="code-attr">videoSegmentTimingInfo</span>:t})})}},{<span class="code-attr">key</span>:<span class="code-string">"push"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.data,e.byteOffset,e.byteLength);<span class="code-keyword">this</span>.transmuxer.push(t)}},{<span class="code-attr">key</span>:<span class="code-string">"reset"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.init()}},{<span class="code-attr">key</span>:<span class="code-string">"setTimestampOffset"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.timestampOffset||<span class="code-number">0</span>;<span class="code-keyword">this</span>.transmuxer.setBaseMediaDecodeTime(<span class="code-built_in">Math</span>.round(<span class="code-number">9e4</span>*t))}},{<span class="code-attr">key</span>:<span class="code-string">"setAudioAppendStart"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.transmuxer.setAudioAppendStart(<span class="code-built_in">Math</span>.ceil(<span class="code-number">9e4</span>*e.appendStart))}},{<span class="code-attr">key</span>:<span class="code-string">"flush"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.transmuxer.flush()}},{<span class="code-attr">key</span>:<span class="code-string">"resetCaptions"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.transmuxer.resetCaptions()}},{<span class="code-attr">key</span>:<span class="code-string">"alignGopsWith"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),e}();<span class="code-keyword">new</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.onmessage=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-string">"init"</span>===t.data.action&amp;&amp;t.data.options?<span class="code-keyword">this</span>.messageHandlers=<span class="code-keyword">new</span> kt(e,t.data.options):(<span class="code-keyword">this</span>.messageHandlers||(<span class="code-keyword">this</span>.messageHandlers=<span class="code-keyword">new</span> kt(e)),t.data&amp;&amp;t.data.action&amp;&amp;<span class="code-string">"init"</span>!==t.data.action&amp;&amp;<span class="code-keyword">this</span>.messageHandlers[t.data.action]&amp;&amp;<span class="code-keyword">this</span>.messageHandlers[t.data.action](t.data))}}(i)}()}),qe={<span class="code-attr">videoCodec</span>:<span class="code-string">"avc1"</span>,<span class="code-attr">videoObjectTypeIndicator</span>:<span class="code-string">".4d400d"</span>,<span class="code-attr">audioProfile</span>:<span class="code-string">"2"</span>},Fe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.replace(<span class="code-regexp">/avc1\.(\d+)\.(\d+)/i</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"avc1."</span>+(<span class="code-string">"00"</span>+<span class="code-built_in">Number</span>(t).toString(<span class="code-number">16</span>)).slice(<span class="code-number">-2</span>)+<span class="code-string">"00"</span>+(<span class="code-string">"00"</span>+<span class="code-built_in">Number</span>(i).toString(<span class="code-number">16</span>)).slice(<span class="code-number">-2</span>)})})},He=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t=<span class="code-built_in">arguments</span>.length&gt;<span class="code-number">0</span>&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-built_in">arguments</span>[<span class="code-number">0</span>]?<span class="code-built_in">arguments</span>[<span class="code-number">0</span>]:<span class="code-string">""</span>,i={<span class="code-attr">codecCount</span>:<span class="code-number">0</span>};<span class="code-keyword">return</span> i.codecCount=t.split(<span class="code-string">","</span>).length,i.codecCount=i.codecCount||<span class="code-number">2</span>,(e=<span class="code-regexp">/(^|\s|,)+(avc[13])([^ ,]*)/i</span>.exec(t))&amp;&amp;(i.videoCodec=e[<span class="code-number">2</span>],i.videoObjectTypeIndicator=e[<span class="code-number">3</span>]),i.audioProfile=<span class="code-regexp">/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i</span>.exec(t),i.audioProfile=i.audioProfile&amp;&amp;i.audioProfile[<span class="code-number">2</span>],i},Ge=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> e+<span class="code-string">"/"</span>+t+<span class="code-string">'; codecs="'</span>+i.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!!e}).join(<span class="code-string">", "</span>)+<span class="code-string">'"'</span>},je=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.segments&amp;&amp;e.segments.length&amp;&amp;e.segments[<span class="code-number">0</span>].map?<span class="code-string">"mp4"</span>:<span class="code-string">"mp2t"</span>}(i),r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.attributes||{};<span class="code-keyword">return</span> t.CODECS?He(t.CODECS):qe}(i),a=i.attributes||{},s=!<span class="code-number">0</span>,o=!<span class="code-number">1</span>;<span class="code-keyword">if</span>(!i)<span class="code-keyword">return</span>[];<span class="code-keyword">if</span>(e.mediaGroups.AUDIO&amp;&amp;a.AUDIO){<span class="code-keyword">var</span> u=e.mediaGroups.AUDIO[a.AUDIO];<span class="code-keyword">if</span>(u)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> d <span class="code-keyword">in</span> o=!<span class="code-number">0</span>,s=!<span class="code-number">1</span>,u)<span class="code-keyword">if</span>(!u[d].uri&amp;&amp;!u[d].playlists){s=!<span class="code-number">0</span>;<span class="code-keyword">break</span>}}o&amp;&amp;!r.audioProfile&amp;&amp;(s||(r.audioProfile=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!e.mediaGroups.AUDIO||!t)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i=e.mediaGroups.AUDIO[t];<span class="code-keyword">if</span>(!i)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> i){<span class="code-keyword">var</span> r=i[n];<span class="code-keyword">if</span>(r.default&amp;&amp;r.playlists)<span class="code-keyword">return</span> He(r.playlists[<span class="code-number">0</span>].attributes.CODECS).audioProfile}<span class="code-keyword">return</span> <span class="code-literal">null</span>}(e,a.AUDIO)),r.audioProfile||(t.log.warn(<span class="code-string">"Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"</span>),r.audioProfile=qe.audioProfile));<span class="code-keyword">var</span> l={};r.videoCodec&amp;&amp;(l.video=<span class="code-string">""</span>+r.videoCodec+r.videoObjectTypeIndicator),r.audioProfile&amp;&amp;(l.audio=<span class="code-string">"mp4a.40."</span>+r.audioProfile);<span class="code-keyword">var</span> h=Ge(<span class="code-string">"audio"</span>,n,[l.audio]),c=Ge(<span class="code-string">"video"</span>,n,[l.video]),f=Ge(<span class="code-string">"video"</span>,n,[l.video,l.audio]);<span class="code-keyword">return</span> o?!s&amp;&amp;l.video?[c,h]:s||l.video?[f,h]:[h,h]:l.video?[f]:[h]},Ve=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t={<span class="code-attr">type</span>:<span class="code-string">""</span>,<span class="code-attr">parameters</span>:{}},i=e.trim().split(<span class="code-string">";"</span>);<span class="code-keyword">return</span> t.type=i.shift().trim(),i.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=e.trim().split(<span class="code-string">"="</span>);<span class="code-keyword">if</span>(i.length&gt;<span class="code-number">1</span>){<span class="code-keyword">var</span> n=i[<span class="code-number">0</span>].replace(<span class="code-regexp">/"/g</span>,<span class="code-string">""</span>).trim(),r=i[<span class="code-number">1</span>].replace(<span class="code-regexp">/"/g</span>,<span class="code-string">""</span>).trim();t.parameters[n]=r}}),t},We=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-regexp">/mp4a\.\d+.\d+/i</span>.test(e)},ze=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-regexp">/avc1\.[\da-f]+/i</span>.test(e)},Xe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i,n</span>)</span>{<span class="code-keyword">var</span> r=<span class="code-literal">null</span>,a=<span class="code-literal">null</span>,s=<span class="code-number">0</span>,o=[],u=[];<span class="code-keyword">if</span>(!e&amp;&amp;!i)<span class="code-keyword">return</span> t.createTimeRange();<span class="code-keyword">if</span>(!e)<span class="code-keyword">return</span> i.buffered;<span class="code-keyword">if</span>(!i)<span class="code-keyword">return</span> e.buffered;<span class="code-keyword">if</span>(n)<span class="code-keyword">return</span> e.buffered;<span class="code-keyword">if</span>(<span class="code-number">0</span>===e.buffered.length&amp;&amp;<span class="code-number">0</span>===i.buffered.length)<span class="code-keyword">return</span> t.createTimeRange();<span class="code-keyword">for</span>(<span class="code-keyword">var</span> d=e.buffered,l=i.buffered,h=d.length;h--;)o.push({<span class="code-attr">time</span>:d.start(h),<span class="code-attr">type</span>:<span class="code-string">"start"</span>}),o.push({<span class="code-attr">time</span>:d.end(h),<span class="code-attr">type</span>:<span class="code-string">"end"</span>});<span class="code-keyword">for</span>(h=l.length;h--;)o.push({<span class="code-attr">time</span>:l.start(h),<span class="code-attr">type</span>:<span class="code-string">"start"</span>}),o.push({<span class="code-attr">time</span>:l.end(h),<span class="code-attr">type</span>:<span class="code-string">"end"</span>});<span class="code-keyword">for</span>(o.sort(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.time-t.time}),h=<span class="code-number">0</span>;h&lt;o.length;h++)<span class="code-string">"start"</span>===o[h].type?<span class="code-number">2</span>===++s&amp;&amp;(r=o[h].time):<span class="code-string">"end"</span>===o[h].type&amp;&amp;<span class="code-number">1</span>===--s&amp;&amp;(a=o[h].time),<span class="code-literal">null</span>!==r&amp;&amp;<span class="code-literal">null</span>!==a&amp;&amp;(u.push([r,a]),r=<span class="code-literal">null</span>,a=<span class="code-literal">null</span>);<span class="code-keyword">return</span> t.createTimeRanges(u)},Ye=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">i</span>(<span class="code-params">e,n</span>)</span>{_(<span class="code-keyword">this</span>,i);<span class="code-keyword">var</span> r=T(<span class="code-keyword">this</span>,(i.__proto__||<span class="code-built_in">Object</span>.getPrototypeOf(i)).call(<span class="code-keyword">this</span>,t.EventTarget));r.timestampOffset_=<span class="code-number">0</span>,r.pendingBuffers_=[],r.bufferUpdating_=!<span class="code-number">1</span>,r.mediaSource_=e,r.codecs_=n,r.audioCodec_=<span class="code-literal">null</span>,r.videoCodec_=<span class="code-literal">null</span>,r.audioDisabled_=!<span class="code-number">1</span>,r.appendAudioInitSegment_=!<span class="code-number">0</span>,r.gopBuffer_=[],r.timeMapping_=<span class="code-number">0</span>,r.safeAppend_=t.browser.IE_VERSION&gt;=<span class="code-number">11</span>;<span class="code-keyword">var</span> a={<span class="code-attr">remux</span>:!<span class="code-number">1</span>,<span class="code-attr">alignGopsAtEnd</span>:r.safeAppend_};<span class="code-keyword">return</span> r.codecs_.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{We(e)?r.audioCodec_=e:ze(e)&amp;&amp;(r.videoCodec_=e)}),r.transmuxer_=<span class="code-keyword">new</span> Ne,r.transmuxer_.postMessage({<span class="code-attr">action</span>:<span class="code-string">"init"</span>,<span class="code-attr">options</span>:a}),r.transmuxer_.onmessage=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"data"</span>===e.data.action?r.data_(e):<span class="code-string">"done"</span>===e.data.action?r.done_(e):<span class="code-string">"gopInfo"</span>===e.data.action?r.appendGopInfo_(e):<span class="code-string">"videoSegmentTimingInfo"</span>===e.data.action?r.videoSegmentTimingInfo_(e.data.videoSegmentTimingInfo):<span class="code-keyword">void</span> <span class="code-number">0</span>},<span class="code-built_in">Object</span>.defineProperty(r,<span class="code-string">"timestampOffset"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.timestampOffset_},<span class="code-attr">set</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> e&amp;&amp;e&gt;=<span class="code-number">0</span>&amp;&amp;(<span class="code-keyword">this</span>.timestampOffset_=e,<span class="code-keyword">this</span>.appendAudioInitSegment_=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.gopBuffer_.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.timeMapping_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.transmuxer_.postMessage({<span class="code-attr">action</span>:<span class="code-string">"setTimestampOffset"</span>,<span class="code-attr">timestampOffset</span>:e}))}}),<span class="code-built_in">Object</span>.defineProperty(r,<span class="code-string">"appendWindowStart"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span>(<span class="code-keyword">this</span>.videoBuffer_||<span class="code-keyword">this</span>.audioBuffer_).appendWindowStart},<span class="code-attr">set</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.videoBuffer_&amp;&amp;(<span class="code-keyword">this</span>.videoBuffer_.appendWindowStart=e),<span class="code-keyword">this</span>.audioBuffer_&amp;&amp;(<span class="code-keyword">this</span>.audioBuffer_.appendWindowStart=e)}}),<span class="code-built_in">Object</span>.defineProperty(r,<span class="code-string">"updating"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span>!!(<span class="code-keyword">this</span>.bufferUpdating_||!<span class="code-keyword">this</span>.audioDisabled_&amp;&amp;<span class="code-keyword">this</span>.audioBuffer_&amp;&amp;<span class="code-keyword">this</span>.audioBuffer_.updating||<span class="code-keyword">this</span>.videoBuffer_&amp;&amp;<span class="code-keyword">this</span>.videoBuffer_.updating)}}),<span class="code-built_in">Object</span>.defineProperty(r,<span class="code-string">"buffered"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> Xe(<span class="code-keyword">this</span>.videoBuffer_,<span class="code-keyword">this</span>.audioBuffer_,<span class="code-keyword">this</span>.audioDisabled_)}}),r}<span class="code-keyword">return</span> b(i,e),v(i,[{<span class="code-attr">key</span>:<span class="code-string">"data_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.data.segment;t.data=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=t.player_;<span class="code-keyword">if</span>(i.captions&amp;&amp;i.captions.length)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r <span class="code-keyword">in</span> e.inbandTextTracks_||(e.inbandTextTracks_={}),i.captionStreams)<span class="code-keyword">if</span>(!e.inbandTextTracks_[r]){n.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-608"</span>});<span class="code-keyword">var</span> a=n.textTracks().getTrackById(r);e.inbandTextTracks_[r]=a||n.addRemoteTextTrack({<span class="code-attr">kind</span>:<span class="code-string">"captions"</span>,<span class="code-attr">id</span>:r,<span class="code-attr">label</span>:r},!<span class="code-number">1</span>).track}i.metadata&amp;&amp;i.metadata.length&amp;&amp;!e.metadataTrack_&amp;&amp;(e.metadataTrack_=n.addRemoteTextTrack({<span class="code-attr">kind</span>:<span class="code-string">"metadata"</span>,<span class="code-attr">label</span>:<span class="code-string">"Timed Metadata"</span>},!<span class="code-number">1</span>).track,e.metadataTrack_.inBandMetadataTrackDispatchType=i.metadata.dispatchType)}(<span class="code-keyword">this</span>,<span class="code-keyword">this</span>.mediaSource_,t),<span class="code-keyword">this</span>.pendingBuffers_.push(t)}},{<span class="code-attr">key</span>:<span class="code-string">"done_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-string">"closed"</span>!==<span class="code-keyword">this</span>.mediaSource_.readyState?<span class="code-keyword">this</span>.processPendingSegments_():<span class="code-keyword">this</span>.pendingBuffers_.length=<span class="code-number">0</span>}},{<span class="code-attr">key</span>:<span class="code-string">"videoSegmentTimingInfo_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t={<span class="code-attr">start</span>:{<span class="code-attr">decode</span>:e.start.dts/<span class="code-number">9e4</span>,<span class="code-attr">presentation</span>:e.start.pts/<span class="code-number">9e4</span>},<span class="code-attr">end</span>:{<span class="code-attr">decode</span>:e.end.dts/<span class="code-number">9e4</span>,<span class="code-attr">presentation</span>:e.end.pts/<span class="code-number">9e4</span>},<span class="code-attr">baseMediaDecodeTime</span>:e.baseMediaDecodeTime/<span class="code-number">9e4</span>};e.prependedContentDuration&amp;&amp;(t.prependedContentDuration=e.prependedContentDuration/<span class="code-number">9e4</span>),<span class="code-keyword">this</span>.trigger({<span class="code-attr">type</span>:<span class="code-string">"videoSegmentTimingInfo"</span>,<span class="code-attr">videoSegmentTimingInfo</span>:t})}},{<span class="code-attr">key</span>:<span class="code-string">"createRealSourceBuffers_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>,t=[<span class="code-string">"audio"</span>,<span class="code-string">"video"</span>];t.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">if</span>(e[i+<span class="code-string">"Codec_"</span>]&amp;&amp;!e[i+<span class="code-string">"Buffer_"</span>]){<span class="code-keyword">var</span> n=<span class="code-literal">null</span>;<span class="code-keyword">if</span>(e.mediaSource_[i+<span class="code-string">"Buffer_"</span>])(n=e.mediaSource_[i+<span class="code-string">"Buffer_"</span>]).updating=!<span class="code-number">1</span>;<span class="code-keyword">else</span>{<span class="code-keyword">var</span> r=i+<span class="code-string">'/mp4;codecs="'</span>+e[i+<span class="code-string">"Codec_"</span>]+<span class="code-string">'"'</span>;n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e.addSourceBuffer(t),n=<span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>);n.updating=!<span class="code-number">1</span>,n.realBuffer_=i;<span class="code-keyword">var</span> r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> i[e]?n[e]=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i[e].apply(i,<span class="code-built_in">arguments</span>)}:<span class="code-keyword">void</span> <span class="code-number">0</span>===n[e]&amp;&amp;<span class="code-built_in">Object</span>.defineProperty(n,e,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i[e]},<span class="code-attr">set</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span> i[e]=t}})};<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a <span class="code-keyword">in</span> i)r(a);<span class="code-keyword">return</span> n}(e.mediaSource_.nativeMediaSource_,r),e.mediaSource_[i+<span class="code-string">"Buffer_"</span>]=n}e[i+<span class="code-string">"Buffer_"</span>]=n,[<span class="code-string">"update"</span>,<span class="code-string">"updatestart"</span>,<span class="code-string">"updateend"</span>].forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">r</span>)</span>{n.addEventListener(r,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"audio"</span>!==i||!e.audioDisabled_)<span class="code-keyword">return</span><span class="code-string">"updateend"</span>===r&amp;&amp;(e[i+<span class="code-string">"Buffer_"</span>].updating=!<span class="code-number">1</span>),t.every(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span>!(<span class="code-string">"audio"</span>!==t||!e.audioDisabled_)||(i===t||!e[t+<span class="code-string">"Buffer_"</span>]||!e[t+<span class="code-string">"Buffer_"</span>].updating)})?e.trigger(r):<span class="code-keyword">void</span> <span class="code-number">0</span>})})}})}},{<span class="code-attr">key</span>:<span class="code-string">"appendBuffer"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.bufferUpdating_=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.audioBuffer_&amp;&amp;<span class="code-keyword">this</span>.audioBuffer_.buffered.length){<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.audioBuffer_.buffered;<span class="code-keyword">this</span>.transmuxer_.postMessage({<span class="code-attr">action</span>:<span class="code-string">"setAudioAppendStart"</span>,<span class="code-attr">appendStart</span>:t.end(t.length<span class="code-number">-1</span>)})}<span class="code-keyword">this</span>.videoBuffer_&amp;&amp;<span class="code-keyword">this</span>.transmuxer_.postMessage({<span class="code-attr">action</span>:<span class="code-string">"alignGopsWith"</span>,<span class="code-attr">gopsToAlignWith</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===t||<span class="code-literal">null</span>===t||!e.length)<span class="code-keyword">return</span>[];<span class="code-keyword">var</span> n=<span class="code-built_in">Math</span>.ceil(<span class="code-number">9e4</span>*(t-i+<span class="code-number">3</span>)),r=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">for</span>(r=<span class="code-number">0</span>;r&lt;e.length&amp;&amp;!(e[r].pts&gt;n);r++);<span class="code-keyword">return</span> e.slice(r)}(<span class="code-keyword">this</span>.gopBuffer_,<span class="code-keyword">this</span>.mediaSource_.player_?<span class="code-keyword">this</span>.mediaSource_.player_.currentTime():<span class="code-literal">null</span>,<span class="code-keyword">this</span>.timeMapping_)}),<span class="code-keyword">this</span>.transmuxer_.postMessage({<span class="code-attr">action</span>:<span class="code-string">"push"</span>,<span class="code-attr">data</span>:e.buffer,<span class="code-attr">byteOffset</span>:e.byteOffset,<span class="code-attr">byteLength</span>:e.byteLength},[e.buffer]),<span class="code-keyword">this</span>.transmuxer_.postMessage({<span class="code-attr">action</span>:<span class="code-string">"flush"</span>})}},{<span class="code-attr">key</span>:<span class="code-string">"appendGopInfo_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.gopBuffer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(!t.length)<span class="code-keyword">return</span> e;<span class="code-keyword">if</span>(i)<span class="code-keyword">return</span> t.slice();<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=t[<span class="code-number">0</span>].pts,r=<span class="code-number">0</span>;r&lt;e.length&amp;&amp;!(e[r].pts&gt;=n);r++);<span class="code-keyword">return</span> e.slice(<span class="code-number">0</span>,r).concat(t)}(<span class="code-keyword">this</span>.gopBuffer_,e.data.gopInfo,<span class="code-keyword">this</span>.safeAppend_)}},{<span class="code-attr">key</span>:<span class="code-string">"remove"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.videoBuffer_&amp;&amp;(<span class="code-keyword">this</span>.videoBuffer_.updating=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.videoBuffer_.remove(e,t),<span class="code-keyword">this</span>.gopBuffer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-built_in">Math</span>.ceil(<span class="code-number">9e4</span>*(t-n)),a=<span class="code-built_in">Math</span>.ceil(<span class="code-number">9e4</span>*(i-n)),s=e.slice(),o=e.length;o--&amp;&amp;!(e[o].pts&lt;=a););<span class="code-keyword">if</span>(<span class="code-number">-1</span>===o)<span class="code-keyword">return</span> s;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> u=o+<span class="code-number">1</span>;u--&amp;&amp;!(e[u].pts&lt;=r););<span class="code-keyword">return</span> u=<span class="code-built_in">Math</span>.max(u,<span class="code-number">0</span>),s.splice(u,o-u+<span class="code-number">1</span>),s}(<span class="code-keyword">this</span>.gopBuffer_,e,t,<span class="code-keyword">this</span>.timeMapping_)),!<span class="code-keyword">this</span>.audioDisabled_&amp;&amp;<span class="code-keyword">this</span>.audioBuffer_&amp;&amp;(<span class="code-keyword">this</span>.audioBuffer_.updating=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.audioBuffer_.remove(e,t)),we(e,t,<span class="code-keyword">this</span>.metadataTrack_),<span class="code-keyword">this</span>.inbandTextTracks_)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i <span class="code-keyword">in</span> <span class="code-keyword">this</span>.inbandTextTracks_)we(e,t,<span class="code-keyword">this</span>.inbandTextTracks_[i])}},{<span class="code-attr">key</span>:<span class="code-string">"processPendingSegments_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e={<span class="code-attr">video</span>:{<span class="code-attr">segments</span>:[],<span class="code-attr">bytes</span>:<span class="code-number">0</span>},<span class="code-attr">audio</span>:{<span class="code-attr">segments</span>:[],<span class="code-attr">bytes</span>:<span class="code-number">0</span>},<span class="code-attr">captions</span>:[],<span class="code-attr">metadata</span>:[]};<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.pendingBuffers_.length)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"updateend"</span>),<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.bufferUpdating_=!<span class="code-number">1</span>);e=<span class="code-keyword">this</span>.pendingBuffers_.reduce(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=t.type,n=t.data,r=t.initSegment;<span class="code-keyword">return</span> e[i].segments.push(n),e[i].bytes+=n.byteLength,e[i].initSegment=r,t.captions&amp;&amp;(e.captions=e.captions.concat(t.captions)),t.info&amp;&amp;(e[i].info=t.info),t.metadata&amp;&amp;(e.metadata=e.metadata.concat(t.metadata)),e},e),<span class="code-keyword">this</span>.videoBuffer_||<span class="code-keyword">this</span>.audioBuffer_||(<span class="code-number">0</span>===e.video.bytes&amp;&amp;(<span class="code-keyword">this</span>.videoCodec_=<span class="code-literal">null</span>),<span class="code-number">0</span>===e.audio.bytes&amp;&amp;(<span class="code-keyword">this</span>.audioCodec_=<span class="code-literal">null</span>),<span class="code-keyword">this</span>.createRealSourceBuffers_()),e.audio.info&amp;&amp;<span class="code-keyword">this</span>.mediaSource_.trigger({<span class="code-attr">type</span>:<span class="code-string">"audioinfo"</span>,<span class="code-attr">info</span>:e.audio.info}),e.video.info&amp;&amp;<span class="code-keyword">this</span>.mediaSource_.trigger({<span class="code-attr">type</span>:<span class="code-string">"videoinfo"</span>,<span class="code-attr">info</span>:e.video.info}),<span class="code-keyword">this</span>.appendAudioInitSegment_&amp;&amp;(!<span class="code-keyword">this</span>.audioDisabled_&amp;&amp;<span class="code-keyword">this</span>.audioBuffer_&amp;&amp;(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),<span class="code-keyword">this</span>.appendAudioInitSegment_=!<span class="code-number">1</span>);<span class="code-keyword">var</span> t=!<span class="code-number">1</span>;<span class="code-keyword">this</span>.videoBuffer_&amp;&amp;e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,<span class="code-keyword">this</span>.concatAndAppendSegments_(e.video,<span class="code-keyword">this</span>.videoBuffer_)):!<span class="code-keyword">this</span>.videoBuffer_||!<span class="code-keyword">this</span>.audioDisabled_&amp;&amp;<span class="code-keyword">this</span>.audioBuffer_||(t=!<span class="code-number">0</span>),Ee(<span class="code-keyword">this</span>,e.captions,e.metadata),!<span class="code-keyword">this</span>.audioDisabled_&amp;&amp;<span class="code-keyword">this</span>.audioBuffer_&amp;&amp;<span class="code-keyword">this</span>.concatAndAppendSegments_(e.audio,<span class="code-keyword">this</span>.audioBuffer_),<span class="code-keyword">this</span>.pendingBuffers_.length=<span class="code-number">0</span>,t&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"updateend"</span>),<span class="code-keyword">this</span>.bufferUpdating_=!<span class="code-number">1</span>}},{<span class="code-attr">key</span>:<span class="code-string">"concatAndAppendSegments_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-number">0</span>,n=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">if</span>(e.bytes){n=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.bytes),e.segments.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{n.set(e,i),i+=e.byteLength});<span class="code-keyword">try</span>{t.updating=!<span class="code-number">0</span>,t.appendBuffer(n)}<span class="code-keyword">catch</span>(e){<span class="code-keyword">this</span>.mediaSource_.player_&amp;&amp;<span class="code-keyword">this</span>.mediaSource_.player_.error({<span class="code-attr">code</span>:<span class="code-number">-3</span>,<span class="code-attr">type</span>:<span class="code-string">"APPEND_BUFFER_ERR"</span>,<span class="code-attr">message</span>:e.message,<span class="code-attr">originalError</span>:e})}}}},{<span class="code-attr">key</span>:<span class="code-string">"abort"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.videoBuffer_&amp;&amp;<span class="code-keyword">this</span>.videoBuffer_.abort(),!<span class="code-keyword">this</span>.audioDisabled_&amp;&amp;<span class="code-keyword">this</span>.audioBuffer_&amp;&amp;<span class="code-keyword">this</span>.audioBuffer_.abort(),<span class="code-keyword">this</span>.transmuxer_&amp;&amp;<span class="code-keyword">this</span>.transmuxer_.postMessage({<span class="code-attr">action</span>:<span class="code-string">"reset"</span>}),<span class="code-keyword">this</span>.pendingBuffers_.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.bufferUpdating_=!<span class="code-number">1</span>}}]),i}(t.EventTarget),Ke=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">i</span>(<span class="code-params"></span>)</span>{_(<span class="code-keyword">this</span>,i);<span class="code-keyword">var</span> e=T(<span class="code-keyword">this</span>,(i.__proto__||<span class="code-built_in">Object</span>.getPrototypeOf(i)).call(<span class="code-keyword">this</span>)),n=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">for</span>(n <span class="code-keyword">in</span> e.nativeMediaSource_=<span class="code-keyword">new</span> u.MediaSource,e.nativeMediaSource_)n <span class="code-keyword">in</span> i.prototype||<span class="code-string">"function"</span>!=<span class="code-keyword">typeof</span> e.nativeMediaSource_[n]||(e[n]=e.nativeMediaSource_[n].bind(e.nativeMediaSource_));<span class="code-keyword">return</span> e.duration_=<span class="code-literal">NaN</span>,<span class="code-built_in">Object</span>.defineProperty(e,<span class="code-string">"duration"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.duration_===<span class="code-number">1</span>/<span class="code-number">0</span>?<span class="code-keyword">this</span>.duration_:<span class="code-keyword">this</span>.nativeMediaSource_.duration},<span class="code-attr">set</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.duration_=e,e===<span class="code-number">1</span>/<span class="code-number">0</span>||(<span class="code-keyword">this</span>.nativeMediaSource_.duration=e)}}),<span class="code-built_in">Object</span>.defineProperty(e,<span class="code-string">"seekable"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.duration_===<span class="code-number">1</span>/<span class="code-number">0</span>?t.createTimeRanges([[<span class="code-number">0</span>,<span class="code-keyword">this</span>.nativeMediaSource_.duration]]):<span class="code-keyword">this</span>.nativeMediaSource_.seekable}}),<span class="code-built_in">Object</span>.defineProperty(e,<span class="code-string">"readyState"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.nativeMediaSource_.readyState}}),<span class="code-built_in">Object</span>.defineProperty(e,<span class="code-string">"activeSourceBuffers"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.activeSourceBuffers_}}),e.sourceBuffers=[],e.activeSourceBuffers_=[],e.updateActiveSourceBuffers_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(e.activeSourceBuffers_.length=<span class="code-number">0</span>,<span class="code-number">1</span>===e.sourceBuffers.length){<span class="code-keyword">var</span> t=e.sourceBuffers[<span class="code-number">0</span>];<span class="code-keyword">return</span> t.appendAudioInitSegment_=!<span class="code-number">0</span>,t.audioDisabled_=!t.audioCodec_,<span class="code-keyword">void</span> e.activeSourceBuffers_.push(t)}<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=!<span class="code-number">1</span>,n=!<span class="code-number">0</span>,r=<span class="code-number">0</span>;r&lt;e.player_.audioTracks().length;r++){<span class="code-keyword">var</span> a=e.player_.audioTracks()[r];<span class="code-keyword">if</span>(a.enabled&amp;&amp;<span class="code-string">"main"</span>!==a.kind){i=!<span class="code-number">0</span>,n=!<span class="code-number">1</span>;<span class="code-keyword">break</span>}}e.sourceBuffers.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,r</span>)</span>{<span class="code-keyword">if</span>(t.appendAudioInitSegment_=!<span class="code-number">0</span>,t.videoCodec_&amp;&amp;t.audioCodec_)t.audioDisabled_=i;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t.videoCodec_&amp;&amp;!t.audioCodec_)t.audioDisabled_=!<span class="code-number">0</span>,n=!<span class="code-number">1</span>;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(!t.videoCodec_&amp;&amp;t.audioCodec_&amp;&amp;(t.audioDisabled_=r?n:!n,t.audioDisabled_))<span class="code-keyword">return</span>;e.activeSourceBuffers_.push(t)})},e.onPlayerMediachange_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.sourceBuffers.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.appendAudioInitSegment_=!<span class="code-number">0</span>})},e.onHlsReset_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.sourceBuffers.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.transmuxer_&amp;&amp;e.transmuxer_.postMessage({<span class="code-attr">action</span>:<span class="code-string">"resetCaptions"</span>})})},e.onHlsSegmentTimeMapping_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.sourceBuffers.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.timeMapping_=t.mapping})},[<span class="code-string">"sourceopen"</span>,<span class="code-string">"sourceclose"</span>,<span class="code-string">"sourceended"</span>].forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.nativeMediaSource_.addEventListener(e,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>))},e),e.on(<span class="code-string">"sourceopen"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n=s.querySelector(<span class="code-string">'[src="'</span>+e.url_+<span class="code-string">'"]'</span>);n&amp;&amp;(e.player_=t(n.parentNode),e.player_&amp;&amp;(e.player_.tech_.on(<span class="code-string">"hls-reset"</span>,e.onHlsReset_),e.player_.tech_.on(<span class="code-string">"hls-segment-time-mapping"</span>,e.onHlsSegmentTimeMapping_),e.player_.audioTracks&amp;&amp;e.player_.audioTracks()&amp;&amp;(e.player_.audioTracks().on(<span class="code-string">"change"</span>,e.updateActiveSourceBuffers_),e.player_.audioTracks().on(<span class="code-string">"addtrack"</span>,e.updateActiveSourceBuffers_),e.player_.audioTracks().on(<span class="code-string">"removetrack"</span>,e.updateActiveSourceBuffers_)),e.player_.on(<span class="code-string">"mediachange"</span>,e.onPlayerMediachange_)))}),e.on(<span class="code-string">"sourceended"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=Le(e.duration),n=<span class="code-number">0</span>;n&lt;e.sourceBuffers.length;n++){<span class="code-keyword">var</span> r=e.sourceBuffers[n],a=r.metadataTrack_&amp;&amp;r.metadataTrack_.cues;a&amp;&amp;a.length&amp;&amp;(a[a.length<span class="code-number">-1</span>].endTime=i)}}),e.on(<span class="code-string">"sourceclose"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.sourceBuffers.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.transmuxer_&amp;&amp;e.transmuxer_.terminate()}),<span class="code-keyword">this</span>.sourceBuffers.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.player_&amp;&amp;(<span class="code-keyword">this</span>.player_.audioTracks&amp;&amp;<span class="code-keyword">this</span>.player_.audioTracks()&amp;&amp;(<span class="code-keyword">this</span>.player_.audioTracks().off(<span class="code-string">"change"</span>,<span class="code-keyword">this</span>.updateActiveSourceBuffers_),<span class="code-keyword">this</span>.player_.audioTracks().off(<span class="code-string">"addtrack"</span>,<span class="code-keyword">this</span>.updateActiveSourceBuffers_),<span class="code-keyword">this</span>.player_.audioTracks().off(<span class="code-string">"removetrack"</span>,<span class="code-keyword">this</span>.updateActiveSourceBuffers_)),<span class="code-keyword">this</span>.player_.el_&amp;&amp;<span class="code-keyword">this</span>.player_.off(<span class="code-string">"mediachange"</span>,<span class="code-keyword">this</span>.onPlayerMediachange_),<span class="code-keyword">this</span>.player_.tech_&amp;&amp;<span class="code-keyword">this</span>.player_.tech_.el_&amp;&amp;(<span class="code-keyword">this</span>.player_.tech_.off(<span class="code-string">"hls-reset"</span>,<span class="code-keyword">this</span>.onHlsReset_),<span class="code-keyword">this</span>.player_.tech_.off(<span class="code-string">"hls-segment-time-mapping"</span>,<span class="code-keyword">this</span>.onHlsSegmentTimeMapping_)))}),e}<span class="code-keyword">return</span> b(i,e),v(i,[{<span class="code-attr">key</span>:<span class="code-string">"addSeekableRange_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.duration!==<span class="code-number">1</span>/<span class="code-number">0</span>)<span class="code-keyword">throw</span>(i=<span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"</span>)).name=<span class="code-string">"InvalidStateError"</span>,i.code=<span class="code-number">11</span>,i;(t&gt;<span class="code-keyword">this</span>.nativeMediaSource_.duration||<span class="code-built_in">isNaN</span>(<span class="code-keyword">this</span>.nativeMediaSource_.duration))&amp;&amp;(<span class="code-keyword">this</span>.nativeMediaSource_.duration=t)}},{<span class="code-attr">key</span>:<span class="code-string">"addSourceBuffer"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">void</span> <span class="code-number">0</span>,i=Ve(e);<span class="code-keyword">if</span>(<span class="code-regexp">/^(video|audio)\/mp2t$/i</span>.test(i.type)){<span class="code-keyword">var</span> n=[];i.parameters&amp;&amp;i.parameters.codecs&amp;&amp;(n=i.parameters.codecs.split(<span class="code-string">","</span>),n=(n=Fe(n)).filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> We(e)||ze(e)})),<span class="code-number">0</span>===n.length&amp;&amp;(n=[<span class="code-string">"avc1.4d400d"</span>,<span class="code-string">"mp4a.40.2"</span>]),t=<span class="code-keyword">new</span> Ye(<span class="code-keyword">this</span>,n),<span class="code-number">0</span>!==<span class="code-keyword">this</span>.sourceBuffers.length&amp;&amp;(<span class="code-keyword">this</span>.sourceBuffers[<span class="code-number">0</span>].createRealSourceBuffers_(),t.createRealSourceBuffers_(),<span class="code-keyword">this</span>.sourceBuffers[<span class="code-number">0</span>].audioDisabled_=!<span class="code-number">0</span>)}<span class="code-keyword">else</span> t=<span class="code-keyword">this</span>.nativeMediaSource_.addSourceBuffer(e);<span class="code-keyword">return</span> <span class="code-keyword">this</span>.sourceBuffers.push(t),t}}]),i}(t.EventTarget),$e=<span class="code-number">0</span>;t.mediaSources={};<span class="code-keyword">var</span> Qe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">var</span> n=t.mediaSources[e];<span class="code-keyword">if</span>(!n)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Media Source not found (Video.js)"</span>);n.trigger({<span class="code-attr">type</span>:<span class="code-string">"sourceopen"</span>,<span class="code-attr">swfId</span>:i})},Je=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span>!!u.MediaSource&amp;&amp;!!u.MediaSource.isTypeSupported&amp;&amp;u.MediaSource.isTypeSupported(<span class="code-string">'video/mp4;codecs="avc1.4d400d,mp4a.40.2"'</span>)},Ze=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.MediaSource={<span class="code-attr">open</span>:Qe,<span class="code-attr">supportsNativeMediaSources</span>:Je},Je())<span class="code-keyword">return</span> <span class="code-keyword">new</span> Ke;<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Cannot use create a virtual MediaSource for this video"</span>)};Ze.open=Qe,Ze.supportsNativeMediaSources=Je;<span class="code-keyword">var</span> et={<span class="code-attr">createObjectURL</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">return</span> e <span class="code-keyword">instanceof</span> Ke?(i=u.URL.createObjectURL(e.nativeMediaSource_),e.url_=i,i):e <span class="code-keyword">instanceof</span> Ke?(i=<span class="code-string">"blob:vjs-media-source/"</span>+$e,$e++,t.mediaSources[i]=e,i):(i=u.URL.createObjectURL(e),e.url_=i,i)}};t.MediaSource=Ze,t.URL=et;
</code></td></tr><tr><td id="L10" class="css-a4x74f"><span>10</span></td><td id="LC10" class="css-1dcdqdg"><code><span class="code-comment">/*! @name mpd-parser @version 0.8.1 @license Apache-2.0 */</span>
</code></td></tr><tr><td id="L11" class="css-a4x74f"><span>11</span></td><td id="LC11" class="css-1dcdqdg"><code><span class="code-keyword">var</span> tt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!!e&amp;&amp;<span class="code-string">"object"</span>==<span class="code-keyword">typeof</span> e},it=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-built_in">arguments</span>.length,i=<span class="code-keyword">new</span> <span class="code-built_in">Array</span>(t),n=<span class="code-number">0</span>;n&lt;t;n++)i[n]=<span class="code-built_in">arguments</span>[n];<span class="code-keyword">return</span> i.reduce(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">Object</span>.keys(i).forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-built_in">Array</span>.isArray(t[n])&amp;&amp;<span class="code-built_in">Array</span>.isArray(i[n])?t[n]=t[n].concat(i[n]):tt(t[n])&amp;&amp;tt(i[n])?t[n]=e(t[n],i[n]):t[n]=i[n]}),t},{})},nt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.reduce(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.concat(t)},[])},rt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!e.length)<span class="code-keyword">return</span>[];<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=[],i=<span class="code-number">0</span>;i&lt;e.length;i++)t.push(e[i]);<span class="code-keyword">return</span> t},at=<span class="code-string">"INVALID_NUMBER_OF_PERIOD"</span>,st=<span class="code-string">"DASH_EMPTY_MANIFEST"</span>,ot=<span class="code-string">"DASH_INVALID_XML"</span>,ut=<span class="code-string">"NO_BASE_URL"</span>,dt=<span class="code-string">"SEGMENT_TIME_UNSPECIFIED"</span>,lt=<span class="code-string">"UNSUPPORTED_UTC_TIMING_SCHEME"</span>;<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> <span class="code-built_in">window</span>?<span class="code-built_in">window</span>:<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> global?global:<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> self&amp;&amp;self;<span class="code-keyword">var</span> ht=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e(t={<span class="code-attr">exports</span>:{}},t.exports),t.exports}(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n,r,a,s;i=<span class="code-regexp">/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/</span>,n=<span class="code-regexp">/^([^\/?#]*)(.*)$/</span>,r=<span class="code-regexp">/(?:\/|^)\.(?=\/)/g</span>,a=<span class="code-regexp">/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g</span>,s={<span class="code-attr">buildAbsoluteURL</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(i=i||{},e=e.trim(),!(t=t.trim())){<span class="code-keyword">if</span>(!i.alwaysNormalize)<span class="code-keyword">return</span> e;<span class="code-keyword">var</span> r=s.parseURL(e);<span class="code-keyword">if</span>(!r)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Error trying to parse base URL."</span>);<span class="code-keyword">return</span> r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}<span class="code-keyword">var</span> a=s.parseURL(t);<span class="code-keyword">if</span>(!a)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Error trying to parse relative URL."</span>);<span class="code-keyword">if</span>(a.scheme)<span class="code-keyword">return</span> i.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;<span class="code-keyword">var</span> o=s.parseURL(e);<span class="code-keyword">if</span>(!o)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Error trying to parse base URL."</span>);<span class="code-keyword">if</span>(!o.netLoc&amp;&amp;o.path&amp;&amp;<span class="code-string">"/"</span>!==o.path[<span class="code-number">0</span>]){<span class="code-keyword">var</span> u=n.exec(o.path);o.netLoc=u[<span class="code-number">1</span>],o.path=u[<span class="code-number">2</span>]}o.netLoc&amp;&amp;!o.path&amp;&amp;(o.path=<span class="code-string">"/"</span>);<span class="code-keyword">var</span> d={<span class="code-attr">scheme</span>:o.scheme,<span class="code-attr">netLoc</span>:a.netLoc,<span class="code-attr">path</span>:<span class="code-literal">null</span>,<span class="code-attr">params</span>:a.params,<span class="code-attr">query</span>:a.query,<span class="code-attr">fragment</span>:a.fragment};<span class="code-keyword">if</span>(!a.netLoc&amp;&amp;(d.netLoc=o.netLoc,<span class="code-string">"/"</span>!==a.path[<span class="code-number">0</span>]))<span class="code-keyword">if</span>(a.path){<span class="code-keyword">var</span> l=o.path,h=l.substring(<span class="code-number">0</span>,l.lastIndexOf(<span class="code-string">"/"</span>)+<span class="code-number">1</span>)+a.path;d.path=s.normalizePath(h)}<span class="code-keyword">else</span> d.path=o.path,a.params||(d.params=o.params,a.query||(d.query=o.query));<span class="code-keyword">return</span> <span class="code-literal">null</span>===d.path&amp;&amp;(d.path=i.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(d)},<span class="code-attr">parseURL</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=i.exec(e);<span class="code-keyword">return</span> t?{<span class="code-attr">scheme</span>:t[<span class="code-number">1</span>]||<span class="code-string">""</span>,<span class="code-attr">netLoc</span>:t[<span class="code-number">2</span>]||<span class="code-string">""</span>,<span class="code-attr">path</span>:t[<span class="code-number">3</span>]||<span class="code-string">""</span>,<span class="code-attr">params</span>:t[<span class="code-number">4</span>]||<span class="code-string">""</span>,<span class="code-attr">query</span>:t[<span class="code-number">5</span>]||<span class="code-string">""</span>,<span class="code-attr">fragment</span>:t[<span class="code-number">6</span>]||<span class="code-string">""</span>}:<span class="code-literal">null</span>},<span class="code-attr">normalizePath</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(e=e.split(<span class="code-string">""</span>).reverse().join(<span class="code-string">""</span>).replace(r,<span class="code-string">""</span>);e.length!==(e=e.replace(a,<span class="code-string">""</span>)).length;);<span class="code-keyword">return</span> e.split(<span class="code-string">""</span>).reverse().join(<span class="code-string">""</span>)},<span class="code-attr">buildURLFromParts</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s}),ct=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span><span class="code-regexp">/^[a-z]+:/i</span>.test(t)?t:(<span class="code-regexp">/\/\//i</span>.test(e)||(e=ht.buildAbsoluteURL(u.location.href,e)),ht.buildAbsoluteURL(e,t))},ft=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.baseUrl,i=<span class="code-keyword">void</span> <span class="code-number">0</span>===t?<span class="code-string">""</span>:t,n=e.source,r=<span class="code-keyword">void</span> <span class="code-number">0</span>===n?<span class="code-string">""</span>:n,a=e.range,s=<span class="code-keyword">void</span> <span class="code-number">0</span>===a?<span class="code-string">""</span>:a,o=e.indexRange,u=<span class="code-keyword">void</span> <span class="code-number">0</span>===o?<span class="code-string">""</span>:o,d={<span class="code-attr">uri</span>:r,<span class="code-attr">resolvedUri</span>:ct(i||<span class="code-string">""</span>,r)};<span class="code-keyword">if</span>(s||u){<span class="code-keyword">var</span> l=(s||u).split(<span class="code-string">"-"</span>),h=<span class="code-built_in">parseInt</span>(l[<span class="code-number">0</span>],<span class="code-number">10</span>),c=<span class="code-built_in">parseInt</span>(l[<span class="code-number">1</span>],<span class="code-number">10</span>);d.byterange={<span class="code-attr">length</span>:c-h+<span class="code-number">1</span>,<span class="code-attr">offset</span>:h}}<span class="code-keyword">return</span> d},pt={<span class="code-attr">static</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.duration,i=e.timescale,n=<span class="code-keyword">void</span> <span class="code-number">0</span>===i?<span class="code-number">1</span>:i,r=e.sourceDuration;<span class="code-keyword">return</span>{<span class="code-attr">start</span>:<span class="code-number">0</span>,<span class="code-attr">end</span>:<span class="code-built_in">Math</span>.ceil(r/(t/n))}},<span class="code-attr">dynamic</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.NOW,i=e.clientOffset,n=e.availabilityStartTime,r=e.timescale,a=<span class="code-keyword">void</span> <span class="code-number">0</span>===r?<span class="code-number">1</span>:r,s=e.duration,o=e.start,u=<span class="code-keyword">void</span> <span class="code-number">0</span>===o?<span class="code-number">0</span>:o,d=e.minimumUpdatePeriod,l=<span class="code-keyword">void</span> <span class="code-number">0</span>===d?<span class="code-number">0</span>:d,h=e.timeShiftBufferDepth,c=<span class="code-keyword">void</span> <span class="code-number">0</span>===h?<span class="code-number">1</span>/<span class="code-number">0</span>:h,f=(t+i)/<span class="code-number">1e3</span>,p=n+u,m=f+l-p,g=<span class="code-built_in">Math</span>.ceil(m*a/s),y=<span class="code-built_in">Math</span>.floor((f-p-c)*a/s),_=<span class="code-built_in">Math</span>.floor((f-p)*a/s);<span class="code-keyword">return</span>{<span class="code-attr">start</span>:<span class="code-built_in">Math</span>.max(<span class="code-number">0</span>,y),<span class="code-attr">end</span>:<span class="code-built_in">Math</span>.min(g,_)}}},mt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.type,i=<span class="code-keyword">void</span> <span class="code-number">0</span>===t?<span class="code-string">"static"</span>:t,n=e.duration,r=e.timescale,a=<span class="code-keyword">void</span> <span class="code-number">0</span>===r?<span class="code-number">1</span>:r,s=e.sourceDuration,o=pt[i](e),u=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=[],n=e;n&lt;t;n++)i.push(n);<span class="code-keyword">return</span> i}(o.start,o.end).map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n=e.duration,r=e.timescale,a=<span class="code-keyword">void</span> <span class="code-number">0</span>===r?<span class="code-number">1</span>:r,s=e.periodIndex,o=e.startNumber;<span class="code-keyword">return</span>{<span class="code-attr">number</span>:(<span class="code-keyword">void</span> <span class="code-number">0</span>===o?<span class="code-number">1</span>:o)+t,<span class="code-attr">duration</span>:n/a,<span class="code-attr">timeline</span>:s,<span class="code-attr">time</span>:i*n}}}(e));<span class="code-keyword">if</span>(<span class="code-string">"static"</span>===i){<span class="code-keyword">var</span> d=u.length<span class="code-number">-1</span>;u[d].duration=s-n/a*d}<span class="code-keyword">return</span> u},gt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.baseUrl,i=e.initialization,n=<span class="code-keyword">void</span> <span class="code-number">0</span>===i?{}:i,r=e.sourceDuration,a=e.timescale,s=<span class="code-keyword">void</span> <span class="code-number">0</span>===a?<span class="code-number">1</span>:a,o=e.indexRange,u=<span class="code-keyword">void</span> <span class="code-number">0</span>===o?<span class="code-string">""</span>:o,d=e.duration;<span class="code-keyword">if</span>(!t)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(ut);<span class="code-keyword">var</span> l=ft({<span class="code-attr">baseUrl</span>:t,<span class="code-attr">source</span>:n.sourceURL,<span class="code-attr">range</span>:n.range}),h=ft({<span class="code-attr">baseUrl</span>:t,<span class="code-attr">source</span>:t,<span class="code-attr">indexRange</span>:u});<span class="code-keyword">if</span>(h.map=l,d){<span class="code-keyword">var</span> c=mt(e);c.length&amp;&amp;(h.duration=c[<span class="code-number">0</span>].duration,h.timeline=c[<span class="code-number">0</span>].timeline)}<span class="code-keyword">else</span> r&amp;&amp;(h.duration=r/s,h.timeline=<span class="code-number">0</span>);<span class="code-keyword">return</span> h.number=<span class="code-number">0</span>,[h]},yt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=e.sidx.map?e.sidx.map:<span class="code-literal">null</span>,r=e.sidx.duration,a=e.timeline||<span class="code-number">0</span>,s=e.sidx.byterange,o=s.offset+s.length,u=t.timescale,d=t.references.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">1</span>!==e.referenceType}),l=[],h=o+t.firstOffset,c=<span class="code-number">0</span>;c&lt;d.length;c++){<span class="code-keyword">var</span> f=t.references[c],p=f.referencedSize,m=f.subsegmentDuration,g=gt({<span class="code-attr">baseUrl</span>:i,<span class="code-attr">timescale</span>:u,<span class="code-attr">timeline</span>:a,<span class="code-attr">periodIndex</span>:a,<span class="code-attr">duration</span>:m,<span class="code-attr">sourceDuration</span>:r,<span class="code-attr">indexRange</span>:h+<span class="code-string">"-"</span>+(h+p<span class="code-number">-1</span>)})[<span class="code-number">0</span>];n&amp;&amp;(g.map=n),l.push(g),h+=p}<span class="code-keyword">return</span> e.segments=l,e},_t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">return</span>(t=e.reduce(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n=t.attributes.id+(t.attributes.lang||<span class="code-string">""</span>);e[n]?(t.segments[<span class="code-number">0</span>]&amp;&amp;(t.segments[<span class="code-number">0</span>].discontinuity=!<span class="code-number">0</span>),(i=e[n].segments).push.apply(i,t.segments),t.attributes.contentProtection&amp;&amp;(e[n].attributes.contentProtection=t.attributes.contentProtection)):e[n]=t;<span class="code-keyword">return</span> e},{}),<span class="code-built_in">Object</span>.keys(t).map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t[e]})).map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i;<span class="code-keyword">return</span> e.discontinuityStarts=(t=e.segments,i=<span class="code-string">"discontinuity"</span>,t.reduce(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,n</span>)</span>{<span class="code-keyword">return</span> t[i]&amp;&amp;e.push(n),e},[])),e})},vt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t={}),!<span class="code-built_in">Object</span>.keys(t).length)<span class="code-keyword">return</span> e;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i <span class="code-keyword">in</span> e){<span class="code-keyword">var</span> n=e[i];<span class="code-keyword">if</span>(n.sidx){<span class="code-keyword">var</span> r=n.sidx.uri+<span class="code-string">"-"</span>+(s=n.sidx.byterange,<span class="code-keyword">void</span> <span class="code-number">0</span>,o=s.offset+s.length<span class="code-number">-1</span>,s.offset+<span class="code-string">"-"</span>+o),a=t[r]&amp;&amp;t[r].sidx;n.sidx&amp;&amp;a&amp;&amp;yt(n,a,n.sidx.resolvedUri)}}<span class="code-keyword">var</span> s,o;<span class="code-keyword">return</span> e},bt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=e.attributes,n=e.segments,r=e.sidx,a={<span class="code-attr">attributes</span>:(t={<span class="code-attr">NAME</span>:i.id,<span class="code-attr">AUDIO</span>:<span class="code-string">"audio"</span>,<span class="code-attr">SUBTITLES</span>:<span class="code-string">"subs"</span>,<span class="code-attr">RESOLUTION</span>:{<span class="code-attr">width</span>:i.width,<span class="code-attr">height</span>:i.height},<span class="code-attr">CODECS</span>:i.codecs,<span class="code-attr">BANDWIDTH</span>:i.bandwidth},t[<span class="code-string">"PROGRAM-ID"</span>]=<span class="code-number">1</span>,t),<span class="code-attr">uri</span>:<span class="code-string">""</span>,<span class="code-attr">endList</span>:<span class="code-string">"static"</span>===(i.type||<span class="code-string">"static"</span>),<span class="code-attr">timeline</span>:i.periodIndex,<span class="code-attr">resolvedUri</span>:<span class="code-string">""</span>,<span class="code-attr">targetDuration</span>:i.duration,<span class="code-attr">segments</span>:n,<span class="code-attr">mediaSequence</span>:n.length?n[<span class="code-number">0</span>].number:<span class="code-number">1</span>};<span class="code-keyword">return</span> i.contentProtection&amp;&amp;(a.contentProtection=i.contentProtection),r&amp;&amp;(a.sidx=r),a},Tt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i;<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t={}),!e.length)<span class="code-keyword">return</span>{};<span class="code-keyword">var</span> n=e[<span class="code-number">0</span>].attributes,r=n.sourceDuration,a=n.minimumUpdatePeriod,s=<span class="code-keyword">void</span> <span class="code-number">0</span>===a?<span class="code-number">0</span>:a,o=_t(e.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.attributes;<span class="code-keyword">return</span><span class="code-string">"video/mp4"</span>===t.mimeType||<span class="code-string">"video"</span>===t.contentType})).map(bt),u=_t(e.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.attributes;<span class="code-keyword">return</span><span class="code-string">"audio/mp4"</span>===t.mimeType||<span class="code-string">"audio"</span>===t.contentType})),d=e.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.attributes;<span class="code-keyword">return</span><span class="code-string">"text/vtt"</span>===t.mimeType||<span class="code-string">"text"</span>===t.contentType}),l={<span class="code-attr">allowCache</span>:!<span class="code-number">0</span>,<span class="code-attr">discontinuityStarts</span>:[],<span class="code-attr">segments</span>:[],<span class="code-attr">endList</span>:!<span class="code-number">0</span>,<span class="code-attr">mediaGroups</span>:(i={<span class="code-attr">AUDIO</span>:{},<span class="code-attr">VIDEO</span>:{}},i[<span class="code-string">"CLOSED-CAPTIONS"</span>]={},i.SUBTITLES={},i),<span class="code-attr">uri</span>:<span class="code-string">""</span>,<span class="code-attr">duration</span>:r,<span class="code-attr">playlists</span>:vt(o,t),<span class="code-attr">minimumUpdatePeriod</span>:<span class="code-number">1e3</span>*s};<span class="code-keyword">return</span> u.length&amp;&amp;(l.mediaGroups.AUDIO.audio=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i;<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t={});<span class="code-keyword">var</span> n=e.reduce(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,n</span>)</span>{<span class="code-keyword">var</span> r=n.attributes.role&amp;&amp;n.attributes.role.value||<span class="code-string">""</span>,a=n.attributes.lang||<span class="code-string">""</span>,s=<span class="code-string">"main"</span>;<span class="code-keyword">if</span>(a){<span class="code-keyword">var</span> o=r?<span class="code-string">" ("</span>+r+<span class="code-string">")"</span>:<span class="code-string">""</span>;s=<span class="code-string">""</span>+n.attributes.lang+o}<span class="code-keyword">return</span> e[s]&amp;&amp;e[s].playlists[<span class="code-number">0</span>].attributes.BANDWIDTH&gt;n.attributes.bandwidth?e:(e[s]={<span class="code-attr">language</span>:a,<span class="code-attr">autoselect</span>:!<span class="code-number">0</span>,<span class="code-attr">default</span>:<span class="code-string">"main"</span>===r,<span class="code-attr">playlists</span>:vt([<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=e.attributes,n=e.segments,r=e.sidx,a={<span class="code-attr">attributes</span>:(t={<span class="code-attr">NAME</span>:i.id,<span class="code-attr">BANDWIDTH</span>:i.bandwidth,<span class="code-attr">CODECS</span>:i.codecs},t[<span class="code-string">"PROGRAM-ID"</span>]=<span class="code-number">1</span>,t),<span class="code-attr">uri</span>:<span class="code-string">""</span>,<span class="code-attr">endList</span>:<span class="code-string">"static"</span>===(i.type||<span class="code-string">"static"</span>),<span class="code-attr">timeline</span>:i.periodIndex,<span class="code-attr">resolvedUri</span>:<span class="code-string">""</span>,<span class="code-attr">targetDuration</span>:i.duration,<span class="code-attr">segments</span>:n,<span class="code-attr">mediaSequence</span>:n.length?n[<span class="code-number">0</span>].number:<span class="code-number">1</span>};<span class="code-keyword">return</span> i.contentProtection&amp;&amp;(a.contentProtection=i.contentProtection),r&amp;&amp;(a.sidx=r),a}(n)],t),<span class="code-attr">uri</span>:<span class="code-string">""</span>},<span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;<span class="code-string">"main"</span>===r&amp;&amp;((i=n).default=!<span class="code-number">0</span>),e)},{});i||(n[<span class="code-built_in">Object</span>.keys(n)[<span class="code-number">0</span>]].default=!<span class="code-number">0</span>);<span class="code-keyword">return</span> n}(u,t)),d.length&amp;&amp;(l.mediaGroups.SUBTITLES.subs=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t={}),e.reduce(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">var</span> n,r,a,s,o=i.attributes.lang||<span class="code-string">"text"</span>;<span class="code-keyword">return</span> e[o]?e:(e[o]={<span class="code-attr">language</span>:o,<span class="code-attr">default</span>:!<span class="code-number">1</span>,<span class="code-attr">autoselect</span>:!<span class="code-number">1</span>,<span class="code-attr">playlists</span>:vt([(n=i,a=n.attributes,s=n.segments,<span class="code-keyword">void</span> <span class="code-number">0</span>===s&amp;&amp;(s=[{<span class="code-attr">uri</span>:a.baseUrl,<span class="code-attr">timeline</span>:a.periodIndex,<span class="code-attr">resolvedUri</span>:a.baseUrl||<span class="code-string">""</span>,<span class="code-attr">duration</span>:a.sourceDuration,<span class="code-attr">number</span>:<span class="code-number">0</span>}],a.duration=a.sourceDuration),{<span class="code-attr">attributes</span>:(r={<span class="code-attr">NAME</span>:a.id,<span class="code-attr">BANDWIDTH</span>:a.bandwidth},r[<span class="code-string">"PROGRAM-ID"</span>]=<span class="code-number">1</span>,r),<span class="code-attr">uri</span>:<span class="code-string">""</span>,<span class="code-attr">endList</span>:<span class="code-string">"static"</span>===(a.type||<span class="code-string">"static"</span>),<span class="code-attr">timeline</span>:a.periodIndex,<span class="code-attr">resolvedUri</span>:a.baseUrl||<span class="code-string">""</span>,<span class="code-attr">targetDuration</span>:a.duration,<span class="code-attr">segments</span>:s,<span class="code-attr">mediaSequence</span>:s.length?s[<span class="code-number">0</span>].number:<span class="code-number">1</span>})],t),<span class="code-attr">uri</span>:<span class="code-string">""</span>},e)},{})}(d,t)),l},St=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=e.NOW,r=e.clientOffset,a=e.availabilityStartTime,s=e.timescale,o=<span class="code-keyword">void</span> <span class="code-number">0</span>===s?<span class="code-number">1</span>:s,u=e.start,d=<span class="code-keyword">void</span> <span class="code-number">0</span>===u?<span class="code-number">0</span>:u,l=e.minimumUpdatePeriod,h=(n+r)/<span class="code-number">1e3</span>+(<span class="code-keyword">void</span> <span class="code-number">0</span>===l?<span class="code-number">0</span>:l)-(a+d);<span class="code-keyword">return</span> <span class="code-built_in">Math</span>.ceil((h*o-t)/i)},kt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=e.type,n=<span class="code-keyword">void</span> <span class="code-number">0</span>===i?<span class="code-string">"static"</span>:i,r=e.minimumUpdatePeriod,a=<span class="code-keyword">void</span> <span class="code-number">0</span>===r?<span class="code-number">0</span>:r,s=e.media,o=<span class="code-keyword">void</span> <span class="code-number">0</span>===s?<span class="code-string">""</span>:s,u=e.sourceDuration,d=e.timescale,l=<span class="code-keyword">void</span> <span class="code-number">0</span>===d?<span class="code-number">1</span>:d,h=e.startNumber,c=<span class="code-keyword">void</span> <span class="code-number">0</span>===h?<span class="code-number">1</span>:h,f=e.periodIndex,p=[],m=<span class="code-number">-1</span>,g=<span class="code-number">0</span>;g&lt;t.length;g++){<span class="code-keyword">var</span> y=t[g],_=y.d,v=y.r||<span class="code-number">0</span>,b=y.t||<span class="code-number">0</span>;m&lt;<span class="code-number">0</span>&amp;&amp;(m=b),b&amp;&amp;b&gt;m&amp;&amp;(m=b);<span class="code-keyword">var</span> T=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">if</span>(v&lt;<span class="code-number">0</span>){<span class="code-keyword">var</span> S=g+<span class="code-number">1</span>;T=S===t.length?<span class="code-string">"dynamic"</span>===n&amp;&amp;a&gt;<span class="code-number">0</span>&amp;&amp;o.indexOf(<span class="code-string">"$Number$"</span>)&gt;<span class="code-number">0</span>?St(e,m,_):(u*l-m)/_:(t[S].t-m)/_}<span class="code-keyword">else</span> T=v+<span class="code-number">1</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> k=c+p.length+T,w=c+p.length;w&lt;k;)p.push({<span class="code-attr">number</span>:w,<span class="code-attr">duration</span>:_/l,<span class="code-attr">time</span>:m,<span class="code-attr">timeline</span>:f}),m+=_,w++}<span class="code-keyword">return</span> p},wt=<span class="code-regexp">/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g</span>,Lt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.replace(wt,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i,n,r</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"$$"</span>===t)<span class="code-keyword">return</span><span class="code-string">"$"</span>;<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===e[i])<span class="code-keyword">return</span> t;<span class="code-keyword">var</span> a=<span class="code-string">""</span>+e[i];<span class="code-keyword">return</span><span class="code-string">"RepresentationID"</span>===i?a:(r=n?<span class="code-built_in">parseInt</span>(r,<span class="code-number">10</span>):<span class="code-number">1</span>,a.length&gt;=r?a:<span class="code-string">""</span>+<span class="code-keyword">new</span> <span class="code-built_in">Array</span>(r-a.length+<span class="code-number">1</span>).join(<span class="code-string">"0"</span>)+a)}}(t))},Et=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i={<span class="code-attr">RepresentationID</span>:e.id,<span class="code-attr">Bandwidth</span>:e.bandwidth||<span class="code-number">0</span>},n=e.initialization,r=<span class="code-keyword">void</span> <span class="code-number">0</span>===n?{<span class="code-attr">sourceURL</span>:<span class="code-string">""</span>,<span class="code-attr">range</span>:<span class="code-string">""</span>}:n,a=ft({<span class="code-attr">baseUrl</span>:e.baseUrl,<span class="code-attr">source</span>:Lt(r.sourceURL,i),<span class="code-attr">range</span>:r.range});<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.duration||t?e.duration?mt(e):kt(e,t):[{<span class="code-attr">number</span>:e.startNumber||<span class="code-number">1</span>,<span class="code-attr">duration</span>:e.sourceDuration,<span class="code-attr">time</span>:<span class="code-number">0</span>,<span class="code-attr">timeline</span>:e.periodIndex}]}(e,t).map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{i.Number=t.number,i.Time=t.time;<span class="code-keyword">var</span> n=Lt(e.media||<span class="code-string">""</span>,i);<span class="code-keyword">return</span>{<span class="code-attr">uri</span>:n,<span class="code-attr">timeline</span>:t.timeline,<span class="code-attr">duration</span>:t.duration,<span class="code-attr">resolvedUri</span>:ct(e.baseUrl||<span class="code-string">""</span>,n),<span class="code-attr">map</span>:a,<span class="code-attr">number</span>:t.number}})},Ut=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e.duration,n=e.segmentUrls,r=<span class="code-keyword">void</span> <span class="code-number">0</span>===n?[]:n;<span class="code-keyword">if</span>(!i&amp;&amp;!t||i&amp;&amp;t)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(dt);<span class="code-keyword">var</span> a,s=r.map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e.baseUrl,n=e.initialization,r=<span class="code-keyword">void</span> <span class="code-number">0</span>===n?{}:n,a=ft({<span class="code-attr">baseUrl</span>:i,<span class="code-attr">source</span>:r.sourceURL,<span class="code-attr">range</span>:r.range}),s=ft({<span class="code-attr">baseUrl</span>:i,<span class="code-attr">source</span>:t.media,<span class="code-attr">range</span>:t.mediaRange});<span class="code-keyword">return</span> s.map=a,s}(e,t)});<span class="code-keyword">return</span> i&amp;&amp;(a=mt(e)),t&amp;&amp;(a=kt(e,t)),a.map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(s[t]){<span class="code-keyword">var</span> i=s[t];<span class="code-keyword">return</span> i.timeline=e.timeline,i.duration=e.duration,i.number=e.number,i}}).filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e})},It=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=e.attributes,r=e.segmentInfo;r.template?(i=Et,t=it(n,r.template)):r.base?(i=gt,t=it(n,r.base)):r.list&amp;&amp;(i=Ut,t=it(n,r.list));<span class="code-keyword">var</span> a={<span class="code-attr">attributes</span>:n};<span class="code-keyword">if</span>(!i)<span class="code-keyword">return</span> a;<span class="code-keyword">var</span> s=i(t,r.timeline);<span class="code-keyword">if</span>(t.duration){<span class="code-keyword">var</span> o=t,u=o.duration,d=o.timescale,l=<span class="code-keyword">void</span> <span class="code-number">0</span>===d?<span class="code-number">1</span>:d;t.duration=u/l}<span class="code-keyword">else</span> s.length?t.duration=s.reduce(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">Math</span>.max(e,<span class="code-built_in">Math</span>.ceil(t.duration))},<span class="code-number">0</span>):t.duration=<span class="code-number">0</span>;<span class="code-keyword">return</span> a.attributes=t,a.segments=s,r.base&amp;&amp;t.indexRange&amp;&amp;(a.sidx=s[<span class="code-number">0</span>],a.segments=[]),a},At=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> rt(e.childNodes).filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.tagName===t})},Ot=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.textContent.trim()},Ct=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-regexp">/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/</span>.exec(e);<span class="code-keyword">if</span>(!t)<span class="code-keyword">return</span> <span class="code-number">0</span>;<span class="code-keyword">var</span> i=t.slice(<span class="code-number">1</span>),n=i[<span class="code-number">0</span>],r=i[<span class="code-number">1</span>],a=i[<span class="code-number">2</span>],s=i[<span class="code-number">3</span>],o=i[<span class="code-number">4</span>],u=i[<span class="code-number">5</span>];<span class="code-keyword">return</span> <span class="code-number">31536e3</span>*<span class="code-built_in">parseFloat</span>(n||<span class="code-number">0</span>)+<span class="code-number">2592e3</span>*<span class="code-built_in">parseFloat</span>(r||<span class="code-number">0</span>)+<span class="code-number">86400</span>*<span class="code-built_in">parseFloat</span>(a||<span class="code-number">0</span>)+<span class="code-number">3600</span>*<span class="code-built_in">parseFloat</span>(s||<span class="code-number">0</span>)+<span class="code-number">60</span>*<span class="code-built_in">parseFloat</span>(o||<span class="code-number">0</span>)+<span class="code-built_in">parseFloat</span>(u||<span class="code-number">0</span>)},Pt={<span class="code-attr">mediaPresentationDuration</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Ct(e)},<span class="code-attr">availabilityStartTime</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-regexp">/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/</span>.test(t=e)&amp;&amp;(t+=<span class="code-string">"Z"</span>),<span class="code-built_in">Date</span>.parse(t)/<span class="code-number">1e3</span>;<span class="code-keyword">var</span> t},<span class="code-attr">minimumUpdatePeriod</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Ct(e)},<span class="code-attr">timeShiftBufferDepth</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Ct(e)},<span class="code-attr">start</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Ct(e)},<span class="code-attr">width</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">height</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">bandwidth</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">startNumber</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">timescale</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">duration</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>);<span class="code-keyword">return</span> <span class="code-built_in">isNaN</span>(t)?Ct(e):t},<span class="code-attr">d</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">t</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">r</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">DEFAULT</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e}},Dt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&amp;&amp;e.attributes?rt(e.attributes).reduce(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=Pt[t.name]||Pt.DEFAULT;<span class="code-keyword">return</span> e[t.name]=i(t.value),e},{}):{}};<span class="code-keyword">var</span> Rt,xt,Mt={<span class="code-string">"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b"</span>:<span class="code-string">"org.w3.clearkey"</span>,<span class="code-string">"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"</span>:<span class="code-string">"com.widevine.alpha"</span>,<span class="code-string">"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95"</span>:<span class="code-string">"com.microsoft.playready"</span>,<span class="code-string">"urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb"</span>:<span class="code-string">"com.adobe.primetime"</span>},Bt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> t.length?nt(e.map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t.map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span> ct(e,Ot(t))})})):e},Nt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=At(e,<span class="code-string">"SegmentTemplate"</span>)[<span class="code-number">0</span>],i=At(e,<span class="code-string">"SegmentList"</span>)[<span class="code-number">0</span>],n=i&amp;&amp;At(i,<span class="code-string">"SegmentURL"</span>).map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> it({<span class="code-attr">tag</span>:<span class="code-string">"SegmentURL"</span>},Dt(e))}),r=At(e,<span class="code-string">"SegmentBase"</span>)[<span class="code-number">0</span>],a=i||t,s=a&amp;&amp;At(a,<span class="code-string">"SegmentTimeline"</span>)[<span class="code-number">0</span>],o=i||r||t,u=o&amp;&amp;At(o,<span class="code-string">"Initialization"</span>)[<span class="code-number">0</span>],d=t&amp;&amp;Dt(t);d&amp;&amp;u?d.initialization=u&amp;&amp;Dt(u):d&amp;&amp;d.initialization&amp;&amp;(d.initialization={<span class="code-attr">sourceURL</span>:d.initialization});<span class="code-keyword">var</span> l={<span class="code-attr">template</span>:d,<span class="code-attr">timeline</span>:s&amp;&amp;At(s,<span class="code-string">"S"</span>).map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Dt(e)}),<span class="code-attr">list</span>:i&amp;&amp;it(Dt(i),{<span class="code-attr">segmentUrls</span>:n,<span class="code-attr">initialization</span>:Dt(u)}),<span class="code-attr">base</span>:r&amp;&amp;it(Dt(r),{<span class="code-attr">initialization</span>:Dt(u)})};<span class="code-keyword">return</span> <span class="code-built_in">Object</span>.keys(l).forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{l[e]||<span class="code-keyword">delete</span> l[e]}),l},qt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.reduce(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=Dt(t),n=Mt[i.schemeIdUri];<span class="code-keyword">if</span>(n){e[n]={<span class="code-attr">attributes</span>:i};<span class="code-keyword">var</span> r=At(t,<span class="code-string">"cenc:pssh"</span>)[<span class="code-number">0</span>];<span class="code-keyword">if</span>(r){<span class="code-keyword">var</span> a=Ot(r),s=a&amp;&amp;<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=u.atob(e),i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(t.length),n=<span class="code-number">0</span>;n&lt;t.length;n++)i[n]=t.charCodeAt(n);<span class="code-keyword">return</span> i}(a);e[n].pssh=s}}<span class="code-keyword">return</span> e},{})},Ft=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-keyword">var</span> r=Dt(n),a=Bt(t,At(n,<span class="code-string">"BaseURL"</span>)),s=At(n,<span class="code-string">"Role"</span>)[<span class="code-number">0</span>],o={<span class="code-attr">role</span>:Dt(s)},u=it(e,r,o),d=qt(At(n,<span class="code-string">"ContentProtection"</span>));<span class="code-built_in">Object</span>.keys(d).length&amp;&amp;(u=it(u,{<span class="code-attr">contentProtection</span>:d}));<span class="code-keyword">var</span> l=Nt(n),h=At(n,<span class="code-string">"Representation"</span>),c=it(i,l);<span class="code-keyword">return</span> nt(h.map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-keyword">var</span> r=At(n,<span class="code-string">"BaseURL"</span>),a=Bt(t,r),s=it(e,Dt(n)),o=Nt(n);<span class="code-keyword">return</span> a.map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">segmentInfo</span>:it(i,o),<span class="code-attr">attributes</span>:it(s,{<span class="code-attr">baseUrl</span>:e})}})}}(u,a,c)))}},Ht=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t={});<span class="code-keyword">var</span> i=t,n=i.manifestUri,r=<span class="code-keyword">void</span> <span class="code-number">0</span>===n?<span class="code-string">""</span>:n,a=i.NOW,s=<span class="code-keyword">void</span> <span class="code-number">0</span>===a?<span class="code-built_in">Date</span>.now():a,o=i.clientOffset,d=<span class="code-keyword">void</span> <span class="code-number">0</span>===o?<span class="code-number">0</span>:o,l=At(e,<span class="code-string">"Period"</span>);<span class="code-keyword">if</span>(!l.length)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(at);<span class="code-keyword">var</span> h=Dt(e),c=Bt([r],At(e,<span class="code-string">"BaseURL"</span>));<span class="code-keyword">return</span> h.sourceDuration=h.mediaPresentationDuration||<span class="code-number">0</span>,h.NOW=s,h.clientOffset=d,nt(l.map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i,n</span>)</span>{<span class="code-keyword">var</span> r=Bt(t,At(i,<span class="code-string">"BaseURL"</span>)),a=Dt(i),s=<span class="code-built_in">parseInt</span>(a.id,<span class="code-number">10</span>),o=u.isNaN(s)?n:s,d=it(e,{<span class="code-attr">periodIndex</span>:o}),l=At(i,<span class="code-string">"AdaptationSet"</span>),h=Nt(i);<span class="code-keyword">return</span> nt(l.map(Ft(d,r,h)))}}(h,c)))},Gt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">""</span>===e)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(st);<span class="code-keyword">var</span> t=(<span class="code-keyword">new</span> u.DOMParser).parseFromString(e,<span class="code-string">"application/xml"</span>),i=t&amp;&amp;<span class="code-string">"MPD"</span>===t.documentElement.tagName?t.documentElement:<span class="code-literal">null</span>;<span class="code-keyword">if</span>(!i||i&amp;&amp;i.getElementsByTagName(<span class="code-string">"parsererror"</span>).length&gt;<span class="code-number">0</span>)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(ot);<span class="code-keyword">return</span> i},jt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t={}),Tt(Ht(Gt(e),t).map(It),t.sidxMapping)},Vt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=At(e,<span class="code-string">"UTCTiming"</span>)[<span class="code-number">0</span>];<span class="code-keyword">if</span>(!t)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i=Dt(t);<span class="code-keyword">switch</span>(i.schemeIdUri){<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:http-head:2014"</span>:<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:http-head:2012"</span>:i.method=<span class="code-string">"HEAD"</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:http-xsdate:2014"</span>:<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:http-iso:2014"</span>:<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:http-xsdate:2012"</span>:<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:http-iso:2012"</span>:i.method=<span class="code-string">"GET"</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:direct:2014"</span>:<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:direct:2012"</span>:i.method=<span class="code-string">"DIRECT"</span>,i.value=<span class="code-built_in">Date</span>.parse(i.value);<span class="code-keyword">break</span>;<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:http-ntp:2014"</span>:<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:ntp:2014"</span>:<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:sntp:2014"</span>:<span class="code-keyword">default</span>:<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(lt)}<span class="code-keyword">return</span> i}(Gt(e))},Wt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&gt;&gt;&gt;<span class="code-number">0</span>},zt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>(<span class="code-string">"00"</span>+e.toString(<span class="code-number">16</span>)).slice(<span class="code-number">-2</span>)},Xt=Wt,Yt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">new</span> <span class="code-built_in">Date</span>(<span class="code-number">1e3</span>*e<span class="code-number">-20828448e5</span>)},Kt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">isLeading</span>:(<span class="code-number">12</span>&amp;e[<span class="code-number">0</span>])&gt;&gt;&gt;<span class="code-number">2</span>,<span class="code-attr">dependsOn</span>:<span class="code-number">3</span>&amp;e[<span class="code-number">0</span>],<span class="code-attr">isDependedOn</span>:(<span class="code-number">192</span>&amp;e[<span class="code-number">1</span>])&gt;&gt;&gt;<span class="code-number">6</span>,<span class="code-attr">hasRedundancy</span>:(<span class="code-number">48</span>&amp;e[<span class="code-number">1</span>])&gt;&gt;&gt;<span class="code-number">4</span>,<span class="code-attr">paddingValue</span>:(<span class="code-number">14</span>&amp;e[<span class="code-number">1</span>])&gt;&gt;&gt;<span class="code-number">1</span>,<span class="code-attr">isNonSyncSample</span>:<span class="code-number">1</span>&amp;e[<span class="code-number">1</span>],<span class="code-attr">degradationPriority</span>:e[<span class="code-number">2</span>]&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">3</span>]}},$t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-string">""</span>;<span class="code-keyword">return</span> t+=<span class="code-built_in">String</span>.fromCharCode(e[<span class="code-number">0</span>]),t+=<span class="code-built_in">String</span>.fromCharCode(e[<span class="code-number">1</span>]),t+=<span class="code-built_in">String</span>.fromCharCode(e[<span class="code-number">2</span>]),t+=<span class="code-built_in">String</span>.fromCharCode(e[<span class="code-number">3</span>])},Qt={<span class="code-attr">avc1</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength);<span class="code-keyword">return</span>{<span class="code-attr">dataReferenceIndex</span>:t.getUint16(<span class="code-number">6</span>),<span class="code-attr">width</span>:t.getUint16(<span class="code-number">24</span>),<span class="code-attr">height</span>:t.getUint16(<span class="code-number">26</span>),<span class="code-attr">horizresolution</span>:t.getUint16(<span class="code-number">28</span>)+t.getUint16(<span class="code-number">30</span>)/<span class="code-number">16</span>,<span class="code-attr">vertresolution</span>:t.getUint16(<span class="code-number">32</span>)+t.getUint16(<span class="code-number">34</span>)/<span class="code-number">16</span>,<span class="code-attr">frameCount</span>:t.getUint16(<span class="code-number">40</span>),<span class="code-attr">depth</span>:t.getUint16(<span class="code-number">74</span>),<span class="code-attr">config</span>:Rt(e.subarray(<span class="code-number">78</span>,e.byteLength))}},<span class="code-attr">avcC</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n,r,a=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength),s={<span class="code-attr">configurationVersion</span>:e[<span class="code-number">0</span>],<span class="code-attr">avcProfileIndication</span>:e[<span class="code-number">1</span>],<span class="code-attr">profileCompatibility</span>:e[<span class="code-number">2</span>],<span class="code-attr">avcLevelIndication</span>:e[<span class="code-number">3</span>],<span class="code-attr">lengthSizeMinusOne</span>:<span class="code-number">3</span>&amp;e[<span class="code-number">4</span>],<span class="code-attr">sps</span>:[],<span class="code-attr">pps</span>:[]},o=<span class="code-number">31</span>&amp;e[<span class="code-number">5</span>];<span class="code-keyword">for</span>(n=<span class="code-number">6</span>,r=<span class="code-number">0</span>;r&lt;o;r++)i=a.getUint16(n),n+=<span class="code-number">2</span>,s.sps.push(<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(n,n+i))),n+=i;<span class="code-keyword">for</span>(t=e[n],n++,r=<span class="code-number">0</span>;r&lt;t;r++)i=a.getUint16(n),n+=<span class="code-number">2</span>,s.pps.push(<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(n,n+i))),n+=i;<span class="code-keyword">return</span> s},<span class="code-attr">btrt</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength);<span class="code-keyword">return</span>{<span class="code-attr">bufferSizeDB</span>:t.getUint32(<span class="code-number">0</span>),<span class="code-attr">maxBitrate</span>:t.getUint32(<span class="code-number">4</span>),<span class="code-attr">avgBitrate</span>:t.getUint32(<span class="code-number">8</span>)}},<span class="code-attr">esds</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">esId</span>:e[<span class="code-number">6</span>]&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">7</span>],<span class="code-attr">streamPriority</span>:<span class="code-number">31</span>&amp;e[<span class="code-number">8</span>],<span class="code-attr">decoderConfig</span>:{<span class="code-attr">objectProfileIndication</span>:e[<span class="code-number">11</span>],<span class="code-attr">streamType</span>:e[<span class="code-number">12</span>]&gt;&gt;&gt;<span class="code-number">2</span>&amp;<span class="code-number">63</span>,<span class="code-attr">bufferSize</span>:e[<span class="code-number">13</span>]&lt;&lt;<span class="code-number">16</span>|e[<span class="code-number">14</span>]&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">15</span>],<span class="code-attr">maxBitrate</span>:e[<span class="code-number">16</span>]&lt;&lt;<span class="code-number">24</span>|e[<span class="code-number">17</span>]&lt;&lt;<span class="code-number">16</span>|e[<span class="code-number">18</span>]&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">19</span>],<span class="code-attr">avgBitrate</span>:e[<span class="code-number">20</span>]&lt;&lt;<span class="code-number">24</span>|e[<span class="code-number">21</span>]&lt;&lt;<span class="code-number">16</span>|e[<span class="code-number">22</span>]&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">23</span>],<span class="code-attr">decoderConfigDescriptor</span>:{<span class="code-attr">tag</span>:e[<span class="code-number">24</span>],<span class="code-attr">length</span>:e[<span class="code-number">25</span>],<span class="code-attr">audioObjectType</span>:e[<span class="code-number">26</span>]&gt;&gt;&gt;<span class="code-number">3</span>&amp;<span class="code-number">31</span>,<span class="code-attr">samplingFrequencyIndex</span>:(<span class="code-number">7</span>&amp;e[<span class="code-number">26</span>])&lt;&lt;<span class="code-number">1</span>|e[<span class="code-number">27</span>]&gt;&gt;&gt;<span class="code-number">7</span>&amp;<span class="code-number">1</span>,<span class="code-attr">channelConfiguration</span>:e[<span class="code-number">27</span>]&gt;&gt;&gt;<span class="code-number">3</span>&amp;<span class="code-number">15</span>}}}},<span class="code-attr">ftyp</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength),i={<span class="code-attr">majorBrand</span>:$t(e.subarray(<span class="code-number">0</span>,<span class="code-number">4</span>)),<span class="code-attr">minorVersion</span>:t.getUint32(<span class="code-number">4</span>),<span class="code-attr">compatibleBrands</span>:[]},n=<span class="code-number">8</span>;n&lt;e.byteLength;)i.compatibleBrands.push($t(e.subarray(n,n+<span class="code-number">4</span>))),n+=<span class="code-number">4</span>;<span class="code-keyword">return</span> i},<span class="code-attr">dinf</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">boxes</span>:Rt(e)}},<span class="code-attr">dref</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">dataReferences</span>:Rt(e.subarray(<span class="code-number">8</span>))}},<span class="code-attr">hdlr</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t={<span class="code-attr">version</span>:<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength).getUint8(<span class="code-number">0</span>),<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">handlerType</span>:$t(e.subarray(<span class="code-number">8</span>,<span class="code-number">12</span>)),<span class="code-attr">name</span>:<span class="code-string">""</span>},i=<span class="code-number">8</span>;<span class="code-keyword">for</span>(i=<span class="code-number">24</span>;i&lt;e.byteLength;i++){<span class="code-keyword">if</span>(<span class="code-number">0</span>===e[i]){i++;<span class="code-keyword">break</span>}t.name+=<span class="code-built_in">String</span>.fromCharCode(e[i])}<span class="code-keyword">return</span> t.name=<span class="code-built_in">decodeURIComponent</span>(<span class="code-built_in">escape</span>(t.name)),t},<span class="code-attr">mdat</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">byteLength</span>:e.byteLength,<span class="code-attr">nals</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength),r=[];<span class="code-keyword">for</span>(t=<span class="code-number">0</span>;t+<span class="code-number">4</span>&lt;e.length;t+=i)<span class="code-keyword">if</span>(i=n.getUint32(t),t+=<span class="code-number">4</span>,i&lt;=<span class="code-number">0</span>)r.push(<span class="code-string">"&lt;span style='color:red;'&gt;MALFORMED DATA&lt;/span&gt;"</span>);<span class="code-keyword">else</span> <span class="code-keyword">switch</span>(<span class="code-number">31</span>&amp;e[t]){<span class="code-keyword">case</span> <span class="code-number">1</span>:r.push(<span class="code-string">"slice_layer_without_partitioning_rbsp"</span>);<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">5</span>:r.push(<span class="code-string">"slice_layer_without_partitioning_rbsp_idr"</span>);<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">6</span>:r.push(<span class="code-string">"sei_rbsp"</span>);<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">7</span>:r.push(<span class="code-string">"seq_parameter_set_rbsp"</span>);<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">8</span>:r.push(<span class="code-string">"pic_parameter_set_rbsp"</span>);<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">9</span>:r.push(<span class="code-string">"access_unit_delimiter_rbsp"</span>);<span class="code-keyword">break</span>;<span class="code-keyword">default</span>:r.push(<span class="code-string">"UNKNOWN NAL - "</span>+e[t]&amp;<span class="code-number">31</span>)}<span class="code-keyword">return</span> r}(e)}},<span class="code-attr">mdhd</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength),n=<span class="code-number">4</span>,r={<span class="code-attr">version</span>:i.getUint8(<span class="code-number">0</span>),<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">language</span>:<span class="code-string">""</span>};<span class="code-keyword">return</span> <span class="code-number">1</span>===r.version?(n+=<span class="code-number">4</span>,r.creationTime=Yt(i.getUint32(n)),n+=<span class="code-number">8</span>,r.modificationTime=Yt(i.getUint32(n)),n+=<span class="code-number">4</span>,r.timescale=i.getUint32(n),n+=<span class="code-number">8</span>,r.duration=i.getUint32(n)):(r.creationTime=Yt(i.getUint32(n)),n+=<span class="code-number">4</span>,r.modificationTime=Yt(i.getUint32(n)),n+=<span class="code-number">4</span>,r.timescale=i.getUint32(n),n+=<span class="code-number">4</span>,r.duration=i.getUint32(n)),n+=<span class="code-number">4</span>,t=i.getUint16(n),r.language+=<span class="code-built_in">String</span>.fromCharCode(<span class="code-number">96</span>+(t&gt;&gt;<span class="code-number">10</span>)),r.language+=<span class="code-built_in">String</span>.fromCharCode(<span class="code-number">96</span>+((<span class="code-number">992</span>&amp;t)&gt;&gt;<span class="code-number">5</span>)),r.language+=<span class="code-built_in">String</span>.fromCharCode(<span class="code-number">96</span>+(<span class="code-number">31</span>&amp;t)),r},<span class="code-attr">mdia</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">boxes</span>:Rt(e)}},<span class="code-attr">mfhd</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">sequenceNumber</span>:e[<span class="code-number">4</span>]&lt;&lt;<span class="code-number">24</span>|e[<span class="code-number">5</span>]&lt;&lt;<span class="code-number">16</span>|e[<span class="code-number">6</span>]&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">7</span>]}},<span class="code-attr">minf</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">boxes</span>:Rt(e)}},<span class="code-attr">mp4a</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength),i={<span class="code-attr">dataReferenceIndex</span>:t.getUint16(<span class="code-number">6</span>),<span class="code-attr">channelcount</span>:t.getUint16(<span class="code-number">16</span>),<span class="code-attr">samplesize</span>:t.getUint16(<span class="code-number">18</span>),<span class="code-attr">samplerate</span>:t.getUint16(<span class="code-number">24</span>)+t.getUint16(<span class="code-number">26</span>)/<span class="code-number">65536</span>};<span class="code-keyword">return</span> e.byteLength&gt;<span class="code-number">28</span>&amp;&amp;(i.streamDescriptor=Rt(e.subarray(<span class="code-number">28</span>))[<span class="code-number">0</span>]),i},<span class="code-attr">moof</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">boxes</span>:Rt(e)}},<span class="code-attr">moov</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">boxes</span>:Rt(e)}},<span class="code-attr">mvex</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">boxes</span>:Rt(e)}},<span class="code-attr">mvhd</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength),i=<span class="code-number">4</span>,n={<span class="code-attr">version</span>:t.getUint8(<span class="code-number">0</span>),<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>))};<span class="code-keyword">return</span> <span class="code-number">1</span>===n.version?(i+=<span class="code-number">4</span>,n.creationTime=Yt(t.getUint32(i)),i+=<span class="code-number">8</span>,n.modificationTime=Yt(t.getUint32(i)),i+=<span class="code-number">4</span>,n.timescale=t.getUint32(i),i+=<span class="code-number">8</span>,n.duration=t.getUint32(i)):(n.creationTime=Yt(t.getUint32(i)),i+=<span class="code-number">4</span>,n.modificationTime=Yt(t.getUint32(i)),i+=<span class="code-number">4</span>,n.timescale=t.getUint32(i),i+=<span class="code-number">4</span>,n.duration=t.getUint32(i)),i+=<span class="code-number">4</span>,n.rate=t.getUint16(i)+t.getUint16(i+<span class="code-number">2</span>)/<span class="code-number">16</span>,i+=<span class="code-number">4</span>,n.volume=t.getUint8(i)+t.getUint8(i+<span class="code-number">1</span>)/<span class="code-number">8</span>,i+=<span class="code-number">2</span>,i+=<span class="code-number">2</span>,i+=<span class="code-number">8</span>,n.matrix=<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>(e.subarray(i,i+<span class="code-number">36</span>)),i+=<span class="code-number">36</span>,i+=<span class="code-number">24</span>,n.nextTrackId=t.getUint32(i),n},<span class="code-attr">pdin</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength);<span class="code-keyword">return</span>{<span class="code-attr">version</span>:t.getUint8(<span class="code-number">0</span>),<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">rate</span>:t.getUint32(<span class="code-number">4</span>),<span class="code-attr">initialDelay</span>:t.getUint32(<span class="code-number">8</span>)}},<span class="code-attr">sdtp</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i={<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">samples</span>:[]};<span class="code-keyword">for</span>(t=<span class="code-number">4</span>;t&lt;e.byteLength;t++)i.samples.push({<span class="code-attr">dependsOn</span>:(<span class="code-number">48</span>&amp;e[t])&gt;&gt;<span class="code-number">4</span>,<span class="code-attr">isDependedOn</span>:(<span class="code-number">12</span>&amp;e[t])&gt;&gt;<span class="code-number">2</span>,<span class="code-attr">hasRedundancy</span>:<span class="code-number">3</span>&amp;e[t]});<span class="code-keyword">return</span> i},<span class="code-attr">sidx</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength),n={<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">references</span>:[],<span class="code-attr">referenceId</span>:i.getUint32(<span class="code-number">4</span>),<span class="code-attr">timescale</span>:i.getUint32(<span class="code-number">8</span>),<span class="code-attr">earliestPresentationTime</span>:i.getUint32(<span class="code-number">12</span>),<span class="code-attr">firstOffset</span>:i.getUint32(<span class="code-number">16</span>)},r=i.getUint16(<span class="code-number">22</span>);<span class="code-keyword">for</span>(t=<span class="code-number">24</span>;r;t+=<span class="code-number">12</span>,r--)n.references.push({<span class="code-attr">referenceType</span>:(<span class="code-number">128</span>&amp;e[t])&gt;&gt;&gt;<span class="code-number">7</span>,<span class="code-attr">referencedSize</span>:<span class="code-number">2147483647</span>&amp;i.getUint32(t),<span class="code-attr">subsegmentDuration</span>:i.getUint32(t+<span class="code-number">4</span>),<span class="code-attr">startsWithSap</span>:!!(<span class="code-number">128</span>&amp;e[t+<span class="code-number">8</span>]),<span class="code-attr">sapType</span>:(<span class="code-number">112</span>&amp;e[t+<span class="code-number">8</span>])&gt;&gt;&gt;<span class="code-number">4</span>,<span class="code-attr">sapDeltaTime</span>:<span class="code-number">268435455</span>&amp;i.getUint32(t+<span class="code-number">8</span>)});<span class="code-keyword">return</span> n},<span class="code-attr">smhd</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">balance</span>:e[<span class="code-number">4</span>]+e[<span class="code-number">5</span>]/<span class="code-number">256</span>}},<span class="code-attr">stbl</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">boxes</span>:Rt(e)}},<span class="code-attr">stco</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength),n={<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">chunkOffsets</span>:[]},r=i.getUint32(<span class="code-number">4</span>);<span class="code-keyword">for</span>(t=<span class="code-number">8</span>;r;t+=<span class="code-number">4</span>,r--)n.chunkOffsets.push(i.getUint32(t));<span class="code-keyword">return</span> n},<span class="code-attr">stsc</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength),n=i.getUint32(<span class="code-number">4</span>),r={<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">sampleToChunks</span>:[]};<span class="code-keyword">for</span>(t=<span class="code-number">8</span>;n;t+=<span class="code-number">12</span>,n--)r.sampleToChunks.push({<span class="code-attr">firstChunk</span>:i.getUint32(t),<span class="code-attr">samplesPerChunk</span>:i.getUint32(t+<span class="code-number">4</span>),<span class="code-attr">sampleDescriptionIndex</span>:i.getUint32(t+<span class="code-number">8</span>)});<span class="code-keyword">return</span> r},<span class="code-attr">stsd</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">sampleDescriptions</span>:Rt(e.subarray(<span class="code-number">8</span>))}},<span class="code-attr">stsz</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength),n={<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">sampleSize</span>:i.getUint32(<span class="code-number">4</span>),<span class="code-attr">entries</span>:[]};<span class="code-keyword">for</span>(t=<span class="code-number">12</span>;t&lt;e.byteLength;t+=<span class="code-number">4</span>)n.entries.push(i.getUint32(t));<span class="code-keyword">return</span> n},<span class="code-attr">stts</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength),n={<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">timeToSamples</span>:[]},r=i.getUint32(<span class="code-number">4</span>);<span class="code-keyword">for</span>(t=<span class="code-number">8</span>;r;t+=<span class="code-number">8</span>,r--)n.timeToSamples.push({<span class="code-attr">sampleCount</span>:i.getUint32(t),<span class="code-attr">sampleDelta</span>:i.getUint32(t+<span class="code-number">4</span>)});<span class="code-keyword">return</span> n},<span class="code-attr">styp</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Qt.ftyp(e)},<span class="code-attr">tfdt</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t={<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">baseMediaDecodeTime</span>:Xt(e[<span class="code-number">4</span>]&lt;&lt;<span class="code-number">24</span>|e[<span class="code-number">5</span>]&lt;&lt;<span class="code-number">16</span>|e[<span class="code-number">6</span>]&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">7</span>])};<span class="code-keyword">return</span> <span class="code-number">1</span>===t.version&amp;&amp;(t.baseMediaDecodeTime*=<span class="code-built_in">Math</span>.pow(<span class="code-number">2</span>,<span class="code-number">32</span>),t.baseMediaDecodeTime+=Xt(e[<span class="code-number">8</span>]&lt;&lt;<span class="code-number">24</span>|e[<span class="code-number">9</span>]&lt;&lt;<span class="code-number">16</span>|e[<span class="code-number">10</span>]&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">11</span>])),t},<span class="code-attr">tfhd</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength),n={<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">trackId</span>:i.getUint32(<span class="code-number">4</span>)},r=<span class="code-number">1</span>&amp;n.flags[<span class="code-number">2</span>],a=<span class="code-number">2</span>&amp;n.flags[<span class="code-number">2</span>],s=<span class="code-number">8</span>&amp;n.flags[<span class="code-number">2</span>],o=<span class="code-number">16</span>&amp;n.flags[<span class="code-number">2</span>],u=<span class="code-number">32</span>&amp;n.flags[<span class="code-number">2</span>],d=<span class="code-number">65536</span>&amp;n.flags[<span class="code-number">0</span>],l=<span class="code-number">131072</span>&amp;n.flags[<span class="code-number">0</span>];<span class="code-keyword">return</span> t=<span class="code-number">8</span>,r&amp;&amp;(t+=<span class="code-number">4</span>,n.baseDataOffset=i.getUint32(<span class="code-number">12</span>),t+=<span class="code-number">4</span>),a&amp;&amp;(n.sampleDescriptionIndex=i.getUint32(t),t+=<span class="code-number">4</span>),s&amp;&amp;(n.defaultSampleDuration=i.getUint32(t),t+=<span class="code-number">4</span>),o&amp;&amp;(n.defaultSampleSize=i.getUint32(t),t+=<span class="code-number">4</span>),u&amp;&amp;(n.defaultSampleFlags=i.getUint32(t)),d&amp;&amp;(n.durationIsEmpty=!<span class="code-number">0</span>),!r&amp;&amp;l&amp;&amp;(n.baseDataOffsetIsMoof=!<span class="code-number">0</span>),n},<span class="code-attr">tkhd</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength),i=<span class="code-number">4</span>,n={<span class="code-attr">version</span>:t.getUint8(<span class="code-number">0</span>),<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>))};<span class="code-keyword">return</span> <span class="code-number">1</span>===n.version?(i+=<span class="code-number">4</span>,n.creationTime=Yt(t.getUint32(i)),i+=<span class="code-number">8</span>,n.modificationTime=Yt(t.getUint32(i)),i+=<span class="code-number">4</span>,n.trackId=t.getUint32(i),i+=<span class="code-number">4</span>,i+=<span class="code-number">8</span>,n.duration=t.getUint32(i)):(n.creationTime=Yt(t.getUint32(i)),i+=<span class="code-number">4</span>,n.modificationTime=Yt(t.getUint32(i)),i+=<span class="code-number">4</span>,n.trackId=t.getUint32(i),i+=<span class="code-number">4</span>,i+=<span class="code-number">4</span>,n.duration=t.getUint32(i)),i+=<span class="code-number">4</span>,i+=<span class="code-number">8</span>,n.layer=t.getUint16(i),i+=<span class="code-number">2</span>,n.alternateGroup=t.getUint16(i),i+=<span class="code-number">2</span>,n.volume=t.getUint8(i)+t.getUint8(i+<span class="code-number">1</span>)/<span class="code-number">8</span>,i+=<span class="code-number">2</span>,i+=<span class="code-number">2</span>,n.matrix=<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>(e.subarray(i,i+<span class="code-number">36</span>)),i+=<span class="code-number">36</span>,n.width=t.getUint16(i)+t.getUint16(i+<span class="code-number">2</span>)/<span class="code-number">16</span>,i+=<span class="code-number">4</span>,n.height=t.getUint16(i)+t.getUint16(i+<span class="code-number">2</span>)/<span class="code-number">16</span>,n},<span class="code-attr">traf</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">boxes</span>:Rt(e)}},<span class="code-attr">trak</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">boxes</span>:Rt(e)}},<span class="code-attr">trex</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength);<span class="code-keyword">return</span>{<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">trackId</span>:t.getUint32(<span class="code-number">4</span>),<span class="code-attr">defaultSampleDescriptionIndex</span>:t.getUint32(<span class="code-number">8</span>),<span class="code-attr">defaultSampleDuration</span>:t.getUint32(<span class="code-number">12</span>),<span class="code-attr">defaultSampleSize</span>:t.getUint32(<span class="code-number">16</span>),<span class="code-attr">sampleDependsOn</span>:<span class="code-number">3</span>&amp;e[<span class="code-number">20</span>],<span class="code-attr">sampleIsDependedOn</span>:(<span class="code-number">192</span>&amp;e[<span class="code-number">21</span>])&gt;&gt;<span class="code-number">6</span>,<span class="code-attr">sampleHasRedundancy</span>:(<span class="code-number">48</span>&amp;e[<span class="code-number">21</span>])&gt;&gt;<span class="code-number">4</span>,<span class="code-attr">samplePaddingValue</span>:(<span class="code-number">14</span>&amp;e[<span class="code-number">21</span>])&gt;&gt;<span class="code-number">1</span>,<span class="code-attr">sampleIsDifferenceSample</span>:!!(<span class="code-number">1</span>&amp;e[<span class="code-number">21</span>]),<span class="code-attr">sampleDegradationPriority</span>:t.getUint16(<span class="code-number">22</span>)}},<span class="code-attr">trun</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i={<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">samples</span>:[]},n=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength),r=<span class="code-number">1</span>&amp;i.flags[<span class="code-number">2</span>],a=<span class="code-number">4</span>&amp;i.flags[<span class="code-number">2</span>],s=<span class="code-number">1</span>&amp;i.flags[<span class="code-number">1</span>],o=<span class="code-number">2</span>&amp;i.flags[<span class="code-number">1</span>],u=<span class="code-number">4</span>&amp;i.flags[<span class="code-number">1</span>],d=<span class="code-number">8</span>&amp;i.flags[<span class="code-number">1</span>],l=n.getUint32(<span class="code-number">4</span>),h=<span class="code-number">8</span>;<span class="code-keyword">for</span>(r&amp;&amp;(i.dataOffset=n.getInt32(h),h+=<span class="code-number">4</span>),a&amp;&amp;l&amp;&amp;(t={<span class="code-attr">flags</span>:Kt(e.subarray(h,h+<span class="code-number">4</span>))},h+=<span class="code-number">4</span>,s&amp;&amp;(t.duration=n.getUint32(h),h+=<span class="code-number">4</span>),o&amp;&amp;(t.size=n.getUint32(h),h+=<span class="code-number">4</span>),d&amp;&amp;(t.compositionTimeOffset=n.getUint32(h),h+=<span class="code-number">4</span>),i.samples.push(t),l--);l--;)t={},s&amp;&amp;(t.duration=n.getUint32(h),h+=<span class="code-number">4</span>),o&amp;&amp;(t.size=n.getUint32(h),h+=<span class="code-number">4</span>),u&amp;&amp;(t.flags=Kt(e.subarray(h,h+<span class="code-number">4</span>)),h+=<span class="code-number">4</span>),d&amp;&amp;(t.compositionTimeOffset=n.getUint32(h),h+=<span class="code-number">4</span>),i.samples.push(t);<span class="code-keyword">return</span> i},<span class="code-string">"url "</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>))}},<span class="code-attr">vmhd</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength);<span class="code-keyword">return</span>{<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">graphicsmode</span>:t.getUint16(<span class="code-number">4</span>),<span class="code-attr">opcolor</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint16Array</span>([t.getUint16(<span class="code-number">6</span>),t.getUint16(<span class="code-number">8</span>),t.getUint16(<span class="code-number">10</span>)])}}},Jt={<span class="code-attr">inspect</span>:Rt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t,i,n,r,a,s=<span class="code-number">0</span>,o=[],u=<span class="code-keyword">new</span> <span class="code-built_in">ArrayBuffer</span>(e.length),d=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(u),l=<span class="code-number">0</span>;l&lt;e.length;++l)d[l]=e[l];<span class="code-keyword">for</span>(t=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(u);s&lt;e.byteLength;)i=t.getUint32(s),n=$t(e.subarray(s+<span class="code-number">4</span>,s+<span class="code-number">8</span>)),r=i&gt;<span class="code-number">1</span>?s+i:e.byteLength,(a=(Qt[n]||<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">data</span>:e}})(e.subarray(s+<span class="code-number">8</span>,r))).size=i,a.type=n,o.push(a),s=r;<span class="code-keyword">return</span> o},<span class="code-attr">textify</span>:xt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i;<span class="code-keyword">return</span> t=t||<span class="code-number">0</span>,i=<span class="code-keyword">new</span> <span class="code-built_in">Array</span>(<span class="code-number">2</span>*t+<span class="code-number">1</span>).join(<span class="code-string">" "</span>),e.map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,n</span>)</span>{<span class="code-keyword">return</span> i+e.type+<span class="code-string">"\n"</span>+<span class="code-built_in">Object</span>.keys(e).filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"type"</span>!==e&amp;&amp;<span class="code-string">"boxes"</span>!==e}).map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> n=i+<span class="code-string">"  "</span>+t+<span class="code-string">": "</span>,r=e[t];<span class="code-keyword">if</span>(r <span class="code-keyword">instanceof</span> <span class="code-built_in">Uint8Array</span>||r <span class="code-keyword">instanceof</span> <span class="code-built_in">Uint32Array</span>){<span class="code-keyword">var</span> a=<span class="code-built_in">Array</span>.prototype.slice.call(<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(r.buffer,r.byteOffset,r.byteLength)).map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-string">" "</span>+(<span class="code-string">"00"</span>+e.toString(<span class="code-number">16</span>)).slice(<span class="code-number">-2</span>)}).join(<span class="code-string">""</span>).match(<span class="code-regexp">/.{1,24}/g</span>);<span class="code-keyword">return</span> a?<span class="code-number">1</span>===a.length?n+<span class="code-string">"&lt;"</span>+a.join(<span class="code-string">""</span>).slice(<span class="code-number">1</span>)+<span class="code-string">"&gt;"</span>:n+<span class="code-string">"&lt;\n"</span>+a.map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> i+<span class="code-string">"  "</span>+e}).join(<span class="code-string">"\n"</span>)+<span class="code-string">"\n"</span>+i+<span class="code-string">"  &gt;"</span>:n+<span class="code-string">"&lt;&gt;"</span>}<span class="code-keyword">return</span> n+<span class="code-built_in">JSON</span>.stringify(r,<span class="code-literal">null</span>,<span class="code-number">2</span>).split(<span class="code-string">"\n"</span>).map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">0</span>===t?e:i+<span class="code-string">"  "</span>+e}).join(<span class="code-string">"\n"</span>)}).join(<span class="code-string">"\n"</span>)+(e.boxes?<span class="code-string">"\n"</span>+xt(e.boxes,t+<span class="code-number">1</span>):<span class="code-string">""</span>)}).join(<span class="code-string">"\n"</span>)},<span class="code-attr">parseType</span>:$t,<span class="code-attr">findBox</span>:<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n,r,a,s,o,u=[];<span class="code-keyword">if</span>(!i.length)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">for</span>(n=<span class="code-number">0</span>;n&lt;t.byteLength;)r=Xt(t[n]&lt;&lt;<span class="code-number">24</span>|t[n+<span class="code-number">1</span>]&lt;&lt;<span class="code-number">16</span>|t[n+<span class="code-number">2</span>]&lt;&lt;<span class="code-number">8</span>|t[n+<span class="code-number">3</span>]),a=$t(t.subarray(n+<span class="code-number">4</span>,n+<span class="code-number">8</span>)),s=r&gt;<span class="code-number">1</span>?n+r:t.byteLength,a===i[<span class="code-number">0</span>]&amp;&amp;(<span class="code-number">1</span>===i.length?u.push(t.subarray(n+<span class="code-number">8</span>,s)):(o=e(t.subarray(n+<span class="code-number">8</span>,s),i.slice(<span class="code-number">1</span>))).length&amp;&amp;(u=u.concat(o))),n=s;<span class="code-keyword">return</span> u},<span class="code-attr">parseTraf</span>:Qt.traf,<span class="code-attr">parseTfdt</span>:Qt.tfdt,<span class="code-attr">parseHdlr</span>:Qt.hdlr,<span class="code-attr">parseTfhd</span>:Qt.tfhd,<span class="code-attr">parseTrun</span>:Qt.trun,<span class="code-attr">parseSidx</span>:Qt.sidx},Zt=t.EventTarget,ei=t.mergeOptions,ti=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-keyword">void</span> <span class="code-number">0</span>,n=ei(e,{<span class="code-attr">duration</span>:t.duration,<span class="code-attr">minimumUpdatePeriod</span>:t.minimumUpdatePeriod}),r=<span class="code-number">0</span>;r&lt;t.playlists.length;r++){<span class="code-keyword">var</span> a=U(n,t.playlists[r]);a?n=a:i=!<span class="code-number">0</span>}<span class="code-keyword">return</span> E(t,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,r,a</span>)</span>{<span class="code-keyword">if</span>(e.playlists&amp;&amp;e.playlists.length){<span class="code-keyword">var</span> s=e.playlists[<span class="code-number">0</span>].uri,o=U(n,e.playlists[<span class="code-number">0</span>]);o&amp;&amp;((n=o).mediaGroups[t][r][a].playlists[<span class="code-number">0</span>]=n.playlists[s],i=!<span class="code-number">1</span>)}}),i?<span class="code-literal">null</span>:n},ii=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.byterange.offset+e.byterange.length<span class="code-number">-1</span>;<span class="code-keyword">return</span> e.uri+<span class="code-string">"-"</span>+e.byterange.offset+<span class="code-string">"-"</span>+t},ni=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n,r={};<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a <span class="code-keyword">in</span> e){<span class="code-keyword">var</span> s=e[a].sidx;<span class="code-keyword">if</span>(s){<span class="code-keyword">var</span> o=ii(s);<span class="code-keyword">if</span>(!t[o])<span class="code-keyword">break</span>;<span class="code-keyword">var</span> u=t[o].sidxInfo;i=u,n=s,(<span class="code-built_in">Boolean</span>(!i.map&amp;&amp;!n.map)||<span class="code-built_in">Boolean</span>(i.map&amp;&amp;n.map&amp;&amp;i.map.byterange.offset===n.map.byterange.offset&amp;&amp;i.map.byterange.length===n.map.byterange.length))&amp;&amp;i.uri===n.uri&amp;&amp;i.byterange.offset===n.byterange.offset&amp;&amp;i.byterange.length===n.byterange.length&amp;&amp;(r[o]=t[o])}}<span class="code-keyword">return</span> r},ri=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i,n,r,a</span>)</span>{<span class="code-keyword">var</span> s={<span class="code-attr">uri</span>:l(r.handleManifestRedirects,e.resolvedUri),<span class="code-attr">byterange</span>:e.byterange,<span class="code-attr">playlist</span>:i};<span class="code-keyword">return</span> n(t.mergeOptions(s,{<span class="code-attr">responseType</span>:<span class="code-string">"arraybuffer"</span>,<span class="code-attr">headers</span>:Q(s)}),a)},ai=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-built_in">arguments</span>.length&gt;<span class="code-number">2</span>&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-built_in">arguments</span>[<span class="code-number">2</span>]?<span class="code-built_in">arguments</span>[<span class="code-number">2</span>]:{},r=<span class="code-built_in">arguments</span>[<span class="code-number">3</span>];_(<span class="code-keyword">this</span>,t);<span class="code-keyword">var</span> a=T(<span class="code-keyword">this</span>,(t.__proto__||<span class="code-built_in">Object</span>.getPrototypeOf(t)).call(<span class="code-keyword">this</span>)),s=n.withCredentials,o=<span class="code-keyword">void</span> <span class="code-number">0</span>!==s&amp;&amp;s,u=n.handleManifestRedirects,d=<span class="code-keyword">void</span> <span class="code-number">0</span>!==u&amp;&amp;u;<span class="code-keyword">if</span>(a.hls_=i,a.withCredentials=o,a.handleManifestRedirects=d,!e)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"A non-empty playlist URL or playlist is required"</span>);<span class="code-keyword">return</span> a.on(<span class="code-string">"minimumUpdatePeriod"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{a.refreshXml_()}),a.on(<span class="code-string">"mediaupdatetimeout"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{a.refreshMedia_(a.media().uri)}),a.state=<span class="code-string">"HAVE_NOTHING"</span>,a.loadedPlaylists_={},<span class="code-string">"string"</span>==<span class="code-keyword">typeof</span> e?(a.srcUrl=e,a.sidxMapping_={},T(a)):(a.setupChildLoader(r,e),a)}<span class="code-keyword">return</span> b(t,Zt),v(t,[{<span class="code-attr">key</span>:<span class="code-string">"setupChildLoader"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.masterPlaylistLoader_=e,<span class="code-keyword">this</span>.childPlaylist_=t}},{<span class="code-attr">key</span>:<span class="code-string">"dispose"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.stopRequest(),<span class="code-keyword">this</span>.loadedPlaylists_={},u.clearTimeout(<span class="code-keyword">this</span>.minimumUpdatePeriodTimeout_),u.clearTimeout(<span class="code-keyword">this</span>.mediaRequest_),u.clearTimeout(<span class="code-keyword">this</span>.mediaUpdateTimeout)}},{<span class="code-attr">key</span>:<span class="code-string">"hasPendingRequest"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.request||<span class="code-keyword">this</span>.mediaRequest_}},{<span class="code-attr">key</span>:<span class="code-string">"stopRequest"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.request){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.request;<span class="code-keyword">this</span>.request=<span class="code-literal">null</span>,e.onreadystatechange=<span class="code-literal">null</span>,e.abort()}}},{<span class="code-attr">key</span>:<span class="code-string">"sidxRequestFinished_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">var</span> r=<span class="code-keyword">this</span>;<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">a,s</span>)</span>{<span class="code-keyword">if</span>(r.request){<span class="code-keyword">if</span>(r.request=<span class="code-literal">null</span>,a)<span class="code-keyword">return</span> r.error={<span class="code-attr">status</span>:s.status,<span class="code-attr">message</span>:<span class="code-string">"DASH playlist request error at URL: "</span>+e.uri,<span class="code-attr">response</span>:s.response,<span class="code-attr">code</span>:<span class="code-number">2</span>},i&amp;&amp;(r.state=i),r.trigger(<span class="code-string">"error"</span>),n(t,<span class="code-literal">null</span>);<span class="code-keyword">var</span> o=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(s.response),u=Jt.parseSidx(o.subarray(<span class="code-number">8</span>));<span class="code-keyword">return</span> n(t,u)}}}},{<span class="code-attr">key</span>:<span class="code-string">"media"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(!e)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.media_;<span class="code-keyword">if</span>(<span class="code-string">"HAVE_NOTHING"</span>===<span class="code-keyword">this</span>.state)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Cannot switch media playlist from "</span>+<span class="code-keyword">this</span>.state);<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.state;<span class="code-keyword">if</span>(<span class="code-string">"string"</span>==<span class="code-keyword">typeof</span> e){<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.master.playlists[e])<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Unknown playlist URI: "</span>+e);e=<span class="code-keyword">this</span>.master.playlists[e]}<span class="code-keyword">var</span> n=!<span class="code-keyword">this</span>.media_||e.uri!==<span class="code-keyword">this</span>.media_.uri;<span class="code-keyword">if</span>(n&amp;&amp;<span class="code-keyword">this</span>.loadedPlaylists_[e.uri]&amp;&amp;<span class="code-keyword">this</span>.loadedPlaylists_[e.uri].endList)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_METADATA"</span>,<span class="code-keyword">this</span>.media_=e,<span class="code-keyword">void</span>(n&amp;&amp;(<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediachanging"</span>),<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediachange"</span>)));<span class="code-keyword">if</span>(n)<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.media_&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediachanging"</span>),e.sidx){<span class="code-keyword">var</span> r=<span class="code-keyword">void</span> <span class="code-number">0</span>,a=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">this</span>.masterPlaylistLoader_?(r=<span class="code-keyword">this</span>.masterPlaylistLoader_.master,a=<span class="code-keyword">this</span>.masterPlaylistLoader_.sidxMapping_):(r=<span class="code-keyword">this</span>.master,a=<span class="code-keyword">this</span>.sidxMapping_);<span class="code-keyword">var</span> s=ii(e.sidx);a[s]={<span class="code-attr">sidxInfo</span>:e.sidx},<span class="code-keyword">this</span>.request=ri(e.sidx,e,<span class="code-keyword">this</span>.hls_.xhr,{<span class="code-attr">handleManifestRedirects</span>:<span class="code-keyword">this</span>.handleManifestRedirects},<span class="code-keyword">this</span>.sidxRequestFinished_(e,r,i,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n,r</span>)</span>{<span class="code-keyword">if</span>(!n||!r)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"failed to request sidx"</span>);a[s].sidx=r,t.haveMetadata({<span class="code-attr">startingState</span>:i,<span class="code-attr">playlist</span>:n.playlists[e.uri]})}))}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.mediaRequest_=u.setTimeout(<span class="code-keyword">this</span>.haveMetadata.bind(<span class="code-keyword">this</span>,{<span class="code-attr">startingState</span>:i,<span class="code-attr">playlist</span>:e}),<span class="code-number">0</span>)}},{<span class="code-attr">key</span>:<span class="code-string">"haveMetadata"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.startingState,i=e.playlist;<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_METADATA"</span>,<span class="code-keyword">this</span>.loadedPlaylists_[i.uri]=i,<span class="code-keyword">this</span>.mediaRequest_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.refreshMedia_(i.uri),<span class="code-string">"HAVE_MASTER"</span>===t?<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedmetadata"</span>):<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediachange"</span>)}},{<span class="code-attr">key</span>:<span class="code-string">"pause"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.stopRequest(),u.clearTimeout(<span class="code-keyword">this</span>.mediaUpdateTimeout),u.clearTimeout(<span class="code-keyword">this</span>.minimumUpdatePeriodTimeout_),<span class="code-string">"HAVE_NOTHING"</span>===<span class="code-keyword">this</span>.state&amp;&amp;(<span class="code-keyword">this</span>.started=!<span class="code-number">1</span>)}},{<span class="code-attr">key</span>:<span class="code-string">"load"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;u.clearTimeout(<span class="code-keyword">this</span>.mediaUpdateTimeout),u.clearTimeout(<span class="code-keyword">this</span>.minimumUpdatePeriodTimeout_);<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.media();<span class="code-keyword">if</span>(e){<span class="code-keyword">var</span> n=i?i.targetDuration/<span class="code-number">2</span>*<span class="code-number">1e3</span>:<span class="code-number">5e3</span>;<span class="code-keyword">this</span>.mediaUpdateTimeout=u.setTimeout(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.load()},n)}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.started?<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedplaylist"</span>):<span class="code-keyword">this</span>.start()}},{<span class="code-attr">key</span>:<span class="code-string">"parseMasterXml"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=jt(<span class="code-keyword">this</span>.masterXml_,{<span class="code-attr">manifestUri</span>:<span class="code-keyword">this</span>.srcUrl,<span class="code-attr">clientOffset</span>:<span class="code-keyword">this</span>.clientOffset_,<span class="code-attr">sidxMapping</span>:<span class="code-keyword">this</span>.sidxMapping_});e.uri=<span class="code-keyword">this</span>.srcUrl;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">0</span>;t&lt;e.playlists.length;t++){<span class="code-keyword">var</span> i=<span class="code-string">"placeholder-uri-"</span>+t;e.playlists[t].uri=i,e.playlists[i]=e.playlists[t]}<span class="code-keyword">return</span> E(e,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i,n,r</span>)</span>{<span class="code-keyword">if</span>(t.playlists&amp;&amp;t.playlists.length){<span class="code-keyword">var</span> a=<span class="code-string">"placeholder-uri-"</span>+i+<span class="code-string">"-"</span>+n+<span class="code-string">"-"</span>+r;t.playlists[<span class="code-number">0</span>].uri=a,e.playlists[a]=t.playlists[<span class="code-number">0</span>]}}),I(e),A(e),e}},{<span class="code-attr">key</span>:<span class="code-string">"start"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.started=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.masterPlaylistLoader_?<span class="code-keyword">this</span>.mediaRequest_=u.setTimeout(<span class="code-keyword">this</span>.haveMaster_.bind(<span class="code-keyword">this</span>),<span class="code-number">0</span>):<span class="code-keyword">this</span>.request=<span class="code-keyword">this</span>.hls_.xhr({<span class="code-attr">uri</span>:<span class="code-keyword">this</span>.srcUrl,<span class="code-attr">withCredentials</span>:<span class="code-keyword">this</span>.withCredentials},<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">if</span>(e.request){<span class="code-keyword">if</span>(e.request=<span class="code-literal">null</span>,t)<span class="code-keyword">return</span> e.error={<span class="code-attr">status</span>:i.status,<span class="code-attr">message</span>:<span class="code-string">"DASH playlist request error at URL: "</span>+e.srcUrl,<span class="code-attr">responseText</span>:i.responseText,<span class="code-attr">code</span>:<span class="code-number">2</span>},<span class="code-string">"HAVE_NOTHING"</span>===e.state&amp;&amp;(e.started=!<span class="code-number">1</span>),e.trigger(<span class="code-string">"error"</span>);e.masterXml_=i.responseText,i.responseHeaders&amp;&amp;i.responseHeaders.date?e.masterLoaded_=<span class="code-built_in">Date</span>.parse(i.responseHeaders.date):e.masterLoaded_=<span class="code-built_in">Date</span>.now(),e.srcUrl=l(e.handleManifestRedirects,e.srcUrl,i),e.syncClientServerClock_(e.onClientServerClockSync_.bind(e))}})}},{<span class="code-attr">key</span>:<span class="code-string">"syncClientServerClock_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>,i=Vt(<span class="code-keyword">this</span>.masterXml_);<span class="code-keyword">return</span> <span class="code-literal">null</span>===i?(<span class="code-keyword">this</span>.clientOffset_=<span class="code-keyword">this</span>.masterLoaded_-<span class="code-built_in">Date</span>.now(),e()):<span class="code-string">"DIRECT"</span>===i.method?(<span class="code-keyword">this</span>.clientOffset_=i.value-<span class="code-built_in">Date</span>.now(),e()):<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.request=<span class="code-keyword">this</span>.hls_.xhr({<span class="code-attr">uri</span>:d(<span class="code-keyword">this</span>.srcUrl,i.value),<span class="code-attr">method</span>:i.method,<span class="code-attr">withCredentials</span>:<span class="code-keyword">this</span>.withCredentials},<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n,r</span>)</span>{<span class="code-keyword">if</span>(t.request){<span class="code-keyword">if</span>(n)<span class="code-keyword">return</span> t.clientOffset_=t.masterLoaded_-<span class="code-built_in">Date</span>.now(),e();<span class="code-keyword">var</span> a=<span class="code-keyword">void</span> <span class="code-number">0</span>;a=<span class="code-string">"HEAD"</span>===i.method?r.responseHeaders&amp;&amp;r.responseHeaders.date?<span class="code-built_in">Date</span>.parse(r.responseHeaders.date):t.masterLoaded_:<span class="code-built_in">Date</span>.parse(r.responseText),t.clientOffset_=a-<span class="code-built_in">Date</span>.now(),e()}}))}},{<span class="code-attr">key</span>:<span class="code-string">"haveMaster_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_MASTER"</span>,<span class="code-keyword">this</span>.mediaRequest_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.masterPlaylistLoader_?<span class="code-keyword">this</span>.media_||<span class="code-keyword">this</span>.media(<span class="code-keyword">this</span>.childPlaylist_):(<span class="code-keyword">this</span>.master=<span class="code-keyword">this</span>.parseMasterXml(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedplaylist"</span>))}},{<span class="code-attr">key</span>:<span class="code-string">"onClientServerClockSync_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.haveMaster_(),<span class="code-keyword">this</span>.hasPendingRequest()||<span class="code-keyword">this</span>.media_||<span class="code-keyword">this</span>.media(<span class="code-keyword">this</span>.master.playlists[<span class="code-number">0</span>]),<span class="code-keyword">this</span>.master&amp;&amp;<span class="code-keyword">this</span>.master.minimumUpdatePeriod&amp;&amp;(<span class="code-keyword">this</span>.minimumUpdatePeriodTimeout_=u.setTimeout(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"minimumUpdatePeriod"</span>)},<span class="code-keyword">this</span>.master.minimumUpdatePeriod))}},{<span class="code-attr">key</span>:<span class="code-string">"refreshXml_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.request=<span class="code-keyword">this</span>.hls_.xhr({<span class="code-attr">uri</span>:<span class="code-keyword">this</span>.srcUrl,<span class="code-attr">withCredentials</span>:<span class="code-keyword">this</span>.withCredentials},<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">if</span>(e.request){<span class="code-keyword">if</span>(e.request=<span class="code-literal">null</span>,t)<span class="code-keyword">return</span> e.error={<span class="code-attr">status</span>:i.status,<span class="code-attr">message</span>:<span class="code-string">"DASH playlist request error at URL: "</span>+e.srcUrl,<span class="code-attr">responseText</span>:i.responseText,<span class="code-attr">code</span>:<span class="code-number">2</span>},<span class="code-string">"HAVE_NOTHING"</span>===e.state&amp;&amp;(e.started=!<span class="code-number">1</span>),e.trigger(<span class="code-string">"error"</span>);e.masterXml_=i.responseText,e.sidxMapping_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">var</span> r=jt(e,{<span class="code-attr">manifestUri</span>:t,<span class="code-attr">clientOffset</span>:i}),a=ni(r.playlists,n);<span class="code-keyword">return</span> E(r,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,r</span>)</span>{<span class="code-keyword">if</span>(e.playlists&amp;&amp;e.playlists.length){<span class="code-keyword">var</span> s=e.playlists;a=ei(a,ni(s,n))}}),a}(e.masterXml_,e.srcUrl,e.clientOffset_,e.sidxMapping_);<span class="code-keyword">var</span> n=e.parseMasterXml(),r=ti(e.master,n),a=e.media().sidx;<span class="code-keyword">if</span>(r)<span class="code-keyword">if</span>(a){<span class="code-keyword">var</span> s=ii(a);<span class="code-keyword">if</span>(!e.sidxMapping_[s]){<span class="code-keyword">var</span> o=e.media();e.request=ri(o.sidx,o,e.hls_.xhr,{<span class="code-attr">handleManifestRedirects</span>:e.handleManifestRedirects},e.sidxRequestFinished_(o,n,e.state,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">if</span>(!t||!i)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"failed to request sidx on minimumUpdatePeriod"</span>);e.sidxMapping_[s].sidx=i,e.minimumUpdatePeriodTimeout_=u.setTimeout(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"minimumUpdatePeriod"</span>)},e.master.minimumUpdatePeriod),e.refreshMedia_(e.media().uri)}))}}<span class="code-keyword">else</span> e.master=r;e.minimumUpdatePeriodTimeout_=u.setTimeout(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"minimumUpdatePeriod"</span>)},e.master.minimumUpdatePeriod)}})}},{<span class="code-attr">key</span>:<span class="code-string">"refreshMedia_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(!e)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"refreshMedia_ must take a media uri"</span>);<span class="code-keyword">var</span> i=<span class="code-keyword">void</span> <span class="code-number">0</span>,n=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">this</span>.masterPlaylistLoader_?(i=<span class="code-keyword">this</span>.masterPlaylistLoader_.master,n=<span class="code-keyword">this</span>.masterPlaylistLoader_.parseMasterXml()):(i=<span class="code-keyword">this</span>.master,n=<span class="code-keyword">this</span>.parseMasterXml());<span class="code-keyword">var</span> r=ti(i,n);r?(<span class="code-keyword">this</span>.masterPlaylistLoader_?<span class="code-keyword">this</span>.masterPlaylistLoader_.master=r:<span class="code-keyword">this</span>.master=r,<span class="code-keyword">this</span>.media_=r.playlists[e]):(<span class="code-keyword">this</span>.media_=n.playlists[e],<span class="code-keyword">this</span>.trigger(<span class="code-string">"playlistunchanged"</span>)),<span class="code-keyword">this</span>.media().endList||(<span class="code-keyword">this</span>.mediaUpdateTimeout=u.setTimeout(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t.trigger(<span class="code-string">"mediaupdatetimeout"</span>)},O(<span class="code-keyword">this</span>.media(),!!r))),<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedplaylist"</span>)}}]),t}(),si=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t.log.debug?t.log.debug.bind(t,<span class="code-string">"VHS:"</span>,e+<span class="code-string">" &gt;"</span>):<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{}};<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">oi</span>(<span class="code-params"></span>)</span>{}<span class="code-keyword">var</span> ui,di,li,hi,ci,fi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i,n,r</span>)</span>{_(<span class="code-keyword">this</span>,e),<span class="code-keyword">this</span>.callbacks_=[],<span class="code-keyword">this</span>.pendingCallback_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.timestampOffset_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.mediaSource=t,<span class="code-keyword">this</span>.processedAppend_=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.type_=n,<span class="code-keyword">this</span>.mimeType_=i,<span class="code-keyword">this</span>.logger_=si(<span class="code-string">"SourceUpdater["</span>+n+<span class="code-string">"]["</span>+i+<span class="code-string">"]"</span>),<span class="code-string">"closed"</span>===t.readyState?t.addEventListener(<span class="code-string">"sourceopen"</span>,<span class="code-keyword">this</span>.createSourceBuffer_.bind(<span class="code-keyword">this</span>,i,r)):<span class="code-keyword">this</span>.createSourceBuffer_(i,r)}<span class="code-keyword">return</span> v(e,[{<span class="code-attr">key</span>:<span class="code-string">"createSourceBuffer_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.sourceBuffer_=<span class="code-keyword">this</span>.mediaSource.addSourceBuffer(e),<span class="code-keyword">this</span>.logger_(<span class="code-string">"created SourceBuffer"</span>),t&amp;&amp;(t.trigger(<span class="code-string">"sourcebufferadded"</span>),<span class="code-keyword">this</span>.mediaSource.sourceBuffers.length&lt;<span class="code-number">2</span>)?t.on(<span class="code-string">"sourcebufferadded"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i.start_()}):<span class="code-keyword">this</span>.start_()}},{<span class="code-attr">key</span>:<span class="code-string">"start_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.started_=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.onUpdateendCallback_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t=e.pendingCallback_;e.pendingCallback_=<span class="code-literal">null</span>,e.sourceBuffer_.removing=!<span class="code-number">1</span>,e.logger_(<span class="code-string">"buffered ["</span>+Se(e.buffered())+<span class="code-string">"]"</span>),t&amp;&amp;t(),e.runCallback_()},<span class="code-keyword">this</span>.sourceBuffer_.addEventListener(<span class="code-string">"updateend"</span>,<span class="code-keyword">this</span>.onUpdateendCallback_),<span class="code-keyword">this</span>.runCallback_()}},{<span class="code-attr">key</span>:<span class="code-string">"abort"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.processedAppend_&amp;&amp;<span class="code-keyword">this</span>.queueCallback_(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t.sourceBuffer_.abort()},e)}},{<span class="code-attr">key</span>:<span class="code-string">"appendBuffer"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.processedAppend_=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.queueCallback_(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.videoSegmentTimingInfoCallback&amp;&amp;i.sourceBuffer_.addEventListener(<span class="code-string">"videoSegmentTimingInfo"</span>,e.videoSegmentTimingInfoCallback),i.sourceBuffer_.appendBuffer(e.bytes)},<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.videoSegmentTimingInfoCallback&amp;&amp;i.sourceBuffer_.removeEventListener(<span class="code-string">"videoSegmentTimingInfo"</span>,e.videoSegmentTimingInfoCallback),t()})}},{<span class="code-attr">key</span>:<span class="code-string">"buffered"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.sourceBuffer_?<span class="code-keyword">this</span>.sourceBuffer_.buffered:t.createTimeRanges()}},{<span class="code-attr">key</span>:<span class="code-string">"remove"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>,n=<span class="code-built_in">arguments</span>.length&gt;<span class="code-number">2</span>&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-built_in">arguments</span>[<span class="code-number">2</span>]?<span class="code-built_in">arguments</span>[<span class="code-number">2</span>]:oi;<span class="code-keyword">this</span>.processedAppend_&amp;&amp;<span class="code-keyword">this</span>.queueCallback_(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i.logger_(<span class="code-string">"remove ["</span>+e+<span class="code-string">" =&gt; "</span>+t+<span class="code-string">"]"</span>),i.sourceBuffer_.removing=!<span class="code-number">0</span>,i.sourceBuffer_.remove(e,t)},n)}},{<span class="code-attr">key</span>:<span class="code-string">"updating"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span>!<span class="code-keyword">this</span>.sourceBuffer_||<span class="code-keyword">this</span>.sourceBuffer_.updating||!!<span class="code-keyword">this</span>.pendingCallback_&amp;&amp;<span class="code-keyword">this</span>.pendingCallback_!==oi}},{<span class="code-attr">key</span>:<span class="code-string">"timestampOffset"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>!==e&amp;&amp;(<span class="code-keyword">this</span>.queueCallback_(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t.sourceBuffer_.timestampOffset=e,t.runCallback_()}),<span class="code-keyword">this</span>.timestampOffset_=e),<span class="code-keyword">this</span>.timestampOffset_}},{<span class="code-attr">key</span>:<span class="code-string">"queueCallback_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.callbacks_.push([e.bind(<span class="code-keyword">this</span>),t]),<span class="code-keyword">this</span>.runCallback_()}},{<span class="code-attr">key</span>:<span class="code-string">"runCallback_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">void</span> <span class="code-number">0</span>;!<span class="code-keyword">this</span>.updating()&amp;&amp;<span class="code-keyword">this</span>.callbacks_.length&amp;&amp;<span class="code-keyword">this</span>.started_&amp;&amp;(e=<span class="code-keyword">this</span>.callbacks_.shift(),<span class="code-keyword">this</span>.pendingCallback_=e[<span class="code-number">1</span>],e[<span class="code-number">0</span>]())}},{<span class="code-attr">key</span>:<span class="code-string">"dispose"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>,t=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params"></span>)</span>{e.sourceBuffer_&amp;&amp;<span class="code-string">"open"</span>===e.mediaSource.readyState&amp;&amp;e.sourceBuffer_.abort(),e.sourceBuffer_.removeEventListener(<span class="code-string">"updateend"</span>,t)};<span class="code-keyword">this</span>.sourceBuffer_.removeEventListener(<span class="code-string">"updateend"</span>,<span class="code-keyword">this</span>.onUpdateendCallback_),<span class="code-keyword">this</span>.sourceBuffer_.removing?<span class="code-keyword">this</span>.sourceBuffer_.addEventListener(<span class="code-string">"updateend"</span>,t):t()}}]),e}(),pi={<span class="code-attr">GOAL_BUFFER_LENGTH</span>:<span class="code-number">30</span>,<span class="code-attr">MAX_GOAL_BUFFER_LENGTH</span>:<span class="code-number">60</span>,<span class="code-attr">GOAL_BUFFER_LENGTH_RATE</span>:<span class="code-number">1</span>,<span class="code-attr">INITIAL_BANDWIDTH</span>:<span class="code-number">4194304</span>,<span class="code-attr">BANDWIDTH_VARIANCE</span>:<span class="code-number">1.2</span>,<span class="code-attr">BUFFER_LOW_WATER_LINE</span>:<span class="code-number">0</span>,<span class="code-attr">MAX_BUFFER_LOW_WATER_LINE</span>:<span class="code-number">30</span>,<span class="code-attr">BUFFER_LOW_WATER_LINE_RATE</span>:<span class="code-number">1</span>},mi=Wt,gi=zt;ui=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Jt.findBox(e,[<span class="code-string">"moov"</span>,<span class="code-string">"trak"</span>]).reduce(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n,r,a,s;<span class="code-keyword">return</span>(i=Jt.findBox(t,[<span class="code-string">"tkhd"</span>])[<span class="code-number">0</span>])?(n=i[<span class="code-number">0</span>],a=mi(i[r=<span class="code-number">0</span>===n?<span class="code-number">12</span>:<span class="code-number">20</span>]&lt;&lt;<span class="code-number">24</span>|i[r+<span class="code-number">1</span>]&lt;&lt;<span class="code-number">16</span>|i[r+<span class="code-number">2</span>]&lt;&lt;<span class="code-number">8</span>|i[r+<span class="code-number">3</span>]),(s=Jt.findBox(t,[<span class="code-string">"mdia"</span>,<span class="code-string">"mdhd"</span>])[<span class="code-number">0</span>])?(r=<span class="code-number">0</span>===(n=s[<span class="code-number">0</span>])?<span class="code-number">12</span>:<span class="code-number">20</span>,e[a]=mi(s[r]&lt;&lt;<span class="code-number">24</span>|s[r+<span class="code-number">1</span>]&lt;&lt;<span class="code-number">16</span>|s[r+<span class="code-number">2</span>]&lt;&lt;<span class="code-number">8</span>|s[r+<span class="code-number">3</span>]),e):<span class="code-literal">null</span>):<span class="code-literal">null</span>},{})},di=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n,r;<span class="code-keyword">return</span> i=Jt.findBox(t,[<span class="code-string">"moof"</span>,<span class="code-string">"traf"</span>]),n=[].concat.apply([],i.map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span> Jt.findBox(t,[<span class="code-string">"tfhd"</span>]).map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n,r;<span class="code-keyword">return</span> n=mi(i[<span class="code-number">4</span>]&lt;&lt;<span class="code-number">24</span>|i[<span class="code-number">5</span>]&lt;&lt;<span class="code-number">16</span>|i[<span class="code-number">6</span>]&lt;&lt;<span class="code-number">8</span>|i[<span class="code-number">7</span>]),r=e[n]||<span class="code-number">9e4</span>,(Jt.findBox(t,[<span class="code-string">"tfdt"</span>]).map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i;<span class="code-keyword">return</span> t=e[<span class="code-number">0</span>],i=mi(e[<span class="code-number">4</span>]&lt;&lt;<span class="code-number">24</span>|e[<span class="code-number">5</span>]&lt;&lt;<span class="code-number">16</span>|e[<span class="code-number">6</span>]&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">7</span>]),<span class="code-number">1</span>===t&amp;&amp;(i*=<span class="code-built_in">Math</span>.pow(<span class="code-number">2</span>,<span class="code-number">32</span>),i+=mi(e[<span class="code-number">8</span>]&lt;&lt;<span class="code-number">24</span>|e[<span class="code-number">9</span>]&lt;&lt;<span class="code-number">16</span>|e[<span class="code-number">10</span>]&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">11</span>])),i})[<span class="code-number">0</span>]||<span class="code-number">1</span>/<span class="code-number">0</span>)/r})})),r=<span class="code-built_in">Math</span>.min.apply(<span class="code-literal">null</span>,n),<span class="code-built_in">isFinite</span>(r)?r:<span class="code-number">0</span>},li=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n=Jt.findBox(t,[<span class="code-string">"moof"</span>,<span class="code-string">"traf"</span>]),r=<span class="code-number">0</span>,a=<span class="code-number">0</span>;<span class="code-keyword">if</span>(n&amp;&amp;n.length)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> s=Jt.parseTraf(n[<span class="code-number">0</span>]),o=<span class="code-number">0</span>;o&lt;s.boxes.length;o++)<span class="code-string">"tfhd"</span>===s.boxes[o].type?i=s.boxes[o].trackId:<span class="code-string">"tfdt"</span>===s.boxes[o].type?r=s.boxes[o].baseMediaDecodeTime:<span class="code-string">"trun"</span>===s.boxes[o].type&amp;&amp;s.boxes[o].samples.length&amp;&amp;(a=s.boxes[o].samples[<span class="code-number">0</span>].compositionTimeOffset||<span class="code-number">0</span>);<span class="code-keyword">return</span>(r+a)/(e[i]||<span class="code-number">9e4</span>)},hi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=[];<span class="code-keyword">return</span> Jt.findBox(e,[<span class="code-string">"moov"</span>,<span class="code-string">"trak"</span>]).forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=Jt.findBox(e,[<span class="code-string">"mdia"</span>,<span class="code-string">"hdlr"</span>]),n=Jt.findBox(e,[<span class="code-string">"tkhd"</span>]);i.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">var</span> r,a,s=Jt.parseType(e.subarray(<span class="code-number">8</span>,<span class="code-number">12</span>)),o=n[i];<span class="code-string">"vide"</span>===s&amp;&amp;(a=<span class="code-number">0</span>===(r=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(o.buffer,o.byteOffset,o.byteLength)).getUint8(<span class="code-number">0</span>)?r.getUint32(<span class="code-number">12</span>):r.getUint32(<span class="code-number">20</span>),t.push(a))})}),t},ci=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=[];<span class="code-keyword">return</span> Jt.findBox(e,[<span class="code-string">"moov"</span>,<span class="code-string">"trak"</span>]).forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i,n,r={},a=Jt.findBox(e,[<span class="code-string">"tkhd"</span>])[<span class="code-number">0</span>];a&amp;&amp;(n=(i=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(a.buffer,a.byteOffset,a.byteLength)).getUint8(<span class="code-number">0</span>),r.id=<span class="code-number">0</span>===n?i.getUint32(<span class="code-number">12</span>):i.getUint32(<span class="code-number">20</span>));<span class="code-keyword">var</span> s=Jt.findBox(e,[<span class="code-string">"mdia"</span>,<span class="code-string">"hdlr"</span>])[<span class="code-number">0</span>];<span class="code-keyword">if</span>(s){<span class="code-keyword">var</span> o=Jt.parseType(s.subarray(<span class="code-number">8</span>,<span class="code-number">12</span>));r.type=<span class="code-string">"vide"</span>===o?<span class="code-string">"video"</span>:<span class="code-string">"soun"</span>===o?<span class="code-string">"audio"</span>:o}<span class="code-keyword">var</span> u=Jt.findBox(e,[<span class="code-string">"mdia"</span>,<span class="code-string">"minf"</span>,<span class="code-string">"stbl"</span>,<span class="code-string">"stsd"</span>])[<span class="code-number">0</span>];<span class="code-keyword">if</span>(u){<span class="code-keyword">var</span> d=u.subarray(<span class="code-number">8</span>);r.codec=Jt.parseType(d.subarray(<span class="code-number">4</span>,<span class="code-number">8</span>));<span class="code-keyword">var</span> l,h=Jt.findBox(d,[r.codec])[<span class="code-number">0</span>];h&amp;&amp;(<span class="code-regexp">/^[a-z]vc[1-9]$/i</span>.test(r.codec)?(l=h.subarray(<span class="code-number">78</span>),<span class="code-string">"avcC"</span>===Jt.parseType(l.subarray(<span class="code-number">4</span>,<span class="code-number">8</span>))&amp;&amp;l.length&gt;<span class="code-number">11</span>?(r.codec+=<span class="code-string">"."</span>,r.codec+=gi(l[<span class="code-number">9</span>]),r.codec+=gi(l[<span class="code-number">10</span>]),r.codec+=gi(l[<span class="code-number">11</span>])):r.codec=<span class="code-string">"avc1.4d400d"</span>):<span class="code-regexp">/^mp4[a,v]$/i</span>.test(r.codec)&amp;&amp;(l=h.subarray(<span class="code-number">28</span>),<span class="code-string">"esds"</span>===Jt.parseType(l.subarray(<span class="code-number">4</span>,<span class="code-number">8</span>))&amp;&amp;l.length&gt;<span class="code-number">20</span>&amp;&amp;<span class="code-number">0</span>!==l[<span class="code-number">19</span>]?(r.codec+=<span class="code-string">"."</span>+gi(l[<span class="code-number">19</span>]),r.codec+=<span class="code-string">"."</span>+gi(l[<span class="code-number">20</span>]&gt;&gt;&gt;<span class="code-number">2</span>&amp;<span class="code-number">63</span>).replace(<span class="code-regexp">/^0/</span>,<span class="code-string">""</span>)):r.codec=<span class="code-string">"mp4a.40.2"</span>))}<span class="code-keyword">var</span> c=Jt.findBox(e,[<span class="code-string">"mdia"</span>,<span class="code-string">"mdhd"</span>])[<span class="code-number">0</span>];<span class="code-keyword">if</span>(c&amp;&amp;a){<span class="code-keyword">var</span> f=<span class="code-number">0</span>===n?<span class="code-number">12</span>:<span class="code-number">20</span>;r.timescale=mi(c[f]&lt;&lt;<span class="code-number">24</span>|c[f+<span class="code-number">1</span>]&lt;&lt;<span class="code-number">16</span>|c[f+<span class="code-number">2</span>]&lt;&lt;<span class="code-number">8</span>|c[f+<span class="code-number">3</span>])}t.push(r)}),t};<span class="code-keyword">var</span> yi={<span class="code-attr">findBox</span>:Jt.findBox,<span class="code-attr">parseType</span>:Jt.parseType,<span class="code-attr">timescale</span>:ui,<span class="code-attr">startTime</span>:di,<span class="code-attr">compositionStartTime</span>:li,<span class="code-attr">videoTrackIds</span>:hi,<span class="code-attr">tracks</span>:ci},_i=<span class="code-number">2</span>,vi=<span class="code-number">-101</span>,bi=<span class="code-number">-102</span>,Ti=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.abort()})},Si=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> t.timedout?{<span class="code-attr">status</span>:t.status,<span class="code-attr">message</span>:<span class="code-string">"HLS request timed-out at URL: "</span>+t.uri,<span class="code-attr">code</span>:vi,<span class="code-attr">xhr</span>:t}:t.aborted?{<span class="code-attr">status</span>:t.status,<span class="code-attr">message</span>:<span class="code-string">"HLS request aborted at URL: "</span>+t.uri,<span class="code-attr">code</span>:bi,<span class="code-attr">xhr</span>:t}:e?{<span class="code-attr">status</span>:t.status,<span class="code-attr">message</span>:<span class="code-string">"HLS request errored at URL: "</span>+t.uri,<span class="code-attr">code</span>:_i,<span class="code-attr">xhr</span>:t}:<span class="code-literal">null</span>},ki=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-number">0</span>,r=!<span class="code-number">1</span>;<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">a,s</span>)</span>{<span class="code-keyword">if</span>(!r)<span class="code-keyword">return</span> a?(r=!<span class="code-number">0</span>,Ti(e),i(a,s)):(n+=<span class="code-number">1</span>)===e.length?(s.endOfAllRequests=<span class="code-built_in">Date</span>.now(),s.encryptedBytes?<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{e.addEventListener(<span class="code-string">"message"</span>,<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">n</span>(<span class="code-params">r</span>)</span>{<span class="code-keyword">if</span>(r.data.source===t.requestId){e.removeEventListener(<span class="code-string">"message"</span>,n);<span class="code-keyword">var</span> a=r.data.decrypted;<span class="code-keyword">return</span> t.bytes=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(a.bytes,a.byteOffset,a.byteLength),i(<span class="code-literal">null</span>,t)}});<span class="code-keyword">var</span> n=<span class="code-keyword">void</span> <span class="code-number">0</span>;n=t.key.bytes.slice?t.key.bytes.slice():<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>(<span class="code-built_in">Array</span>.prototype.slice.call(t.key.bytes)),e.postMessage(ce({<span class="code-attr">source</span>:t.requestId,<span class="code-attr">encrypted</span>:t.encryptedBytes,<span class="code-attr">key</span>:n,<span class="code-attr">iv</span>:t.key.iv}),[t.encryptedBytes.buffer,n.buffer])}(t,s,i):i(<span class="code-literal">null</span>,s)):<span class="code-keyword">void</span> <span class="code-number">0</span>}},wi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-keyword">var</span> r,a,s;<span class="code-keyword">return</span> e.stats=t.mergeOptions(e.stats,(a=(r=n).target,(s={<span class="code-attr">bandwidth</span>:<span class="code-number">1</span>/<span class="code-number">0</span>,<span class="code-attr">bytesReceived</span>:<span class="code-number">0</span>,<span class="code-attr">roundTripTime</span>:<span class="code-built_in">Date</span>.now()-a.requestTime||<span class="code-number">0</span>}).bytesReceived=r.loaded,s.bandwidth=<span class="code-built_in">Math</span>.floor(s.bytesReceived/s.roundTripTime*<span class="code-number">8</span>*<span class="code-number">1e3</span>),s)),!e.stats.firstBytesReceivedAt&amp;&amp;e.stats.bytesReceived&amp;&amp;(e.stats.firstBytesReceivedAt=<span class="code-built_in">Date</span>.now()),i(n,e)}},Li=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i,n,r,a,s,o</span>)</span>{<span class="code-keyword">var</span> u=[],d=ki(u,n,o);<span class="code-keyword">if</span>(a.key&amp;&amp;!a.key.bytes){<span class="code-keyword">var</span> l=e(t.mergeOptions(i,{<span class="code-attr">uri</span>:a.key.resolvedUri,<span class="code-attr">responseType</span>:<span class="code-string">"arraybuffer"</span>}),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i,n</span>)</span>{<span class="code-keyword">var</span> r=n.response,a=Si(i,n);<span class="code-keyword">if</span>(a)<span class="code-keyword">return</span> t(a,e);<span class="code-keyword">if</span>(<span class="code-number">16</span>!==r.byteLength)<span class="code-keyword">return</span> t({<span class="code-attr">status</span>:n.status,<span class="code-attr">message</span>:<span class="code-string">"Invalid HLS key at URL: "</span>+n.uri,<span class="code-attr">code</span>:_i,<span class="code-attr">xhr</span>:n},e);<span class="code-keyword">var</span> s=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(r);<span class="code-keyword">return</span> e.key.bytes=<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>([s.getUint32(<span class="code-number">0</span>),s.getUint32(<span class="code-number">4</span>),s.getUint32(<span class="code-number">8</span>),s.getUint32(<span class="code-number">12</span>)]),t(<span class="code-literal">null</span>,e)}}(a,d));u.push(l)}<span class="code-keyword">if</span>(a.map&amp;&amp;!a.map.bytes){<span class="code-keyword">var</span> h=e(t.mergeOptions(i,{<span class="code-attr">uri</span>:a.map.resolvedUri,<span class="code-attr">responseType</span>:<span class="code-string">"arraybuffer"</span>,<span class="code-attr">headers</span>:Q(a.map)}),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n,r</span>)</span>{<span class="code-keyword">var</span> a=r.response,s=Si(n,r);<span class="code-keyword">return</span> s?i(s,e):<span class="code-number">0</span>===a.byteLength?i({<span class="code-attr">status</span>:r.status,<span class="code-attr">message</span>:<span class="code-string">"Empty HLS segment content at URL: "</span>+r.uri,<span class="code-attr">code</span>:_i,<span class="code-attr">xhr</span>:r},e):(e.map.bytes=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(r.response),t&amp;&amp;!t.isInitialized()&amp;&amp;t.init(),e.map.timescales=yi.timescale(e.map.bytes),e.map.videoTrackIds=yi.videoTrackIds(e.map.bytes),i(<span class="code-literal">null</span>,e))}}(a,r,d));u.push(h)}<span class="code-keyword">var</span> c=e(t.mergeOptions(i,{<span class="code-attr">uri</span>:a.resolvedUri,<span class="code-attr">responseType</span>:<span class="code-string">"arraybuffer"</span>,<span class="code-attr">headers</span>:Q(a)}),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n,r</span>)</span>{<span class="code-keyword">var</span> a=r.response,s=Si(n,r),o=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">return</span> s?i(s,e):<span class="code-number">0</span>===a.byteLength?i({<span class="code-attr">status</span>:r.status,<span class="code-attr">message</span>:<span class="code-string">"Empty HLS segment content at URL: "</span>+r.uri,<span class="code-attr">code</span>:_i,<span class="code-attr">xhr</span>:r},e):(e.stats=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">bandwidth</span>:e.bandwidth,<span class="code-attr">bytesReceived</span>:e.bytesReceived||<span class="code-number">0</span>,<span class="code-attr">roundTripTime</span>:e.roundTripTime||<span class="code-number">0</span>}}(r),e.key?e.encryptedBytes=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(r.response):e.bytes=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(r.response),t&amp;&amp;e.map&amp;&amp;e.map.bytes&amp;&amp;(t.isInitialized()||t.init(),(o=t.parse(e.bytes,e.map.videoTrackIds,e.map.timescales))&amp;&amp;o.captions&amp;&amp;(e.captionStreams=o.captionStreams,e.fmp4Captions=o.captions)),i(<span class="code-literal">null</span>,e))}}(a,r,d));<span class="code-keyword">return</span> c.addEventListener(<span class="code-string">"progress"</span>,wi(a,s)),u.push(c),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> Ti(u)}},Ei=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i;<span class="code-keyword">return</span> e&amp;&amp;(i=u.getComputedStyle(e))?i[t]:<span class="code-string">""</span>},Ui=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e.slice();e.sort(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,n</span>)</span>{<span class="code-keyword">var</span> r=t(e,n);<span class="code-keyword">return</span> <span class="code-number">0</span>===r?i.indexOf(e)-i.indexOf(n):r})},Ii=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">void</span> <span class="code-number">0</span>,n=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">return</span> e.attributes.BANDWIDTH&amp;&amp;(i=e.attributes.BANDWIDTH),i=i||u.Number.MAX_VALUE,t.attributes.BANDWIDTH&amp;&amp;(n=t.attributes.BANDWIDTH),i-(n=n||u.Number.MAX_VALUE)},Ai=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">0</span>,i={<span class="code-attr">payloadType</span>:<span class="code-number">-1</span>,<span class="code-attr">payloadSize</span>:<span class="code-number">0</span>},n=<span class="code-number">0</span>,r=<span class="code-number">0</span>;t&lt;e.byteLength&amp;&amp;<span class="code-number">128</span>!==e[t];){<span class="code-keyword">for</span>(;<span class="code-number">255</span>===e[t];)n+=<span class="code-number">255</span>,t++;<span class="code-keyword">for</span>(n+=e[t++];<span class="code-number">255</span>===e[t];)r+=<span class="code-number">255</span>,t++;<span class="code-keyword">if</span>(r+=e[t++],!i.payload&amp;&amp;<span class="code-number">4</span>===n){i.payloadType=n,i.payloadSize=r,i.payload=e.subarray(t,t+r);<span class="code-keyword">break</span>}t+=r,n=<span class="code-number">0</span>,r=<span class="code-number">0</span>}<span class="code-keyword">return</span> i},Oi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">181</span>!==e.payload[<span class="code-number">0</span>]?<span class="code-literal">null</span>:<span class="code-number">49</span>!=(e.payload[<span class="code-number">1</span>]&lt;&lt;<span class="code-number">8</span>|e.payload[<span class="code-number">2</span>])?<span class="code-literal">null</span>:<span class="code-string">"GA94"</span>!==<span class="code-built_in">String</span>.fromCharCode(e.payload[<span class="code-number">3</span>],e.payload[<span class="code-number">4</span>],e.payload[<span class="code-number">5</span>],e.payload[<span class="code-number">6</span>])?<span class="code-literal">null</span>:<span class="code-number">3</span>!==e.payload[<span class="code-number">7</span>]?<span class="code-literal">null</span>:e.payload.subarray(<span class="code-number">8</span>,e.payload.length<span class="code-number">-1</span>)},Ci=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n,r,a,s=[];<span class="code-keyword">if</span>(!(<span class="code-number">64</span>&amp;t[<span class="code-number">0</span>]))<span class="code-keyword">return</span> s;<span class="code-keyword">for</span>(n=<span class="code-number">31</span>&amp;t[<span class="code-number">0</span>],i=<span class="code-number">0</span>;i&lt;n;i++)a={<span class="code-attr">type</span>:<span class="code-number">3</span>&amp;t[<span class="code-number">2</span>+(r=<span class="code-number">3</span>*i)],<span class="code-attr">pts</span>:e},<span class="code-number">4</span>&amp;t[r+<span class="code-number">2</span>]&amp;&amp;(a.ccData=t[r+<span class="code-number">3</span>]&lt;&lt;<span class="code-number">8</span>|t[r+<span class="code-number">4</span>],s.push(a));<span class="code-keyword">return</span> s},Pi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t,i,n=e.byteLength,r=[],a=<span class="code-number">1</span>;a&lt;n<span class="code-number">-2</span>;)<span class="code-number">0</span>===e[a]&amp;&amp;<span class="code-number">0</span>===e[a+<span class="code-number">1</span>]&amp;&amp;<span class="code-number">3</span>===e[a+<span class="code-number">2</span>]?(r.push(a+<span class="code-number">2</span>),a+=<span class="code-number">2</span>):a++;<span class="code-keyword">if</span>(<span class="code-number">0</span>===r.length)<span class="code-keyword">return</span> e;t=n-r.length,i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(t);<span class="code-keyword">var</span> s=<span class="code-number">0</span>;<span class="code-keyword">for</span>(a=<span class="code-number">0</span>;a&lt;t;s++,a++)s===r[<span class="code-number">0</span>]&amp;&amp;(s++,r.shift()),i[a]=e[s];<span class="code-keyword">return</span> i},Di=<span class="code-number">4</span>,Ri=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.init=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e={};<span class="code-keyword">this</span>.on=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{e[t]||(e[t]=[]),e[t]=e[t].concat(i)},<span class="code-keyword">this</span>.off=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n;<span class="code-keyword">return</span>!!e[t]&amp;&amp;(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,<span class="code-number">1</span>),n&gt;<span class="code-number">-1</span>)},<span class="code-keyword">this</span>.trigger=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i,n,r,a;<span class="code-keyword">if</span>(i=e[t])<span class="code-keyword">if</span>(<span class="code-number">2</span>===<span class="code-built_in">arguments</span>.length)<span class="code-keyword">for</span>(r=i.length,n=<span class="code-number">0</span>;n&lt;r;++n)i[n].call(<span class="code-keyword">this</span>,<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]);<span class="code-keyword">else</span>{<span class="code-keyword">for</span>(a=[],n=<span class="code-built_in">arguments</span>.length,n=<span class="code-number">1</span>;n&lt;<span class="code-built_in">arguments</span>.length;++n)a.push(<span class="code-built_in">arguments</span>[n]);<span class="code-keyword">for</span>(r=i.length,n=<span class="code-number">0</span>;n&lt;r;++n)i[n].apply(<span class="code-keyword">this</span>,a)}},<span class="code-keyword">this</span>.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e={}}}};Ri.prototype.pipe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.on(<span class="code-string">"data"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.push(t)}),<span class="code-keyword">this</span>.on(<span class="code-string">"done"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.flush(t)}),<span class="code-keyword">this</span>.on(<span class="code-string">"partialdone"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.partialFlush(t)}),<span class="code-keyword">this</span>.on(<span class="code-string">"endedtimeline"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.endTimeline(t)}),<span class="code-keyword">this</span>.on(<span class="code-string">"reset"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.reset(t)}),e},Ri.prototype.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,e)},Ri.prototype.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>,e)},Ri.prototype.partialFlush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"partialdone"</span>,e)},Ri.prototype.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>,e)},Ri.prototype.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>,e)};<span class="code-keyword">var</span> xi=Ri,Mi=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params"></span>)</span>{e.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.captionPackets_=[],<span class="code-keyword">this</span>.ccStreams_=[<span class="code-keyword">new</span> Hi(<span class="code-number">0</span>,<span class="code-number">0</span>),<span class="code-keyword">new</span> Hi(<span class="code-number">0</span>,<span class="code-number">1</span>),<span class="code-keyword">new</span> Hi(<span class="code-number">1</span>,<span class="code-number">0</span>),<span class="code-keyword">new</span> Hi(<span class="code-number">1</span>,<span class="code-number">1</span>)],<span class="code-keyword">this</span>.reset(),<span class="code-keyword">this</span>.ccStreams_.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.on(<span class="code-string">"data"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"data"</span>)),e.on(<span class="code-string">"partialdone"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"partialdone"</span>)),e.on(<span class="code-string">"done"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"done"</span>))},<span class="code-keyword">this</span>)};(Mi.prototype=<span class="code-keyword">new</span> xi).push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n;<span class="code-keyword">if</span>(<span class="code-string">"sei_rbsp"</span>===e.nalUnitType&amp;&amp;(t=Ai(e.escapedRBSP)).payloadType===Di&amp;&amp;(i=Oi(t)))<span class="code-keyword">if</span>(e.dts&lt;<span class="code-keyword">this</span>.latestDts_)<span class="code-keyword">this</span>.ignoreNextEqualDts_=!<span class="code-number">0</span>;<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(e.dts===<span class="code-keyword">this</span>.latestDts_&amp;&amp;<span class="code-keyword">this</span>.ignoreNextEqualDts_)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.numSameDts_--,<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.numSameDts_||(<span class="code-keyword">this</span>.ignoreNextEqualDts_=!<span class="code-number">1</span>));n=Ci(e.pts,i),<span class="code-keyword">this</span>.captionPackets_=<span class="code-keyword">this</span>.captionPackets_.concat(n),<span class="code-keyword">this</span>.latestDts_!==e.dts&amp;&amp;(<span class="code-keyword">this</span>.numSameDts_=<span class="code-number">0</span>),<span class="code-keyword">this</span>.numSameDts_++,<span class="code-keyword">this</span>.latestDts_=e.dts}},Mi.prototype.flushCCStreams=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.ccStreams_.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"flush"</span>===e?t.flush():t.partialFlush()},<span class="code-keyword">this</span>)},Mi.prototype.flushStream=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.captionPackets_.length?(<span class="code-keyword">this</span>.captionPackets_.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{e.presortIndex=t}),<span class="code-keyword">this</span>.captionPackets_.sort(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),<span class="code-keyword">this</span>.captionPackets_.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.type&lt;<span class="code-number">2</span>&amp;&amp;<span class="code-keyword">this</span>.dispatchCea608Packet(e)},<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.captionPackets_.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.flushCCStreams(e)):<span class="code-keyword">this</span>.flushCCStreams(e)},Mi.prototype.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.flushStream(<span class="code-string">"flush"</span>)},Mi.prototype.partialFlush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.flushStream(<span class="code-string">"partialFlush"</span>)},Mi.prototype.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.latestDts_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.ignoreNextEqualDts_=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.numSameDts_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.activeCea608Channel_=[<span class="code-literal">null</span>,<span class="code-literal">null</span>],<span class="code-keyword">this</span>.ccStreams_.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.reset()})},Mi.prototype.dispatchCea608Packet=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.setsTextOrXDSActive(e)?<span class="code-keyword">this</span>.activeCea608Channel_[e.type]=<span class="code-literal">null</span>:<span class="code-keyword">this</span>.setsChannel1Active(e)?<span class="code-keyword">this</span>.activeCea608Channel_[e.type]=<span class="code-number">0</span>:<span class="code-keyword">this</span>.setsChannel2Active(e)&amp;&amp;(<span class="code-keyword">this</span>.activeCea608Channel_[e.type]=<span class="code-number">1</span>),<span class="code-literal">null</span>!==<span class="code-keyword">this</span>.activeCea608Channel_[e.type]&amp;&amp;<span class="code-keyword">this</span>.ccStreams_[(e.type&lt;&lt;<span class="code-number">1</span>)+<span class="code-keyword">this</span>.activeCea608Channel_[e.type]].push(e)},Mi.prototype.setsChannel1Active=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">4096</span>==(<span class="code-number">30720</span>&amp;e.ccData)},Mi.prototype.setsChannel2Active=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">6144</span>==(<span class="code-number">30720</span>&amp;e.ccData)},Mi.prototype.setsTextOrXDSActive=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">256</span>==(<span class="code-number">28928</span>&amp;e.ccData)||<span class="code-number">4138</span>==(<span class="code-number">30974</span>&amp;e.ccData)||<span class="code-number">6186</span>==(<span class="code-number">30974</span>&amp;e.ccData)};<span class="code-keyword">var</span> Bi={<span class="code-number">42</span>:<span class="code-number">225</span>,<span class="code-number">92</span>:<span class="code-number">233</span>,<span class="code-number">94</span>:<span class="code-number">237</span>,<span class="code-number">95</span>:<span class="code-number">243</span>,<span class="code-number">96</span>:<span class="code-number">250</span>,<span class="code-number">123</span>:<span class="code-number">231</span>,<span class="code-number">124</span>:<span class="code-number">247</span>,<span class="code-number">125</span>:<span class="code-number">209</span>,<span class="code-number">126</span>:<span class="code-number">241</span>,<span class="code-number">127</span>:<span class="code-number">9608</span>,<span class="code-number">304</span>:<span class="code-number">174</span>,<span class="code-number">305</span>:<span class="code-number">176</span>,<span class="code-number">306</span>:<span class="code-number">189</span>,<span class="code-number">307</span>:<span class="code-number">191</span>,<span class="code-number">308</span>:<span class="code-number">8482</span>,<span class="code-number">309</span>:<span class="code-number">162</span>,<span class="code-number">310</span>:<span class="code-number">163</span>,<span class="code-number">311</span>:<span class="code-number">9834</span>,<span class="code-number">312</span>:<span class="code-number">224</span>,<span class="code-number">313</span>:<span class="code-number">160</span>,<span class="code-number">314</span>:<span class="code-number">232</span>,<span class="code-number">315</span>:<span class="code-number">226</span>,<span class="code-number">316</span>:<span class="code-number">234</span>,<span class="code-number">317</span>:<span class="code-number">238</span>,<span class="code-number">318</span>:<span class="code-number">244</span>,<span class="code-number">319</span>:<span class="code-number">251</span>,<span class="code-number">544</span>:<span class="code-number">193</span>,<span class="code-number">545</span>:<span class="code-number">201</span>,<span class="code-number">546</span>:<span class="code-number">211</span>,<span class="code-number">547</span>:<span class="code-number">218</span>,<span class="code-number">548</span>:<span class="code-number">220</span>,<span class="code-number">549</span>:<span class="code-number">252</span>,<span class="code-number">550</span>:<span class="code-number">8216</span>,<span class="code-number">551</span>:<span class="code-number">161</span>,<span class="code-number">552</span>:<span class="code-number">42</span>,<span class="code-number">553</span>:<span class="code-number">39</span>,<span class="code-number">554</span>:<span class="code-number">8212</span>,<span class="code-number">555</span>:<span class="code-number">169</span>,<span class="code-number">556</span>:<span class="code-number">8480</span>,<span class="code-number">557</span>:<span class="code-number">8226</span>,<span class="code-number">558</span>:<span class="code-number">8220</span>,<span class="code-number">559</span>:<span class="code-number">8221</span>,<span class="code-number">560</span>:<span class="code-number">192</span>,<span class="code-number">561</span>:<span class="code-number">194</span>,<span class="code-number">562</span>:<span class="code-number">199</span>,<span class="code-number">563</span>:<span class="code-number">200</span>,<span class="code-number">564</span>:<span class="code-number">202</span>,<span class="code-number">565</span>:<span class="code-number">203</span>,<span class="code-number">566</span>:<span class="code-number">235</span>,<span class="code-number">567</span>:<span class="code-number">206</span>,<span class="code-number">568</span>:<span class="code-number">207</span>,<span class="code-number">569</span>:<span class="code-number">239</span>,<span class="code-number">570</span>:<span class="code-number">212</span>,<span class="code-number">571</span>:<span class="code-number">217</span>,<span class="code-number">572</span>:<span class="code-number">249</span>,<span class="code-number">573</span>:<span class="code-number">219</span>,<span class="code-number">574</span>:<span class="code-number">171</span>,<span class="code-number">575</span>:<span class="code-number">187</span>,<span class="code-number">800</span>:<span class="code-number">195</span>,<span class="code-number">801</span>:<span class="code-number">227</span>,<span class="code-number">802</span>:<span class="code-number">205</span>,<span class="code-number">803</span>:<span class="code-number">204</span>,<span class="code-number">804</span>:<span class="code-number">236</span>,<span class="code-number">805</span>:<span class="code-number">210</span>,<span class="code-number">806</span>:<span class="code-number">242</span>,<span class="code-number">807</span>:<span class="code-number">213</span>,<span class="code-number">808</span>:<span class="code-number">245</span>,<span class="code-number">809</span>:<span class="code-number">123</span>,<span class="code-number">810</span>:<span class="code-number">125</span>,<span class="code-number">811</span>:<span class="code-number">92</span>,<span class="code-number">812</span>:<span class="code-number">94</span>,<span class="code-number">813</span>:<span class="code-number">95</span>,<span class="code-number">814</span>:<span class="code-number">124</span>,<span class="code-number">815</span>:<span class="code-number">126</span>,<span class="code-number">816</span>:<span class="code-number">196</span>,<span class="code-number">817</span>:<span class="code-number">228</span>,<span class="code-number">818</span>:<span class="code-number">214</span>,<span class="code-number">819</span>:<span class="code-number">246</span>,<span class="code-number">820</span>:<span class="code-number">223</span>,<span class="code-number">821</span>:<span class="code-number">165</span>,<span class="code-number">822</span>:<span class="code-number">164</span>,<span class="code-number">823</span>:<span class="code-number">9474</span>,<span class="code-number">824</span>:<span class="code-number">197</span>,<span class="code-number">825</span>:<span class="code-number">229</span>,<span class="code-number">826</span>:<span class="code-number">216</span>,<span class="code-number">827</span>:<span class="code-number">248</span>,<span class="code-number">828</span>:<span class="code-number">9484</span>,<span class="code-number">829</span>:<span class="code-number">9488</span>,<span class="code-number">830</span>:<span class="code-number">9492</span>,<span class="code-number">831</span>:<span class="code-number">9496</span>},Ni=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-literal">null</span>===e?<span class="code-string">""</span>:(e=Bi[e]||e,<span class="code-built_in">String</span>.fromCharCode(e))},qi=[<span class="code-number">4352</span>,<span class="code-number">4384</span>,<span class="code-number">4608</span>,<span class="code-number">4640</span>,<span class="code-number">5376</span>,<span class="code-number">5408</span>,<span class="code-number">5632</span>,<span class="code-number">5664</span>,<span class="code-number">5888</span>,<span class="code-number">5920</span>,<span class="code-number">4096</span>,<span class="code-number">4864</span>,<span class="code-number">4896</span>,<span class="code-number">5120</span>,<span class="code-number">5152</span>],Fi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> e=[],t=<span class="code-number">15</span>;t--;)e.push(<span class="code-string">""</span>);<span class="code-keyword">return</span> e},Hi=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{e.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.field_=t||<span class="code-number">0</span>,<span class="code-keyword">this</span>.dataChannel_=i||<span class="code-number">0</span>,<span class="code-keyword">this</span>.name_=<span class="code-string">"CC"</span>+(<span class="code-number">1</span>+(<span class="code-keyword">this</span>.field_&lt;&lt;<span class="code-number">1</span>|<span class="code-keyword">this</span>.dataChannel_)),<span class="code-keyword">this</span>.setConstants(),<span class="code-keyword">this</span>.reset(),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n,r,a;<span class="code-keyword">if</span>((t=<span class="code-number">32639</span>&amp;e.ccData)!==<span class="code-keyword">this</span>.lastControlCode_){<span class="code-keyword">if</span>(<span class="code-number">4096</span>==(<span class="code-number">61440</span>&amp;t)?<span class="code-keyword">this</span>.lastControlCode_=t:t!==<span class="code-keyword">this</span>.PADDING_&amp;&amp;(<span class="code-keyword">this</span>.lastControlCode_=<span class="code-literal">null</span>),n=t&gt;&gt;&gt;<span class="code-number">8</span>,r=<span class="code-number">255</span>&amp;t,t!==<span class="code-keyword">this</span>.PADDING_)<span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.RESUME_CAPTION_LOADING_)<span class="code-keyword">this</span>.mode_=<span class="code-string">"popOn"</span>;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.END_OF_CAPTION_)<span class="code-keyword">this</span>.mode_=<span class="code-string">"popOn"</span>,<span class="code-keyword">this</span>.clearFormatting(e.pts),<span class="code-keyword">this</span>.flushDisplayed(e.pts),i=<span class="code-keyword">this</span>.displayed_,<span class="code-keyword">this</span>.displayed_=<span class="code-keyword">this</span>.nonDisplayed_,<span class="code-keyword">this</span>.nonDisplayed_=i,<span class="code-keyword">this</span>.startPts_=e.pts;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.ROLL_UP_2_ROWS_)<span class="code-keyword">this</span>.rollUpRows_=<span class="code-number">2</span>,<span class="code-keyword">this</span>.setRollUp(e.pts);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.ROLL_UP_3_ROWS_)<span class="code-keyword">this</span>.rollUpRows_=<span class="code-number">3</span>,<span class="code-keyword">this</span>.setRollUp(e.pts);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.ROLL_UP_4_ROWS_)<span class="code-keyword">this</span>.rollUpRows_=<span class="code-number">4</span>,<span class="code-keyword">this</span>.setRollUp(e.pts);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.CARRIAGE_RETURN_)<span class="code-keyword">this</span>.clearFormatting(e.pts),<span class="code-keyword">this</span>.flushDisplayed(e.pts),<span class="code-keyword">this</span>.shiftRowsUp_(),<span class="code-keyword">this</span>.startPts_=e.pts;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.BACKSPACE_)<span class="code-string">"popOn"</span>===<span class="code-keyword">this</span>.mode_?<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_]=<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_].slice(<span class="code-number">0</span>,<span class="code-number">-1</span>):<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_]=<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_].slice(<span class="code-number">0</span>,<span class="code-number">-1</span>);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.ERASE_DISPLAYED_MEMORY_)<span class="code-keyword">this</span>.flushDisplayed(e.pts),<span class="code-keyword">this</span>.displayed_=Fi();<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.ERASE_NON_DISPLAYED_MEMORY_)<span class="code-keyword">this</span>.nonDisplayed_=Fi();<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.RESUME_DIRECT_CAPTIONING_)<span class="code-string">"paintOn"</span>!==<span class="code-keyword">this</span>.mode_&amp;&amp;(<span class="code-keyword">this</span>.flushDisplayed(e.pts),<span class="code-keyword">this</span>.displayed_=Fi()),<span class="code-keyword">this</span>.mode_=<span class="code-string">"paintOn"</span>,<span class="code-keyword">this</span>.startPts_=e.pts;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isSpecialCharacter(n,r))a=Ni((n=(<span class="code-number">3</span>&amp;n)&lt;&lt;<span class="code-number">8</span>)|r),<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e.pts,a),<span class="code-keyword">this</span>.column_++;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isExtCharacter(n,r))<span class="code-string">"popOn"</span>===<span class="code-keyword">this</span>.mode_?<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_]=<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_].slice(<span class="code-number">0</span>,<span class="code-number">-1</span>):<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_]=<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_].slice(<span class="code-number">0</span>,<span class="code-number">-1</span>),a=Ni((n=(<span class="code-number">3</span>&amp;n)&lt;&lt;<span class="code-number">8</span>)|r),<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e.pts,a),<span class="code-keyword">this</span>.column_++;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isMidRowCode(n,r))<span class="code-keyword">this</span>.clearFormatting(e.pts),<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e.pts,<span class="code-string">" "</span>),<span class="code-keyword">this</span>.column_++,<span class="code-number">14</span>==(<span class="code-number">14</span>&amp;r)&amp;&amp;<span class="code-keyword">this</span>.addFormatting(e.pts,[<span class="code-string">"i"</span>]),<span class="code-number">1</span>==(<span class="code-number">1</span>&amp;r)&amp;&amp;<span class="code-keyword">this</span>.addFormatting(e.pts,[<span class="code-string">"u"</span>]);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isOffsetControlCode(n,r))<span class="code-keyword">this</span>.column_+=<span class="code-number">3</span>&amp;r;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isPAC(n,r)){<span class="code-keyword">var</span> s=qi.indexOf(<span class="code-number">7968</span>&amp;t);<span class="code-string">"rollUp"</span>===<span class="code-keyword">this</span>.mode_&amp;&amp;(s-<span class="code-keyword">this</span>.rollUpRows_+<span class="code-number">1</span>&lt;<span class="code-number">0</span>&amp;&amp;(s=<span class="code-keyword">this</span>.rollUpRows_<span class="code-number">-1</span>),<span class="code-keyword">this</span>.setRollUp(e.pts,s)),s!==<span class="code-keyword">this</span>.row_&amp;&amp;(<span class="code-keyword">this</span>.clearFormatting(e.pts),<span class="code-keyword">this</span>.row_=s),<span class="code-number">1</span>&amp;r&amp;&amp;<span class="code-number">-1</span>===<span class="code-keyword">this</span>.formatting_.indexOf(<span class="code-string">"u"</span>)&amp;&amp;<span class="code-keyword">this</span>.addFormatting(e.pts,[<span class="code-string">"u"</span>]),<span class="code-number">16</span>==(<span class="code-number">16</span>&amp;t)&amp;&amp;(<span class="code-keyword">this</span>.column_=<span class="code-number">4</span>*((<span class="code-number">14</span>&amp;t)&gt;&gt;<span class="code-number">1</span>)),<span class="code-keyword">this</span>.isColorPAC(r)&amp;&amp;<span class="code-number">14</span>==(<span class="code-number">14</span>&amp;r)&amp;&amp;<span class="code-keyword">this</span>.addFormatting(e.pts,[<span class="code-string">"i"</span>])}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.isNormalChar(n)&amp;&amp;(<span class="code-number">0</span>===r&amp;&amp;(r=<span class="code-literal">null</span>),a=Ni(n),a+=Ni(r),<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e.pts,a),<span class="code-keyword">this</span>.column_+=a.length)}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.lastControlCode_=<span class="code-literal">null</span>}};Hi.prototype=<span class="code-keyword">new</span> xi,Hi.prototype.flushDisplayed=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.displayed_.map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">try</span>{<span class="code-keyword">return</span> e.trim()}<span class="code-keyword">catch</span>(e){<span class="code-keyword">return</span> <span class="code-built_in">console</span>.error(<span class="code-string">"Skipping malformed caption."</span>),<span class="code-string">""</span>}}).join(<span class="code-string">"\n"</span>).replace(<span class="code-regexp">/^\n+|\n+$/g</span>,<span class="code-string">""</span>);t.length&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">startPts</span>:<span class="code-keyword">this</span>.startPts_,<span class="code-attr">endPts</span>:e,<span class="code-attr">text</span>:t,<span class="code-attr">stream</span>:<span class="code-keyword">this</span>.name_})},Hi.prototype.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.mode_=<span class="code-string">"popOn"</span>,<span class="code-keyword">this</span>.topRow_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.startPts_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.displayed_=Fi(),<span class="code-keyword">this</span>.nonDisplayed_=Fi(),<span class="code-keyword">this</span>.lastControlCode_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.column_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.row_=<span class="code-number">14</span>,<span class="code-keyword">this</span>.rollUpRows_=<span class="code-number">2</span>,<span class="code-keyword">this</span>.formatting_=[]},Hi.prototype.setConstants=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-number">0</span>===<span class="code-keyword">this</span>.dataChannel_?(<span class="code-keyword">this</span>.BASE_=<span class="code-number">16</span>,<span class="code-keyword">this</span>.EXT_=<span class="code-number">17</span>,<span class="code-keyword">this</span>.CONTROL_=(<span class="code-number">20</span>|<span class="code-keyword">this</span>.field_)&lt;&lt;<span class="code-number">8</span>,<span class="code-keyword">this</span>.OFFSET_=<span class="code-number">23</span>):<span class="code-number">1</span>===<span class="code-keyword">this</span>.dataChannel_&amp;&amp;(<span class="code-keyword">this</span>.BASE_=<span class="code-number">24</span>,<span class="code-keyword">this</span>.EXT_=<span class="code-number">25</span>,<span class="code-keyword">this</span>.CONTROL_=(<span class="code-number">28</span>|<span class="code-keyword">this</span>.field_)&lt;&lt;<span class="code-number">8</span>,<span class="code-keyword">this</span>.OFFSET_=<span class="code-number">31</span>),<span class="code-keyword">this</span>.PADDING_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.RESUME_CAPTION_LOADING_=<span class="code-number">32</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.END_OF_CAPTION_=<span class="code-number">47</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.ROLL_UP_2_ROWS_=<span class="code-number">37</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.ROLL_UP_3_ROWS_=<span class="code-number">38</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.ROLL_UP_4_ROWS_=<span class="code-number">39</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.CARRIAGE_RETURN_=<span class="code-number">45</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.RESUME_DIRECT_CAPTIONING_=<span class="code-number">41</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.BACKSPACE_=<span class="code-number">33</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.ERASE_DISPLAYED_MEMORY_=<span class="code-number">44</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.ERASE_NON_DISPLAYED_MEMORY_=<span class="code-number">46</span>|<span class="code-keyword">this</span>.CONTROL_},Hi.prototype.isSpecialCharacter=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e===<span class="code-keyword">this</span>.EXT_&amp;&amp;t&gt;=<span class="code-number">48</span>&amp;&amp;t&lt;=<span class="code-number">63</span>},Hi.prototype.isExtCharacter=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span>(e===<span class="code-keyword">this</span>.EXT_+<span class="code-number">1</span>||e===<span class="code-keyword">this</span>.EXT_+<span class="code-number">2</span>)&amp;&amp;t&gt;=<span class="code-number">32</span>&amp;&amp;t&lt;=<span class="code-number">63</span>},Hi.prototype.isMidRowCode=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e===<span class="code-keyword">this</span>.EXT_&amp;&amp;t&gt;=<span class="code-number">32</span>&amp;&amp;t&lt;=<span class="code-number">47</span>},Hi.prototype.isOffsetControlCode=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e===<span class="code-keyword">this</span>.OFFSET_&amp;&amp;t&gt;=<span class="code-number">33</span>&amp;&amp;t&lt;=<span class="code-number">35</span>},Hi.prototype.isPAC=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e&gt;=<span class="code-keyword">this</span>.BASE_&amp;&amp;e&lt;<span class="code-keyword">this</span>.BASE_+<span class="code-number">8</span>&amp;&amp;t&gt;=<span class="code-number">64</span>&amp;&amp;t&lt;=<span class="code-number">127</span>},Hi.prototype.isColorPAC=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&gt;=<span class="code-number">64</span>&amp;&amp;e&lt;=<span class="code-number">79</span>||e&gt;=<span class="code-number">96</span>&amp;&amp;e&lt;=<span class="code-number">127</span>},Hi.prototype.isNormalChar=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&gt;=<span class="code-number">32</span>&amp;&amp;e&lt;=<span class="code-number">127</span>},Hi.prototype.setRollUp=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"rollUp"</span>!==<span class="code-keyword">this</span>.mode_&amp;&amp;(<span class="code-keyword">this</span>.row_=<span class="code-number">14</span>,<span class="code-keyword">this</span>.mode_=<span class="code-string">"rollUp"</span>,<span class="code-keyword">this</span>.flushDisplayed(e),<span class="code-keyword">this</span>.nonDisplayed_=Fi(),<span class="code-keyword">this</span>.displayed_=Fi()),<span class="code-keyword">void</span> <span class="code-number">0</span>!==t&amp;&amp;t!==<span class="code-keyword">this</span>.row_)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;<span class="code-keyword">this</span>.rollUpRows_;i++)<span class="code-keyword">this</span>.displayed_[t-i]=<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_-i],<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_-i]=<span class="code-string">""</span>;<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t=<span class="code-keyword">this</span>.row_),<span class="code-keyword">this</span>.topRow_=t-<span class="code-keyword">this</span>.rollUpRows_+<span class="code-number">1</span>},Hi.prototype.addFormatting=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.formatting_=<span class="code-keyword">this</span>.formatting_.concat(t);<span class="code-keyword">var</span> i=t.reduce(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e+<span class="code-string">"&lt;"</span>+t+<span class="code-string">"&gt;"</span>},<span class="code-string">""</span>);<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e,i)},Hi.prototype.clearFormatting=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.formatting_.length){<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.formatting_.reverse().reduce(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e+<span class="code-string">"&lt;/"</span>+t+<span class="code-string">"&gt;"</span>},<span class="code-string">""</span>);<span class="code-keyword">this</span>.formatting_=[],<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e,t)}},Hi.prototype.popOn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_];i+=t,<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_]=i},Hi.prototype.rollUp=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_];i+=t,<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_]=i},Hi.prototype.shiftRowsUp_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e;<span class="code-keyword">for</span>(e=<span class="code-number">0</span>;e&lt;<span class="code-keyword">this</span>.topRow_;e++)<span class="code-keyword">this</span>.displayed_[e]=<span class="code-string">""</span>;<span class="code-keyword">for</span>(e=<span class="code-keyword">this</span>.row_+<span class="code-number">1</span>;e&lt;<span class="code-number">15</span>;e++)<span class="code-keyword">this</span>.displayed_[e]=<span class="code-string">""</span>;<span class="code-keyword">for</span>(e=<span class="code-keyword">this</span>.topRow_;e&lt;<span class="code-keyword">this</span>.row_;e++)<span class="code-keyword">this</span>.displayed_[e]=<span class="code-keyword">this</span>.displayed_[e+<span class="code-number">1</span>];<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_]=<span class="code-string">""</span>},Hi.prototype.paintOn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_];i+=t,<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_]=i};<span class="code-keyword">var</span> Gi=Pi,ji=Mi,Vi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=e,n=<span class="code-number">0</span>;n&lt;t.length;n++){<span class="code-keyword">var</span> r=t[n];<span class="code-keyword">if</span>(i&lt;r.size)<span class="code-keyword">return</span> r;i-=r.size}<span class="code-keyword">return</span> <span class="code-literal">null</span>},Wi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=yi.findBox(e,[<span class="code-string">"moof"</span>,<span class="code-string">"traf"</span>]),n={},r=[];<span class="code-keyword">return</span> yi.findBox(e,[<span class="code-string">"mdat"</span>]).forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> n=i[t];r.push({<span class="code-attr">mdat</span>:e,<span class="code-attr">traf</span>:n})}),r.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i,r=e.mdat,a=e.traf,s=yi.findBox(a,[<span class="code-string">"tfhd"</span>]),o=Jt.parseTfhd(s[<span class="code-number">0</span>]),u=o.trackId,d=yi.findBox(a,[<span class="code-string">"tfdt"</span>]),l=d.length&gt;<span class="code-number">0</span>?Jt.parseTfdt(d[<span class="code-number">0</span>]).baseMediaDecodeTime:<span class="code-number">0</span>,h=yi.findBox(a,[<span class="code-string">"trun"</span>]);t===u&amp;&amp;h.length&gt;<span class="code-number">0</span>&amp;&amp;(i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r,a,s,o=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength),u=[];<span class="code-keyword">for</span>(r=<span class="code-number">0</span>;r+<span class="code-number">4</span>&lt;e.length;r+=a)<span class="code-keyword">if</span>(a=o.getUint32(r),r+=<span class="code-number">4</span>,!(a&lt;=<span class="code-number">0</span>))<span class="code-keyword">switch</span>(<span class="code-number">31</span>&amp;e[r]){<span class="code-keyword">case</span> <span class="code-number">6</span>:<span class="code-keyword">var</span> d=e.subarray(r+<span class="code-number">1</span>,r+<span class="code-number">1</span>+a),l=Vi(r,t);n={<span class="code-attr">nalUnitType</span>:<span class="code-string">"sei_rbsp"</span>,<span class="code-attr">size</span>:a,<span class="code-attr">data</span>:d,<span class="code-attr">escapedRBSP</span>:Gi(d),<span class="code-attr">trackId</span>:i},l?(n.pts=l.pts,n.dts=l.dts,s=l):(n.pts=s.pts,n.dts=s.dts),u.push(n)}<span class="code-keyword">return</span> u}(r,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=t,r=i.defaultSampleDuration||<span class="code-number">0</span>,a=i.defaultSampleSize||<span class="code-number">0</span>,s=i.trackId,o=[];<span class="code-keyword">return</span> e.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=Jt.parseTrun(e).samples;t.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===e.duration&amp;&amp;(e.duration=r),<span class="code-keyword">void</span> <span class="code-number">0</span>===e.size&amp;&amp;(e.size=a),e.trackId=s,e.dts=n,<span class="code-keyword">void</span> <span class="code-number">0</span>===e.compositionTimeOffset&amp;&amp;(e.compositionTimeOffset=<span class="code-number">0</span>),e.pts=n+e.compositionTimeOffset,n+=e.duration}),o=o.concat(t)}),o}(h,l,o),u),n[u]||(n[u]=[]),n[u]=n[u].concat(i))}),n},zi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t,i,n,r,a,s=!<span class="code-number">1</span>;<span class="code-keyword">this</span>.isInitialized=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> s},<span class="code-keyword">this</span>.init=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e=<span class="code-keyword">new</span> ji,s=!<span class="code-number">0</span>,a=!!t&amp;&amp;t.isPartial,e.on(<span class="code-string">"data"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.startTime=e.startPts/n,e.endTime=e.endPts/n,r.captions.push(e),r.captionStreams[e.stream]=!<span class="code-number">0</span>})},<span class="code-keyword">this</span>.isNewInit=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span>!(e&amp;&amp;<span class="code-number">0</span>===e.length||t&amp;&amp;<span class="code-string">"object"</span>==<span class="code-keyword">typeof</span> t&amp;&amp;<span class="code-number">0</span>===<span class="code-built_in">Object</span>.keys(t).length||i===e[<span class="code-number">0</span>]&amp;&amp;n===t[i])},<span class="code-keyword">this</span>.parse=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,a,s</span>)</span>{<span class="code-keyword">var</span> o;<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.isInitialized())<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(!a||!s)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isNewInit(a,s))i=a[<span class="code-number">0</span>],n=s[i];<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-literal">null</span>===i||!n)<span class="code-keyword">return</span> t.push(e),<span class="code-literal">null</span>;<span class="code-keyword">for</span>(;t.length&gt;<span class="code-number">0</span>;){<span class="code-keyword">var</span> u=t.shift();<span class="code-keyword">this</span>.parse(u,a,s)}<span class="code-keyword">return</span> <span class="code-literal">null</span>!==(o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-literal">null</span>===t?<span class="code-literal">null</span>:{<span class="code-attr">seiNals</span>:Wi(e,t)[t],<span class="code-attr">timescale</span>:i}}(e,i,n))&amp;&amp;o.seiNals?(<span class="code-keyword">this</span>.pushNals(o.seiNals),<span class="code-keyword">this</span>.flushStream(),r):<span class="code-literal">null</span>},<span class="code-keyword">this</span>.pushNals=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.isInitialized()||!t||<span class="code-number">0</span>===t.length)<span class="code-keyword">return</span> <span class="code-literal">null</span>;t.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.push(t)})},<span class="code-keyword">this</span>.flushStream=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.isInitialized())<span class="code-keyword">return</span> <span class="code-literal">null</span>;a?e.partialFlush():e.flush()},<span class="code-keyword">this</span>.clearParsedCaptions=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{r.captions=[],r.captionStreams={}},<span class="code-keyword">this</span>.resetCaptionStream=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.isInitialized())<span class="code-keyword">return</span> <span class="code-literal">null</span>;e.reset()},<span class="code-keyword">this</span>.clearAllCaptions=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.clearParsedCaptions(),<span class="code-keyword">this</span>.resetCaptionStream()},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t=[],i=<span class="code-literal">null</span>,n=<span class="code-literal">null</span>,r?<span class="code-keyword">this</span>.clearParsedCaptions():r={<span class="code-attr">captions</span>:[],<span class="code-attr">captionStreams</span>:{}},<span class="code-keyword">this</span>.resetCaptionStream()},<span class="code-keyword">this</span>.reset()},Xi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> e&amp;&amp;<span class="code-built_in">isFinite</span>(e)},Yi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">i</span>(<span class="code-params">e</span>)</span>{_(<span class="code-keyword">this</span>,i);<span class="code-keyword">var</span> t=T(<span class="code-keyword">this</span>,(i.__proto__||<span class="code-built_in">Object</span>.getPrototypeOf(i)).call(<span class="code-keyword">this</span>));<span class="code-keyword">if</span>(!e)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">TypeError</span>(<span class="code-string">"Initialization settings are required"</span>);<span class="code-keyword">if</span>(<span class="code-string">"function"</span>!=<span class="code-keyword">typeof</span> e.currentTime)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">TypeError</span>(<span class="code-string">"No currentTime getter specified"</span>);<span class="code-keyword">if</span>(!e.mediaSource)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">TypeError</span>(<span class="code-string">"No MediaSource specified"</span>);<span class="code-keyword">return</span> t.bandwidth=e.bandwidth,t.throughput={<span class="code-attr">rate</span>:<span class="code-number">0</span>,<span class="code-attr">count</span>:<span class="code-number">0</span>},t.roundTrip=<span class="code-literal">NaN</span>,t.resetStats_(),t.mediaIndex=<span class="code-literal">null</span>,t.hasPlayed_=e.hasPlayed,t.currentTime_=e.currentTime,t.seekable_=e.seekable,t.seeking_=e.seeking,t.duration_=e.duration,t.mediaSource_=e.mediaSource,t.hls_=e.hls,t.loaderType_=e.loaderType,t.startingMedia_=<span class="code-keyword">void</span> <span class="code-number">0</span>,t.segmentMetadataTrack_=e.segmentMetadataTrack,t.goalBufferLength_=e.goalBufferLength,t.sourceType_=e.sourceType,t.inbandTextTracks_=e.inbandTextTracks,t.state_=<span class="code-string">"INIT"</span>,t.checkBufferTimeout_=<span class="code-literal">null</span>,t.error_=<span class="code-keyword">void</span> <span class="code-number">0</span>,t.currentTimeline_=<span class="code-number">-1</span>,t.pendingSegment_=<span class="code-literal">null</span>,t.mimeType_=<span class="code-literal">null</span>,t.sourceUpdater_=<span class="code-literal">null</span>,t.xhrOptions_=<span class="code-literal">null</span>,t.activeInitSegmentId_=<span class="code-literal">null</span>,t.initSegments_={},t.cacheEncryptionKeys_=e.cacheEncryptionKeys,t.keyCache_={},<span class="code-string">"main"</span>===t.loaderType_?t.captionParser_=<span class="code-keyword">new</span> zi:t.captionParser_=<span class="code-literal">null</span>,t.decrypter_=e.decrypter,t.syncController_=e.syncController,t.syncPoint_={<span class="code-attr">segmentIndex</span>:<span class="code-number">0</span>,<span class="code-attr">time</span>:<span class="code-number">0</span>},t.syncController_.on(<span class="code-string">"syncinfoupdate"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.trigger(<span class="code-string">"syncinfoupdate"</span>)}),t.mediaSource_.addEventListener(<span class="code-string">"sourceopen"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.ended_=!<span class="code-number">1</span>}),t.fetchAtBuffer_=!<span class="code-number">1</span>,t.logger_=si(<span class="code-string">"SegmentLoader["</span>+t.loaderType_+<span class="code-string">"]"</span>),<span class="code-built_in">Object</span>.defineProperty(t,<span class="code-string">"state"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.state_},<span class="code-attr">set</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e!==<span class="code-keyword">this</span>.state_&amp;&amp;(<span class="code-keyword">this</span>.logger_(<span class="code-keyword">this</span>.state_+<span class="code-string">" -&gt; "</span>+e),<span class="code-keyword">this</span>.state_=e)}}),t}<span class="code-keyword">return</span> b(i,e),v(i,[{<span class="code-attr">key</span>:<span class="code-string">"resetStats_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.mediaBytesTransferred=<span class="code-number">0</span>,<span class="code-keyword">this</span>.mediaRequests=<span class="code-number">0</span>,<span class="code-keyword">this</span>.mediaRequestsAborted=<span class="code-number">0</span>,<span class="code-keyword">this</span>.mediaRequestsTimedout=<span class="code-number">0</span>,<span class="code-keyword">this</span>.mediaRequestsErrored=<span class="code-number">0</span>,<span class="code-keyword">this</span>.mediaTransferDuration=<span class="code-number">0</span>,<span class="code-keyword">this</span>.mediaSecondsLoaded=<span class="code-number">0</span>}},{<span class="code-attr">key</span>:<span class="code-string">"dispose"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.state=<span class="code-string">"DISPOSED"</span>,<span class="code-keyword">this</span>.pause(),<span class="code-keyword">this</span>.abort_(),<span class="code-keyword">this</span>.sourceUpdater_&amp;&amp;<span class="code-keyword">this</span>.sourceUpdater_.dispose(),<span class="code-keyword">this</span>.resetStats_(),<span class="code-keyword">this</span>.captionParser_&amp;&amp;<span class="code-keyword">this</span>.captionParser_.reset()}},{<span class="code-attr">key</span>:<span class="code-string">"abort"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-string">"WAITING"</span>===<span class="code-keyword">this</span>.state?(<span class="code-keyword">this</span>.abort_(),<span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,<span class="code-keyword">this</span>.paused()||<span class="code-keyword">this</span>.monitorBuffer_()):<span class="code-keyword">this</span>.pendingSegment_&amp;&amp;(<span class="code-keyword">this</span>.pendingSegment_=<span class="code-literal">null</span>)}},{<span class="code-attr">key</span>:<span class="code-string">"abort_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.pendingSegment_&amp;&amp;<span class="code-keyword">this</span>.pendingSegment_.abortRequests(),<span class="code-keyword">this</span>.pendingSegment_=<span class="code-literal">null</span>}},{<span class="code-attr">key</span>:<span class="code-string">"error"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>!==e&amp;&amp;(<span class="code-keyword">this</span>.error_=e),<span class="code-keyword">this</span>.pendingSegment_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.error_}},{<span class="code-attr">key</span>:<span class="code-string">"endOfStream"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.ended_=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.pause(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"ended"</span>)}},{<span class="code-attr">key</span>:<span class="code-string">"buffered_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.sourceUpdater_?<span class="code-keyword">this</span>.sourceUpdater_.buffered():t.createTimeRanges()}},{<span class="code-attr">key</span>:<span class="code-string">"initSegment"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-built_in">arguments</span>.length&gt;<span class="code-number">1</span>&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]&amp;&amp;<span class="code-built_in">arguments</span>[<span class="code-number">1</span>];<span class="code-keyword">if</span>(!e)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i=fe(e),n=<span class="code-keyword">this</span>.initSegments_[i];<span class="code-keyword">return</span> t&amp;&amp;!n&amp;&amp;e.bytes&amp;&amp;(<span class="code-keyword">this</span>.initSegments_[i]=n={<span class="code-attr">resolvedUri</span>:e.resolvedUri,<span class="code-attr">byterange</span>:e.byterange,<span class="code-attr">bytes</span>:e.bytes,<span class="code-attr">timescales</span>:e.timescales,<span class="code-attr">videoTrackIds</span>:e.videoTrackIds}),n||e}},{<span class="code-attr">key</span>:<span class="code-string">"segmentKey"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-built_in">arguments</span>.length&gt;<span class="code-number">1</span>&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]&amp;&amp;<span class="code-built_in">arguments</span>[<span class="code-number">1</span>];<span class="code-keyword">if</span>(!e)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i=pe(e),n=<span class="code-keyword">this</span>.keyCache_[i];<span class="code-keyword">this</span>.cacheEncryptionKeys_&amp;&amp;t&amp;&amp;!n&amp;&amp;e.bytes&amp;&amp;(<span class="code-keyword">this</span>.keyCache_[i]=n={<span class="code-attr">resolvedUri</span>:e.resolvedUri,<span class="code-attr">bytes</span>:e.bytes});<span class="code-keyword">var</span> r={<span class="code-attr">resolvedUri</span>:(n||e).resolvedUri};<span class="code-keyword">return</span> n&amp;&amp;(r.bytes=n.bytes),r}},{<span class="code-attr">key</span>:<span class="code-string">"couldBeginLoading_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.playlist_&amp;&amp;(<span class="code-keyword">this</span>.sourceUpdater_||<span class="code-keyword">this</span>.mimeType_&amp;&amp;<span class="code-string">"INIT"</span>===<span class="code-keyword">this</span>.state)&amp;&amp;!<span class="code-keyword">this</span>.paused()}},{<span class="code-attr">key</span>:<span class="code-string">"load"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.monitorBuffer_(),<span class="code-keyword">this</span>.playlist_){<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.syncController_.setDateTimeMapping(<span class="code-keyword">this</span>.playlist_),<span class="code-string">"INIT"</span>===<span class="code-keyword">this</span>.state&amp;&amp;<span class="code-keyword">this</span>.couldBeginLoading_())<span class="code-keyword">return</span> <span class="code-keyword">this</span>.init_();!<span class="code-keyword">this</span>.couldBeginLoading_()||<span class="code-string">"READY"</span>!==<span class="code-keyword">this</span>.state&amp;&amp;<span class="code-string">"INIT"</span>!==<span class="code-keyword">this</span>.state||(<span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>)}}},{<span class="code-attr">key</span>:<span class="code-string">"init_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,<span class="code-keyword">this</span>.sourceUpdater_=<span class="code-keyword">new</span> fi(<span class="code-keyword">this</span>.mediaSource_,<span class="code-keyword">this</span>.mimeType_,<span class="code-keyword">this</span>.loaderType_,<span class="code-keyword">this</span>.sourceBufferEmitter_),<span class="code-keyword">this</span>.resetEverything(),<span class="code-keyword">this</span>.monitorBuffer_()}},{<span class="code-attr">key</span>:<span class="code-string">"playlist"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-built_in">arguments</span>.length&gt;<span class="code-number">1</span>&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]?<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]:{};<span class="code-keyword">if</span>(e){<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.playlist_,n=<span class="code-keyword">this</span>.pendingSegment_;<span class="code-keyword">this</span>.playlist_=e,<span class="code-keyword">this</span>.xhrOptions_=t,<span class="code-keyword">this</span>.hasPlayed_()||(e.syncInfo={<span class="code-attr">mediaSequence</span>:e.mediaSequence,<span class="code-attr">time</span>:<span class="code-number">0</span>});<span class="code-keyword">var</span> r=<span class="code-literal">null</span>;<span class="code-keyword">if</span>(i&amp;&amp;(i.id?r=i.id:i.uri&amp;&amp;(r=i.uri)),<span class="code-keyword">this</span>.logger_(<span class="code-string">"playlist update ["</span>+r+<span class="code-string">" =&gt; "</span>+(e.id||e.uri)+<span class="code-string">"]"</span>),<span class="code-keyword">this</span>.trigger(<span class="code-string">"syncinfoupdate"</span>),<span class="code-string">"INIT"</span>===<span class="code-keyword">this</span>.state&amp;&amp;<span class="code-keyword">this</span>.couldBeginLoading_())<span class="code-keyword">return</span> <span class="code-keyword">this</span>.init_();<span class="code-keyword">if</span>(i&amp;&amp;i.uri===e.uri){<span class="code-keyword">var</span> a=e.mediaSequence-i.mediaSequence;<span class="code-keyword">this</span>.logger_(<span class="code-string">"live window shift ["</span>+a+<span class="code-string">"]"</span>),<span class="code-literal">null</span>!==<span class="code-keyword">this</span>.mediaIndex&amp;&amp;(<span class="code-keyword">this</span>.mediaIndex-=a),n&amp;&amp;(n.mediaIndex-=a,n.mediaIndex&gt;=<span class="code-number">0</span>&amp;&amp;(n.segment=e.segments[n.mediaIndex])),<span class="code-keyword">this</span>.syncController_.saveExpiredSegmentInfo(i,e)}<span class="code-keyword">else</span> <span class="code-literal">null</span>!==<span class="code-keyword">this</span>.mediaIndex&amp;&amp;<span class="code-keyword">this</span>.resyncLoader()}}},{<span class="code-attr">key</span>:<span class="code-string">"pause"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.checkBufferTimeout_&amp;&amp;(u.clearTimeout(<span class="code-keyword">this</span>.checkBufferTimeout_),<span class="code-keyword">this</span>.checkBufferTimeout_=<span class="code-literal">null</span>)}},{<span class="code-attr">key</span>:<span class="code-string">"paused"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-literal">null</span>===<span class="code-keyword">this</span>.checkBufferTimeout_}},{<span class="code-attr">key</span>:<span class="code-string">"mimeType"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.mimeType_||(<span class="code-keyword">this</span>.mimeType_=e,<span class="code-keyword">this</span>.sourceBufferEmitter_=t,<span class="code-string">"INIT"</span>===<span class="code-keyword">this</span>.state&amp;&amp;<span class="code-keyword">this</span>.couldBeginLoading_()&amp;&amp;<span class="code-keyword">this</span>.init_())}},{<span class="code-attr">key</span>:<span class="code-string">"resetEverything"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.ended_=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.resetLoader(),<span class="code-keyword">this</span>.remove(<span class="code-number">0</span>,<span class="code-keyword">this</span>.duration_(),e),<span class="code-keyword">this</span>.captionParser_&amp;&amp;<span class="code-keyword">this</span>.captionParser_.clearAllCaptions(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"reseteverything"</span>)}},{<span class="code-attr">key</span>:<span class="code-string">"resetLoader"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.fetchAtBuffer_=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.resyncLoader()}},{<span class="code-attr">key</span>:<span class="code-string">"resyncLoader"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.mediaIndex=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.syncPoint_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.abort()}},{<span class="code-attr">key</span>:<span class="code-string">"remove"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.sourceUpdater_&amp;&amp;<span class="code-keyword">this</span>.sourceUpdater_.remove(e,t,i),we(e,t,<span class="code-keyword">this</span>.segmentMetadataTrack_),<span class="code-keyword">this</span>.inbandTextTracks_)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> <span class="code-keyword">this</span>.inbandTextTracks_)we(e,t,<span class="code-keyword">this</span>.inbandTextTracks_[n])}},{<span class="code-attr">key</span>:<span class="code-string">"monitorBuffer_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.checkBufferTimeout_&amp;&amp;u.clearTimeout(<span class="code-keyword">this</span>.checkBufferTimeout_),<span class="code-keyword">this</span>.checkBufferTimeout_=u.setTimeout(<span class="code-keyword">this</span>.monitorBufferTick_.bind(<span class="code-keyword">this</span>),<span class="code-number">1</span>)}},{<span class="code-attr">key</span>:<span class="code-string">"monitorBufferTick_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-string">"READY"</span>===<span class="code-keyword">this</span>.state&amp;&amp;<span class="code-keyword">this</span>.fillBuffer_(),<span class="code-keyword">this</span>.checkBufferTimeout_&amp;&amp;u.clearTimeout(<span class="code-keyword">this</span>.checkBufferTimeout_),<span class="code-keyword">this</span>.checkBufferTimeout_=u.setTimeout(<span class="code-keyword">this</span>.monitorBufferTick_.bind(<span class="code-keyword">this</span>),<span class="code-number">500</span>)}},{<span class="code-attr">key</span>:<span class="code-string">"fillBuffer_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.sourceUpdater_.updating()){<span class="code-keyword">this</span>.syncPoint_||(<span class="code-keyword">this</span>.syncPoint_=<span class="code-keyword">this</span>.syncController_.getSyncPoint(<span class="code-keyword">this</span>.playlist_,<span class="code-keyword">this</span>.duration_(),<span class="code-keyword">this</span>.currentTimeline_,<span class="code-keyword">this</span>.currentTime_()));<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.checkBuffer_(<span class="code-keyword">this</span>.buffered_(),<span class="code-keyword">this</span>.playlist_,<span class="code-keyword">this</span>.mediaIndex,<span class="code-keyword">this</span>.hasPlayed_(),<span class="code-keyword">this</span>.currentTime_(),<span class="code-keyword">this</span>.syncPoint_);e&amp;&amp;(<span class="code-keyword">this</span>.isEndOfStream_(e.mediaIndex)?<span class="code-keyword">this</span>.endOfStream():(e.mediaIndex!==<span class="code-keyword">this</span>.playlist_.segments.length<span class="code-number">-1</span>||<span class="code-string">"ended"</span>!==<span class="code-keyword">this</span>.mediaSource_.readyState||<span class="code-keyword">this</span>.seeking_())&amp;&amp;(e.timeline!==<span class="code-keyword">this</span>.currentTimeline_&amp;&amp;(<span class="code-keyword">this</span>.syncController_.reset(),e.timestampOffset=e.startOfSegment,<span class="code-keyword">this</span>.captionParser_&amp;&amp;<span class="code-keyword">this</span>.captionParser_.clearAllCaptions()),<span class="code-keyword">this</span>.loadSegment_(e)))}}},{<span class="code-attr">key</span>:<span class="code-string">"isEndOfStream_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(!e||!t)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> n=i===e.segments.length;<span class="code-keyword">return</span> e.endList&amp;&amp;<span class="code-string">"open"</span>===t.readyState&amp;&amp;n}(<span class="code-built_in">arguments</span>.length&gt;<span class="code-number">1</span>&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]?<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]:<span class="code-keyword">this</span>.playlist_,<span class="code-keyword">this</span>.mediaSource_,e)&amp;&amp;!<span class="code-keyword">this</span>.sourceUpdater_.updating()}},{<span class="code-attr">key</span>:<span class="code-string">"checkBuffer_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r,a</span>)</span>{<span class="code-keyword">var</span> s=<span class="code-number">0</span>,o=<span class="code-keyword">void</span> <span class="code-number">0</span>;e.length&amp;&amp;(s=e.end(e.length<span class="code-number">-1</span>));<span class="code-keyword">var</span> u=<span class="code-built_in">Math</span>.max(<span class="code-number">0</span>,s-r);<span class="code-keyword">if</span>(!t.segments.length)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(u&gt;=<span class="code-keyword">this</span>.goalBufferLength_())<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(!n&amp;&amp;u&gt;=<span class="code-number">1</span>)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(<span class="code-literal">null</span>===a)<span class="code-keyword">return</span> i=<span class="code-keyword">this</span>.getSyncSegmentCandidate_(t),<span class="code-keyword">this</span>.generateSegmentInfo_(t,i,<span class="code-literal">null</span>,!<span class="code-number">0</span>);<span class="code-keyword">if</span>(<span class="code-literal">null</span>!==i){t.segments[i];<span class="code-keyword">return</span> o=s,<span class="code-keyword">this</span>.generateSegmentInfo_(t,i+<span class="code-number">1</span>,o,!<span class="code-number">1</span>)}<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.fetchAtBuffer_){<span class="code-keyword">var</span> d=X.getMediaInfoForTime(t,s,a.segmentIndex,a.time);i=d.mediaIndex,o=d.startTime}<span class="code-keyword">else</span>{<span class="code-keyword">var</span> l=X.getMediaInfoForTime(t,r,a.segmentIndex,a.time);i=l.mediaIndex,o=l.startTime}<span class="code-keyword">return</span> <span class="code-keyword">this</span>.generateSegmentInfo_(t,i,o,!<span class="code-number">1</span>)}},{<span class="code-attr">key</span>:<span class="code-string">"getSyncSegmentCandidate_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(<span class="code-number">-1</span>===<span class="code-keyword">this</span>.currentTimeline_)<span class="code-keyword">return</span> <span class="code-number">0</span>;<span class="code-keyword">var</span> i=e.segments.map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">timeline</span>:e.timeline,<span class="code-attr">segmentIndex</span>:t}}).filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.timeline===t.currentTimeline_});<span class="code-keyword">return</span> i.length?i[<span class="code-built_in">Math</span>.min(i.length<span class="code-number">-1</span>,<span class="code-number">1</span>)].segmentIndex:<span class="code-built_in">Math</span>.max(e.segments.length<span class="code-number">-1</span>,<span class="code-number">0</span>)}},{<span class="code-attr">key</span>:<span class="code-string">"generateSegmentInfo_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">if</span>(t&lt;<span class="code-number">0</span>||t&gt;=e.segments.length)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> r=e.segments[t];<span class="code-keyword">return</span>{<span class="code-attr">requestId</span>:<span class="code-string">"segment-loader-"</span>+<span class="code-built_in">Math</span>.random(),<span class="code-attr">uri</span>:r.resolvedUri,<span class="code-attr">mediaIndex</span>:t,<span class="code-attr">isSyncRequest</span>:n,<span class="code-attr">startOfSegment</span>:i,<span class="code-attr">playlist</span>:e,<span class="code-attr">bytes</span>:<span class="code-literal">null</span>,<span class="code-attr">encryptedBytes</span>:<span class="code-literal">null</span>,<span class="code-attr">timestampOffset</span>:<span class="code-literal">null</span>,<span class="code-attr">timeline</span>:r.timeline,<span class="code-attr">duration</span>:r.duration,<span class="code-attr">segment</span>:r}}},{<span class="code-attr">key</span>:<span class="code-string">"abortRequestEarly_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.hls_.tech_.paused()||!<span class="code-keyword">this</span>.xhrOptions_.timeout||!<span class="code-keyword">this</span>.playlist_.attributes.BANDWIDTH)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(<span class="code-built_in">Date</span>.now()-(e.firstBytesReceivedAt||<span class="code-built_in">Date</span>.now())&lt;<span class="code-number">1e3</span>)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.currentTime_(),i=e.bandwidth,n=<span class="code-keyword">this</span>.pendingSegment_.duration,r=X.estimateSegmentRequestTime(n,i,<span class="code-keyword">this</span>.playlist_,e.bytesReceived),a=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-built_in">arguments</span>.length&gt;<span class="code-number">2</span>&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-built_in">arguments</span>[<span class="code-number">2</span>]?<span class="code-built_in">arguments</span>[<span class="code-number">2</span>]:<span class="code-number">1</span>;<span class="code-keyword">return</span>((e.length?e.end(e.length<span class="code-number">-1</span>):<span class="code-number">0</span>)-t)/i}(<span class="code-keyword">this</span>.buffered_(),t,<span class="code-keyword">this</span>.hls_.tech_.playbackRate())<span class="code-number">-1</span>;<span class="code-keyword">if</span>(r&lt;=a)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.master,i=e.currentTime,n=e.bandwidth,r=e.duration,a=e.segmentDuration,s=e.timeUntilRebuffer,o=e.currentTimeline,u=e.syncController,d=t.playlists.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!X.isIncompatible(e)}),l=d.filter(X.isEnabled);l.length||(l=d.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!X.isDisabled(e)}));<span class="code-keyword">var</span> h=l.filter(X.hasAttribute.bind(<span class="code-literal">null</span>,<span class="code-string">"BANDWIDTH"</span>)).map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=u.getSyncPoint(e,r,o,i)?<span class="code-number">1</span>:<span class="code-number">2</span>;<span class="code-keyword">return</span>{<span class="code-attr">playlist</span>:e,<span class="code-attr">rebufferingImpact</span>:X.estimateSegmentRequestTime(a,n,e)*t-s}}),c=h.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.rebufferingImpact&lt;=<span class="code-number">0</span>});<span class="code-keyword">return</span> Ui(c,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> Ii(t.playlist,e.playlist)}),c.length?c[<span class="code-number">0</span>]:(Ui(h,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.rebufferingImpact-t.rebufferingImpact}),h[<span class="code-number">0</span>]||<span class="code-literal">null</span>)}({<span class="code-attr">master</span>:<span class="code-keyword">this</span>.hls_.playlists.master,<span class="code-attr">currentTime</span>:t,<span class="code-attr">bandwidth</span>:i,<span class="code-attr">duration</span>:<span class="code-keyword">this</span>.duration_(),<span class="code-attr">segmentDuration</span>:n,<span class="code-attr">timeUntilRebuffer</span>:a,<span class="code-attr">currentTimeline</span>:<span class="code-keyword">this</span>.currentTimeline_,<span class="code-attr">syncController</span>:<span class="code-keyword">this</span>.syncController_});<span class="code-keyword">if</span>(s){<span class="code-keyword">var</span> o=r-a-s.rebufferingImpact,u=<span class="code-number">.5</span>;<span class="code-keyword">return</span> a&lt;=<span class="code-number">1</span>/<span class="code-number">30</span>&amp;&amp;(u=<span class="code-number">1</span>),!s.playlist||s.playlist.uri===<span class="code-keyword">this</span>.playlist_.uri||o&lt;u?!<span class="code-number">1</span>:(<span class="code-keyword">this</span>.bandwidth=s.playlist.attributes.BANDWIDTH*pi.BANDWIDTH_VARIANCE+<span class="code-number">1</span>,<span class="code-keyword">this</span>.abort(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"earlyabort"</span>),!<span class="code-number">0</span>)}}},{<span class="code-attr">key</span>:<span class="code-string">"handleProgress_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.pendingSegment_&amp;&amp;t.requestId===<span class="code-keyword">this</span>.pendingSegment_.requestId&amp;&amp;!<span class="code-keyword">this</span>.abortRequestEarly_(t.stats)&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"progress"</span>)}},{<span class="code-attr">key</span>:<span class="code-string">"loadSegment_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.state=<span class="code-string">"WAITING"</span>,<span class="code-keyword">this</span>.pendingSegment_=e,<span class="code-keyword">this</span>.trimBackBuffer_(e),e.abortRequests=Li(<span class="code-keyword">this</span>.hls_.xhr,<span class="code-keyword">this</span>.xhrOptions_,<span class="code-keyword">this</span>.decrypter_,<span class="code-keyword">this</span>.captionParser_,<span class="code-keyword">this</span>.createSimplifiedSegmentObj_(e),<span class="code-keyword">this</span>.handleProgress_.bind(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.segmentRequestFinished_.bind(<span class="code-keyword">this</span>))}},{<span class="code-attr">key</span>:<span class="code-string">"trimBackBuffer_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">return</span> n=e.length&amp;&amp;e.start(<span class="code-number">0</span>)&gt;<span class="code-number">0</span>&amp;&amp;e.start(<span class="code-number">0</span>)&lt;t?e.start(<span class="code-number">0</span>):t<span class="code-number">-30</span>,<span class="code-built_in">Math</span>.min(n,t-i)}(<span class="code-keyword">this</span>.seekable_(),<span class="code-keyword">this</span>.currentTime_(),<span class="code-keyword">this</span>.playlist_.targetDuration||<span class="code-number">10</span>);t&gt;<span class="code-number">0</span>&amp;&amp;<span class="code-keyword">this</span>.remove(<span class="code-number">0</span>,t)}},{<span class="code-attr">key</span>:<span class="code-string">"createSimplifiedSegmentObj_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segment,i={<span class="code-attr">resolvedUri</span>:t.resolvedUri,<span class="code-attr">byterange</span>:t.byterange,<span class="code-attr">requestId</span>:e.requestId};<span class="code-keyword">if</span>(t.key){<span class="code-keyword">var</span> n=t.key.iv||<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,e.mediaIndex+e.playlist.mediaSequence]);i.key=<span class="code-keyword">this</span>.segmentKey(t.key),i.key.iv=n}<span class="code-keyword">return</span> t.map&amp;&amp;(i.map=<span class="code-keyword">this</span>.initSegment(t.map)),i}},{<span class="code-attr">key</span>:<span class="code-string">"segmentRequestFinished_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.mediaRequests+=<span class="code-number">1</span>,t.stats&amp;&amp;(<span class="code-keyword">this</span>.mediaBytesTransferred+=t.stats.bytesReceived,<span class="code-keyword">this</span>.mediaTransferDuration+=t.stats.roundTripTime),<span class="code-keyword">this</span>.pendingSegment_){<span class="code-keyword">if</span>(t.requestId===<span class="code-keyword">this</span>.pendingSegment_.requestId){<span class="code-keyword">if</span>(e)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.pendingSegment_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,e.code===bi?<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.mediaRequestsAborted+=<span class="code-number">1</span>):(<span class="code-keyword">this</span>.pause(),e.code===vi?(<span class="code-keyword">this</span>.mediaRequestsTimedout+=<span class="code-number">1</span>,<span class="code-keyword">this</span>.bandwidth=<span class="code-number">1</span>,<span class="code-keyword">this</span>.roundTrip=<span class="code-literal">NaN</span>,<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"bandwidthupdate"</span>)):(<span class="code-keyword">this</span>.mediaRequestsErrored+=<span class="code-number">1</span>,<span class="code-keyword">this</span>.error(e),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"error"</span>)));<span class="code-keyword">this</span>.bandwidth=t.stats.bandwidth,<span class="code-keyword">this</span>.roundTrip=t.stats.roundTripTime,t.map&amp;&amp;(t.map=<span class="code-keyword">this</span>.initSegment(t.map,!<span class="code-number">0</span>)),t.key&amp;&amp;<span class="code-keyword">this</span>.segmentKey(t.key,!<span class="code-number">0</span>),<span class="code-keyword">this</span>.processSegmentResponse_(t)}}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.mediaRequestsAborted+=<span class="code-number">1</span>}},{<span class="code-attr">key</span>:<span class="code-string">"processSegmentResponse_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.pendingSegment_;t.bytes=e.bytes,e.map&amp;&amp;(t.segment.map.bytes=e.map.bytes),t.endOfAllRequests=e.endOfAllRequests,e.fmp4Captions&amp;&amp;(!<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> i)<span class="code-keyword">if</span>(!e[n]){t.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-608"</span>});<span class="code-keyword">var</span> r=t.textTracks().getTrackById(n);e[n]=r||t.addRemoteTextTrack({<span class="code-attr">kind</span>:<span class="code-string">"captions"</span>,<span class="code-attr">id</span>:n,<span class="code-attr">label</span>:n},!<span class="code-number">1</span>).track}}(<span class="code-keyword">this</span>.inbandTextTracks_,<span class="code-keyword">this</span>.hls_.tech_,e.captionStreams),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.inbandTextTracks,i=e.captionArray,n=e.timestampOffset;<span class="code-keyword">if</span>(i){<span class="code-keyword">var</span> r=<span class="code-built_in">window</span>.WebKitDataCue||<span class="code-built_in">window</span>.VTTCue;i.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=e.stream,a=e.startTime,s=e.endTime;t[i]&amp;&amp;(a+=n,s+=n,t[i].addCue(<span class="code-keyword">new</span> r(a,s,e.text)))})}}({<span class="code-attr">inbandTextTracks</span>:<span class="code-keyword">this</span>.inbandTextTracks_,<span class="code-attr">captionArray</span>:e.fmp4Captions,<span class="code-attr">timestampOffset</span>:<span class="code-number">0</span>}),<span class="code-keyword">this</span>.captionParser_&amp;&amp;<span class="code-keyword">this</span>.captionParser_.clearParsedCaptions()),<span class="code-keyword">this</span>.handleSegment_()}},{<span class="code-attr">key</span>:<span class="code-string">"handleSegment_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.pendingSegment_){<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.pendingSegment_,i=t.segment,n=<span class="code-keyword">this</span>.syncController_.probeSegmentInfo(t);<span class="code-keyword">void</span> <span class="code-number">0</span>===<span class="code-keyword">this</span>.startingMedia_&amp;&amp;n&amp;&amp;(n.containsAudio||n.containsVideo)&amp;&amp;(<span class="code-keyword">this</span>.startingMedia_={<span class="code-attr">containsAudio</span>:n.containsAudio,<span class="code-attr">containsVideo</span>:n.containsVideo});<span class="code-keyword">var</span> r,a,s,o=(r=<span class="code-keyword">this</span>.loaderType_,a=<span class="code-keyword">this</span>.startingMedia_,s=n,<span class="code-string">"main"</span>===r&amp;&amp;a&amp;&amp;s?s.containsAudio||s.containsVideo?a.containsVideo&amp;&amp;!s.containsVideo?<span class="code-string">"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest."</span>:!a.containsVideo&amp;&amp;s.containsVideo?<span class="code-string">"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest."</span>:<span class="code-literal">null</span>:<span class="code-string">"Neither audio nor video found in segment."</span>:<span class="code-literal">null</span>);<span class="code-keyword">if</span>(o)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.error({<span class="code-attr">message</span>:o,<span class="code-attr">blacklistDuration</span>:<span class="code-number">1</span>/<span class="code-number">0</span>}),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"error"</span>);<span class="code-keyword">if</span>(t.isSyncRequest)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"syncinfoupdate"</span>),<span class="code-keyword">this</span>.pendingSegment_=<span class="code-literal">null</span>,<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>);<span class="code-keyword">if</span>(<span class="code-literal">null</span>!==t.timestampOffset&amp;&amp;t.timestampOffset!==<span class="code-keyword">this</span>.sourceUpdater_.timestampOffset()){<span class="code-keyword">if</span>(n&amp;&amp;n.segmentTimestampInfo){<span class="code-keyword">var</span> u=n.segmentTimestampInfo[<span class="code-number">0</span>].ptsTime,d=n.segmentTimestampInfo[<span class="code-number">0</span>].dtsTime;t.timestampOffset-=u-d}<span class="code-keyword">this</span>.sourceUpdater_.timestampOffset(t.timestampOffset),<span class="code-keyword">this</span>.trigger(<span class="code-string">"timestampoffset"</span>)}<span class="code-keyword">var</span> l=<span class="code-keyword">this</span>.syncController_.mappingForTimeline(t.timeline);<span class="code-keyword">if</span>(<span class="code-literal">null</span>!==l&amp;&amp;<span class="code-keyword">this</span>.trigger({<span class="code-attr">type</span>:<span class="code-string">"segmenttimemapping"</span>,<span class="code-attr">mapping</span>:l}),<span class="code-keyword">this</span>.state=<span class="code-string">"APPENDING"</span>,i.map){<span class="code-keyword">var</span> h=fe(i.map);<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.activeInitSegmentId_||<span class="code-keyword">this</span>.activeInitSegmentId_!==h){<span class="code-keyword">var</span> c=<span class="code-keyword">this</span>.initSegment(i.map);<span class="code-keyword">this</span>.sourceUpdater_.appendBuffer({<span class="code-attr">bytes</span>:c.bytes},<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.activeInitSegmentId_=h})}}t.byteLength=t.bytes.byteLength,<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> i.start&amp;&amp;<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> i.end?<span class="code-keyword">this</span>.mediaSecondsLoaded+=i.end-i.start:<span class="code-keyword">this</span>.mediaSecondsLoaded+=i.duration,<span class="code-keyword">this</span>.logger_(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segment,i=t.start,n=t.end,r=e.playlist,a=r.mediaSequence,s=r.id,o=r.segments,u=<span class="code-keyword">void</span> <span class="code-number">0</span>===o?[]:o,d=e.mediaIndex,l=e.timeline;<span class="code-keyword">return</span>[<span class="code-string">"appending ["</span>+d+<span class="code-string">"] of ["</span>+a+<span class="code-string">", "</span>+(a+u.length)+<span class="code-string">"] from playlist ["</span>+s+<span class="code-string">"]"</span>,<span class="code-string">"["</span>+i+<span class="code-string">" =&gt; "</span>+n+<span class="code-string">"] in timeline ["</span>+l+<span class="code-string">"]"</span>].join(<span class="code-string">" "</span>)}(t)),<span class="code-keyword">this</span>.sourceUpdater_.appendBuffer({<span class="code-attr">bytes</span>:t.bytes,<span class="code-attr">videoSegmentTimingInfoCallback</span>:<span class="code-keyword">this</span>.handleVideoSegmentTimingInfo_.bind(<span class="code-keyword">this</span>,t.requestId)},<span class="code-keyword">this</span>.handleUpdateEnd_.bind(<span class="code-keyword">this</span>))}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>}},{<span class="code-attr">key</span>:<span class="code-string">"handleVideoSegmentTimingInfo_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.pendingSegment_&amp;&amp;e===<span class="code-keyword">this</span>.pendingSegment_.requestId){<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.pendingSegment_.segment;i.videoTimingInfo||(i.videoTimingInfo={}),i.videoTimingInfo.transmuxerPrependedSeconds=t.videoSegmentTimingInfo.prependedContentDuration||<span class="code-number">0</span>,i.videoTimingInfo.transmuxedPresentationStart=t.videoSegmentTimingInfo.start.presentation,i.videoTimingInfo.transmuxedPresentationEnd=t.videoSegmentTimingInfo.end.presentation,i.videoTimingInfo.baseMediaDecodeTime=t.videoSegmentTimingInfo.baseMediaDecodeTime}}},{<span class="code-attr">key</span>:<span class="code-string">"handleUpdateEnd_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.pendingSegment_)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.paused()||<span class="code-keyword">this</span>.monitorBuffer_());<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.pendingSegment_,t=e.segment,i=<span class="code-literal">null</span>!==<span class="code-keyword">this</span>.mediaIndex;<span class="code-keyword">this</span>.pendingSegment_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.recordThroughput_(e),<span class="code-keyword">this</span>.addSegmentMetadataCue_(e),<span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,<span class="code-keyword">this</span>.mediaIndex=e.mediaIndex,<span class="code-keyword">this</span>.fetchAtBuffer_=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.currentTimeline_=e.timeline,<span class="code-keyword">this</span>.trigger(<span class="code-string">"syncinfoupdate"</span>),t.end&amp;&amp;<span class="code-keyword">this</span>.currentTime_()-t.end&gt;<span class="code-number">3</span>*e.playlist.targetDuration?<span class="code-keyword">this</span>.resetEverything():(i&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"bandwidthupdate"</span>),<span class="code-keyword">this</span>.trigger(<span class="code-string">"progress"</span>),<span class="code-keyword">this</span>.isEndOfStream_(e.mediaIndex+<span class="code-number">1</span>,e.playlist)&amp;&amp;<span class="code-keyword">this</span>.endOfStream(),<span class="code-keyword">this</span>.paused()||<span class="code-keyword">this</span>.monitorBuffer_())}},{<span class="code-attr">key</span>:<span class="code-string">"recordThroughput_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.throughput.rate,i=<span class="code-built_in">Date</span>.now()-e.endOfAllRequests+<span class="code-number">1</span>,n=<span class="code-built_in">Math</span>.floor(e.byteLength/i*<span class="code-number">8</span>*<span class="code-number">1e3</span>);<span class="code-keyword">this</span>.throughput.rate+=(n-t)/++<span class="code-keyword">this</span>.throughput.count}},{<span class="code-attr">key</span>:<span class="code-string">"addSegmentMetadataCue_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.segmentMetadataTrack_){<span class="code-keyword">var</span> t=e.segment,i=t.start,n=t.end;<span class="code-keyword">if</span>(Xi(i)&amp;&amp;Xi(n)){we(i,n,<span class="code-keyword">this</span>.segmentMetadataTrack_);<span class="code-keyword">var</span> r=u.WebKitDataCue||u.VTTCue,a={<span class="code-attr">custom</span>:t.custom,<span class="code-attr">dateTimeObject</span>:t.dateTimeObject,<span class="code-attr">dateTimeString</span>:t.dateTimeString,<span class="code-attr">bandwidth</span>:e.playlist.attributes.BANDWIDTH,<span class="code-attr">resolution</span>:e.playlist.attributes.RESOLUTION,<span class="code-attr">codecs</span>:e.playlist.attributes.CODECS,<span class="code-attr">byteLength</span>:e.byteLength,<span class="code-attr">uri</span>:e.uri,<span class="code-attr">timeline</span>:e.timeline,<span class="code-attr">playlist</span>:e.playlist.uri,<span class="code-attr">start</span>:i,<span class="code-attr">end</span>:n},s=<span class="code-keyword">new</span> r(i,n,<span class="code-built_in">JSON</span>.stringify(a));s.value=a,<span class="code-keyword">this</span>.segmentMetadataTrack_.addCue(s)}}}}]),i}(t.EventTarget),Ki=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">decodeURIComponent</span>(<span class="code-built_in">escape</span>(<span class="code-built_in">String</span>.fromCharCode.apply(<span class="code-literal">null</span>,e)))},$i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(<span class="code-string">"\n\n"</span>.split(<span class="code-string">""</span>).map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.charCodeAt(<span class="code-number">0</span>)})),Qi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">i</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-built_in">arguments</span>.length&gt;<span class="code-number">1</span>&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]?<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]:{};_(<span class="code-keyword">this</span>,i);<span class="code-keyword">var</span> n=T(<span class="code-keyword">this</span>,(i.__proto__||<span class="code-built_in">Object</span>.getPrototypeOf(i)).call(<span class="code-keyword">this</span>,e,t));<span class="code-keyword">return</span> n.mediaSource_=<span class="code-literal">null</span>,n.subtitlesTrack_=<span class="code-literal">null</span>,n}<span class="code-keyword">return</span> b(i,Yi),v(i,[{<span class="code-attr">key</span>:<span class="code-string">"buffered_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.subtitlesTrack_||!<span class="code-keyword">this</span>.subtitlesTrack_.cues.length)<span class="code-keyword">return</span> t.createTimeRanges();<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.subtitlesTrack_.cues,i=e[<span class="code-number">0</span>].startTime,n=e[e.length<span class="code-number">-1</span>].startTime;<span class="code-keyword">return</span> t.createTimeRanges([[i,n]])}},{<span class="code-attr">key</span>:<span class="code-string">"initSegment"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-built_in">arguments</span>.length&gt;<span class="code-number">1</span>&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]&amp;&amp;<span class="code-built_in">arguments</span>[<span class="code-number">1</span>];<span class="code-keyword">if</span>(!e)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i=fe(e),n=<span class="code-keyword">this</span>.initSegments_[i];<span class="code-keyword">if</span>(t&amp;&amp;!n&amp;&amp;e.bytes){<span class="code-keyword">var</span> r=$i.byteLength+e.bytes.byteLength,a=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(r);a.set(e.bytes),a.set($i,e.bytes.byteLength),<span class="code-keyword">this</span>.initSegments_[i]=n={<span class="code-attr">resolvedUri</span>:e.resolvedUri,<span class="code-attr">byterange</span>:e.byterange,<span class="code-attr">bytes</span>:a}}<span class="code-keyword">return</span> n||e}},{<span class="code-attr">key</span>:<span class="code-string">"couldBeginLoading_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.playlist_&amp;&amp;<span class="code-keyword">this</span>.subtitlesTrack_&amp;&amp;!<span class="code-keyword">this</span>.paused()}},{<span class="code-attr">key</span>:<span class="code-string">"init_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,<span class="code-keyword">this</span>.resetEverything(),<span class="code-keyword">this</span>.monitorBuffer_()}},{<span class="code-attr">key</span>:<span class="code-string">"track"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===e?<span class="code-keyword">this</span>.subtitlesTrack_:(<span class="code-keyword">this</span>.subtitlesTrack_=e,<span class="code-string">"INIT"</span>===<span class="code-keyword">this</span>.state&amp;&amp;<span class="code-keyword">this</span>.couldBeginLoading_()&amp;&amp;<span class="code-keyword">this</span>.init_(),<span class="code-keyword">this</span>.subtitlesTrack_)}},{<span class="code-attr">key</span>:<span class="code-string">"remove"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{we(e,t,<span class="code-keyword">this</span>.subtitlesTrack_)}},{<span class="code-attr">key</span>:<span class="code-string">"fillBuffer_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.syncPoint_||(<span class="code-keyword">this</span>.syncPoint_=<span class="code-keyword">this</span>.syncController_.getSyncPoint(<span class="code-keyword">this</span>.playlist_,<span class="code-keyword">this</span>.duration_(),<span class="code-keyword">this</span>.currentTimeline_,<span class="code-keyword">this</span>.currentTime_()));<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.checkBuffer_(<span class="code-keyword">this</span>.buffered_(),<span class="code-keyword">this</span>.playlist_,<span class="code-keyword">this</span>.mediaIndex,<span class="code-keyword">this</span>.hasPlayed_(),<span class="code-keyword">this</span>.currentTime_(),<span class="code-keyword">this</span>.syncPoint_);<span class="code-keyword">if</span>(t=<span class="code-keyword">this</span>.skipEmptySegments_(t)){<span class="code-keyword">if</span>(<span class="code-literal">null</span>===<span class="code-keyword">this</span>.syncController_.timestampOffsetForTimeline(t.timeline)){<span class="code-keyword">return</span> <span class="code-keyword">this</span>.syncController_.one(<span class="code-string">"timestampoffset"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.state=<span class="code-string">"READY"</span>,e.paused()||e.monitorBuffer_()}),<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.state=<span class="code-string">"WAITING_ON_TIMELINE"</span>)}<span class="code-keyword">this</span>.loadSegment_(t)}}},{<span class="code-attr">key</span>:<span class="code-string">"skipEmptySegments_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(;e&amp;&amp;e.segment.empty;)e=<span class="code-keyword">this</span>.generateSegmentInfo_(e.playlist,e.mediaIndex+<span class="code-number">1</span>,e.startOfSegment+e.duration,e.isSyncRequest);<span class="code-keyword">return</span> e}},{<span class="code-attr">key</span>:<span class="code-string">"handleSegment_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.pendingSegment_&amp;&amp;<span class="code-keyword">this</span>.subtitlesTrack_){<span class="code-keyword">this</span>.state=<span class="code-string">"APPENDING"</span>;<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.pendingSegment_,i=t.segment;<span class="code-keyword">if</span>(<span class="code-string">"function"</span>!=<span class="code-keyword">typeof</span> u.WebVTT&amp;&amp;<span class="code-keyword">this</span>.subtitlesTrack_&amp;&amp;<span class="code-keyword">this</span>.subtitlesTrack_.tech_){<span class="code-keyword">var</span> n=<span class="code-keyword">void</span> <span class="code-number">0</span>,r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.subtitlesTrack_.tech_.off(<span class="code-string">"vttjsloaded"</span>,n),e.error({<span class="code-attr">message</span>:<span class="code-string">"Error loading vtt.js"</span>}),e.state=<span class="code-string">"READY"</span>,e.pause(),e.trigger(<span class="code-string">"error"</span>)};<span class="code-keyword">return</span> n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.subtitlesTrack_.tech_.off(<span class="code-string">"vttjserror"</span>,r),e.handleSegment_()},<span class="code-keyword">this</span>.state=<span class="code-string">"WAITING_ON_VTTJS"</span>,<span class="code-keyword">this</span>.subtitlesTrack_.tech_.one(<span class="code-string">"vttjsloaded"</span>,n),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.subtitlesTrack_.tech_.one(<span class="code-string">"vttjserror"</span>,r)}i.requested=!<span class="code-number">0</span>;<span class="code-keyword">try</span>{<span class="code-keyword">this</span>.parseVTTCues_(t)}<span class="code-keyword">catch</span>(e){<span class="code-keyword">return</span> <span class="code-keyword">this</span>.error({<span class="code-attr">message</span>:e.message}),<span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,<span class="code-keyword">this</span>.pause(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"error"</span>)}<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.updateTimeMapping_(t,<span class="code-keyword">this</span>.syncController_.timelines[t.timeline],<span class="code-keyword">this</span>.playlist_),t.isSyncRequest)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"syncinfoupdate"</span>),<span class="code-keyword">this</span>.pendingSegment_=<span class="code-literal">null</span>,<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>);t.byteLength=t.bytes.byteLength,<span class="code-keyword">this</span>.mediaSecondsLoaded+=i.duration,t.cues.length&amp;&amp;<span class="code-keyword">this</span>.remove(t.cues[<span class="code-number">0</span>].endTime,t.cues[t.cues.length<span class="code-number">-1</span>].endTime),t.cues.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.subtitlesTrack_.addCue(t)}),<span class="code-keyword">this</span>.handleUpdateEnd_()}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>}},{<span class="code-attr">key</span>:<span class="code-string">"parseVTTCues_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">void</span> <span class="code-number">0</span>,n=!<span class="code-number">1</span>;<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> u.TextDecoder?i=<span class="code-keyword">new</span> u.TextDecoder(<span class="code-string">"utf8"</span>):(i=u.WebVTT.StringDecoder(),n=!<span class="code-number">0</span>);<span class="code-keyword">var</span> r=<span class="code-keyword">new</span> u.WebVTT.Parser(u,u.vttjs,i);<span class="code-keyword">if</span>(e.cues=[],e.timestampmap={<span class="code-attr">MPEGTS</span>:<span class="code-number">0</span>,<span class="code-attr">LOCAL</span>:<span class="code-number">0</span>},r.oncue=e.cues.push.bind(e.cues),r.ontimestampmap=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span> e.timestampmap=t},r.onparsingerror=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{t.log.warn(<span class="code-string">"Error encountered when parsing cues: "</span>+e.message)},e.segment.map){<span class="code-keyword">var</span> a=e.segment.map.bytes;n&amp;&amp;(a=Ki(a)),r.parse(a)}<span class="code-keyword">var</span> s=e.bytes;n&amp;&amp;(s=Ki(s)),r.parse(s),r.flush()}},{<span class="code-attr">key</span>:<span class="code-string">"updateTimeMapping_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=e.segment;<span class="code-keyword">if</span>(t)<span class="code-keyword">if</span>(e.cues.length){<span class="code-keyword">var</span> r=e.timestampmap,a=r.MPEGTS/<span class="code-number">9e4</span>-r.LOCAL+t.mapping;<span class="code-keyword">if</span>(e.cues.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.startTime+=a,e.endTime+=a}),!i.syncInfo){<span class="code-keyword">var</span> s=e.cues[<span class="code-number">0</span>].startTime,o=e.cues[e.cues.length<span class="code-number">-1</span>].startTime;i.syncInfo={<span class="code-attr">mediaSequence</span>:i.mediaSequence+e.mediaIndex,<span class="code-attr">time</span>:<span class="code-built_in">Math</span>.min(s,o-n.duration)}}}<span class="code-keyword">else</span> n.empty=!<span class="code-number">0</span>}}]),i}(),Ji=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=e.cues,n=<span class="code-number">0</span>;n&lt;i.length;n++){<span class="code-keyword">var</span> r=i[n];<span class="code-keyword">if</span>(t&gt;=r.adStartTime&amp;&amp;t&lt;=r.adEndTime)<span class="code-keyword">return</span> r}<span class="code-keyword">return</span> <span class="code-literal">null</span>},Zi=<span class="code-number">27</span>,en=<span class="code-number">15</span>,tn=<span class="code-number">21</span>,nn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-number">1</span>;<span class="code-keyword">for</span>(e&gt;t&amp;&amp;(i=<span class="code-number">-1</span>);<span class="code-built_in">Math</span>.abs(t-e)&gt;<span class="code-number">4294967296</span>;)e+=<span class="code-number">8589934592</span>*i;<span class="code-keyword">return</span> e},rn=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i,n;e.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.type_=t||<span class="code-string">"shared"</span>,<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-string">"shared"</span>!==<span class="code-keyword">this</span>.type_&amp;&amp;e.type!==<span class="code-keyword">this</span>.type_||(<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n=e.dts),e.dts=nn(e.dts,n),e.pts=nn(e.pts,n),i=e.dts,<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,e))},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n=i,<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>)},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.flush(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>)},<span class="code-keyword">this</span>.discontinuity=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n=<span class="code-keyword">void</span> <span class="code-number">0</span>,i=<span class="code-keyword">void</span> <span class="code-number">0</span>},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.discontinuity(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)}};rn.prototype=<span class="code-keyword">new</span> xi;<span class="code-keyword">var</span> an,sn,on,un,dn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-number">31</span>&amp;e[<span class="code-number">1</span>];<span class="code-keyword">return</span> t&lt;&lt;=<span class="code-number">8</span>,t|=e[<span class="code-number">2</span>]},ln=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!!(<span class="code-number">64</span>&amp;e[<span class="code-number">1</span>])},hn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-number">0</span>;<span class="code-keyword">return</span>(<span class="code-number">48</span>&amp;e[<span class="code-number">3</span>])&gt;&gt;&gt;<span class="code-number">4</span>&gt;<span class="code-number">1</span>&amp;&amp;(t+=e[<span class="code-number">4</span>]+<span class="code-number">1</span>),t},cn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">switch</span>(e){<span class="code-keyword">case</span> <span class="code-number">5</span>:<span class="code-keyword">return</span><span class="code-string">"slice_layer_without_partitioning_rbsp_idr"</span>;<span class="code-keyword">case</span> <span class="code-number">6</span>:<span class="code-keyword">return</span><span class="code-string">"sei_rbsp"</span>;<span class="code-keyword">case</span> <span class="code-number">7</span>:<span class="code-keyword">return</span><span class="code-string">"seq_parameter_set_rbsp"</span>;<span class="code-keyword">case</span> <span class="code-number">8</span>:<span class="code-keyword">return</span><span class="code-string">"pic_parameter_set_rbsp"</span>;<span class="code-keyword">case</span> <span class="code-number">9</span>:<span class="code-keyword">return</span><span class="code-string">"access_unit_delimiter_rbsp"</span>;<span class="code-keyword">default</span>:<span class="code-keyword">return</span> <span class="code-literal">null</span>}},fn={<span class="code-attr">parseType</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=dn(e);<span class="code-keyword">return</span> <span class="code-number">0</span>===i?<span class="code-string">"pat"</span>:i===t?<span class="code-string">"pmt"</span>:t?<span class="code-string">"pes"</span>:<span class="code-literal">null</span>},<span class="code-attr">parsePat</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=ln(e),i=<span class="code-number">4</span>+hn(e);<span class="code-keyword">return</span> t&amp;&amp;(i+=e[i]+<span class="code-number">1</span>),(<span class="code-number">31</span>&amp;e[i+<span class="code-number">10</span>])&lt;&lt;<span class="code-number">8</span>|e[i+<span class="code-number">11</span>]},<span class="code-attr">parsePmt</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t={},i=ln(e),n=<span class="code-number">4</span>+hn(e);<span class="code-keyword">if</span>(i&amp;&amp;(n+=e[n]+<span class="code-number">1</span>),<span class="code-number">1</span>&amp;e[n+<span class="code-number">5</span>]){<span class="code-keyword">var</span> r;r=<span class="code-number">3</span>+((<span class="code-number">15</span>&amp;e[n+<span class="code-number">1</span>])&lt;&lt;<span class="code-number">8</span>|e[n+<span class="code-number">2</span>])<span class="code-number">-4</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a=<span class="code-number">12</span>+((<span class="code-number">15</span>&amp;e[n+<span class="code-number">10</span>])&lt;&lt;<span class="code-number">8</span>|e[n+<span class="code-number">11</span>]);a&lt;r;){<span class="code-keyword">var</span> s=n+a;t[(<span class="code-number">31</span>&amp;e[s+<span class="code-number">1</span>])&lt;&lt;<span class="code-number">8</span>|e[s+<span class="code-number">2</span>]]=e[s],a+=<span class="code-number">5</span>+((<span class="code-number">15</span>&amp;e[s+<span class="code-number">3</span>])&lt;&lt;<span class="code-number">8</span>|e[s+<span class="code-number">4</span>])}<span class="code-keyword">return</span> t}},<span class="code-attr">parsePayloadUnitStartIndicator</span>:ln,<span class="code-attr">parsePesType</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">switch</span>(t[dn(e)]){<span class="code-keyword">case</span> Zi:<span class="code-keyword">return</span><span class="code-string">"video"</span>;<span class="code-keyword">case</span> en:<span class="code-keyword">return</span><span class="code-string">"audio"</span>;<span class="code-keyword">case</span> tn:<span class="code-keyword">return</span><span class="code-string">"timed-metadata"</span>;<span class="code-keyword">default</span>:<span class="code-keyword">return</span> <span class="code-literal">null</span>}},<span class="code-attr">parsePesTime</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!ln(e))<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> t=<span class="code-number">4</span>+hn(e);<span class="code-keyword">if</span>(t&gt;=e.byteLength)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i,n=<span class="code-literal">null</span>;<span class="code-keyword">return</span> <span class="code-number">192</span>&amp;(i=e[t+<span class="code-number">7</span>])&amp;&amp;((n={}).pts=(<span class="code-number">14</span>&amp;e[t+<span class="code-number">9</span>])&lt;&lt;<span class="code-number">27</span>|(<span class="code-number">255</span>&amp;e[t+<span class="code-number">10</span>])&lt;&lt;<span class="code-number">20</span>|(<span class="code-number">254</span>&amp;e[t+<span class="code-number">11</span>])&lt;&lt;<span class="code-number">12</span>|(<span class="code-number">255</span>&amp;e[t+<span class="code-number">12</span>])&lt;&lt;<span class="code-number">5</span>|(<span class="code-number">254</span>&amp;e[t+<span class="code-number">13</span>])&gt;&gt;&gt;<span class="code-number">3</span>,n.pts*=<span class="code-number">4</span>,n.pts+=(<span class="code-number">6</span>&amp;e[t+<span class="code-number">13</span>])&gt;&gt;&gt;<span class="code-number">1</span>,n.dts=n.pts,<span class="code-number">64</span>&amp;i&amp;&amp;(n.dts=(<span class="code-number">14</span>&amp;e[t+<span class="code-number">14</span>])&lt;&lt;<span class="code-number">27</span>|(<span class="code-number">255</span>&amp;e[t+<span class="code-number">15</span>])&lt;&lt;<span class="code-number">20</span>|(<span class="code-number">254</span>&amp;e[t+<span class="code-number">16</span>])&lt;&lt;<span class="code-number">12</span>|(<span class="code-number">255</span>&amp;e[t+<span class="code-number">17</span>])&lt;&lt;<span class="code-number">5</span>|(<span class="code-number">254</span>&amp;e[t+<span class="code-number">18</span>])&gt;&gt;&gt;<span class="code-number">3</span>,n.dts*=<span class="code-number">4</span>,n.dts+=(<span class="code-number">6</span>&amp;e[t+<span class="code-number">18</span>])&gt;&gt;&gt;<span class="code-number">1</span>)),n},<span class="code-attr">videoPacketContainsKeyFrame</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">4</span>+hn(e),i=e.subarray(t),n=<span class="code-number">0</span>,r=<span class="code-number">0</span>,a=!<span class="code-number">1</span>;r&lt;i.byteLength<span class="code-number">-3</span>;r++)<span class="code-keyword">if</span>(<span class="code-number">1</span>===i[r+<span class="code-number">2</span>]){n=r+<span class="code-number">5</span>;<span class="code-keyword">break</span>}<span class="code-keyword">for</span>(;n&lt;i.byteLength;)<span class="code-keyword">switch</span>(i[n]){<span class="code-keyword">case</span> <span class="code-number">0</span>:<span class="code-keyword">if</span>(<span class="code-number">0</span>!==i[n<span class="code-number">-1</span>]){n+=<span class="code-number">2</span>;<span class="code-keyword">break</span>}<span class="code-keyword">if</span>(<span class="code-number">0</span>!==i[n<span class="code-number">-2</span>]){n++;<span class="code-keyword">break</span>}r+<span class="code-number">3</span>!==n<span class="code-number">-2</span>&amp;&amp;<span class="code-string">"slice_layer_without_partitioning_rbsp_idr"</span>===cn(<span class="code-number">31</span>&amp;i[r+<span class="code-number">3</span>])&amp;&amp;(a=!<span class="code-number">0</span>);<span class="code-keyword">do</span>{n++}<span class="code-keyword">while</span>(<span class="code-number">1</span>!==i[n]&amp;&amp;n&lt;i.length);r=n<span class="code-number">-2</span>,n+=<span class="code-number">3</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">1</span>:<span class="code-keyword">if</span>(<span class="code-number">0</span>!==i[n<span class="code-number">-1</span>]||<span class="code-number">0</span>!==i[n<span class="code-number">-2</span>]){n+=<span class="code-number">3</span>;<span class="code-keyword">break</span>}<span class="code-string">"slice_layer_without_partitioning_rbsp_idr"</span>===cn(<span class="code-number">31</span>&amp;i[r+<span class="code-number">3</span>])&amp;&amp;(a=!<span class="code-number">0</span>),r=n<span class="code-number">-2</span>,n+=<span class="code-number">3</span>;<span class="code-keyword">break</span>;<span class="code-keyword">default</span>:n+=<span class="code-number">3</span>}<span class="code-keyword">return</span> i=i.subarray(r),n-=r,r=<span class="code-number">0</span>,i&amp;&amp;i.byteLength&gt;<span class="code-number">3</span>&amp;&amp;<span class="code-string">"slice_layer_without_partitioning_rbsp_idr"</span>===cn(<span class="code-number">31</span>&amp;i[r+<span class="code-number">3</span>])&amp;&amp;(a=!<span class="code-number">0</span>),a}},pn=[<span class="code-number">96e3</span>,<span class="code-number">88200</span>,<span class="code-number">64e3</span>,<span class="code-number">48e3</span>,<span class="code-number">44100</span>,<span class="code-number">32e3</span>,<span class="code-number">24e3</span>,<span class="code-number">22050</span>,<span class="code-number">16e3</span>,<span class="code-number">12e3</span>,<span class="code-number">11025</span>,<span class="code-number">8e3</span>,<span class="code-number">7350</span>],mn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e[<span class="code-number">0</span>]&lt;&lt;<span class="code-number">21</span>|e[<span class="code-number">1</span>]&lt;&lt;<span class="code-number">14</span>|e[<span class="code-number">2</span>]&lt;&lt;<span class="code-number">7</span>|e[<span class="code-number">3</span>]},gn={<span class="code-attr">isLikelyAacData</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e[<span class="code-number">0</span>]===<span class="code-string">"I"</span>.charCodeAt(<span class="code-number">0</span>)&amp;&amp;e[<span class="code-number">1</span>]===<span class="code-string">"D"</span>.charCodeAt(<span class="code-number">0</span>)&amp;&amp;e[<span class="code-number">2</span>]===<span class="code-string">"3"</span>.charCodeAt(<span class="code-number">0</span>)},<span class="code-attr">parseId3TagSize</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e[t+<span class="code-number">6</span>]&lt;&lt;<span class="code-number">21</span>|e[t+<span class="code-number">7</span>]&lt;&lt;<span class="code-number">14</span>|e[t+<span class="code-number">8</span>]&lt;&lt;<span class="code-number">7</span>|e[t+<span class="code-number">9</span>];<span class="code-keyword">return</span>(<span class="code-number">16</span>&amp;e[t+<span class="code-number">5</span>])&gt;&gt;<span class="code-number">4</span>?i+<span class="code-number">20</span>:i+<span class="code-number">10</span>},<span class="code-attr">parseAdtsSize</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=(<span class="code-number">224</span>&amp;e[t+<span class="code-number">5</span>])&gt;&gt;<span class="code-number">5</span>,n=e[t+<span class="code-number">4</span>]&lt;&lt;<span class="code-number">3</span>;<span class="code-keyword">return</span> <span class="code-number">6144</span>&amp;e[t+<span class="code-number">3</span>]|n|i},<span class="code-attr">parseType</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e[t]===<span class="code-string">"I"</span>.charCodeAt(<span class="code-number">0</span>)&amp;&amp;e[t+<span class="code-number">1</span>]===<span class="code-string">"D"</span>.charCodeAt(<span class="code-number">0</span>)&amp;&amp;e[t+<span class="code-number">2</span>]===<span class="code-string">"3"</span>.charCodeAt(<span class="code-number">0</span>)?<span class="code-string">"timed-metadata"</span>:!<span class="code-number">0</span>&amp;e[t]&amp;&amp;<span class="code-number">240</span>==(<span class="code-number">240</span>&amp;e[t+<span class="code-number">1</span>])?<span class="code-string">"audio"</span>:<span class="code-literal">null</span>},<span class="code-attr">parseSampleRate</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">0</span>;t+<span class="code-number">5</span>&lt;e.length;){<span class="code-keyword">if</span>(<span class="code-number">255</span>===e[t]&amp;&amp;<span class="code-number">240</span>==(<span class="code-number">246</span>&amp;e[t+<span class="code-number">1</span>]))<span class="code-keyword">return</span> pn[(<span class="code-number">60</span>&amp;e[t+<span class="code-number">2</span>])&gt;&gt;&gt;<span class="code-number">2</span>];t++}<span class="code-keyword">return</span> <span class="code-literal">null</span>},<span class="code-attr">parseAacTimestamp</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n;t=<span class="code-number">10</span>,<span class="code-number">64</span>&amp;e[<span class="code-number">5</span>]&amp;&amp;(t+=<span class="code-number">4</span>,t+=mn(e.subarray(<span class="code-number">10</span>,<span class="code-number">14</span>)));<span class="code-keyword">do</span>{<span class="code-keyword">if</span>((i=mn(e.subarray(t+<span class="code-number">4</span>,t+<span class="code-number">8</span>)))&lt;<span class="code-number">1</span>)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(<span class="code-string">"PRIV"</span>===<span class="code-built_in">String</span>.fromCharCode(e[t],e[t+<span class="code-number">1</span>],e[t+<span class="code-number">2</span>],e[t+<span class="code-number">3</span>])){n=e.subarray(t+<span class="code-number">10</span>,t+i+<span class="code-number">10</span>);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;n.byteLength;r++)<span class="code-keyword">if</span>(<span class="code-number">0</span>===n[r]){<span class="code-keyword">if</span>(<span class="code-string">"com.apple.streaming.transportStreamTimestamp"</span>===<span class="code-built_in">unescape</span>(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r=<span class="code-string">""</span>;<span class="code-keyword">for</span>(n=t;n&lt;i;n++)r+=<span class="code-string">"%"</span>+(<span class="code-string">"00"</span>+e[n].toString(<span class="code-number">16</span>)).slice(<span class="code-number">-2</span>);<span class="code-keyword">return</span> r}(n,<span class="code-number">0</span>,r))){<span class="code-keyword">var</span> a=n.subarray(r+<span class="code-number">1</span>),s=(<span class="code-number">1</span>&amp;a[<span class="code-number">3</span>])&lt;&lt;<span class="code-number">30</span>|a[<span class="code-number">4</span>]&lt;&lt;<span class="code-number">22</span>|a[<span class="code-number">5</span>]&lt;&lt;<span class="code-number">14</span>|a[<span class="code-number">6</span>]&lt;&lt;<span class="code-number">6</span>|a[<span class="code-number">7</span>]&gt;&gt;&gt;<span class="code-number">2</span>;<span class="code-keyword">return</span> s*=<span class="code-number">4</span>,s+=<span class="code-number">3</span>&amp;a[<span class="code-number">7</span>]}<span class="code-keyword">break</span>}}t+=<span class="code-number">10</span>,t+=i}<span class="code-keyword">while</span>(t&lt;e.byteLength);<span class="code-keyword">return</span> <span class="code-literal">null</span>}},yn=<span class="code-number">9e4</span>,_n=(an=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">9e4</span>*e},sn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e*t},on=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e/<span class="code-number">9e4</span>},un=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e/t},nn),vn={};vn.ts=fn,vn.aac=gn;<span class="code-keyword">var</span> bn=yn,Tn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n,r,a,s,o=<span class="code-number">0</span>,u=<span class="code-number">188</span>,d=!<span class="code-number">1</span>;u&lt;=e.byteLength;)<span class="code-keyword">if</span>(<span class="code-number">71</span>!==e[o]||<span class="code-number">71</span>!==e[u]&amp;&amp;u!==e.byteLength)o++,u++;<span class="code-keyword">else</span>{<span class="code-keyword">switch</span>(n=e.subarray(o,u),vn.ts.parseType(n,t.pid)){<span class="code-keyword">case</span><span class="code-string">"pes"</span>:r=vn.ts.parsePesType(n,t.table),a=vn.ts.parsePayloadUnitStartIndicator(n),<span class="code-string">"audio"</span>===r&amp;&amp;a&amp;&amp;(s=vn.ts.parsePesTime(n))&amp;&amp;(s.type=<span class="code-string">"audio"</span>,i.audio.push(s),d=!<span class="code-number">0</span>)}<span class="code-keyword">if</span>(d)<span class="code-keyword">break</span>;o+=<span class="code-number">188</span>,u+=<span class="code-number">188</span>}<span class="code-keyword">for</span>(o=(u=e.byteLength)<span class="code-number">-188</span>,d=!<span class="code-number">1</span>;o&gt;=<span class="code-number">0</span>;)<span class="code-keyword">if</span>(<span class="code-number">71</span>!==e[o]||<span class="code-number">71</span>!==e[u]&amp;&amp;u!==e.byteLength)o--,u--;<span class="code-keyword">else</span>{<span class="code-keyword">switch</span>(n=e.subarray(o,u),vn.ts.parseType(n,t.pid)){<span class="code-keyword">case</span><span class="code-string">"pes"</span>:r=vn.ts.parsePesType(n,t.table),a=vn.ts.parsePayloadUnitStartIndicator(n),<span class="code-string">"audio"</span>===r&amp;&amp;a&amp;&amp;(s=vn.ts.parsePesTime(n))&amp;&amp;(s.type=<span class="code-string">"audio"</span>,i.audio.push(s),d=!<span class="code-number">0</span>)}<span class="code-keyword">if</span>(d)<span class="code-keyword">break</span>;o-=<span class="code-number">188</span>,u-=<span class="code-number">188</span>}},Sn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n,r,a,s,o,u,d,l=<span class="code-number">0</span>,h=<span class="code-number">188</span>,c=!<span class="code-number">1</span>,f={<span class="code-attr">data</span>:[],<span class="code-attr">size</span>:<span class="code-number">0</span>};h&lt;e.byteLength;)<span class="code-keyword">if</span>(<span class="code-number">71</span>!==e[l]||<span class="code-number">71</span>!==e[h])l++,h++;<span class="code-keyword">else</span>{<span class="code-keyword">switch</span>(n=e.subarray(l,h),vn.ts.parseType(n,t.pid)){<span class="code-keyword">case</span><span class="code-string">"pes"</span>:<span class="code-keyword">if</span>(r=vn.ts.parsePesType(n,t.table),a=vn.ts.parsePayloadUnitStartIndicator(n),<span class="code-string">"video"</span>===r&amp;&amp;(a&amp;&amp;!c&amp;&amp;(s=vn.ts.parsePesTime(n))&amp;&amp;(s.type=<span class="code-string">"video"</span>,i.video.push(s),c=!<span class="code-number">0</span>),!i.firstKeyFrame)){<span class="code-keyword">if</span>(a&amp;&amp;<span class="code-number">0</span>!==f.size){<span class="code-keyword">for</span>(o=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(f.size),u=<span class="code-number">0</span>;f.data.length;)d=f.data.shift(),o.set(d,u),u+=d.byteLength;<span class="code-keyword">if</span>(vn.ts.videoPacketContainsKeyFrame(o)){<span class="code-keyword">var</span> p=vn.ts.parsePesTime(o);p?(i.firstKeyFrame=p,i.firstKeyFrame.type=<span class="code-string">"video"</span>):<span class="code-built_in">console</span>.warn(<span class="code-string">"Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself."</span>)}f.size=<span class="code-number">0</span>}f.data.push(n),f.size+=n.byteLength}}<span class="code-keyword">if</span>(c&amp;&amp;i.firstKeyFrame)<span class="code-keyword">break</span>;l+=<span class="code-number">188</span>,h+=<span class="code-number">188</span>}<span class="code-keyword">for</span>(l=(h=e.byteLength)<span class="code-number">-188</span>,c=!<span class="code-number">1</span>;l&gt;=<span class="code-number">0</span>;)<span class="code-keyword">if</span>(<span class="code-number">71</span>!==e[l]||<span class="code-number">71</span>!==e[h])l--,h--;<span class="code-keyword">else</span>{<span class="code-keyword">switch</span>(n=e.subarray(l,h),vn.ts.parseType(n,t.pid)){<span class="code-keyword">case</span><span class="code-string">"pes"</span>:r=vn.ts.parsePesType(n,t.table),a=vn.ts.parsePayloadUnitStartIndicator(n),<span class="code-string">"video"</span>===r&amp;&amp;a&amp;&amp;(s=vn.ts.parsePesTime(n))&amp;&amp;(s.type=<span class="code-string">"video"</span>,i.video.push(s),c=!<span class="code-number">0</span>)}<span class="code-keyword">if</span>(c)<span class="code-keyword">break</span>;l-=<span class="code-number">188</span>,h-=<span class="code-number">188</span>}},kn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t={<span class="code-attr">pid</span>:<span class="code-literal">null</span>,<span class="code-attr">table</span>:<span class="code-literal">null</span>},i={};<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i,n=<span class="code-number">0</span>,r=<span class="code-number">188</span>;r&lt;e.byteLength;)<span class="code-keyword">if</span>(<span class="code-number">71</span>!==e[n]||<span class="code-number">71</span>!==e[r])n++,r++;<span class="code-keyword">else</span>{<span class="code-keyword">switch</span>(i=e.subarray(n,r),vn.ts.parseType(i,t.pid)){<span class="code-keyword">case</span><span class="code-string">"pat"</span>:t.pid||(t.pid=vn.ts.parsePat(i));<span class="code-keyword">break</span>;<span class="code-keyword">case</span><span class="code-string">"pmt"</span>:t.table||(t.table=vn.ts.parsePmt(i))}<span class="code-keyword">if</span>(t.pid&amp;&amp;t.table)<span class="code-keyword">return</span>;n+=<span class="code-number">188</span>,r+=<span class="code-number">188</span>}}(e,t),t.table){<span class="code-keyword">if</span>(t.table.hasOwnProperty(n))<span class="code-keyword">switch</span>(t.table[n]){<span class="code-keyword">case</span> Zi:i.video=[],Sn(e,t,i),<span class="code-number">0</span>===i.video.length&amp;&amp;<span class="code-keyword">delete</span> i.video;<span class="code-keyword">break</span>;<span class="code-keyword">case</span> en:i.audio=[],Tn(e,t,i),<span class="code-number">0</span>===i.audio.length&amp;&amp;<span class="code-keyword">delete</span> i.audio}}<span class="code-keyword">return</span> i},wn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i;<span class="code-keyword">return</span>(i=vn.aac.isLikelyAacData(e)?<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t,i=!<span class="code-number">1</span>,n=<span class="code-number">0</span>,r=<span class="code-literal">null</span>,a=<span class="code-literal">null</span>,s=<span class="code-number">0</span>,o=<span class="code-number">0</span>;e.length-o&gt;=<span class="code-number">3</span>;){<span class="code-keyword">switch</span>(vn.aac.parseType(e,o)){<span class="code-keyword">case</span><span class="code-string">"timed-metadata"</span>:<span class="code-keyword">if</span>(e.length-o&lt;<span class="code-number">10</span>){i=!<span class="code-number">0</span>;<span class="code-keyword">break</span>}<span class="code-keyword">if</span>((s=vn.aac.parseId3TagSize(e,o))&gt;e.length){i=!<span class="code-number">0</span>;<span class="code-keyword">break</span>}<span class="code-literal">null</span>===a&amp;&amp;(t=e.subarray(o,o+s),a=vn.aac.parseAacTimestamp(t)),o+=s;<span class="code-keyword">break</span>;<span class="code-keyword">case</span><span class="code-string">"audio"</span>:<span class="code-keyword">if</span>(e.length-o&lt;<span class="code-number">7</span>){i=!<span class="code-number">0</span>;<span class="code-keyword">break</span>}<span class="code-keyword">if</span>((s=vn.aac.parseAdtsSize(e,o))&gt;e.length){i=!<span class="code-number">0</span>;<span class="code-keyword">break</span>}<span class="code-literal">null</span>===r&amp;&amp;(t=e.subarray(o,o+s),r=vn.aac.parseSampleRate(t)),n++,o+=s;<span class="code-keyword">break</span>;<span class="code-keyword">default</span>:o++}<span class="code-keyword">if</span>(i)<span class="code-keyword">return</span> <span class="code-literal">null</span>}<span class="code-keyword">if</span>(<span class="code-literal">null</span>===r||<span class="code-literal">null</span>===a)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> u=bn/r;<span class="code-keyword">return</span>{<span class="code-attr">audio</span>:[{<span class="code-attr">type</span>:<span class="code-string">"audio"</span>,<span class="code-attr">dts</span>:a,<span class="code-attr">pts</span>:a},{<span class="code-attr">type</span>:<span class="code-string">"audio"</span>,<span class="code-attr">dts</span>:a+<span class="code-number">1024</span>*n*u,<span class="code-attr">pts</span>:a+<span class="code-number">1024</span>*n*u}]}}(e):kn(e))&amp;&amp;(i.audio||i.video)?(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(e.audio&amp;&amp;e.audio.length){<span class="code-keyword">var</span> i=t;<span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i=e.audio[<span class="code-number">0</span>].dts),e.audio.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.dts=_n(e.dts,i),e.pts=_n(e.pts,i),e.dtsTime=e.dts/bn,e.ptsTime=e.pts/bn})}<span class="code-keyword">if</span>(e.video&amp;&amp;e.video.length){<span class="code-keyword">var</span> n=t;<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n=e.video[<span class="code-number">0</span>].dts),e.video.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.dts=_n(e.dts,n),e.pts=_n(e.pts,n),e.dtsTime=e.dts/bn,e.ptsTime=e.pts/bn}),e.firstKeyFrame){<span class="code-keyword">var</span> r=e.firstKeyFrame;r.dts=_n(r.dts,n),r.pts=_n(r.pts,n),r.dtsTime=r.dts/bn,r.ptsTime=r.dts/bn}}}(i,t),i):<span class="code-literal">null</span>},Ln=[{<span class="code-attr">name</span>:<span class="code-string">"VOD"</span>,<span class="code-attr">run</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r</span>)</span>{<span class="code-keyword">if</span>(i!==<span class="code-number">1</span>/<span class="code-number">0</span>){<span class="code-keyword">return</span>{<span class="code-attr">time</span>:<span class="code-number">0</span>,<span class="code-attr">segmentIndex</span>:<span class="code-number">0</span>}}<span class="code-keyword">return</span> <span class="code-literal">null</span>}},{<span class="code-attr">name</span>:<span class="code-string">"ProgramDateTime"</span>,<span class="code-attr">run</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r</span>)</span>{<span class="code-keyword">if</span>(!e.datetimeToDisplayTime)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> a=t.segments||[],s=<span class="code-literal">null</span>,o=<span class="code-literal">null</span>;r=r||<span class="code-number">0</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> u=<span class="code-number">0</span>;u&lt;a.length;u++){<span class="code-keyword">var</span> d=a[u];<span class="code-keyword">if</span>(d.dateTimeObject){<span class="code-keyword">var</span> l=d.dateTimeObject.getTime()/<span class="code-number">1e3</span>+e.datetimeToDisplayTime,h=<span class="code-built_in">Math</span>.abs(r-l);<span class="code-keyword">if</span>(<span class="code-literal">null</span>!==o&amp;&amp;(<span class="code-number">0</span>===h||o&lt;h))<span class="code-keyword">break</span>;o=h,s={<span class="code-attr">time</span>:l,<span class="code-attr">segmentIndex</span>:u}}}<span class="code-keyword">return</span> s}},{<span class="code-attr">name</span>:<span class="code-string">"Segment"</span>,<span class="code-attr">run</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r</span>)</span>{<span class="code-keyword">var</span> a=t.segments||[],s=<span class="code-literal">null</span>,o=<span class="code-literal">null</span>;r=r||<span class="code-number">0</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> u=<span class="code-number">0</span>;u&lt;a.length;u++){<span class="code-keyword">var</span> d=a[u];<span class="code-keyword">if</span>(d.timeline===n&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==d.start){<span class="code-keyword">var</span> l=<span class="code-built_in">Math</span>.abs(r-d.start);<span class="code-keyword">if</span>(<span class="code-literal">null</span>!==o&amp;&amp;o&lt;l)<span class="code-keyword">break</span>;(!s||<span class="code-literal">null</span>===o||o&gt;=l)&amp;&amp;(o=l,s={<span class="code-attr">time</span>:d.start,<span class="code-attr">segmentIndex</span>:u})}}<span class="code-keyword">return</span> s}},{<span class="code-attr">name</span>:<span class="code-string">"Discontinuity"</span>,<span class="code-attr">run</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r</span>)</span>{<span class="code-keyword">var</span> a=<span class="code-literal">null</span>;<span class="code-keyword">if</span>(r=r||<span class="code-number">0</span>,t.discontinuityStarts&amp;&amp;t.discontinuityStarts.length)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> s=<span class="code-literal">null</span>,o=<span class="code-number">0</span>;o&lt;t.discontinuityStarts.length;o++){<span class="code-keyword">var</span> u=t.discontinuityStarts[o],d=t.discontinuitySequence+o+<span class="code-number">1</span>,l=e.discontinuities[d];<span class="code-keyword">if</span>(l){<span class="code-keyword">var</span> h=<span class="code-built_in">Math</span>.abs(r-l.time);<span class="code-keyword">if</span>(<span class="code-literal">null</span>!==s&amp;&amp;s&lt;h)<span class="code-keyword">break</span>;(!a||<span class="code-literal">null</span>===s||s&gt;=h)&amp;&amp;(s=h,a={<span class="code-attr">time</span>:l.time,<span class="code-attr">segmentIndex</span>:u})}}<span class="code-keyword">return</span> a}},{<span class="code-attr">name</span>:<span class="code-string">"Playlist"</span>,<span class="code-attr">run</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r</span>)</span>{<span class="code-keyword">return</span> t.syncInfo?{<span class="code-attr">time</span>:t.syncInfo.time,<span class="code-attr">segmentIndex</span>:t.syncInfo.mediaSequence-t.mediaSequence}:<span class="code-literal">null</span>}}],En=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params"></span>)</span>{_(<span class="code-keyword">this</span>,t);<span class="code-keyword">var</span> e=T(<span class="code-keyword">this</span>,(t.__proto__||<span class="code-built_in">Object</span>.getPrototypeOf(t)).call(<span class="code-keyword">this</span>));<span class="code-keyword">return</span> e.inspectCache_=<span class="code-keyword">void</span> <span class="code-number">0</span>,e.timelines=[],e.discontinuities=[],e.datetimeToDisplayTime=<span class="code-literal">null</span>,e.logger_=si(<span class="code-string">"SyncController"</span>),e}<span class="code-keyword">return</span> b(t,e),v(t,[{<span class="code-attr">key</span>:<span class="code-string">"getSyncPoint"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">var</span> r=<span class="code-keyword">this</span>.runStrategies_(e,t,i,n);<span class="code-keyword">return</span> r.length?<span class="code-keyword">this</span>.selectSyncPoint_(r,{<span class="code-attr">key</span>:<span class="code-string">"time"</span>,<span class="code-attr">value</span>:n}):<span class="code-literal">null</span>}},{<span class="code-attr">key</span>:<span class="code-string">"getExpiredTime"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!e||!e.segments)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.runStrategies_(e,t,e.discontinuitySequence,<span class="code-number">0</span>);<span class="code-keyword">if</span>(!i.length)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>.selectSyncPoint_(i,{<span class="code-attr">key</span>:<span class="code-string">"segmentIndex"</span>,<span class="code-attr">value</span>:<span class="code-number">0</span>});<span class="code-keyword">return</span> n.segmentIndex&gt;<span class="code-number">0</span>&amp;&amp;(n.time*=<span class="code-number">-1</span>),<span class="code-built_in">Math</span>.abs(n.time+x(e,n.segmentIndex,<span class="code-number">0</span>))}},{<span class="code-attr">key</span>:<span class="code-string">"runStrategies_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=[],a=<span class="code-number">0</span>;a&lt;Ln.length;a++){<span class="code-keyword">var</span> s=Ln[a],o=s.run(<span class="code-keyword">this</span>,e,t,i,n);o&amp;&amp;(o.strategy=s.name,r.push({<span class="code-attr">strategy</span>:s.name,<span class="code-attr">syncPoint</span>:o}))}<span class="code-keyword">return</span> r}},{<span class="code-attr">key</span>:<span class="code-string">"selectSyncPoint_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=e[<span class="code-number">0</span>].syncPoint,n=<span class="code-built_in">Math</span>.abs(e[<span class="code-number">0</span>].syncPoint[t.key]-t.value),r=e[<span class="code-number">0</span>].strategy,a=<span class="code-number">1</span>;a&lt;e.length;a++){<span class="code-keyword">var</span> s=<span class="code-built_in">Math</span>.abs(e[a].syncPoint[t.key]-t.value);s&lt;n&amp;&amp;(n=s,i=e[a].syncPoint,r=e[a].strategy)}<span class="code-keyword">return</span> <span class="code-keyword">this</span>.logger_(<span class="code-string">"syncPoint for ["</span>+t.key+<span class="code-string">": "</span>+t.value+<span class="code-string">"] chosen with strategy ["</span>+r+<span class="code-string">"]: [time:"</span>+i.time+<span class="code-string">", segmentIndex:"</span>+i.segmentIndex+<span class="code-string">"]"</span>),i}},{<span class="code-attr">key</span>:<span class="code-string">"saveExpiredSegmentInfo"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=t.mediaSequence-e.mediaSequence<span class="code-number">-1</span>;i&gt;=<span class="code-number">0</span>;i--){<span class="code-keyword">var</span> n=e.segments[i];<span class="code-keyword">if</span>(n&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==n.start){t.syncInfo={<span class="code-attr">mediaSequence</span>:e.mediaSequence+i,<span class="code-attr">time</span>:n.start},<span class="code-keyword">this</span>.logger_(<span class="code-string">"playlist refresh sync: [time:"</span>+t.syncInfo.time+<span class="code-string">", mediaSequence: "</span>+t.syncInfo.mediaSequence+<span class="code-string">"]"</span>),<span class="code-keyword">this</span>.trigger(<span class="code-string">"syncinfoupdate"</span>);<span class="code-keyword">break</span>}}}},{<span class="code-attr">key</span>:<span class="code-string">"setDateTimeMapping"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.datetimeToDisplayTime&amp;&amp;e.segments&amp;&amp;e.segments.length&amp;&amp;e.segments[<span class="code-number">0</span>].dateTimeObject){<span class="code-keyword">var</span> t=e.segments[<span class="code-number">0</span>].dateTimeObject.getTime()/<span class="code-number">1e3</span>;<span class="code-keyword">this</span>.datetimeToDisplayTime=-t}}},{<span class="code-attr">key</span>:<span class="code-string">"reset"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.inspectCache_=<span class="code-keyword">void</span> <span class="code-number">0</span>}},{<span class="code-attr">key</span>:<span class="code-string">"probeSegmentInfo"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segment,i=e.playlist,n=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">return</span>(n=t.map?<span class="code-keyword">this</span>.probeMp4Segment_(e):<span class="code-keyword">this</span>.probeTsSegment_(e))&amp;&amp;<span class="code-keyword">this</span>.calculateSegmentTimeMapping_(e,n)&amp;&amp;(<span class="code-keyword">this</span>.saveDiscontinuitySyncInfo_(e),i.syncInfo||(i.syncInfo={<span class="code-attr">mediaSequence</span>:i.mediaSequence+e.mediaIndex,<span class="code-attr">time</span>:t.start})),n}},{<span class="code-attr">key</span>:<span class="code-string">"probeMp4Segment_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segment,i=yi.timescale(t.map.bytes),n=yi.compositionStartTime(i,e.bytes);<span class="code-keyword">return</span> <span class="code-literal">null</span>!==e.timestampOffset&amp;&amp;(e.timestampOffset-=n),{<span class="code-attr">start</span>:n,<span class="code-attr">end</span>:n+t.duration}}},{<span class="code-attr">key</span>:<span class="code-string">"probeTsSegment_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=wn(e.bytes,<span class="code-keyword">this</span>.inspectCache_),i=<span class="code-keyword">void</span> <span class="code-number">0</span>,n=<span class="code-keyword">void</span> <span class="code-number">0</span>,r=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">return</span> t?(t.video&amp;&amp;<span class="code-number">2</span>===t.video.length?(<span class="code-keyword">this</span>.inspectCache_=t.video[<span class="code-number">1</span>].dts,i=t.video[<span class="code-number">0</span>].dtsTime,n=t.video[<span class="code-number">1</span>].dtsTime,r=t.video):t.audio&amp;&amp;<span class="code-number">2</span>===t.audio.length&amp;&amp;(<span class="code-keyword">this</span>.inspectCache_=t.audio[<span class="code-number">1</span>].dts,i=t.audio[<span class="code-number">0</span>].dtsTime,n=t.audio[<span class="code-number">1</span>].dtsTime,r=t.audio),{<span class="code-attr">segmentTimestampInfo</span>:r,<span class="code-attr">start</span>:i,<span class="code-attr">end</span>:n,<span class="code-attr">containsVideo</span>:t.video&amp;&amp;<span class="code-number">2</span>===t.video.length,<span class="code-attr">containsAudio</span>:t.audio&amp;&amp;<span class="code-number">2</span>===t.audio.length}):<span class="code-literal">null</span>}},{<span class="code-attr">key</span>:<span class="code-string">"timestampOffsetForTimeline"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===<span class="code-keyword">this</span>.timelines[e]?<span class="code-literal">null</span>:<span class="code-keyword">this</span>.timelines[e].time}},{<span class="code-attr">key</span>:<span class="code-string">"mappingForTimeline"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===<span class="code-keyword">this</span>.timelines[e]?<span class="code-literal">null</span>:<span class="code-keyword">this</span>.timelines[e].mapping}},{<span class="code-attr">key</span>:<span class="code-string">"calculateSegmentTimeMapping_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e.segment,n=<span class="code-keyword">this</span>.timelines[e.timeline];<span class="code-keyword">if</span>(<span class="code-literal">null</span>!==e.timestampOffset)n={<span class="code-attr">time</span>:e.startOfSegment,<span class="code-attr">mapping</span>:e.startOfSegment-t.start},<span class="code-keyword">this</span>.timelines[e.timeline]=n,<span class="code-keyword">this</span>.trigger(<span class="code-string">"timestampoffset"</span>),<span class="code-keyword">this</span>.logger_(<span class="code-string">"time mapping for timeline "</span>+e.timeline+<span class="code-string">": [time: "</span>+n.time+<span class="code-string">"] [mapping: "</span>+n.mapping+<span class="code-string">"]"</span>),i.start=e.startOfSegment,i.end=t.end+n.mapping;<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(!n)<span class="code-keyword">return</span>!<span class="code-number">1</span>;i.start=t.start+n.mapping,i.end=t.end+n.mapping}<span class="code-keyword">return</span>!<span class="code-number">0</span>}},{<span class="code-attr">key</span>:<span class="code-string">"saveDiscontinuitySyncInfo_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.playlist,i=e.segment;<span class="code-keyword">if</span>(i.discontinuity)<span class="code-keyword">this</span>.discontinuities[i.timeline]={<span class="code-attr">time</span>:i.start,<span class="code-attr">accuracy</span>:<span class="code-number">0</span>};<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t.discontinuityStarts&amp;&amp;t.discontinuityStarts.length)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=<span class="code-number">0</span>;n&lt;t.discontinuityStarts.length;n++){<span class="code-keyword">var</span> r=t.discontinuityStarts[n],a=t.discontinuitySequence+n+<span class="code-number">1</span>,s=r-e.mediaIndex,o=<span class="code-built_in">Math</span>.abs(s);<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.discontinuities[a]||<span class="code-keyword">this</span>.discontinuities[a].accuracy&gt;o){<span class="code-keyword">var</span> u=<span class="code-keyword">void</span> <span class="code-number">0</span>;u=s&lt;<span class="code-number">0</span>?i.start-x(t,e.mediaIndex,r):i.end+x(t,e.mediaIndex+<span class="code-number">1</span>,r),<span class="code-keyword">this</span>.discontinuities[a]={<span class="code-attr">time</span>:u,<span class="code-attr">accuracy</span>:o}}}}}]),t}(t.EventTarget),Un=<span class="code-keyword">new</span> De(<span class="code-string">"./decrypter-worker.worker.js"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>;!<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!(e <span class="code-keyword">instanceof</span> t))<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">TypeError</span>(<span class="code-string">"Cannot call a class as a function"</span>)},t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;t.length;i++){<span class="code-keyword">var</span> n=t[i];n.enumerable=n.enumerable||!<span class="code-number">1</span>,n.configurable=!<span class="code-number">0</span>,<span class="code-string">"value"</span><span class="code-keyword">in</span> n&amp;&amp;(n.writable=!<span class="code-number">0</span>),<span class="code-built_in">Object</span>.defineProperty(e,n.key,n)}}<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i,n</span>)</span>{<span class="code-keyword">return</span> i&amp;&amp;e(t.prototype,i),n&amp;&amp;e(t,n),t}}(),n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!e)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">ReferenceError</span>(<span class="code-string">"this hasn't been initialised - super() hasn't been called"</span>);<span class="code-keyword">return</span>!t||<span class="code-string">"object"</span>!=<span class="code-keyword">typeof</span> t&amp;&amp;<span class="code-string">"function"</span>!=<span class="code-keyword">typeof</span> t?e:t},r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[<span class="code-number">0</span>],i=e[<span class="code-number">1</span>],n=t[<span class="code-number">4</span>],r=i[<span class="code-number">4</span>],a=<span class="code-keyword">void</span> <span class="code-number">0</span>,s=<span class="code-keyword">void</span> <span class="code-number">0</span>,o=<span class="code-keyword">void</span> <span class="code-number">0</span>,u=[],d=[],l=<span class="code-keyword">void</span> <span class="code-number">0</span>,h=<span class="code-keyword">void</span> <span class="code-number">0</span>,c=<span class="code-keyword">void</span> <span class="code-number">0</span>,f=<span class="code-keyword">void</span> <span class="code-number">0</span>,p=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">for</span>(a=<span class="code-number">0</span>;a&lt;<span class="code-number">256</span>;a++)d[(u[a]=a&lt;&lt;<span class="code-number">1</span>^<span class="code-number">283</span>*(a&gt;&gt;<span class="code-number">7</span>))^a]=a;<span class="code-keyword">for</span>(s=o=<span class="code-number">0</span>;!n[s];s^=l||<span class="code-number">1</span>,o=d[o]||<span class="code-number">1</span>)<span class="code-keyword">for</span>(c=(c=o^o&lt;&lt;<span class="code-number">1</span>^o&lt;&lt;<span class="code-number">2</span>^o&lt;&lt;<span class="code-number">3</span>^o&lt;&lt;<span class="code-number">4</span>)&gt;&gt;<span class="code-number">8</span>^<span class="code-number">255</span>&amp;c^<span class="code-number">99</span>,n[s]=c,r[c]=s,p=<span class="code-number">16843009</span>*u[h=u[l=u[s]]]^<span class="code-number">65537</span>*h^<span class="code-number">257</span>*l^<span class="code-number">16843008</span>*s,f=<span class="code-number">257</span>*u[c]^<span class="code-number">16843008</span>*c,a=<span class="code-number">0</span>;a&lt;<span class="code-number">4</span>;a++)t[a][s]=f=f&lt;&lt;<span class="code-number">24</span>^f&gt;&gt;&gt;<span class="code-number">8</span>,i[a][c]=p=p&lt;&lt;<span class="code-number">24</span>^p&gt;&gt;&gt;<span class="code-number">8</span>;<span class="code-keyword">for</span>(a=<span class="code-number">0</span>;a&lt;<span class="code-number">5</span>;a++)t[a]=t[a].slice(<span class="code-number">0</span>),i[a]=i[a].slice(<span class="code-number">0</span>);<span class="code-keyword">return</span> e},a=<span class="code-literal">null</span>,s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">i</span>)</span>{e(<span class="code-keyword">this</span>,t),a||(a=r()),<span class="code-keyword">this</span>._tables=[[a[<span class="code-number">0</span>][<span class="code-number">0</span>].slice(),a[<span class="code-number">0</span>][<span class="code-number">1</span>].slice(),a[<span class="code-number">0</span>][<span class="code-number">2</span>].slice(),a[<span class="code-number">0</span>][<span class="code-number">3</span>].slice(),a[<span class="code-number">0</span>][<span class="code-number">4</span>].slice()],[a[<span class="code-number">1</span>][<span class="code-number">0</span>].slice(),a[<span class="code-number">1</span>][<span class="code-number">1</span>].slice(),a[<span class="code-number">1</span>][<span class="code-number">2</span>].slice(),a[<span class="code-number">1</span>][<span class="code-number">3</span>].slice(),a[<span class="code-number">1</span>][<span class="code-number">4</span>].slice()]];<span class="code-keyword">var</span> n=<span class="code-keyword">void</span> <span class="code-number">0</span>,s=<span class="code-keyword">void</span> <span class="code-number">0</span>,o=<span class="code-keyword">void</span> <span class="code-number">0</span>,u=<span class="code-keyword">void</span> <span class="code-number">0</span>,d=<span class="code-keyword">void</span> <span class="code-number">0</span>,l=<span class="code-keyword">this</span>._tables[<span class="code-number">0</span>][<span class="code-number">4</span>],h=<span class="code-keyword">this</span>._tables[<span class="code-number">1</span>],c=i.length,f=<span class="code-number">1</span>;<span class="code-keyword">if</span>(<span class="code-number">4</span>!==c&amp;&amp;<span class="code-number">6</span>!==c&amp;&amp;<span class="code-number">8</span>!==c)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Invalid aes key size"</span>);<span class="code-keyword">for</span>(u=i.slice(<span class="code-number">0</span>),d=[],<span class="code-keyword">this</span>._key=[u,d],n=c;n&lt;<span class="code-number">4</span>*c+<span class="code-number">28</span>;n++)o=u[n<span class="code-number">-1</span>],(n%c==<span class="code-number">0</span>||<span class="code-number">8</span>===c&amp;&amp;n%c==<span class="code-number">4</span>)&amp;&amp;(o=l[o&gt;&gt;&gt;<span class="code-number">24</span>]&lt;&lt;<span class="code-number">24</span>^l[o&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]&lt;&lt;<span class="code-number">16</span>^l[o&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]&lt;&lt;<span class="code-number">8</span>^l[<span class="code-number">255</span>&amp;o],n%c==<span class="code-number">0</span>&amp;&amp;(o=o&lt;&lt;<span class="code-number">8</span>^o&gt;&gt;&gt;<span class="code-number">24</span>^f&lt;&lt;<span class="code-number">24</span>,f=f&lt;&lt;<span class="code-number">1</span>^<span class="code-number">283</span>*(f&gt;&gt;<span class="code-number">7</span>))),u[n]=u[n-c]^o;<span class="code-keyword">for</span>(s=<span class="code-number">0</span>;n;s++,n--)o=u[<span class="code-number">3</span>&amp;s?n:n<span class="code-number">-4</span>],d[s]=n&lt;=<span class="code-number">4</span>||s&lt;<span class="code-number">4</span>?o:h[<span class="code-number">0</span>][l[o&gt;&gt;&gt;<span class="code-number">24</span>]]^h[<span class="code-number">1</span>][l[o&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]]^h[<span class="code-number">2</span>][l[o&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]]^h[<span class="code-number">3</span>][l[<span class="code-number">255</span>&amp;o]]}<span class="code-keyword">return</span> t.prototype.decrypt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r,a</span>)</span>{<span class="code-keyword">var</span> s=<span class="code-keyword">this</span>._key[<span class="code-number">1</span>],o=e^s[<span class="code-number">0</span>],u=n^s[<span class="code-number">1</span>],d=i^s[<span class="code-number">2</span>],l=t^s[<span class="code-number">3</span>],h=<span class="code-keyword">void</span> <span class="code-number">0</span>,c=<span class="code-keyword">void</span> <span class="code-number">0</span>,f=<span class="code-keyword">void</span> <span class="code-number">0</span>,p=s.length/<span class="code-number">4</span><span class="code-number">-2</span>,m=<span class="code-keyword">void</span> <span class="code-number">0</span>,g=<span class="code-number">4</span>,y=<span class="code-keyword">this</span>._tables[<span class="code-number">1</span>],_=y[<span class="code-number">0</span>],v=y[<span class="code-number">1</span>],b=y[<span class="code-number">2</span>],T=y[<span class="code-number">3</span>],S=y[<span class="code-number">4</span>];<span class="code-keyword">for</span>(m=<span class="code-number">0</span>;m&lt;p;m++)h=_[o&gt;&gt;&gt;<span class="code-number">24</span>]^v[u&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]^b[d&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]^T[<span class="code-number">255</span>&amp;l]^s[g],c=_[u&gt;&gt;&gt;<span class="code-number">24</span>]^v[d&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]^b[l&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]^T[<span class="code-number">255</span>&amp;o]^s[g+<span class="code-number">1</span>],f=_[d&gt;&gt;&gt;<span class="code-number">24</span>]^v[l&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]^b[o&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]^T[<span class="code-number">255</span>&amp;u]^s[g+<span class="code-number">2</span>],l=_[l&gt;&gt;&gt;<span class="code-number">24</span>]^v[o&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]^b[u&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]^T[<span class="code-number">255</span>&amp;d]^s[g+<span class="code-number">3</span>],g+=<span class="code-number">4</span>,o=h,u=c,d=f;<span class="code-keyword">for</span>(m=<span class="code-number">0</span>;m&lt;<span class="code-number">4</span>;m++)r[(<span class="code-number">3</span>&amp;-m)+a]=S[o&gt;&gt;&gt;<span class="code-number">24</span>]&lt;&lt;<span class="code-number">24</span>^S[u&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]&lt;&lt;<span class="code-number">16</span>^S[d&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]&lt;&lt;<span class="code-number">8</span>^S[<span class="code-number">255</span>&amp;l]^s[g++],h=o,o=u,u=d,d=l,l=h},t}(),o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params"></span>)</span>{e(<span class="code-keyword">this</span>,t),<span class="code-keyword">this</span>.listeners={}}<span class="code-keyword">return</span> t.prototype.on=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.listeners[e]||(<span class="code-keyword">this</span>.listeners[e]=[]),<span class="code-keyword">this</span>.listeners[e].push(t)},t.prototype.off=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.listeners[e])<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.listeners[e].indexOf(t);<span class="code-keyword">return</span> <span class="code-keyword">this</span>.listeners[e].splice(i,<span class="code-number">1</span>),i&gt;<span class="code-number">-1</span>},t.prototype.trigger=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.listeners[e];<span class="code-keyword">if</span>(t)<span class="code-keyword">if</span>(<span class="code-number">2</span>===<span class="code-built_in">arguments</span>.length)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=t.length,n=<span class="code-number">0</span>;n&lt;i;++n)t[n].call(<span class="code-keyword">this</span>,<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]);<span class="code-keyword">else</span> <span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-built_in">Array</span>.prototype.slice.call(<span class="code-built_in">arguments</span>,<span class="code-number">1</span>),a=t.length,s=<span class="code-number">0</span>;s&lt;a;++s)t[s].apply(<span class="code-keyword">this</span>,r)},t.prototype.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.listeners={}},t.prototype.pipe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.on(<span class="code-string">"data"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.push(t)})},t}(),u=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">i</span>(<span class="code-params"></span>)</span>{e(<span class="code-keyword">this</span>,i);<span class="code-keyword">var</span> r=n(<span class="code-keyword">this</span>,t.call(<span class="code-keyword">this</span>,o));<span class="code-keyword">return</span> r.jobs=[],r.delay=<span class="code-number">1</span>,r.timeout_=<span class="code-literal">null</span>,r}<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"function"</span>!=<span class="code-keyword">typeof</span> t&amp;&amp;<span class="code-literal">null</span>!==t)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">TypeError</span>(<span class="code-string">"Super expression must either be null or a function, not "</span>+<span class="code-keyword">typeof</span> t);e.prototype=<span class="code-built_in">Object</span>.create(t&amp;&amp;t.prototype,{<span class="code-attr">constructor</span>:{<span class="code-attr">value</span>:e,<span class="code-attr">enumerable</span>:!<span class="code-number">1</span>,<span class="code-attr">writable</span>:!<span class="code-number">0</span>,<span class="code-attr">configurable</span>:!<span class="code-number">0</span>}}),t&amp;&amp;(<span class="code-built_in">Object</span>.setPrototypeOf?<span class="code-built_in">Object</span>.setPrototypeOf(e,t):e.__proto__=t)}(i,t),i.prototype.processJob_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.jobs.shift()(),<span class="code-keyword">this</span>.jobs.length?<span class="code-keyword">this</span>.timeout_=setTimeout(<span class="code-keyword">this</span>.processJob_.bind(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.delay):<span class="code-keyword">this</span>.timeout_=<span class="code-literal">null</span>},i.prototype.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.jobs.push(e),<span class="code-keyword">this</span>.timeout_||(<span class="code-keyword">this</span>.timeout_=setTimeout(<span class="code-keyword">this</span>.processJob_.bind(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.delay))},i}(o),d=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&lt;&lt;<span class="code-number">24</span>|(<span class="code-number">65280</span>&amp;e)&lt;&lt;<span class="code-number">8</span>|(<span class="code-number">16711680</span>&amp;e)&gt;&gt;<span class="code-number">8</span>|e&gt;&gt;&gt;<span class="code-number">24</span>},l=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">i</span>(<span class="code-params">t,n,r,a</span>)</span>{e(<span class="code-keyword">this</span>,i);<span class="code-keyword">var</span> s=i.STEP,o=<span class="code-keyword">new</span> <span class="code-built_in">Int32Array</span>(t.buffer),l=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(t.byteLength),h=<span class="code-number">0</span>;<span class="code-keyword">for</span>(<span class="code-keyword">this</span>.asyncStream_=<span class="code-keyword">new</span> u,<span class="code-keyword">this</span>.asyncStream_.push(<span class="code-keyword">this</span>.decryptChunk_(o.subarray(h,h+s),n,r,l)),h=s;h&lt;o.length;h+=s)r=<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>([d(o[h<span class="code-number">-4</span>]),d(o[h<span class="code-number">-3</span>]),d(o[h<span class="code-number">-2</span>]),d(o[h<span class="code-number">-1</span>])]),<span class="code-keyword">this</span>.asyncStream_.push(<span class="code-keyword">this</span>.decryptChunk_(o.subarray(h,h+s),n,r,l));<span class="code-keyword">this</span>.asyncStream_.push(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e;a(<span class="code-literal">null</span>,(e=l).subarray(<span class="code-number">0</span>,e.byteLength-e[e.byteLength<span class="code-number">-1</span>]))})}<span class="code-keyword">return</span> i.prototype.decryptChunk_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-keyword">new</span> <span class="code-built_in">Int32Array</span>(e.buffer,e.byteOffset,e.byteLength&gt;&gt;<span class="code-number">2</span>),r=<span class="code-keyword">new</span> s(<span class="code-built_in">Array</span>.prototype.slice.call(t)),a=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.byteLength),o=<span class="code-keyword">new</span> <span class="code-built_in">Int32Array</span>(a.buffer),u=<span class="code-keyword">void</span> <span class="code-number">0</span>,l=<span class="code-keyword">void</span> <span class="code-number">0</span>,h=<span class="code-keyword">void</span> <span class="code-number">0</span>,c=<span class="code-keyword">void</span> <span class="code-number">0</span>,f=<span class="code-keyword">void</span> <span class="code-number">0</span>,p=<span class="code-keyword">void</span> <span class="code-number">0</span>,m=<span class="code-keyword">void</span> <span class="code-number">0</span>,g=<span class="code-keyword">void</span> <span class="code-number">0</span>,y=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">for</span>(u=i[<span class="code-number">0</span>],l=i[<span class="code-number">1</span>],h=i[<span class="code-number">2</span>],c=i[<span class="code-number">3</span>],y=<span class="code-number">0</span>;y&lt;n.length;y+=<span class="code-number">4</span>)f=d(n[y]),p=d(n[y+<span class="code-number">1</span>]),m=d(n[y+<span class="code-number">2</span>]),g=d(n[y+<span class="code-number">3</span>]),r.decrypt(f,p,m,g,o,y),o[y]=d(o[y]^u),o[y+<span class="code-number">1</span>]=d(o[y+<span class="code-number">1</span>]^l),o[y+<span class="code-number">2</span>]=d(o[y+<span class="code-number">2</span>]^h),o[y+<span class="code-number">3</span>]=d(o[y+<span class="code-number">3</span>]^c),u=f,l=p,h=m,c=g;<span class="code-keyword">return</span> a}(e,t,i);n.set(r,e.byteOffset)}},t(i,<span class="code-literal">null</span>,[{<span class="code-attr">key</span>:<span class="code-string">"STEP"</span>,<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-number">32e3</span>}}]),i}();<span class="code-keyword">new</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.onmessage=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i=t.data,n=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(i.encrypted.bytes,i.encrypted.byteOffset,i.encrypted.byteLength),r=<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>(i.key.bytes,i.key.byteOffset,i.key.byteLength/<span class="code-number">4</span>),a=<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>(i.iv.bytes,i.iv.byteOffset,i.iv.byteLength/<span class="code-number">4</span>);<span class="code-keyword">new</span> l(n,r,a,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,n</span>)</span>{<span class="code-keyword">var</span> r,a;e.postMessage((r={<span class="code-attr">source</span>:i.source,<span class="code-attr">decrypted</span>:n},a={},<span class="code-built_in">Object</span>.keys(r).forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=r[e];<span class="code-built_in">ArrayBuffer</span>.isView(t)?a[e]={<span class="code-attr">bytes</span>:t.buffer,<span class="code-attr">byteOffset</span>:t.byteOffset,<span class="code-attr">byteLength</span>:t.byteLength}:a[e]=t}),a),[n.buffer])})}}(i)}()}),In=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.default?<span class="code-string">"main"</span>:<span class="code-string">"alternative"</span>;<span class="code-keyword">return</span> e.characteristics&amp;&amp;e.characteristics.indexOf(<span class="code-string">"public.accessibility.describes-video"</span>)&gt;=<span class="code-number">0</span>&amp;&amp;(t=<span class="code-string">"main-desc"</span>),t},An=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{e.abort(),e.pause(),t&amp;&amp;t.activePlaylistLoader&amp;&amp;(t.activePlaylistLoader.pause(),t.activePlaylistLoader=<span class="code-literal">null</span>)},On=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{t.activePlaylistLoader=e,e.load()},Cn={<span class="code-attr">AUDIO</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> n=i.segmentLoaders[e],r=i.mediaTypes[e],a=i.blacklistCurrentPlaylist;An(n,r);<span class="code-keyword">var</span> s=r.activeTrack(),o=r.activeGroup(),u=(o.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.default})[<span class="code-number">0</span>]||o[<span class="code-number">0</span>]).id,d=r.tracks[u];<span class="code-keyword">if</span>(s!==d){<span class="code-keyword">for</span>(<span class="code-keyword">var</span> l <span class="code-keyword">in</span> t.log.warn(<span class="code-string">"Problem encountered loading the alternate audio track.Switching back to default."</span>),r.tracks)r.tracks[l].enabled=r.tracks[l]===d;r.onTrackChanged()}<span class="code-keyword">else</span> a({<span class="code-attr">message</span>:<span class="code-string">"Problem encountered loading the default audio track."</span>})}},<span class="code-attr">SUBTITLES</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> n=i.segmentLoaders[e],r=i.mediaTypes[e];t.log.warn(<span class="code-string">"Problem encountered loading the subtitle track.Disabling subtitle track."</span>),An(n,r);<span class="code-keyword">var</span> a=r.activeTrack();a&amp;&amp;(a.mode=<span class="code-string">"disabled"</span>),r.onTrackChanged()}}},Pn={<span class="code-attr">AUDIO</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(t){<span class="code-keyword">var</span> n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e];t.on(<span class="code-string">"loadedmetadata"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=t.media();a.playlist(e,r),(!n.paused()||e.endList&amp;&amp;<span class="code-string">"none"</span>!==n.preload())&amp;&amp;a.load()}),t.on(<span class="code-string">"loadedplaylist"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{a.playlist(t.media(),r),n.paused()||a.load()}),t.on(<span class="code-string">"error"</span>,Cn[e](e,i))}},<span class="code-attr">SUBTITLES</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e],s=i.mediaTypes[e];t.on(<span class="code-string">"loadedmetadata"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=t.media();a.playlist(e,r),a.track(s.activeTrack()),(!n.paused()||e.endList&amp;&amp;<span class="code-string">"none"</span>!==n.preload())&amp;&amp;a.load()}),t.on(<span class="code-string">"loadedplaylist"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{a.playlist(t.media(),r),n.paused()||a.load()}),t.on(<span class="code-string">"error"</span>,Cn[e](e,i))}},Dn={<span class="code-attr">AUDIO</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">var</span> n=i.hls,r=i.sourceType,a=i.segmentLoaders[e],s=i.requestOptions,o=i.master.mediaGroups,u=i.mediaTypes[e],d=u.groups,l=u.tracks,h=i.masterPlaylistLoader;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> c <span class="code-keyword">in</span> o[e]&amp;&amp;<span class="code-number">0</span>!==<span class="code-built_in">Object</span>.keys(o[e]).length||(o[e]={<span class="code-attr">main</span>:{<span class="code-attr">default</span>:{<span class="code-attr">default</span>:!<span class="code-number">0</span>}}}),o[e])<span class="code-keyword">for</span>(<span class="code-keyword">var</span> f <span class="code-keyword">in</span> d[c]||(d[c]=[]),o[e][c]){<span class="code-keyword">var</span> p=o[e][c][f],m=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">if</span>(m=p.resolvedUri?<span class="code-keyword">new</span> C(p.resolvedUri,n,s):p.playlists&amp;&amp;<span class="code-string">"dash"</span>===r?<span class="code-keyword">new</span> ai(p.playlists[<span class="code-number">0</span>],n,s,h):<span class="code-literal">null</span>,p=t.mergeOptions({<span class="code-attr">id</span>:f,<span class="code-attr">playlistLoader</span>:m},p),Pn[e](e,p.playlistLoader,i),d[c].push(p),<span class="code-keyword">void</span> <span class="code-number">0</span>===l[f]){<span class="code-keyword">var</span> g=<span class="code-keyword">new</span> t.AudioTrack({<span class="code-attr">id</span>:f,<span class="code-attr">kind</span>:In(p),<span class="code-attr">enabled</span>:!<span class="code-number">1</span>,<span class="code-attr">language</span>:p.language,<span class="code-attr">default</span>:p.default,<span class="code-attr">label</span>:f});l[f]=g}}a.on(<span class="code-string">"error"</span>,Cn[e](e,i))},<span class="code-attr">SUBTITLES</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">var</span> n=i.tech,r=i.hls,a=i.sourceType,s=i.segmentLoaders[e],o=i.requestOptions,u=i.master.mediaGroups,d=i.mediaTypes[e],l=d.groups,h=d.tracks,c=i.masterPlaylistLoader;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> f <span class="code-keyword">in</span> u[e])<span class="code-keyword">for</span>(<span class="code-keyword">var</span> p <span class="code-keyword">in</span> l[f]||(l[f]=[]),u[e][f])<span class="code-keyword">if</span>(!u[e][f][p].forced){<span class="code-keyword">var</span> m=u[e][f][p],g=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">if</span>(<span class="code-string">"hls"</span>===a?g=<span class="code-keyword">new</span> C(m.resolvedUri,r,o):<span class="code-string">"dash"</span>===a&amp;&amp;(g=<span class="code-keyword">new</span> ai(m.playlists[<span class="code-number">0</span>],r,o,c)),m=t.mergeOptions({<span class="code-attr">id</span>:p,<span class="code-attr">playlistLoader</span>:g},m),Pn[e](e,m.playlistLoader,i),l[f].push(m),<span class="code-keyword">void</span> <span class="code-number">0</span>===h[p]){<span class="code-keyword">var</span> y=n.addRemoteTextTrack({<span class="code-attr">id</span>:p,<span class="code-attr">kind</span>:<span class="code-string">"subtitles"</span>,<span class="code-attr">default</span>:m.default&amp;&amp;m.autoselect,<span class="code-attr">language</span>:m.language,<span class="code-attr">label</span>:p},!<span class="code-number">1</span>).track;h[p]=y}}s.on(<span class="code-string">"error"</span>,Cn[e](e,i))},<span class="code-string">"CLOSED-CAPTIONS"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">var</span> n=i.tech,r=i.master.mediaGroups,a=i.mediaTypes[e],s=a.groups,o=a.tracks;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> u <span class="code-keyword">in</span> r[e])<span class="code-keyword">for</span>(<span class="code-keyword">var</span> d <span class="code-keyword">in</span> s[u]||(s[u]=[]),r[e][u]){<span class="code-keyword">var</span> l=r[e][u][d];<span class="code-keyword">if</span>(l.instreamId.match(<span class="code-regexp">/CC\d/</span>)&amp;&amp;(s[u].push(t.mergeOptions({<span class="code-attr">id</span>:d},l)),<span class="code-keyword">void</span> <span class="code-number">0</span>===o[d])){<span class="code-keyword">var</span> h=n.addRemoteTextTrack({<span class="code-attr">id</span>:l.instreamId,<span class="code-attr">kind</span>:<span class="code-string">"captions"</span>,<span class="code-attr">default</span>:l.default&amp;&amp;l.autoselect,<span class="code-attr">language</span>:l.language,<span class="code-attr">label</span>:d},!<span class="code-number">1</span>).track;o[d]=h}}}},Rn={<span class="code-attr">AUDIO</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i=t.mediaTypes[e].tracks;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> i)<span class="code-keyword">if</span>(i[n].enabled)<span class="code-keyword">return</span> i[n];<span class="code-keyword">return</span> <span class="code-literal">null</span>}},<span class="code-attr">SUBTITLES</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i=t.mediaTypes[e].tracks;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> i)<span class="code-keyword">if</span>(<span class="code-string">"showing"</span>===i[n].mode)<span class="code-keyword">return</span> i[n];<span class="code-keyword">return</span> <span class="code-literal">null</span>}}},xn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{[<span class="code-string">"AUDIO"</span>,<span class="code-string">"SUBTITLES"</span>,<span class="code-string">"CLOSED-CAPTIONS"</span>].forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{Dn[t](t,e)});<span class="code-keyword">var</span> t=e.mediaTypes,i=e.masterPlaylistLoader,n=e.tech,r=e.hls;[<span class="code-string">"AUDIO"</span>,<span class="code-string">"SUBTITLES"</span>].forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{t[i].activeGroup=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n=t.masterPlaylistLoader,r=t.mediaTypes[e].groups,a=n.media();<span class="code-keyword">if</span>(!a)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> s=<span class="code-literal">null</span>;<span class="code-keyword">return</span> a.attributes[e]&amp;&amp;(s=r[a.attributes[e]]),s=s||r.main,<span class="code-keyword">void</span> <span class="code-number">0</span>===i?s:<span class="code-literal">null</span>===i?<span class="code-literal">null</span>:s.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.id===i.id})[<span class="code-number">0</span>]||<span class="code-literal">null</span>}}(i,e),t[i].activeTrack=Rn[i](i,e),t[i].onGroupChanged=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i=t.segmentLoaders,n=i[e],r=i.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),u=a.activePlaylistLoader;An(n,a),o&amp;&amp;(o.playlistLoader?(n.resyncLoader(),On(o.playlistLoader,a)):u&amp;&amp;r.resetEverything())}}(i,e),t[i].onTrackChanged=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i=t.segmentLoaders,n=i[e],r=i.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),u=a.activePlaylistLoader;An(n,a),o&amp;&amp;(o.playlistLoader?u!==o.playlistLoader?(n.track&amp;&amp;n.track(s),n.resetEverything(),On(o.playlistLoader,a)):On(o.playlistLoader,a):r.resetEverything())}}(i,e)});<span class="code-keyword">var</span> a=t.AUDIO.activeGroup(),s=(a.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.default})[<span class="code-number">0</span>]||a[<span class="code-number">0</span>]).id;t.AUDIO.tracks[s].enabled=!<span class="code-number">0</span>,t.AUDIO.onTrackChanged(),i.on(<span class="code-string">"mediachange"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{[<span class="code-string">"AUDIO"</span>,<span class="code-string">"SUBTITLES"</span>].forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t[e].onGroupChanged()})});<span class="code-keyword">var</span> o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t.AUDIO.onTrackChanged(),n.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-audio-change"</span>})};<span class="code-keyword">for</span>(<span class="code-keyword">var</span> u <span class="code-keyword">in</span> n.audioTracks().addEventListener(<span class="code-string">"change"</span>,o),n.remoteTextTracks().addEventListener(<span class="code-string">"change"</span>,t.SUBTITLES.onTrackChanged),r.on(<span class="code-string">"dispose"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n.audioTracks().removeEventListener(<span class="code-string">"change"</span>,o),n.remoteTextTracks().removeEventListener(<span class="code-string">"change"</span>,t.SUBTITLES.onTrackChanged)}),n.clearTracks(<span class="code-string">"audio"</span>),t.AUDIO.tracks)n.audioTracks().addTrack(t.AUDIO.tracks[u])},Mn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e={};<span class="code-keyword">return</span>[<span class="code-string">"AUDIO"</span>,<span class="code-string">"SUBTITLES"</span>,<span class="code-string">"CLOSED-CAPTIONS"</span>].forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e[t]={<span class="code-attr">groups</span>:{},<span class="code-attr">tracks</span>:{},<span class="code-attr">activePlaylistLoader</span>:<span class="code-literal">null</span>,<span class="code-attr">activeGroup</span>:oi,<span class="code-attr">activeTrack</span>:oi,<span class="code-attr">onGroupChanged</span>:oi,<span class="code-attr">onTrackChanged</span>:oi}}),e},Bn=<span class="code-keyword">void</span> <span class="code-number">0</span>,Nn=[<span class="code-string">"mediaRequests"</span>,<span class="code-string">"mediaRequestsAborted"</span>,<span class="code-string">"mediaRequestsTimedout"</span>,<span class="code-string">"mediaRequestsErrored"</span>,<span class="code-string">"mediaTransferDuration"</span>,<span class="code-string">"mediaBytesTransferred"</span>],qn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.audioSegmentLoader_[e]+<span class="code-keyword">this</span>.mainSegmentLoader_[e]},Fn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">i</span>(<span class="code-params">e</span>)</span>{_(<span class="code-keyword">this</span>,i);<span class="code-keyword">var</span> n=T(<span class="code-keyword">this</span>,(i.__proto__||<span class="code-built_in">Object</span>.getPrototypeOf(i)).call(<span class="code-keyword">this</span>)),r=e.url,a=e.handleManifestRedirects,s=e.withCredentials,o=e.tech,u=e.bandwidth,d=e.externHls,l=e.useCueTags,h=e.blacklistDuration,c=e.enableLowInitialPlaylist,f=e.sourceType,p=e.seekTo,m=e.cacheEncryptionKeys;<span class="code-keyword">if</span>(!r)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"A non-empty playlist URL is required"</span>);Bn=d,n.withCredentials=s,n.tech_=o,n.hls_=o.hls,n.seekTo_=p,n.sourceType_=f,n.useCueTags_=l,n.blacklistDuration=h,n.enableLowInitialPlaylist=c,n.useCueTags_&amp;&amp;(n.cueTagsTrack_=n.tech_.addTextTrack(<span class="code-string">"metadata"</span>,<span class="code-string">"ad-cues"</span>),n.cueTagsTrack_.inBandMetadataTrackDispatchType=<span class="code-string">""</span>),n.requestOptions_={<span class="code-attr">withCredentials</span>:s,<span class="code-attr">handleManifestRedirects</span>:a,<span class="code-attr">timeout</span>:<span class="code-literal">null</span>},n.mediaTypes_=Mn(),n.mediaSource=<span class="code-keyword">new</span> t.MediaSource,n.mediaSource.addEventListener(<span class="code-string">"sourceopen"</span>,n.handleSourceOpen_.bind(n)),n.seekable_=t.createTimeRanges(),n.hasPlayed_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span>!<span class="code-number">1</span>},n.syncController_=<span class="code-keyword">new</span> En(e),n.segmentMetadataTrack_=o.addRemoteTextTrack({<span class="code-attr">kind</span>:<span class="code-string">"metadata"</span>,<span class="code-attr">label</span>:<span class="code-string">"segment-metadata"</span>},!<span class="code-number">1</span>).track,n.decrypter_=<span class="code-keyword">new</span> Un,n.inbandTextTracks_={};<span class="code-keyword">var</span> g={<span class="code-attr">hls</span>:n.hls_,<span class="code-attr">mediaSource</span>:n.mediaSource,<span class="code-attr">currentTime</span>:n.tech_.currentTime.bind(n.tech_),<span class="code-attr">seekable</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.seekable()},<span class="code-attr">seeking</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.tech_.seeking()},<span class="code-attr">duration</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.mediaSource.duration},<span class="code-attr">hasPlayed</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.hasPlayed_()},<span class="code-attr">goalBufferLength</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.goalBufferLength()},<span class="code-attr">bandwidth</span>:u,<span class="code-attr">syncController</span>:n.syncController_,<span class="code-attr">decrypter</span>:n.decrypter_,<span class="code-attr">sourceType</span>:n.sourceType_,<span class="code-attr">inbandTextTracks</span>:n.inbandTextTracks_,<span class="code-attr">cacheEncryptionKeys</span>:m};<span class="code-keyword">return</span> n.masterPlaylistLoader_=<span class="code-string">"dash"</span>===n.sourceType_?<span class="code-keyword">new</span> ai(r,n.hls_,n.requestOptions_):<span class="code-keyword">new</span> C(r,n.hls_,n.requestOptions_),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=<span class="code-keyword">new</span> Yi(t.mergeOptions(g,{<span class="code-attr">segmentMetadataTrack</span>:n.segmentMetadataTrack_,<span class="code-attr">loaderType</span>:<span class="code-string">"main"</span>}),e),n.audioSegmentLoader_=<span class="code-keyword">new</span> Yi(t.mergeOptions(g,{<span class="code-attr">loaderType</span>:<span class="code-string">"audio"</span>}),e),n.subtitleSegmentLoader_=<span class="code-keyword">new</span> Qi(t.mergeOptions(g,{<span class="code-attr">loaderType</span>:<span class="code-string">"vtt"</span>}),e),n.setupSegmentLoaderListeners_(),Nn.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{n[e+<span class="code-string">"_"</span>]=qn.bind(n,e)}),n.logger_=si(<span class="code-string">"MPC"</span>),n.masterPlaylistLoader_.load(),n}<span class="code-keyword">return</span> b(i,e),v(i,[{<span class="code-attr">key</span>:<span class="code-string">"setupMasterPlaylistLoaderListeners_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"loadedmetadata"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i=e.masterPlaylistLoader_.media(),n=<span class="code-number">1.5</span>*i.targetDuration*<span class="code-number">1e3</span>;z(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=<span class="code-number">0</span>:e.requestOptions_.timeout=n,i.endList&amp;&amp;<span class="code-string">"none"</span>!==e.tech_.preload()&amp;&amp;(e.mainSegmentLoader_.playlist(i,e.requestOptions_),e.mainSegmentLoader_.load()),xn({<span class="code-attr">sourceType</span>:e.sourceType_,<span class="code-attr">segmentLoaders</span>:{<span class="code-attr">AUDIO</span>:e.audioSegmentLoader_,<span class="code-attr">SUBTITLES</span>:e.subtitleSegmentLoader_,<span class="code-attr">main</span>:e.mainSegmentLoader_},<span class="code-attr">tech</span>:e.tech_,<span class="code-attr">requestOptions</span>:e.requestOptions_,<span class="code-attr">masterPlaylistLoader</span>:e.masterPlaylistLoader_,<span class="code-attr">hls</span>:e.hls_,<span class="code-attr">master</span>:e.master(),<span class="code-attr">mediaTypes</span>:e.mediaTypes_,<span class="code-attr">blacklistCurrentPlaylist</span>:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),i);<span class="code-keyword">try</span>{e.setupSourceBuffers_()}<span class="code-keyword">catch</span>(i){<span class="code-keyword">return</span> t.log.warn(<span class="code-string">"Failed to create SourceBuffers"</span>,i),e.mediaSource.endOfStream(<span class="code-string">"decode"</span>)}e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger(<span class="code-string">"selectedinitialmedia"</span>):e.mediaTypes_.AUDIO.activePlaylistLoader.one(<span class="code-string">"loadedmetadata"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"selectedinitialmedia"</span>)})}),<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"loadedplaylist"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t=e.masterPlaylistLoader_.media();<span class="code-keyword">if</span>(!t){e.excludeUnsupportedVariants_();<span class="code-keyword">var</span> i=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">return</span> e.enableLowInitialPlaylist&amp;&amp;(i=e.selectInitialPlaylist()),i||(i=e.selectPlaylist()),e.initialMedia_=i,<span class="code-keyword">void</span> e.masterPlaylistLoader_.media(e.initialMedia_)}<span class="code-keyword">if</span>(e.useCueTags_&amp;&amp;e.updateAdCues_(t),e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.updateDuration(),e.tech_.paused()||(e.mainSegmentLoader_.load(),e.audioSegmentLoader_&amp;&amp;e.audioSegmentLoader_.load()),!t.endList){<span class="code-keyword">var</span> n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t=e.seekable();<span class="code-number">0</span>!==t.length&amp;&amp;e.mediaSource.addSeekableRange_(t.start(<span class="code-number">0</span>),t.end(<span class="code-number">0</span>))};<span class="code-keyword">if</span>(e.duration()!==<span class="code-number">1</span>/<span class="code-number">0</span>){e.tech_.one(<span class="code-string">"durationchange"</span>,<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params"></span>)</span>{e.duration()===<span class="code-number">1</span>/<span class="code-number">0</span>?n():e.tech_.one(<span class="code-string">"durationchange"</span>,t)})}<span class="code-keyword">else</span> n()}}),<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"error"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"mediachanging"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"mediachange"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t=e.masterPlaylistLoader_.media(),i=<span class="code-number">1.5</span>*t.targetDuration*<span class="code-number">1e3</span>;z(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=<span class="code-number">0</span>:e.requestOptions_.timeout=i,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"mediachange"</span>,<span class="code-attr">bubbles</span>:!<span class="code-number">0</span>})}),<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"playlistunchanged"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t=e.masterPlaylistLoader_.media();e.stuckAtPlaylistEnd_(t)&amp;&amp;(e.blacklistCurrentPlaylist({<span class="code-attr">message</span>:<span class="code-string">"Playlist no longer updating."</span>}),e.tech_.trigger(<span class="code-string">"playliststuck"</span>))}),<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"renditiondisabled"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-rendition-disabled"</span>})}),<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"renditionenabled"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-rendition-enabled"</span>})})}},{<span class="code-attr">key</span>:<span class="code-string">"triggerPresenceUsage_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e.mediaGroups||{},n=!<span class="code-number">0</span>,r=<span class="code-built_in">Object</span>.keys(i.AUDIO);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a <span class="code-keyword">in</span> i.AUDIO)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> s <span class="code-keyword">in</span> i.AUDIO[a]){i.AUDIO[a][s].uri||(n=!<span class="code-number">1</span>)}n&amp;&amp;<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-demuxed"</span>}),<span class="code-built_in">Object</span>.keys(i.SUBTITLES).length&amp;&amp;<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-webvtt"</span>}),Bn.Playlist.isAes(t)&amp;&amp;<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-aes"</span>}),Bn.Playlist.isFmp4(t)&amp;&amp;<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-fmp4"</span>}),r.length&amp;&amp;<span class="code-built_in">Object</span>.keys(i.AUDIO[r[<span class="code-number">0</span>]]).length&gt;<span class="code-number">1</span>&amp;&amp;<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-alternate-audio"</span>}),<span class="code-keyword">this</span>.useCueTags_&amp;&amp;<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-playlist-cue-tags"</span>})}},{<span class="code-attr">key</span>:<span class="code-string">"setupSegmentLoaderListeners_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"bandwidthupdate"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t=e.selectPlaylist(),i=e.masterPlaylistLoader_.media(),n=e.tech_.buffered(),r=n.length?n.end(n.length<span class="code-number">-1</span>)-e.tech_.currentTime():<span class="code-number">0</span>,a=e.bufferLowWaterLine();(!i.endList||e.duration()&lt;pi.MAX_BUFFER_LOW_WATER_LINE||t.attributes.BANDWIDTH&lt;i.attributes.BANDWIDTH||r&gt;=a)&amp;&amp;e.masterPlaylistLoader_.media(t),e.tech_.trigger(<span class="code-string">"bandwidthupdate"</span>)}),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"progress"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"progress"</span>)}),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"error"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"syncinfoupdate"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.onSyncInfoUpdate_()}),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"timestampoffset"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-timestamp-offset"</span>})}),<span class="code-keyword">this</span>.audioSegmentLoader_.on(<span class="code-string">"syncinfoupdate"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.onSyncInfoUpdate_()}),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"ended"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.onEndOfStream()}),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"earlyabort"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.blacklistCurrentPlaylist({<span class="code-attr">message</span>:<span class="code-string">"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."</span>},<span class="code-number">120</span>)}),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"reseteverything"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.tech_.trigger(<span class="code-string">"hls-reset"</span>)}),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"segmenttimemapping"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"hls-segment-time-mapping"</span>,<span class="code-attr">mapping</span>:t.mapping})}),<span class="code-keyword">this</span>.audioSegmentLoader_.on(<span class="code-string">"ended"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.onEndOfStream()})}},{<span class="code-attr">key</span>:<span class="code-string">"mediaSecondsLoaded_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">Math</span>.max(<span class="code-keyword">this</span>.audioSegmentLoader_.mediaSecondsLoaded+<span class="code-keyword">this</span>.mainSegmentLoader_.mediaSecondsLoaded)}},{<span class="code-attr">key</span>:<span class="code-string">"load"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.mainSegmentLoader_.load(),<span class="code-keyword">this</span>.mediaTypes_.AUDIO.activePlaylistLoader&amp;&amp;<span class="code-keyword">this</span>.audioSegmentLoader_.load(),<span class="code-keyword">this</span>.mediaTypes_.SUBTITLES.activePlaylistLoader&amp;&amp;<span class="code-keyword">this</span>.subtitleSegmentLoader_.load()}},{<span class="code-attr">key</span>:<span class="code-string">"smoothQualityChange_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.selectPlaylist();e!==<span class="code-keyword">this</span>.masterPlaylistLoader_.media()&amp;&amp;(<span class="code-keyword">this</span>.masterPlaylistLoader_.media(e),<span class="code-keyword">this</span>.mainSegmentLoader_.resetLoader())}},{<span class="code-attr">key</span>:<span class="code-string">"fastQualityChange_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>,i=<span class="code-keyword">this</span>.selectPlaylist();i!==<span class="code-keyword">this</span>.masterPlaylistLoader_.media()&amp;&amp;(<span class="code-keyword">this</span>.masterPlaylistLoader_.media(i),<span class="code-keyword">this</span>.mainSegmentLoader_.resetEverything(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t.browser.IE_VERSION||t.browser.IS_EDGE?e.tech_.setCurrentTime(e.tech_.currentTime()+<span class="code-number">.04</span>):e.tech_.setCurrentTime(e.tech_.currentTime())}))}},{<span class="code-attr">key</span>:<span class="code-string">"play"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.setupFirstPlay()){<span class="code-keyword">this</span>.tech_.ended()&amp;&amp;<span class="code-keyword">this</span>.seekTo_(<span class="code-number">0</span>),<span class="code-keyword">this</span>.hasPlayed_()&amp;&amp;<span class="code-keyword">this</span>.load();<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.tech_.seekable();<span class="code-keyword">return</span> <span class="code-keyword">this</span>.tech_.duration()===<span class="code-number">1</span>/<span class="code-number">0</span>&amp;&amp;<span class="code-keyword">this</span>.tech_.currentTime()&lt;e.start(<span class="code-number">0</span>)?<span class="code-keyword">this</span>.seekTo_(e.end(e.length<span class="code-number">-1</span>)):<span class="code-keyword">void</span> <span class="code-number">0</span>}}},{<span class="code-attr">key</span>:<span class="code-string">"setupFirstPlay"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>,i=<span class="code-keyword">this</span>.masterPlaylistLoader_.media();<span class="code-keyword">if</span>(!i||<span class="code-keyword">this</span>.tech_.paused()||<span class="code-keyword">this</span>.hasPlayed_())<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(!i.endList){<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>.seekable();<span class="code-keyword">if</span>(!n.length)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(t.browser.IE_VERSION&amp;&amp;<span class="code-number">0</span>===<span class="code-keyword">this</span>.tech_.readyState())<span class="code-keyword">return</span> <span class="code-keyword">this</span>.tech_.one(<span class="code-string">"loadedmetadata"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"firstplay"</span>),e.seekTo_(n.end(<span class="code-number">0</span>)),e.hasPlayed_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span>!<span class="code-number">0</span>}}),!<span class="code-number">1</span>;<span class="code-keyword">this</span>.trigger(<span class="code-string">"firstplay"</span>),<span class="code-keyword">this</span>.seekTo_(n.end(<span class="code-number">0</span>))}<span class="code-keyword">return</span> <span class="code-keyword">this</span>.hasPlayed_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span>!<span class="code-number">0</span>},<span class="code-keyword">this</span>.load(),!<span class="code-number">0</span>}},{<span class="code-attr">key</span>:<span class="code-string">"handleSourceOpen_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">try</span>{<span class="code-keyword">this</span>.setupSourceBuffers_()}<span class="code-keyword">catch</span>(e){<span class="code-keyword">return</span> t.log.warn(<span class="code-string">"Failed to create Source Buffers"</span>,e),<span class="code-keyword">this</span>.mediaSource.endOfStream(<span class="code-string">"decode"</span>)}<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.tech_.autoplay()){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.tech_.play();<span class="code-keyword">void</span> <span class="code-number">0</span>!==e&amp;&amp;<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> e.then&amp;&amp;e.then(<span class="code-literal">null</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{})}<span class="code-keyword">this</span>.trigger(<span class="code-string">"sourceopen"</span>)}},{<span class="code-attr">key</span>:<span class="code-string">"onEndOfStream"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.mainSegmentLoader_.ended_;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.mediaTypes_.AUDIO.activePlaylistLoader&amp;&amp;(e=!<span class="code-keyword">this</span>.mainSegmentLoader_.startingMedia_||<span class="code-keyword">this</span>.mainSegmentLoader_.startingMedia_.containsVideo?e&amp;&amp;<span class="code-keyword">this</span>.audioSegmentLoader_.ended_:<span class="code-keyword">this</span>.audioSegmentLoader_.ended_),e){<span class="code-keyword">this</span>.logger_(<span class="code-string">"calling mediaSource.endOfStream()"</span>);<span class="code-keyword">try</span>{<span class="code-keyword">this</span>.mediaSource.endOfStream()}<span class="code-keyword">catch</span>(e){t.log.warn(<span class="code-string">"Failed to call media source endOfStream"</span>,e)}}}},{<span class="code-attr">key</span>:<span class="code-string">"stuckAtPlaylistEnd_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.seekable().length)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.syncController_.getExpiredTime(e,<span class="code-keyword">this</span>.mediaSource.duration);<span class="code-keyword">if</span>(<span class="code-literal">null</span>===t)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> i=Bn.Playlist.playlistEnd(e,t),n=<span class="code-keyword">this</span>.tech_.currentTime(),r=<span class="code-keyword">this</span>.tech_.buffered();<span class="code-keyword">if</span>(!r.length)<span class="code-keyword">return</span> i-n&lt;=<span class="code-number">.1</span>;<span class="code-keyword">var</span> a=r.end(r.length<span class="code-number">-1</span>);<span class="code-keyword">return</span> a-n&lt;=<span class="code-number">.1</span>&amp;&amp;i-a&lt;=<span class="code-number">.1</span>}},{<span class="code-attr">key</span>:<span class="code-string">"blacklistCurrentPlaylist"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,i=<span class="code-built_in">arguments</span>.length&gt;<span class="code-number">0</span>&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-built_in">arguments</span>[<span class="code-number">0</span>]?<span class="code-built_in">arguments</span>[<span class="code-number">0</span>]:{},n=<span class="code-built_in">arguments</span>[<span class="code-number">1</span>],r=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">if</span>(r=i.playlist||<span class="code-keyword">this</span>.masterPlaylistLoader_.media(),n=n||i.blacklistDuration||<span class="code-keyword">this</span>.blacklistDuration,!r){<span class="code-keyword">this</span>.error=i;<span class="code-keyword">try</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.mediaSource.endOfStream(<span class="code-string">"network"</span>)}<span class="code-keyword">catch</span>(e){<span class="code-keyword">return</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"error"</span>)}}<span class="code-keyword">var</span> a=<span class="code-number">1</span>===<span class="code-keyword">this</span>.masterPlaylistLoader_.master.playlists.filter(V).length,s=<span class="code-keyword">this</span>.masterPlaylistLoader_.master.playlists;<span class="code-keyword">return</span> <span class="code-number">1</span>===s.length?(t.log.warn(<span class="code-string">"Problem encountered with the current HLS playlist. Trying again since it is the only playlist."</span>),<span class="code-keyword">this</span>.tech_.trigger(<span class="code-string">"retryplaylist"</span>),<span class="code-keyword">this</span>.masterPlaylistLoader_.load(a)):(a&amp;&amp;(t.log.warn(<span class="code-string">"Removing all playlists from the blacklist because the last rendition is about to be blacklisted."</span>),s.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.excludeUntil!==<span class="code-number">1</span>/<span class="code-number">0</span>&amp;&amp;<span class="code-keyword">delete</span> e.excludeUntil}),<span class="code-keyword">this</span>.tech_.trigger(<span class="code-string">"retryplaylist"</span>)),r.excludeUntil=<span class="code-built_in">Date</span>.now()+<span class="code-number">1e3</span>*n,<span class="code-keyword">this</span>.tech_.trigger(<span class="code-string">"blacklistplaylist"</span>),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-rendition-blacklisted"</span>}),e=<span class="code-keyword">this</span>.selectPlaylist(),t.log.warn(<span class="code-string">"Problem encountered with the current HLS playlist."</span>+(i.message?<span class="code-string">" "</span>+i.message:<span class="code-string">""</span>)+<span class="code-string">" Switching to another playlist."</span>),<span class="code-keyword">this</span>.masterPlaylistLoader_.media(e,a))}},{<span class="code-attr">key</span>:<span class="code-string">"pauseLoading"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.mainSegmentLoader_.pause(),<span class="code-keyword">this</span>.mediaTypes_.AUDIO.activePlaylistLoader&amp;&amp;<span class="code-keyword">this</span>.audioSegmentLoader_.pause(),<span class="code-keyword">this</span>.mediaTypes_.SUBTITLES.activePlaylistLoader&amp;&amp;<span class="code-keyword">this</span>.subtitleSegmentLoader_.pause()}},{<span class="code-attr">key</span>:<span class="code-string">"setCurrentTime"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=be(<span class="code-keyword">this</span>.tech_.buffered(),e);<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistLoader_&amp;&amp;<span class="code-keyword">this</span>.masterPlaylistLoader_.media()&amp;&amp;<span class="code-keyword">this</span>.masterPlaylistLoader_.media().segments?t&amp;&amp;t.length?e:(<span class="code-keyword">this</span>.mainSegmentLoader_.resetEverything(),<span class="code-keyword">this</span>.mainSegmentLoader_.abort(),<span class="code-keyword">this</span>.mediaTypes_.AUDIO.activePlaylistLoader&amp;&amp;(<span class="code-keyword">this</span>.audioSegmentLoader_.resetEverything(),<span class="code-keyword">this</span>.audioSegmentLoader_.abort()),<span class="code-keyword">this</span>.mediaTypes_.SUBTITLES.activePlaylistLoader&amp;&amp;(<span class="code-keyword">this</span>.subtitleSegmentLoader_.resetEverything(),<span class="code-keyword">this</span>.subtitleSegmentLoader_.abort()),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.load()):<span class="code-number">0</span>}},{<span class="code-attr">key</span>:<span class="code-string">"duration"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistLoader_?<span class="code-keyword">this</span>.mediaSource?<span class="code-keyword">this</span>.mediaSource.duration:Bn.Playlist.duration(<span class="code-keyword">this</span>.masterPlaylistLoader_.media()):<span class="code-number">0</span>}},{<span class="code-attr">key</span>:<span class="code-string">"seekable"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.seekable_}},{<span class="code-attr">key</span>:<span class="code-string">"onSyncInfoUpdate_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">void</span> <span class="code-number">0</span>,i=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.masterPlaylistLoader_){<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>.masterPlaylistLoader_.media();<span class="code-keyword">if</span>(n){<span class="code-keyword">var</span> r=<span class="code-keyword">this</span>.syncController_.getExpiredTime(n,<span class="code-keyword">this</span>.mediaSource.duration);<span class="code-keyword">if</span>(<span class="code-literal">null</span>!==r&amp;&amp;<span class="code-number">0</span>!==(e=Bn.Playlist.seekable(n,r)).length){<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.mediaTypes_.AUDIO.activePlaylistLoader){<span class="code-keyword">if</span>(n=<span class="code-keyword">this</span>.mediaTypes_.AUDIO.activePlaylistLoader.media(),<span class="code-literal">null</span>===(r=<span class="code-keyword">this</span>.syncController_.getExpiredTime(n,<span class="code-keyword">this</span>.mediaSource.duration)))<span class="code-keyword">return</span>;<span class="code-keyword">if</span>(<span class="code-number">0</span>===(i=Bn.Playlist.seekable(n,r)).length)<span class="code-keyword">return</span>}<span class="code-keyword">var</span> a=<span class="code-keyword">void</span> <span class="code-number">0</span>,s=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">this</span>.seekable_&amp;&amp;<span class="code-keyword">this</span>.seekable_.length&amp;&amp;(a=<span class="code-keyword">this</span>.seekable_.end(<span class="code-number">0</span>),s=<span class="code-keyword">this</span>.seekable_.start(<span class="code-number">0</span>)),i?i.start(<span class="code-number">0</span>)&gt;e.end(<span class="code-number">0</span>)||e.start(<span class="code-number">0</span>)&gt;i.end(<span class="code-number">0</span>)?<span class="code-keyword">this</span>.seekable_=e:<span class="code-keyword">this</span>.seekable_=t.createTimeRanges([[i.start(<span class="code-number">0</span>)&gt;e.start(<span class="code-number">0</span>)?i.start(<span class="code-number">0</span>):e.start(<span class="code-number">0</span>),i.end(<span class="code-number">0</span>)&lt;e.end(<span class="code-number">0</span>)?i.end(<span class="code-number">0</span>):e.end(<span class="code-number">0</span>)]]):<span class="code-keyword">this</span>.seekable_=e,<span class="code-keyword">this</span>.seekable_&amp;&amp;<span class="code-keyword">this</span>.seekable_.length&amp;&amp;<span class="code-keyword">this</span>.seekable_.end(<span class="code-number">0</span>)===a&amp;&amp;<span class="code-keyword">this</span>.seekable_.start(<span class="code-number">0</span>)===s||(<span class="code-keyword">this</span>.logger_(<span class="code-string">"seekable updated ["</span>+Se(<span class="code-keyword">this</span>.seekable_)+<span class="code-string">"]"</span>),<span class="code-keyword">this</span>.tech_.trigger(<span class="code-string">"seekablechanged"</span>))}}}}},{<span class="code-attr">key</span>:<span class="code-string">"updateDuration"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>,i=<span class="code-keyword">this</span>.mediaSource.duration,n=Bn.Playlist.duration(<span class="code-keyword">this</span>.masterPlaylistLoader_.media()),r=<span class="code-keyword">this</span>.tech_.buffered(),a=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">i</span>(<span class="code-params"></span>)</span>{e.logger_(<span class="code-string">"Setting duration from "</span>+e.mediaSource.duration+<span class="code-string">" =&gt; "</span>+n);<span class="code-keyword">try</span>{e.mediaSource.duration=n}<span class="code-keyword">catch</span>(e){t.log.warn(<span class="code-string">"Failed to set media source duration"</span>,e)}e.tech_.trigger(<span class="code-string">"durationchange"</span>),e.mediaSource.removeEventListener(<span class="code-string">"sourceopen"</span>,i)};r.length&gt;<span class="code-number">0</span>&amp;&amp;(n=<span class="code-built_in">Math</span>.max(n,r.end(r.length<span class="code-number">-1</span>))),i!==n&amp;&amp;(<span class="code-string">"open"</span>!==<span class="code-keyword">this</span>.mediaSource.readyState?<span class="code-keyword">this</span>.mediaSource.addEventListener(<span class="code-string">"sourceopen"</span>,a):a())}},{<span class="code-attr">key</span>:<span class="code-string">"dispose"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.decrypter_.terminate(),<span class="code-keyword">this</span>.masterPlaylistLoader_.dispose(),<span class="code-keyword">this</span>.mainSegmentLoader_.dispose(),[<span class="code-string">"AUDIO"</span>,<span class="code-string">"SUBTITLES"</span>].forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i=e.mediaTypes_[t].groups;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> i)i[n].forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.playlistLoader&amp;&amp;e.playlistLoader.dispose()})}),<span class="code-keyword">this</span>.audioSegmentLoader_.dispose(),<span class="code-keyword">this</span>.subtitleSegmentLoader_.dispose()}},{<span class="code-attr">key</span>:<span class="code-string">"master"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistLoader_.master}},{<span class="code-attr">key</span>:<span class="code-string">"media"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistLoader_.media()||<span class="code-keyword">this</span>.initialMedia_}},{<span class="code-attr">key</span>:<span class="code-string">"setupSourceBuffers_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t=<span class="code-keyword">this</span>.masterPlaylistLoader_.media();<span class="code-keyword">if</span>(t&amp;&amp;<span class="code-string">"open"</span>===<span class="code-keyword">this</span>.mediaSource.readyState){<span class="code-keyword">if</span>((e=je(<span class="code-keyword">this</span>.masterPlaylistLoader_.master,t)).length&lt;<span class="code-number">1</span>)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.error=<span class="code-string">"No compatible SourceBuffer configuration for the variant stream:"</span>+t.resolvedUri,<span class="code-keyword">this</span>.mediaSource.endOfStream(<span class="code-string">"decode"</span>);<span class="code-keyword">this</span>.configureLoaderMimeTypes_(e),<span class="code-keyword">this</span>.excludeIncompatibleVariants_(t)}}},{<span class="code-attr">key</span>:<span class="code-string">"configureLoaderMimeTypes_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=e.length&gt;<span class="code-number">1</span>&amp;&amp;<span class="code-number">-1</span>===e[<span class="code-number">0</span>].indexOf(<span class="code-string">","</span>)&amp;&amp;e[<span class="code-number">0</span>]!==e[<span class="code-number">1</span>]?<span class="code-keyword">new</span> t.EventTarget:<span class="code-literal">null</span>;<span class="code-keyword">this</span>.mainSegmentLoader_.mimeType(e[<span class="code-number">0</span>],i),e[<span class="code-number">1</span>]&amp;&amp;<span class="code-keyword">this</span>.audioSegmentLoader_.mimeType(e[<span class="code-number">1</span>],i)}},{<span class="code-attr">key</span>:<span class="code-string">"excludeUnsupportedVariants_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.master().playlists.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t;e.attributes.CODECS&amp;&amp;u.MediaSource&amp;&amp;u.MediaSource.isTypeSupported&amp;&amp;!u.MediaSource.isTypeSupported(<span class="code-string">'video/mp4; codecs="'</span>+(t=e.attributes.CODECS,t.replace(<span class="code-regexp">/avc1\.(\d+)\.(\d+)/i</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Fe([e])[<span class="code-number">0</span>]}))+<span class="code-string">'"'</span>)&amp;&amp;(e.excludeUntil=<span class="code-number">1</span>/<span class="code-number">0</span>)})}},{<span class="code-attr">key</span>:<span class="code-string">"excludeIncompatibleVariants_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-number">2</span>,i=<span class="code-literal">null</span>,n=<span class="code-keyword">void</span> <span class="code-number">0</span>;e.attributes.CODECS&amp;&amp;(n=He(e.attributes.CODECS),i=n.videoCodec,t=n.codecCount),<span class="code-keyword">this</span>.master().playlists.forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> n={<span class="code-attr">codecCount</span>:<span class="code-number">2</span>,<span class="code-attr">videoCodec</span>:<span class="code-literal">null</span>};e.attributes.CODECS&amp;&amp;(n=He(e.attributes.CODECS)),n.codecCount!==t&amp;&amp;(e.excludeUntil=<span class="code-number">1</span>/<span class="code-number">0</span>),n.videoCodec!==i&amp;&amp;(e.excludeUntil=<span class="code-number">1</span>/<span class="code-number">0</span>)})}},{<span class="code-attr">key</span>:<span class="code-string">"updateAdCues_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-number">0</span>,i=<span class="code-keyword">this</span>.seekable();i.length&amp;&amp;(t=i.start(<span class="code-number">0</span>)),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-built_in">arguments</span>.length&gt;<span class="code-number">2</span>&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-built_in">arguments</span>[<span class="code-number">2</span>]?<span class="code-built_in">arguments</span>[<span class="code-number">2</span>]:<span class="code-number">0</span>;<span class="code-keyword">if</span>(e.segments)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=i,r=<span class="code-keyword">void</span> <span class="code-number">0</span>,a=<span class="code-number">0</span>;a&lt;e.segments.length;a++){<span class="code-keyword">var</span> s=e.segments[a];<span class="code-keyword">if</span>(r||(r=Ji(t,n+s.duration/<span class="code-number">2</span>)),r){<span class="code-keyword">if</span>(<span class="code-string">"cueIn"</span><span class="code-keyword">in</span> s){r.endTime=n,r.adEndTime=n,n+=s.duration,r=<span class="code-literal">null</span>;<span class="code-keyword">continue</span>}<span class="code-keyword">if</span>(n&lt;r.endTime){n+=s.duration;<span class="code-keyword">continue</span>}r.endTime+=s.duration}<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-string">"cueOut"</span><span class="code-keyword">in</span> s&amp;&amp;((r=<span class="code-keyword">new</span> u.VTTCue(n,n+s.duration,s.cueOut)).adStartTime=n,r.adEndTime=n+<span class="code-built_in">parseFloat</span>(s.cueOut),t.addCue(r)),<span class="code-string">"cueOutCont"</span><span class="code-keyword">in</span> s){<span class="code-keyword">var</span> o,d,l=s.cueOutCont.split(<span class="code-string">"/"</span>).map(<span class="code-built_in">parseFloat</span>),h=S(l,<span class="code-number">2</span>);o=h[<span class="code-number">0</span>],d=h[<span class="code-number">1</span>],(r=<span class="code-keyword">new</span> u.VTTCue(n,n+s.duration,<span class="code-string">""</span>)).adStartTime=n-o,r.adEndTime=r.adStartTime+d,t.addCue(r)}n+=s.duration}}(e,<span class="code-keyword">this</span>.cueTagsTrack_,t)}},{<span class="code-attr">key</span>:<span class="code-string">"goalBufferLength"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.tech_.currentTime(),t=pi.GOAL_BUFFER_LENGTH,i=pi.GOAL_BUFFER_LENGTH_RATE,n=<span class="code-built_in">Math</span>.max(t,pi.MAX_GOAL_BUFFER_LENGTH);<span class="code-keyword">return</span> <span class="code-built_in">Math</span>.min(t+e*i,n)}},{<span class="code-attr">key</span>:<span class="code-string">"bufferLowWaterLine"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.tech_.currentTime(),t=pi.BUFFER_LOW_WATER_LINE,i=pi.BUFFER_LOW_WATER_LINE_RATE,n=<span class="code-built_in">Math</span>.max(t,pi.MAX_BUFFER_LOW_WATER_LINE);<span class="code-keyword">return</span> <span class="code-built_in">Math</span>.min(t+e*i,n)}}]),i}(t.EventTarget),Hn=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i,n</span>)</span>{_(<span class="code-keyword">this</span>,e);<span class="code-keyword">var</span> r,a,s,o=t.masterPlaylistController_,u=o[(t.options_.smoothQualityChange?<span class="code-string">"smooth"</span>:<span class="code-string">"fast"</span>)+<span class="code-string">"QualityChange_"</span>].bind(o);<span class="code-keyword">if</span>(i.attributes.RESOLUTION){<span class="code-keyword">var</span> d=i.attributes.RESOLUTION;<span class="code-keyword">this</span>.width=d.width,<span class="code-keyword">this</span>.height=d.height}<span class="code-keyword">this</span>.bandwidth=i.attributes.BANDWIDTH,<span class="code-keyword">this</span>.id=n,<span class="code-keyword">this</span>.enabled=(r=t.playlists,a=i.uri,s=u,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=r.master.playlists[a],i=j(t),n=V(t);<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===e?n:(e?<span class="code-keyword">delete</span> t.disabled:t.disabled=!<span class="code-number">0</span>,e===n||i||(s(),e?r.trigger(<span class="code-string">"renditionenabled"</span>):r.trigger(<span class="code-string">"renditiondisabled"</span>)),e)})},Gn=[<span class="code-string">"seeking"</span>,<span class="code-string">"seeked"</span>,<span class="code-string">"pause"</span>,<span class="code-string">"playing"</span>,<span class="code-string">"error"</span>],jn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>;_(<span class="code-keyword">this</span>,e),<span class="code-keyword">this</span>.tech_=t.tech,<span class="code-keyword">this</span>.seekable=t.seekable,<span class="code-keyword">this</span>.seekTo=t.seekTo,<span class="code-keyword">this</span>.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,<span class="code-keyword">this</span>.media=t.media,<span class="code-keyword">this</span>.consecutiveUpdates=<span class="code-number">0</span>,<span class="code-keyword">this</span>.lastRecordedTime=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.timer_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.checkCurrentTimeTimeout_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.logger_=si(<span class="code-string">"PlaybackWatcher"</span>),<span class="code-keyword">this</span>.logger_(<span class="code-string">"initialize"</span>);<span class="code-keyword">var</span> n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.monitorCurrentTime_()},r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.techWaiting_()},a=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.cancelTimer_()},s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.fixesBadSeeks_()};<span class="code-keyword">this</span>.tech_.on(<span class="code-string">"seekablechanged"</span>,s),<span class="code-keyword">this</span>.tech_.on(<span class="code-string">"waiting"</span>,r),<span class="code-keyword">this</span>.tech_.on(Gn,a),<span class="code-keyword">this</span>.tech_.on(<span class="code-string">"canplay"</span>,n),<span class="code-keyword">this</span>.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i.logger_(<span class="code-string">"dispose"</span>),i.tech_.off(<span class="code-string">"seekablechanged"</span>,s),i.tech_.off(<span class="code-string">"waiting"</span>,r),i.tech_.off(Gn,a),i.tech_.off(<span class="code-string">"canplay"</span>,n),i.checkCurrentTimeTimeout_&amp;&amp;u.clearTimeout(i.checkCurrentTimeTimeout_),i.cancelTimer_()}}<span class="code-keyword">return</span> v(e,[{<span class="code-attr">key</span>:<span class="code-string">"monitorCurrentTime_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.checkCurrentTime_(),<span class="code-keyword">this</span>.checkCurrentTimeTimeout_&amp;&amp;u.clearTimeout(<span class="code-keyword">this</span>.checkCurrentTimeTimeout_),<span class="code-keyword">this</span>.checkCurrentTimeTimeout_=u.setTimeout(<span class="code-keyword">this</span>.monitorCurrentTime_.bind(<span class="code-keyword">this</span>),<span class="code-number">250</span>)}},{<span class="code-attr">key</span>:<span class="code-string">"checkCurrentTime_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.tech_.seeking()&amp;&amp;<span class="code-keyword">this</span>.fixesBadSeeks_())<span class="code-keyword">return</span> <span class="code-keyword">this</span>.consecutiveUpdates=<span class="code-number">0</span>,<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.lastRecordedTime=<span class="code-keyword">this</span>.tech_.currentTime());<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.tech_.paused()&amp;&amp;!<span class="code-keyword">this</span>.tech_.seeking()){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.tech_.currentTime(),t=<span class="code-keyword">this</span>.tech_.buffered();<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.lastRecordedTime===e&amp;&amp;(!t.length||e+<span class="code-number">.1</span>&gt;=t.end(t.length<span class="code-number">-1</span>)))<span class="code-keyword">return</span> <span class="code-keyword">this</span>.techWaiting_();<span class="code-keyword">this</span>.consecutiveUpdates&gt;=<span class="code-number">5</span>&amp;&amp;e===<span class="code-keyword">this</span>.lastRecordedTime?(<span class="code-keyword">this</span>.consecutiveUpdates++,<span class="code-keyword">this</span>.waiting_()):e===<span class="code-keyword">this</span>.lastRecordedTime?<span class="code-keyword">this</span>.consecutiveUpdates++:(<span class="code-keyword">this</span>.consecutiveUpdates=<span class="code-number">0</span>,<span class="code-keyword">this</span>.lastRecordedTime=e)}}},{<span class="code-attr">key</span>:<span class="code-string">"cancelTimer_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.consecutiveUpdates=<span class="code-number">0</span>,<span class="code-keyword">this</span>.timer_&amp;&amp;(<span class="code-keyword">this</span>.logger_(<span class="code-string">"cancelTimer_"</span>),clearTimeout(<span class="code-keyword">this</span>.timer_)),<span class="code-keyword">this</span>.timer_=<span class="code-literal">null</span>}},{<span class="code-attr">key</span>:<span class="code-string">"fixesBadSeeks_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.tech_.seeking())<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.seekable(),t=<span class="code-keyword">this</span>.tech_.currentTime(),i=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">this</span>.afterSeekableWindow_(e,t,<span class="code-keyword">this</span>.media(),<span class="code-keyword">this</span>.allowSeeksWithinUnsafeLiveWindow)&amp;&amp;(i=e.end(e.length<span class="code-number">-1</span>));<span class="code-keyword">this</span>.beforeSeekableWindow_(e,t)&amp;&amp;(i=e.start(<span class="code-number">0</span>)+<span class="code-number">.1</span>);<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>!==i&amp;&amp;(<span class="code-keyword">this</span>.logger_(<span class="code-string">"Trying to seek outside of seekable at time "</span>+t+<span class="code-string">" with seekable range "</span>+Se(e)+<span class="code-string">". Seeking to "</span>+i+<span class="code-string">"."</span>),<span class="code-keyword">this</span>.seekTo(i),!<span class="code-number">0</span>)}},{<span class="code-attr">key</span>:<span class="code-string">"waiting_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.techWaiting_()){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.tech_.currentTime(),t=<span class="code-keyword">this</span>.tech_.buffered(),i=be(t,e);<span class="code-keyword">return</span> i.length&amp;&amp;e+<span class="code-number">3</span>&lt;=i.end(<span class="code-number">0</span>)?(<span class="code-keyword">this</span>.cancelTimer_(),<span class="code-keyword">this</span>.seekTo(e),<span class="code-keyword">this</span>.logger_(<span class="code-string">"Stopped at "</span>+e+<span class="code-string">" while inside a buffered region ["</span>+i.start(<span class="code-number">0</span>)+<span class="code-string">" -&gt; "</span>+i.end(<span class="code-number">0</span>)+<span class="code-string">"]. Attempting to resume playback by seeking to the current time."</span>),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-unknown-waiting"</span>})):<span class="code-keyword">void</span> <span class="code-number">0</span>}}},{<span class="code-attr">key</span>:<span class="code-string">"techWaiting_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.seekable(),t=<span class="code-keyword">this</span>.tech_.currentTime();<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.tech_.seeking()&amp;&amp;<span class="code-keyword">this</span>.fixesBadSeeks_())<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.tech_.seeking()||<span class="code-literal">null</span>!==<span class="code-keyword">this</span>.timer_)<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.beforeSeekableWindow_(e,t)){<span class="code-keyword">var</span> i=e.end(e.length<span class="code-number">-1</span>);<span class="code-keyword">return</span> <span class="code-keyword">this</span>.logger_(<span class="code-string">"Fell out of live window at time "</span>+t+<span class="code-string">". Seeking to live point (seekable end) "</span>+i),<span class="code-keyword">this</span>.cancelTimer_(),<span class="code-keyword">this</span>.seekTo(i),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-live-resync"</span>}),!<span class="code-number">0</span>}<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>.tech_.buffered(),r=Te(n,t);<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.videoUnderflow_(r,n,t))<span class="code-keyword">return</span> <span class="code-keyword">this</span>.cancelTimer_(),<span class="code-keyword">this</span>.seekTo(t),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-video-underflow"</span>}),!<span class="code-number">0</span>;<span class="code-keyword">if</span>(r.length&gt;<span class="code-number">0</span>){<span class="code-keyword">var</span> a=r.start(<span class="code-number">0</span>)-t;<span class="code-keyword">return</span> <span class="code-keyword">this</span>.logger_(<span class="code-string">"Stopped at "</span>+t+<span class="code-string">", setting timer for "</span>+a+<span class="code-string">", seeking to "</span>+r.start(<span class="code-number">0</span>)),<span class="code-keyword">this</span>.timer_=setTimeout(<span class="code-keyword">this</span>.skipTheGap_.bind(<span class="code-keyword">this</span>),<span class="code-number">1e3</span>*a,t),!<span class="code-number">0</span>}<span class="code-keyword">return</span>!<span class="code-number">1</span>}},{<span class="code-attr">key</span>:<span class="code-string">"afterSeekableWindow_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-built_in">arguments</span>.length&gt;<span class="code-number">3</span>&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-built_in">arguments</span>[<span class="code-number">3</span>]&amp;&amp;<span class="code-built_in">arguments</span>[<span class="code-number">3</span>];<span class="code-keyword">if</span>(!e.length)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> r=e.end(e.length<span class="code-number">-1</span>)+<span class="code-number">.1</span>;<span class="code-keyword">return</span>!i.endList&amp;&amp;n&amp;&amp;(r=e.end(e.length<span class="code-number">-1</span>)+<span class="code-number">3</span>*i.targetDuration),t&gt;r}},{<span class="code-attr">key</span>:<span class="code-string">"beforeSeekableWindow_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span>!!(e.length&amp;&amp;e.start(<span class="code-number">0</span>)&gt;<span class="code-number">0</span>&amp;&amp;t&lt;e.start(<span class="code-number">0</span>)<span class="code-number">-.1</span>)}},{<span class="code-attr">key</span>:<span class="code-string">"videoUnderflow_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(<span class="code-number">0</span>===e.length){<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>.gapFromVideoUnderflow_(t,i);<span class="code-keyword">if</span>(n)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.logger_(<span class="code-string">"Encountered a gap in video from "</span>+n.start+<span class="code-string">" to "</span>+n.end+<span class="code-string">". Seeking to current time "</span>+i),!<span class="code-number">0</span>}<span class="code-keyword">return</span>!<span class="code-number">1</span>}},{<span class="code-attr">key</span>:<span class="code-string">"skipTheGap_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.tech_.buffered(),i=<span class="code-keyword">this</span>.tech_.currentTime(),n=Te(t,i);<span class="code-keyword">this</span>.cancelTimer_(),<span class="code-number">0</span>!==n.length&amp;&amp;i===e&amp;&amp;(<span class="code-keyword">this</span>.logger_(<span class="code-string">"skipTheGap_:"</span>,<span class="code-string">"currentTime:"</span>,i,<span class="code-string">"scheduled currentTime:"</span>,e,<span class="code-string">"nextRange start:"</span>,n.start(<span class="code-number">0</span>)),<span class="code-keyword">this</span>.seekTo(n.start(<span class="code-number">0</span>)+<span class="code-number">1</span>/<span class="code-number">30</span>),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-gap-skip"</span>}))}},{<span class="code-attr">key</span>:<span class="code-string">"gapFromVideoUnderflow_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(e.length&lt;<span class="code-number">2</span>)<span class="code-keyword">return</span> t.createTimeRanges();<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=[],n=<span class="code-number">1</span>;n&lt;e.length;n++){<span class="code-keyword">var</span> r=e.end(n<span class="code-number">-1</span>),a=e.start(n);i.push([r,a])}<span class="code-keyword">return</span> t.createTimeRanges(i)}(e),r=<span class="code-number">0</span>;r&lt;n.length;r++){<span class="code-keyword">var</span> a=n.start(r),s=n.end(r);<span class="code-keyword">if</span>(i-a&lt;<span class="code-number">4</span>&amp;&amp;i-a&gt;<span class="code-number">2</span>)<span class="code-keyword">return</span>{<span class="code-attr">start</span>:a,<span class="code-attr">end</span>:s}}<span class="code-keyword">return</span> <span class="code-literal">null</span>}}]),e}(),Vn={<span class="code-attr">errorInterval</span>:<span class="code-number">30</span>,<span class="code-attr">getSource</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e(<span class="code-keyword">this</span>.tech({<span class="code-attr">IWillNotUseThisInPlugins</span>:!<span class="code-number">0</span>}).currentSource_)}},Wn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{!<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">i,n</span>)</span>{<span class="code-keyword">var</span> r=<span class="code-number">0</span>,a=<span class="code-number">0</span>,s=t.mergeOptions(Vn,n);i.ready(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-error-reload-initialized"</span>})});<span class="code-keyword">var</span> o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{a&amp;&amp;i.currentTime(a)},u=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-literal">null</span>!==e&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==e&amp;&amp;(a=i.duration()!==<span class="code-number">1</span>/<span class="code-number">0</span>&amp;&amp;i.currentTime()||<span class="code-number">0</span>,i.one(<span class="code-string">"loadedmetadata"</span>,o),i.src(e),i.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-error-reload"</span>}),i.play())},d=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-built_in">Date</span>.now()-r&lt;<span class="code-number">1e3</span>*s.errorInterval)i.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-error-reload-canceled"</span>});<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(s.getSource&amp;&amp;<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> s.getSource)<span class="code-keyword">return</span> r=<span class="code-built_in">Date</span>.now(),s.getSource.call(i,u);t.log.error(<span class="code-string">"ERROR: reloadSourceOnError - The option getSource must be a function!"</span>)}},l=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params"></span>)</span>{i.off(<span class="code-string">"loadedmetadata"</span>,o),i.off(<span class="code-string">"error"</span>,d),i.off(<span class="code-string">"dispose"</span>,e)};i.on(<span class="code-string">"error"</span>,d),i.on(<span class="code-string">"dispose"</span>,l),i.reloadSourceOnError=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{l(),e(i,t)}}(<span class="code-keyword">this</span>,e)};t.use(<span class="code-string">"*"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">setSource</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{t(<span class="code-literal">null</span>,e)},<span class="code-attr">setCurrentTime</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span> e.vhs&amp;&amp;e.currentSource().src===e.vhs.source_.src&amp;&amp;e.vhs.setCurrentTime(t),t},<span class="code-attr">play</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.vhs&amp;&amp;e.currentSource().src===e.vhs.source_.src&amp;&amp;e.vhs.setCurrentTime(e.tech_.currentTime())}}});<span class="code-keyword">var</span> zn={<span class="code-attr">PlaylistLoader</span>:C,<span class="code-attr">Playlist</span>:X,<span class="code-attr">Decrypter</span>:ue,<span class="code-attr">AsyncStream</span>:ae,<span class="code-attr">decrypt</span>:oe,<span class="code-attr">utils</span>:ge,<span class="code-attr">STANDARD_PLAYLIST_SELECTOR</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r</span>)</span>{<span class="code-keyword">var</span> a=e.playlists.map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i;<span class="code-keyword">return</span> t=e.attributes.RESOLUTION&amp;&amp;e.attributes.RESOLUTION.width,i=e.attributes.RESOLUTION&amp;&amp;e.attributes.RESOLUTION.height,{<span class="code-attr">bandwidth</span>:e.attributes.BANDWIDTH||u.Number.MAX_VALUE,<span class="code-attr">width</span>:t,<span class="code-attr">height</span>:i,<span class="code-attr">playlist</span>:e}});Ui(a,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.bandwidth-t.bandwidth});<span class="code-keyword">var</span> s=(a=a.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!X.isIncompatible(e.playlist)})).filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> X.isEnabled(e.playlist)});s.length||(s=a.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!X.isDisabled(e.playlist)}));<span class="code-keyword">var</span> o=s.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.bandwidth*pi.BANDWIDTH_VARIANCE&lt;t}),d=o[o.length<span class="code-number">-1</span>],l=o.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.bandwidth===d.bandwidth})[<span class="code-number">0</span>];<span class="code-keyword">if</span>(!<span class="code-number">1</span>===r){<span class="code-keyword">var</span> h=l||s[<span class="code-number">0</span>]||a[<span class="code-number">0</span>];<span class="code-keyword">return</span> h?h.playlist:<span class="code-literal">null</span>}<span class="code-keyword">var</span> c=o.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.width&amp;&amp;e.height});Ui(c,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.width-t.width});<span class="code-keyword">var</span> f=c.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.width===i&amp;&amp;e.height===n});d=f[f.length<span class="code-number">-1</span>];<span class="code-keyword">var</span> p=f.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.bandwidth===d.bandwidth})[<span class="code-number">0</span>],m=<span class="code-keyword">void</span> <span class="code-number">0</span>,g=<span class="code-keyword">void</span> <span class="code-number">0</span>,y=<span class="code-keyword">void</span> <span class="code-number">0</span>;p||(g=(m=c.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.width&gt;i||e.height&gt;n})).filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.width===m[<span class="code-number">0</span>].width&amp;&amp;e.height===m[<span class="code-number">0</span>].height}),d=g[g.length<span class="code-number">-1</span>],y=g.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.bandwidth===d.bandwidth})[<span class="code-number">0</span>]);<span class="code-keyword">var</span> _=y||p||l||s[<span class="code-number">0</span>]||a[<span class="code-number">0</span>];<span class="code-keyword">return</span> _?_.playlist:<span class="code-literal">null</span>}(<span class="code-keyword">this</span>.playlists.master,<span class="code-keyword">this</span>.systemBandwidth,<span class="code-built_in">parseInt</span>(Ei(<span class="code-keyword">this</span>.tech_.el(),<span class="code-string">"width"</span>),<span class="code-number">10</span>),<span class="code-built_in">parseInt</span>(Ei(<span class="code-keyword">this</span>.tech_.el(),<span class="code-string">"height"</span>),<span class="code-number">10</span>),<span class="code-keyword">this</span>.limitRenditionByPlayerDimensions)},<span class="code-attr">INITIAL_PLAYLIST_SELECTOR</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.playlists.master.playlists.filter(X.isEnabled);<span class="code-keyword">return</span> Ui(e,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> Ii(e,t)}),e.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> He(e.attributes.CODECS).videoCodec})[<span class="code-number">0</span>]||<span class="code-literal">null</span>},<span class="code-attr">comparePlaylistBandwidth</span>:Ii,<span class="code-attr">comparePlaylistResolution</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">void</span> <span class="code-number">0</span>,n=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">return</span> e.attributes.RESOLUTION&amp;&amp;e.attributes.RESOLUTION.width&amp;&amp;(i=e.attributes.RESOLUTION.width),i=i||u.Number.MAX_VALUE,t.attributes.RESOLUTION&amp;&amp;t.attributes.RESOLUTION.width&amp;&amp;(n=t.attributes.RESOLUTION.width),i===(n=n||u.Number.MAX_VALUE)&amp;&amp;e.attributes.BANDWIDTH&amp;&amp;t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:i-n},<span class="code-attr">xhr</span>:$()};[<span class="code-string">"GOAL_BUFFER_LENGTH"</span>,<span class="code-string">"MAX_GOAL_BUFFER_LENGTH"</span>,<span class="code-string">"GOAL_BUFFER_LENGTH_RATE"</span>,<span class="code-string">"BUFFER_LOW_WATER_LINE"</span>,<span class="code-string">"MAX_BUFFER_LOW_WATER_LINE"</span>,<span class="code-string">"BUFFER_LOW_WATER_LINE_RATE"</span>,<span class="code-string">"BANDWIDTH_VARIANCE"</span>].forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-built_in">Object</span>.defineProperty(zn,e,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.log.warn(<span class="code-string">"using Hls."</span>+e+<span class="code-string">" is UNSAFE be sure you know what you are doing"</span>),pi[e]},<span class="code-attr">set</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{t.log.warn(<span class="code-string">"using Hls."</span>+e+<span class="code-string">" is UNSAFE be sure you know what you are doing"</span>),<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> i||i&lt;<span class="code-number">0</span>?t.log.warn(<span class="code-string">"value of Hls."</span>+e+<span class="code-string">" must be greater than or equal to 0"</span>):pi[e]=i}})});<span class="code-keyword">var</span> Xn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-regexp">/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i</span>.test(e))<span class="code-keyword">return</span><span class="code-string">"hls"</span>;<span class="code-keyword">return</span><span class="code-regexp">/^application\/dash\+xml/i</span>.test(e)?<span class="code-string">"dash"</span>:<span class="code-literal">null</span>},Yn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=t.media(),n=<span class="code-number">-1</span>,r=<span class="code-number">0</span>;r&lt;e.length;r++)<span class="code-keyword">if</span>(e[r].id===i.uri){n=r;<span class="code-keyword">break</span>}e.selectedIndex_=n,e.trigger({<span class="code-attr">selectedIndex</span>:n,<span class="code-attr">type</span>:<span class="code-string">"change"</span>})};zn.canPlaySource=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.log.warn(<span class="code-string">"HLS is no longer a tech. Please remove it from your player's techOrder."</span>)};<span class="code-keyword">var</span> Kn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i,n</span>)</span>{<span class="code-keyword">if</span>(!e)<span class="code-keyword">return</span> e;<span class="code-keyword">var</span> r=<span class="code-keyword">void</span> <span class="code-number">0</span>,a=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">if</span>(n.mimeType_)r=i.mimeType_,a=n.mimeType_;<span class="code-keyword">else</span>{<span class="code-keyword">var</span> s=Ve(i.mimeType_),o=<span class="code-keyword">void</span> <span class="code-number">0</span>,u=<span class="code-keyword">void</span> <span class="code-number">0</span>;s.parameters.codecs.split(<span class="code-string">","</span>).forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e=e.trim(),We(e)?o=e:ze(e)&amp;&amp;(u=e)}),r=s.type+<span class="code-string">'; codecs="'</span>+u+<span class="code-string">'"'</span>,a=s.type.replace(<span class="code-string">"video"</span>,<span class="code-string">"audio"</span>)+<span class="code-string">'; codecs="'</span>+o+<span class="code-string">'"'</span>}<span class="code-keyword">var</span> d={},l=i.playlist_;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> h <span class="code-keyword">in</span> e)d[h]={<span class="code-attr">audioContentType</span>:a,<span class="code-attr">videoContentType</span>:r},l.contentProtection&amp;&amp;l.contentProtection[h]&amp;&amp;l.contentProtection[h].pssh&amp;&amp;(d[h].pssh=l.contentProtection[h].pssh),<span class="code-string">"string"</span>==<span class="code-keyword">typeof</span> e[h]&amp;&amp;(d[h].url=e[h]);<span class="code-keyword">return</span> t.mergeOptions(e,d)},$n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-built_in">window</span>.localStorage)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> e=<span class="code-built_in">window</span>.localStorage.getItem(<span class="code-string">"videojs-vhs"</span>);<span class="code-keyword">if</span>(!e)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">try</span>{<span class="code-keyword">return</span> <span class="code-built_in">JSON</span>.parse(e)}<span class="code-keyword">catch</span>(e){<span class="code-keyword">return</span> <span class="code-literal">null</span>}};zn.supportsNativeHls=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=s.createElement(<span class="code-string">"video"</span>);<span class="code-keyword">if</span>(!t.getTech(<span class="code-string">"Html5"</span>).isSupported())<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">return</span>[<span class="code-string">"application/vnd.apple.mpegurl"</span>,<span class="code-string">"audio/mpegurl"</span>,<span class="code-string">"audio/x-mpegurl"</span>,<span class="code-string">"application/x-mpegurl"</span>,<span class="code-string">"video/x-mpegurl"</span>,<span class="code-string">"video/mpegurl"</span>,<span class="code-string">"application/mpegurl"</span>].some(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span><span class="code-regexp">/maybe|probably/i</span>.test(e.canPlayType(t))})}(),zn.supportsNativeDash=!!t.getTech(<span class="code-string">"Html5"</span>).isSupported()&amp;&amp;<span class="code-regexp">/maybe|probably/i</span>.test(s.createElement(<span class="code-string">"video"</span>).canPlayType(<span class="code-string">"application/dash+xml"</span>)),zn.supportsTypeNatively=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"hls"</span>===e?zn.supportsNativeHls:<span class="code-string">"dash"</span>===e&amp;&amp;zn.supportsNativeDash},zn.isSupported=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.log.warn(<span class="code-string">"HLS is no longer a tech. Please remove it from your player's techOrder."</span>)};<span class="code-keyword">var</span> Qn=t.getComponent(<span class="code-string">"Component"</span>),Jn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">i</span>(<span class="code-params">e,n,r</span>)</span>{_(<span class="code-keyword">this</span>,i);<span class="code-keyword">var</span> a=T(<span class="code-keyword">this</span>,(i.__proto__||<span class="code-built_in">Object</span>.getPrototypeOf(i)).call(<span class="code-keyword">this</span>,n,r.hls));<span class="code-keyword">if</span>(n.options_&amp;&amp;n.options_.playerId){<span class="code-keyword">var</span> o=t(n.options_.playerId);o.hasOwnProperty(<span class="code-string">"hls"</span>)||<span class="code-built_in">Object</span>.defineProperty(o,<span class="code-string">"hls"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.log.warn(<span class="code-string">"player.hls is deprecated. Use player.tech().hls instead."</span>),n.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-player-access"</span>}),a},<span class="code-attr">configurable</span>:!<span class="code-number">0</span>}),o.vhs=a,o.dash=a,a.player_=o}<span class="code-keyword">if</span>(a.tech_=n,a.source_=e,a.stats={},a.setOptions_(),a.options_.overrideNative&amp;&amp;n.overrideNativeAudioTracks&amp;&amp;n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!<span class="code-number">0</span>),n.overrideNativeVideoTracks(!<span class="code-number">0</span>);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(a.options_.overrideNative&amp;&amp;(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Overriding native HLS requires emulated tracks. See https://git.io/vMpjB"</span>);<span class="code-keyword">return</span> a.on(s,[<span class="code-string">"fullscreenchange"</span>,<span class="code-string">"webkitfullscreenchange"</span>,<span class="code-string">"mozfullscreenchange"</span>,<span class="code-string">"MSFullscreenChange"</span>],<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=s.fullscreenElement||s.webkitFullscreenElement||s.mozFullScreenElement||s.msFullscreenElement;t&amp;&amp;t.contains(a.tech_.el())&amp;&amp;a.masterPlaylistController_.smoothQualityChange_()}),a.on(a.tech_,<span class="code-string">"seeking"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-number">0</span>===<span class="code-keyword">this</span>.tech_.currentTime()&amp;&amp;<span class="code-keyword">this</span>.tech_.player_.loop()&amp;&amp;<span class="code-keyword">this</span>.setCurrentTime(<span class="code-number">0</span>)}),a.on(a.tech_,<span class="code-string">"error"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.masterPlaylistController_&amp;&amp;<span class="code-keyword">this</span>.masterPlaylistController_.pauseLoading()}),a.on(a.tech_,<span class="code-string">"play"</span>,a.play),a}<span class="code-keyword">return</span> b(i,Qn),v(i,[{<span class="code-attr">key</span>:<span class="code-string">"setOptions_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.options_.withCredentials=<span class="code-keyword">this</span>.options_.withCredentials||!<span class="code-number">1</span>,<span class="code-keyword">this</span>.options_.handleManifestRedirects=<span class="code-keyword">this</span>.options_.handleManifestRedirects||!<span class="code-number">1</span>,<span class="code-keyword">this</span>.options_.limitRenditionByPlayerDimensions=!<span class="code-number">1</span>!==<span class="code-keyword">this</span>.options_.limitRenditionByPlayerDimensions,<span class="code-keyword">this</span>.options_.smoothQualityChange=<span class="code-keyword">this</span>.options_.smoothQualityChange||!<span class="code-number">1</span>,<span class="code-keyword">this</span>.options_.useBandwidthFromLocalStorage=<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-keyword">this</span>.source_.useBandwidthFromLocalStorage?<span class="code-keyword">this</span>.source_.useBandwidthFromLocalStorage:<span class="code-keyword">this</span>.options_.useBandwidthFromLocalStorage||!<span class="code-number">1</span>,<span class="code-keyword">this</span>.options_.customTagParsers=<span class="code-keyword">this</span>.options_.customTagParsers||[],<span class="code-keyword">this</span>.options_.customTagMappers=<span class="code-keyword">this</span>.options_.customTagMappers||[],<span class="code-keyword">this</span>.options_.cacheEncryptionKeys=<span class="code-keyword">this</span>.options_.cacheEncryptionKeys||!<span class="code-number">1</span>,<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> <span class="code-keyword">this</span>.options_.blacklistDuration&amp;&amp;(<span class="code-keyword">this</span>.options_.blacklistDuration=<span class="code-number">300</span>),<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> <span class="code-keyword">this</span>.options_.bandwidth&amp;&amp;<span class="code-keyword">this</span>.options_.useBandwidthFromLocalStorage){<span class="code-keyword">var</span> t=$n();t&amp;&amp;t.bandwidth&amp;&amp;(<span class="code-keyword">this</span>.options_.bandwidth=t.bandwidth,<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-bandwidth-from-local-storage"</span>})),t&amp;&amp;t.throughput&amp;&amp;(<span class="code-keyword">this</span>.options_.throughput=t.throughput,<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-throughput-from-local-storage"</span>}))}<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> <span class="code-keyword">this</span>.options_.bandwidth&amp;&amp;(<span class="code-keyword">this</span>.options_.bandwidth=pi.INITIAL_BANDWIDTH),<span class="code-keyword">this</span>.options_.enableLowInitialPlaylist=<span class="code-keyword">this</span>.options_.enableLowInitialPlaylist&amp;&amp;<span class="code-keyword">this</span>.options_.bandwidth===pi.INITIAL_BANDWIDTH,[<span class="code-string">"withCredentials"</span>,<span class="code-string">"limitRenditionByPlayerDimensions"</span>,<span class="code-string">"bandwidth"</span>,<span class="code-string">"smoothQualityChange"</span>,<span class="code-string">"customTagParsers"</span>,<span class="code-string">"customTagMappers"</span>,<span class="code-string">"handleManifestRedirects"</span>,<span class="code-string">"cacheEncryptionKeys"</span>].forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>!==e.source_[t]&amp;&amp;(e.options_[t]=e.source_[t])}),<span class="code-keyword">this</span>.limitRenditionByPlayerDimensions=<span class="code-keyword">this</span>.options_.limitRenditionByPlayerDimensions}},{<span class="code-attr">key</span>:<span class="code-string">"src"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>;e&amp;&amp;(<span class="code-keyword">this</span>.setOptions_(),<span class="code-keyword">this</span>.options_.url=<span class="code-keyword">this</span>.source_.src,<span class="code-keyword">this</span>.options_.tech=<span class="code-keyword">this</span>.tech_,<span class="code-keyword">this</span>.options_.externHls=zn,<span class="code-keyword">this</span>.options_.sourceType=Xn(i),<span class="code-keyword">this</span>.options_.seekTo=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{n.tech_.setCurrentTime(e),n.setCurrentTime(e)},<span class="code-keyword">this</span>.masterPlaylistController_=<span class="code-keyword">new</span> Fn(<span class="code-keyword">this</span>.options_),<span class="code-keyword">this</span>.playbackWatcher_=<span class="code-keyword">new</span> jn(t.mergeOptions(<span class="code-keyword">this</span>.options_,{<span class="code-attr">seekable</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.seekable()},<span class="code-attr">media</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.masterPlaylistController_.media()}})),<span class="code-keyword">this</span>.masterPlaylistController_.on(<span class="code-string">"error"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t.players[n.tech_.options_.playerId].error(n.masterPlaylistController_.error)}),<span class="code-keyword">this</span>.masterPlaylistController_.selectPlaylist=<span class="code-keyword">this</span>.selectPlaylist?<span class="code-keyword">this</span>.selectPlaylist.bind(<span class="code-keyword">this</span>):zn.STANDARD_PLAYLIST_SELECTOR.bind(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.masterPlaylistController_.selectInitialPlaylist=zn.INITIAL_PLAYLIST_SELECTOR.bind(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.playlists=<span class="code-keyword">this</span>.masterPlaylistController_.masterPlaylistLoader_,<span class="code-keyword">this</span>.mediaSource=<span class="code-keyword">this</span>.masterPlaylistController_.mediaSource,<span class="code-built_in">Object</span>.defineProperties(<span class="code-keyword">this</span>,{<span class="code-attr">selectPlaylist</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistController_.selectPlaylist},<span class="code-attr">set</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.masterPlaylistController_.selectPlaylist=e.bind(<span class="code-keyword">this</span>)}},<span class="code-attr">throughput</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput.rate},<span class="code-attr">set</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,<span class="code-keyword">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput.count=<span class="code-number">1</span>}},<span class="code-attr">bandwidth</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistController_.mainSegmentLoader_.bandwidth},<span class="code-attr">set</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,<span class="code-keyword">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput={<span class="code-attr">rate</span>:<span class="code-number">0</span>,<span class="code-attr">count</span>:<span class="code-number">0</span>}}},<span class="code-attr">systemBandwidth</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-number">1</span>/(<span class="code-keyword">this</span>.bandwidth||<span class="code-number">1</span>),t=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">return</span> t=<span class="code-keyword">this</span>.throughput&gt;<span class="code-number">0</span>?<span class="code-number">1</span>/<span class="code-keyword">this</span>.throughput:<span class="code-number">0</span>,<span class="code-built_in">Math</span>.floor(<span class="code-number">1</span>/(e+t))},<span class="code-attr">set</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t.log.error(<span class="code-string">'The "systemBandwidth" property is read-only'</span>)}}}),<span class="code-keyword">this</span>.options_.bandwidth&amp;&amp;(<span class="code-keyword">this</span>.bandwidth=<span class="code-keyword">this</span>.options_.bandwidth),<span class="code-keyword">this</span>.options_.throughput&amp;&amp;(<span class="code-keyword">this</span>.throughput=<span class="code-keyword">this</span>.options_.throughput),<span class="code-built_in">Object</span>.defineProperties(<span class="code-keyword">this</span>.stats,{<span class="code-attr">bandwidth</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.bandwidth||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mediaRequests</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.masterPlaylistController_.mediaRequests_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mediaRequestsAborted</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.masterPlaylistController_.mediaRequestsAborted_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mediaRequestsTimedout</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.masterPlaylistController_.mediaRequestsTimedout_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mediaRequestsErrored</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.masterPlaylistController_.mediaRequestsErrored_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mediaTransferDuration</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.masterPlaylistController_.mediaTransferDuration_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mediaBytesTransferred</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.masterPlaylistController_.mediaBytesTransferred_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mediaSecondsLoaded</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.masterPlaylistController_.mediaSecondsLoaded_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">buffered</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> ke(n.tech_.buffered())},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">currentTime</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.tech_.currentTime()},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">currentSource</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.tech_.currentSource_},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">currentTech</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.tech_.name_},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">duration</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.tech_.duration()},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">master</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.playlists.master},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">playerDimensions</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.tech_.currentDimensions()},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">seekable</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> ke(n.tech_.seekable())},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">timestamp</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">Date</span>.now()},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">videoPlaybackQuality</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.tech_.getVideoPlaybackQuality()},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>}}),<span class="code-keyword">this</span>.tech_.one(<span class="code-string">"canplay"</span>,<span class="code-keyword">this</span>.masterPlaylistController_.setupFirstPlay.bind(<span class="code-keyword">this</span>.masterPlaylistController_)),<span class="code-keyword">this</span>.tech_.on(<span class="code-string">"bandwidthupdate"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n.options_.useBandwidthFromLocalStorage&amp;&amp;<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!<span class="code-built_in">window</span>.localStorage)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> i=$n();i=i?t.mergeOptions(i,e):e;<span class="code-keyword">try</span>{<span class="code-built_in">window</span>.localStorage.setItem(<span class="code-string">"videojs-vhs"</span>,<span class="code-built_in">JSON</span>.stringify(i))}<span class="code-keyword">catch</span>(e){<span class="code-keyword">return</span>!<span class="code-number">1</span>}}({<span class="code-attr">bandwidth</span>:n.bandwidth,<span class="code-attr">throughput</span>:<span class="code-built_in">Math</span>.round(n.throughput)})}),<span class="code-keyword">this</span>.masterPlaylistController_.on(<span class="code-string">"selectedinitialmedia"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,i;i=(e=n).playlists,e.representations=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.master.playlists.filter(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!j(e)}).map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">new</span> Hn(e,t,t.uri)})},<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=e.masterPlaylistController_.mainSegmentLoader_,n=e.masterPlaylistController_.audioSegmentLoader_,r=t.players[e.tech_.options_.playerId];<span class="code-keyword">if</span>(r.eme){<span class="code-keyword">var</span> a=Kn(e.source_.keySystems,i,n);a&amp;&amp;(r.currentSource().keySystems=a,r.eme.initializeMediaKeys&amp;&amp;r.eme.initializeMediaKeys())}}(n)}),<span class="code-keyword">this</span>.on(<span class="code-keyword">this</span>.masterPlaylistController_,<span class="code-string">"progress"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.tech_.trigger(<span class="code-string">"progress"</span>)}),<span class="code-keyword">this</span>.tech_.ready(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.setupQualityLevels_()}),<span class="code-keyword">this</span>.tech_.el()&amp;&amp;<span class="code-keyword">this</span>.tech_.src(t.URL.createObjectURL(<span class="code-keyword">this</span>.masterPlaylistController_.mediaSource)))}},{<span class="code-attr">key</span>:<span class="code-string">"setupQualityLevels_"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>,i=t.players[<span class="code-keyword">this</span>.tech_.options_.playerId];i&amp;&amp;i.qualityLevels&amp;&amp;(<span class="code-keyword">this</span>.qualityLevels_=i.qualityLevels(),<span class="code-keyword">this</span>.masterPlaylistController_.on(<span class="code-string">"selectedinitialmedia"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t,i;t=e.qualityLevels_,(i=e).representations().forEach(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{t.addQualityLevel(e)}),Yn(t,i.playlists)}),<span class="code-keyword">this</span>.playlists.on(<span class="code-string">"mediachange"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{Yn(e.qualityLevels_,e.playlists)}))}},{<span class="code-attr">key</span>:<span class="code-string">"play"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.masterPlaylistController_.play()}},{<span class="code-attr">key</span>:<span class="code-string">"setCurrentTime"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.masterPlaylistController_.setCurrentTime(e)}},{<span class="code-attr">key</span>:<span class="code-string">"duration"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistController_.duration()}},{<span class="code-attr">key</span>:<span class="code-string">"seekable"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistController_.seekable()}},{<span class="code-attr">key</span>:<span class="code-string">"dispose"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.playbackWatcher_&amp;&amp;<span class="code-keyword">this</span>.playbackWatcher_.dispose(),<span class="code-keyword">this</span>.masterPlaylistController_&amp;&amp;<span class="code-keyword">this</span>.masterPlaylistController_.dispose(),<span class="code-keyword">this</span>.qualityLevels_&amp;&amp;<span class="code-keyword">this</span>.qualityLevels_.dispose(),<span class="code-keyword">this</span>.player_&amp;&amp;(<span class="code-keyword">delete</span> <span class="code-keyword">this</span>.player_.vhs,<span class="code-keyword">delete</span> <span class="code-keyword">this</span>.player_.dash,<span class="code-keyword">delete</span> <span class="code-keyword">this</span>.player_.hls),<span class="code-keyword">this</span>.tech_&amp;&amp;<span class="code-keyword">this</span>.tech_.hls&amp;&amp;<span class="code-keyword">delete</span> <span class="code-keyword">this</span>.tech_.hls,<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i,n</span>)</span>{<span class="code-literal">null</span>===t&amp;&amp;(t=<span class="code-built_in">Function</span>.prototype);<span class="code-keyword">var</span> r=<span class="code-built_in">Object</span>.getOwnPropertyDescriptor(t,i);<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===r){<span class="code-keyword">var</span> a=<span class="code-built_in">Object</span>.getPrototypeOf(t);<span class="code-keyword">return</span> <span class="code-literal">null</span>===a?<span class="code-keyword">void</span> <span class="code-number">0</span>:e(a,i,n)}<span class="code-keyword">if</span>(<span class="code-string">"value"</span><span class="code-keyword">in</span> r)<span class="code-keyword">return</span> r.value;<span class="code-keyword">var</span> s=r.get;<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>!==s?s.call(n):<span class="code-keyword">void</span> <span class="code-number">0</span>}(i.prototype.__proto__||<span class="code-built_in">Object</span>.getPrototypeOf(i.prototype),<span class="code-string">"dispose"</span>,<span class="code-keyword">this</span>).call(<span class="code-keyword">this</span>)}},{<span class="code-attr">key</span>:<span class="code-string">"convertToProgramTime"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> ye({<span class="code-attr">playlist</span>:<span class="code-keyword">this</span>.masterPlaylistController_.media(),<span class="code-attr">time</span>:e,<span class="code-attr">callback</span>:t})}},{<span class="code-attr">key</span>:<span class="code-string">"seekToProgramTime"</span>,<span class="code-attr">value</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=!(<span class="code-built_in">arguments</span>.length&gt;<span class="code-number">2</span>&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-built_in">arguments</span>[<span class="code-number">2</span>])||<span class="code-built_in">arguments</span>[<span class="code-number">2</span>],n=<span class="code-built_in">arguments</span>.length&gt;<span class="code-number">3</span>&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-built_in">arguments</span>[<span class="code-number">3</span>]?<span class="code-built_in">arguments</span>[<span class="code-number">3</span>]:<span class="code-number">2</span>;<span class="code-keyword">return</span> _e({<span class="code-attr">programTime</span>:e,<span class="code-attr">playlist</span>:<span class="code-keyword">this</span>.masterPlaylistController_.media(),<span class="code-attr">retryCount</span>:n,<span class="code-attr">pauseAfterSeek</span>:i,<span class="code-attr">seekTo</span>:<span class="code-keyword">this</span>.options_.seekTo,<span class="code-attr">tech</span>:<span class="code-keyword">this</span>.options_.tech,<span class="code-attr">callback</span>:t})}}]),i}(),Zn={<span class="code-attr">name</span>:<span class="code-string">"videojs-http-streaming"</span>,<span class="code-attr">VERSION</span>:<span class="code-string">"1.11.1"</span>,<span class="code-attr">canHandleSource</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-built_in">arguments</span>.length&gt;<span class="code-number">1</span>&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]?<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]:{},n=t.mergeOptions(t.options,i);<span class="code-keyword">return</span> Zn.canPlayType(e.type,n)},<span class="code-attr">handleSource</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-built_in">arguments</span>.length&gt;<span class="code-number">2</span>&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-built_in">arguments</span>[<span class="code-number">2</span>]?<span class="code-built_in">arguments</span>[<span class="code-number">2</span>]:{},r=t.mergeOptions(t.options,n);<span class="code-keyword">return</span> i.hls=<span class="code-keyword">new</span> Jn(e,i,r),i.hls.xhr=$(),i.hls.src(e.src,e.type),i.hls},<span class="code-attr">canPlayType</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-built_in">arguments</span>.length&gt;<span class="code-number">1</span>&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]?<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]:{},n=t.mergeOptions(t.options,i).hls.overrideNative,r=Xn(e);<span class="code-keyword">return</span> r&amp;&amp;(!zn.supportsTypeNatively(r)||n)?<span class="code-string">"maybe"</span>:<span class="code-string">""</span>}};<span class="code-keyword">void</span> <span class="code-number">0</span>!==t.MediaSource&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==t.URL||(t.MediaSource=Ze,t.URL=et),Ze.supportsNativeMediaSources()&amp;&amp;t.getTech(<span class="code-string">"Html5"</span>).registerSourceHandler(Zn,<span class="code-number">0</span>),t.HlsHandler=Jn,t.HlsSourceHandler=Zn,t.Hls=zn,t.use||t.registerComponent(<span class="code-string">"Hls"</span>,zn),t.options.hls=t.options.hls||{},t.registerPlugin?t.registerPlugin(<span class="code-string">"reloadSourceOnError"</span>,Wn):t.plugin(<span class="code-string">"reloadSourceOnError"</span>,Wn),e.LOCAL_STORAGE_KEY=<span class="code-string">"videojs-vhs"</span>,e.Hls=zn,e.HlsHandler=Jn,e.HlsSourceHandler=Zn,e.emeKeySystems=Kn,e.simpleTypeFromSourceType=Xn,<span class="code-built_in">Object</span>.defineProperty(e,<span class="code-string">"__esModule"</span>,{<span class="code-attr">value</span>:!<span class="code-number">0</span>})});
</code></td></tr></tbody></table></div></div></div></div><style data-emotion-css="1teho9j">.css-1teho9j{margin-top:5rem;background:black;color:#aaa;}</style><footer class="css-1teho9j"><style data-emotion-css="1ui8put">.css-1ui8put{max-width:940px;padding:10px 20px;margin:0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><div class="css-1ui8put"><p> <!-- -->2019<!-- --> UNPKG</p><style data-emotion-css="la3nd4">.css-la3nd4{font-size:1.5rem;}</style><p class="css-la3nd4"><style data-emotion-css="bogekj">.css-bogekj{color:#aaa;display:inline-block;}.css-bogekj:hover{color:white;}</style><a title="Twitter" href="https://twitter.com/unpkg" class="css-bogekj"><style data-emotion-css="i6dzq1">.css-i6dzq1{vertical-align:text-bottom;}</style><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="css-i6dzq1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a><style data-emotion-css="ap0i2q">.css-ap0i2q{color:#aaa;display:inline-block;margin-left:1rem;}.css-ap0i2q:hover{color:white;}</style><a title="GitHub" href="https://github.com/mjackson/unpkg" class="css-ap0i2q"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" class="css-i6dzq1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></p></div></footer></div><script src="/react@16.8.6/umd/react.production.min.js"></script><script src="/react-dom@16.8.6/umd/react-dom.production.min.js"></script><script src="/@emotion/core@10.0.6/dist/core.umd.min.js"></script><script>'use strict';(function(m,v,c){function w(){w=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],f;for(f in c)Object.prototype.hasOwnProperty.call(c,f)&&(a[f]=c[f])}return a};return w.apply(this,arguments)}function I(a,b){if(null==a)return{};var c={},f=Object.keys(a),g;for(g=0;g<f.length;g++){var h=f[g];0<=b.indexOf(h)||(c[h]=a[h])}return c}function J(a,b){b||(b=a.slice(0));a.raw=b;return a}function K(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,
"default")?a["default"]:a}function x(a,b){return b={exports:{}},a(b,b.exports),b.exports}function L(){}function M(){}function fa(a){var b=a.children;a=I(a,["children"]);return E.createElement(N.Provider,{children:b,value:a})}function O(a){return a&&a.map(function(a,c){return m.createElement(a.tag,u({key:c},a.attr),O(a.child))})}function y(a){return function(b){return m.createElement(ha,u({attr:u({},a.attr)},b),O(a.child))}}function ha(a){var b=function(b){var c=a.size||b.size||"1em";if(b.className)var d=
b.className;a.className&&(d=(d?d+" ":"")+a.className);var h=a.attr,n=a.title,l=["attr","title"],q={},p;for(p in a)Object.prototype.hasOwnProperty.call(a,p)&&0>l.indexOf(p)&&(q[p]=a[p]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var k=0;for(p=Object.getOwnPropertySymbols(a);k<p.length;k++)0>l.indexOf(p[k])&&(q[p[k]]=a[p[k]])}return m.createElement("svg",u({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},b.attr,h,q,{className:d,style:u({color:a.color||b.color},b.style,
a.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),n&&m.createElement("title",null,n),a.children)};return void 0!==P?m.createElement(P.Consumer,null,function(a){return b(a)}):b(Q)}function z(a,b){var d=b.css;b=I(b,["css"]);return c.jsx(a,w({css:w({},d,{verticalAlign:"text-bottom"})},b))}function ia(a){return z(R,a)}function ja(a){return z(S,a)}function ka(a){return z(T,a)}function la(a){return z(U,a)}function ma(a){var b=a.path,d=a.details,f=[];"/"!==b&&f.push(c.jsx("tr",{key:".."},c.jsx("td",
{css:F}),c.jsx("td",{css:t},c.jsx("a",{title:"Parent directory",href:"../",css:G},"..")),c.jsx("td",{css:t}),c.jsx("td",{css:H})));a=Object.keys(d).reduce(function(a,b){var c=a.subdirs,f=a.files;b=d[b];"directory"===b.type?c.push(b):"file"===b.type&&f.push(b);return a},{subdirs:[],files:[]});var g=a.files;a.subdirs.sort(V("path")).forEach(function(a){a=a.path.substr(1<b.length?b.length+1:1);var d=a+"/";f.push(c.jsx("tr",{key:a},c.jsx("td",{css:F},c.jsx(ia,null)),c.jsx("td",{css:t},c.jsx("a",{title:a,
href:d,css:G},a)),c.jsx("td",{css:t},"-"),c.jsx("td",{css:H},"-")))});g.sort(V("path")).forEach(function(a){var d=a.size,g=a.contentType;a=a.path.substr(1<b.length?b.length+1:1);f.push(c.jsx("tr",{key:a},c.jsx("td",{css:F},c.jsx(ja,null)),c.jsx("td",{css:t},c.jsx("a",{title:a,href:a,css:G},a)),c.jsx("td",{css:t},W(d)),c.jsx("td",{css:H},g)))});return c.jsx("div",{css:{border:"1px solid #dfe2e5",borderRadius:3,borderTopWidth:0,"@media (max-width: 700px)":{borderRightWidth:0,borderLeftWidth:0}}},c.jsx("table",
{css:{width:"100%",borderCollapse:"collapse",borderRadius:2,background:"#fff","@media (max-width: 700px)":{"& th + th + th + th, & td + td + td + td":{display:"none"}}}},c.jsx("thead",null,c.jsx("tr",null,c.jsx("th",null,c.jsx(A,null,"Icon")),c.jsx("th",null,c.jsx(A,null,"Name")),c.jsx("th",null,c.jsx(A,null,"Size")),c.jsx("th",null,c.jsx(A,null,"Content Type")))),c.jsx("tbody",null,f)))}function na(a){a=a.split("/");return a[a.length-1]}function oa(a){var b=a.uri;return c.jsx("div",{css:{padding:20,
textAlign:"center"}},c.jsx("img",{alt:na(a.path),src:b}))}function pa(a){a=a.highlights.slice(0);var b=a.length&&""===a[a.length-1];b&&a.pop();return c.jsx("div",{className:"code-listing",css:{overflowX:"auto",overflowY:"hidden",paddingTop:5,paddingBottom:5}},c.jsx("table",{css:{border:"none",borderCollapse:"collapse",borderSpacing:0}},c.jsx("tbody",null,a.map(function(a,b){var d=b+1;return c.jsx("tr",{key:b},c.jsx("td",{id:"L"+d,css:{paddingLeft:10,paddingRight:10,color:"rgba(27,31,35,.3)",textAlign:"right",
verticalAlign:"top",width:"1%",minWidth:50,userSelect:"none"}},c.jsx("span",null,d)),c.jsx("td",{id:"LC"+d,css:{paddingLeft:10,paddingRight:10,color:"#24292e",whiteSpace:"pre"}},c.jsx("code",{dangerouslySetInnerHTML:{__html:a}})))}),!b&&c.jsx("tr",{key:"no-newline"},c.jsx("td",{css:{paddingLeft:10,paddingRight:10,color:"rgba(27,31,35,.3)",textAlign:"right",verticalAlign:"top",width:"1%",minWidth:50,userSelect:"none"}},"\\"),c.jsx("td",{css:{paddingLeft:10,color:"rgba(27,31,35,.3)",userSelect:"none"}},
"No newline at end of file")))))}function qa(){return c.jsx("div",{css:{padding:20}},c.jsx("p",{css:{textAlign:"center"}},"No preview available."))}function ra(a){var b=a.path,d=a.details,f=m.useContext(N);a=f.packageName;f=f.packageVersion;var g=d.highlights,h=d.uri,n=d.language;d=d.size;var l=b.split("/");l=l[l.length-1];return c.jsx("div",{css:{border:"1px solid #dfe2e5",borderRadius:3,"@media (max-width: 700px)":{borderRightWidth:0,borderLeftWidth:0}}},c.jsx("div",{css:{padding:10,background:"#f6f8fa",
color:"#424242",border:"1px solid #d1d5da",borderTopLeftRadius:3,borderTopRightRadius:3,margin:"-1px -1px 0",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between","@media (max-width: 700px)":{paddingRight:20,paddingLeft:20}}},c.jsx("span",null,W(d))," ",c.jsx("span",null,n)," ",c.jsx("a",{title:l,href:"/"+a+"@"+f+b,css:{display:"inline-block",textDecoration:"none",padding:"2px 8px",fontWeight:600,fontSize:"0.9rem",color:"#24292e",backgroundColor:"#eff3f6",border:"1px solid rgba(27,31,35,.2)",
borderRadius:3,":hover":{backgroundColor:"#e6ebf1",borderColor:"rgba(27,31,35,.35)"},":active":{backgroundColor:"#e9ecef",borderColor:"rgba(27,31,35,.35)",boxShadow:"inset 0 0.15em 0.3em rgba(27,31,35,.15)"}}},"View Raw")),g?c.jsx(pa,{highlights:g}):h?c.jsx(oa,{path:b,uri:h}):c.jsx(qa,null))}function X(){var a=J(["\n  .code-listing {\n    background: #fbfdff;\n    color: #383a42;\n  }\n  .code-comment,\n  .code-quote {\n    color: #a0a1a7;\n    font-style: italic;\n  }\n  .code-doctag,\n  .code-keyword,\n  .code-link,\n  .code-formula {\n    color: #a626a4;\n  }\n  .code-section,\n  .code-name,\n  .code-selector-tag,\n  .code-deletion,\n  .code-subst {\n    color: #e45649;\n  }\n  .code-literal {\n    color: #0184bb;\n  }\n  .code-string,\n  .code-regexp,\n  .code-addition,\n  .code-attribute,\n  .code-meta-string {\n    color: #50a14f;\n  }\n  .code-built_in,\n  .code-class .code-title {\n    color: #c18401;\n  }\n  .code-attr,\n  .code-variable,\n  .code-template-variable,\n  .code-type,\n  .code-selector-class,\n  .code-selector-attr,\n  .code-selector-pseudo,\n  .code-number {\n    color: #986801;\n  }\n  .code-symbol,\n  .code-bullet,\n  .code-meta,\n  .code-selector-id,\n  .code-title {\n    color: #4078f2;\n  }\n  .code-emphasis {\n    font-style: italic;\n  }\n  .code-strong {\n    font-weight: bold;\n  }\n"]);
X=function(){return a};return a}function Y(){var a=J(["\n  html {\n    box-sizing: border-box;\n  }\n  *,\n  *:before,\n  *:after {\n    box-sizing: inherit;\n  }\n\n  html,\n  body,\n  #root {\n    height: 100%;\n    margin: 0;\n  }\n\n  body {\n    ","\n    font-size: 16px;\n    line-height: 1.5;\n    background: white;\n    color: black;\n  }\n\n  code {\n    ","\n  }\n\n  th,\n  td {\n    padding: 0;\n  }\n\n  select {\n    font-size: inherit;\n  }\n\n  #root {\n    display: flex;\n    flex-direction: column;\n  }\n"]);
Y=function(){return a};return a}var E="default"in m?m["default"]:m;v=v&&v.hasOwnProperty("default")?v["default"]:v;var sa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Z=x(function(a,b){function c(a){if("object"===typeof a&&null!==a){var b=a.$$typeof;switch(b){case g:switch(a=a.type,a){case r:case e:case n:case q:case l:case B:return a;default:switch(a=a&&a.$$typeof,a){case k:case C:case p:return a;
default:return b}}case m:case D:case h:return b}}}function f(a){return c(a)===e}Object.defineProperty(b,"__esModule",{value:!0});var g=(a="function"===typeof Symbol&&Symbol.for)?Symbol.for("react.element"):60103,h=a?Symbol.for("react.portal"):60106,n=a?Symbol.for("react.fragment"):60107,l=a?Symbol.for("react.strict_mode"):60108,q=a?Symbol.for("react.profiler"):60114,p=a?Symbol.for("react.provider"):60109,k=a?Symbol.for("react.context"):60110,r=a?Symbol.for("react.async_mode"):60111,e=a?Symbol.for("react.concurrent_mode"):
60111,C=a?Symbol.for("react.forward_ref"):60112,B=a?Symbol.for("react.suspense"):60113,D=a?Symbol.for("react.memo"):60115,m=a?Symbol.for("react.lazy"):60116;b.typeOf=c;b.AsyncMode=r;b.ConcurrentMode=e;b.ContextConsumer=k;b.ContextProvider=p;b.Element=g;b.ForwardRef=C;b.Fragment=n;b.Lazy=m;b.Memo=D;b.Portal=h;b.Profiler=q;b.StrictMode=l;b.Suspense=B;b.isValidElementType=function(a){return"string"===typeof a||"function"===typeof a||a===n||a===e||a===q||a===l||a===B||"object"===typeof a&&null!==a&&(a.$$typeof===
m||a.$$typeof===D||a.$$typeof===p||a.$$typeof===k||a.$$typeof===C)};b.isAsyncMode=function(a){return f(a)||c(a)===r};b.isConcurrentMode=f;b.isContextConsumer=function(a){return c(a)===k};b.isContextProvider=function(a){return c(a)===p};b.isElement=function(a){return"object"===typeof a&&null!==a&&a.$$typeof===g};b.isForwardRef=function(a){return c(a)===C};b.isFragment=function(a){return c(a)===n};b.isLazy=function(a){return c(a)===m};b.isMemo=function(a){return c(a)===D};b.isPortal=function(a){return c(a)===
h};b.isProfiler=function(a){return c(a)===q};b.isStrictMode=function(a){return c(a)===l};b.isSuspense=function(a){return c(a)===B}});K(Z);var ta=x(function(a,b){});K(ta);x(function(a){a.exports=Z});(function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=0;10>a;a++)b["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var c={};"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=
a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},c)).join("")?!1:!0}catch(f){return!1}})();Function.call.bind(Object.prototype.hasOwnProperty);M.resetWarningCache=L;var ua=function(){function a(a,b,c,d,l,q){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==q)throw a=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types"),a.name="Invariant Violation",a;}
function b(){return a}a.isRequired=a;var c={array:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:b,element:a,elementType:a,instanceOf:b,node:a,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b,checkPropTypes:M,resetWarningCache:L};return c.PropTypes=c};x(function(a){a.exports=ua()});var N=m.createContext(),va=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],f;for(f in c)Object.prototype.hasOwnProperty.call(c,f)&&(a[f]=c[f])}return a},wa={border:0,clip:"rect(0 0 0 0)",
height:"1px",width:"1px",margin:"-1px",padding:0,overflow:"hidden",position:"absolute"},A=function(a){return E.createElement("div",va({style:wa},a))},aa=x(function(a){(function(b,c){a.exports=c()})(sa,function(){function a(a){if(!a)return!0;if(!g(a)||0!==a.length)for(var c in a)if(p.call(a,c))return!1;return!0}function c(a){return"number"===typeof a||"[object Number]"===q.call(a)}function f(a){return"string"===typeof a||"[object String]"===q.call(a)}function g(a){return"object"===typeof a&&"number"===
typeof a.length&&"[object Array]"===q.call(a)}function h(a){var c=parseInt(a);return c.toString()===a?c:a}function n(b,e,d,g){c(e)&&(e=[e]);if(a(e))return b;if(f(e))return n(b,e.split("."),d,g);var r=h(e[0]);if(1===e.length)return e=b[r],void 0!==e&&g||(b[r]=d),e;void 0===b[r]&&(c(r)?b[r]=[]:b[r]={});return n(b[r],e.slice(1),d,g)}function l(b,e){c(e)&&(e=[e]);if(!a(b)){if(a(e))return b;if(f(e))return l(b,e.split("."));var d=h(e[0]),r=b[d];if(1===e.length)void 0!==r&&(g(b)?b.splice(d,1):delete b[d]);
else if(void 0!==b[d])return l(b[d],e.slice(1));return b}}var q=Object.prototype.toString,p=Object.prototype.hasOwnProperty,k={ensureExists:function(a,b,c){return n(a,b,c,!0)},set:function(a,b,c,d){return n(a,b,c,d)},insert:function(a,b,c,d){var e=k.get(a,b);d=~~d;g(e)||(e=[],k.set(a,b,e));e.splice(d,0,c)},empty:function(b,d){if(a(d))return b;if(!a(b)){var e,h;if(!(e=k.get(b,d)))return b;if(f(e))return k.set(b,d,"");if("boolean"===typeof e||"[object Boolean]"===q.call(e))return k.set(b,d,!1);if(c(e))return k.set(b,
d,0);if(g(e))e.length=0;else if("object"===typeof e&&"[object Object]"===q.call(e))for(h in e)p.call(e,h)&&delete e[h];else return k.set(b,d,null)}},push:function(a,b){var c=k.get(a,b);g(c)||(c=[],k.set(a,b,c));c.push.apply(c,Array.prototype.slice.call(arguments,2))},coalesce:function(a,b,c){for(var d,e=0,f=b.length;e<f;e++)if(void 0!==(d=k.get(a,b[e])))return d;return c},get:function(b,d,g){c(d)&&(d=[d]);if(a(d))return b;if(a(b))return g;if(f(d))return k.get(b,d.split("."),g);var e=h(d[0]);return 1===
d.length?void 0===b[e]?g:b[e]:k.get(b[e],d.slice(1),g)},del:function(a,b){return l(a,b)}};return k})});var ba=function(a){return function(b){return typeof b===a}};var xa=function(a,b){var c=1,f=b||function(a,b){return b};"-"===a[0]&&(c=-1,a=a.substr(1));return function(b,d){var g;b=f(a,aa.get(b,a));d=f(a,aa.get(d,a));b<d&&(g=-1);b>d&&(g=1);b===d&&(g=0);return g*c}};var V=function(){var a=Array.prototype.slice.call(arguments),b=a.filter(ba("string")),c=a.filter(ba("function"))[0];return function(a,
d){for(var f=b.length,g=0,l=0;0===g&&l<f;)g=xa(b[l],c)(a,d),l++;return g}};let ca="B kB MB GB TB PB EB ZB YB".split(" "),da=(a,b)=>{let c=a;"string"===typeof b?c=a.toLocaleString(b):!0===b&&(c=a.toLocaleString());return c};var W=(a,b)=>{if(!Number.isFinite(a))throw new TypeError(`Expected a finite number, got ${typeof a}: ${a}`);b=Object.assign({},b);if(b.signed&&0===a)return" 0 B";var c=0>a;let f=c?"-":b.signed?"+":"";c&&(a=-a);if(1>a)return a=da(a,b.locale),f+a+" B";c=Math.min(Math.floor(Math.log10(a)/
3),ca.length-1);a=Number((a/Math.pow(1E3,c)).toPrecision(3));a=da(a,b.locale);return f+a+" "+ca[c]},Q={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},P=m.createContext&&m.createContext(Q),u=function(){u=Object.assign||function(a){for(var b,c=1,f=arguments.length;c<f;c++){b=arguments[c];for(var g in b)Object.prototype.hasOwnProperty.call(b,g)&&(a[g]=b[g])}return a};return u.apply(this,arguments)},R=function(a){return y({tag:"svg",attr:{viewBox:"0 0 14 16"},child:[{tag:"path",attr:{fillRule:"evenodd",
d:"M13 4H7V3c0-.66-.31-1-1-1H1c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5c0-.55-.45-1-1-1zM6 4H1V3h5v1z"}}]})(a)};R.displayName="GoFileDirectory";var S=function(a){return y({tag:"svg",attr:{viewBox:"0 0 12 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z"}}]})(a)};S.displayName="GoFile";var U=function(a){return y({tag:"svg",attr:{viewBox:"0 0 496 512"},
child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"}}]})(a)};
U.displayName="FaGithub";var T=function(a){return y({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"}}]})(a)};
T.displayName="FaTwitter";var G={color:"#0076ff",textDecoration:"none",":hover":{textDecoration:"underline"}},t={paddingTop:6,paddingRight:3,paddingBottom:6,paddingLeft:3,borderTop:"1px solid #eaecef"},F=w({},t,{color:"#424242",width:17,paddingRight:2,paddingLeft:10,"@media (max-width: 700px)":{paddingLeft:20}}),H=w({},t,{textAlign:"right",paddingRight:10,"@media (max-width: 700px)":{paddingRight:20}}),ya=c.css(Y(),'\nfont-family: -apple-system,\n  BlinkMacSystemFont,\n  "Segoe UI",\n  "Roboto",\n  "Oxygen",\n  "Ubuntu",\n  "Cantarell",\n  "Fira Sans",\n  "Droid Sans",\n  "Helvetica Neue",\n  sans-serif;\n',
"\nfont-family: Menlo,\n  Monaco,\n  Lucida Console,\n  Liberation Mono,\n  DejaVu Sans Mono,\n  Bitstream Vera Sans Mono,\n  Courier New,\n  monospace;\n"),za=c.css(X()),ea={color:"#0076ff",textDecoration:"none",":hover":{textDecoration:"underline"}};v.hydrate(E.createElement(function(a){var b=a.packageName,d=a.packageVersion,f=a.availableVersions;f=void 0===f?[]:f;var g=a.filename;a=a.target;var h=[];if("/"===g)h.push(b);else{var n="/browse/"+b+"@"+d;h.push(c.jsx("a",{href:n+"/",css:ea},b));g=g.replace(/^\/+/,
"").replace(/\/+$/,"").split("/");var l=g.pop();g.forEach(function(a){n+="/"+a;h.push(c.jsx("a",{href:n+"/",css:ea},a))});h.push(l)}return c.jsx(fa,{packageName:b,packageVersion:d},c.jsx(m.Fragment,null,c.jsx(c.Global,{styles:ya}),c.jsx(c.Global,{styles:za}),c.jsx("div",{css:{flex:"1 0 auto"}},c.jsx("div",{css:{maxWidth:940,padding:"0 20px",margin:"0 auto"}},c.jsx("header",{css:{textAlign:"center"}},c.jsx("h1",{css:{fontSize:"3rem",marginTop:"2rem"}},c.jsx("a",{href:"/",css:{color:"#000",textDecoration:"none"}},
"UNPKG"))),c.jsx("header",{css:{display:"flex",flexDirection:"row",alignItems:"center","@media (max-width: 700px)":{flexDirection:"column-reverse",alignItems:"flex-start"}}},c.jsx("h1",{css:{fontSize:"1.5rem",fontWeight:"normal",flex:1}},c.jsx("nav",null,h.map(function(a,b,d){return c.jsx("span",{key:b},0!==b&&c.jsx("span",{css:{paddingLeft:5,paddingRight:5}},"/"),b===d.length-1?c.jsx("strong",null,a):a)}))),c.jsx("p",{css:{marginLeft:20,"@media (max-width: 700px)":{marginLeft:0,marginBottom:0}}},
c.jsx("label",null,"Version:"," ",c.jsx("select",{name:"version",defaultValue:d,onChange:function(a){window.location.href=window.location.href.replace("@"+d,"@"+a.target.value)},css:{appearance:"none",cursor:"pointer",padding:"4px 24px 4px 8px",fontWeight:600,fontSize:"0.9em",color:"#24292e",border:"1px solid rgba(27,31,35,.2)",borderRadius:3,backgroundColor:"#eff3f6",backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAAAAXNSR0IArs4c6QAAARFJREFUKBVjZAACNS39RhBNKrh17WI9o4quoT3Dn78HSNUMUs/CzOTI/O7Vi4dCYpJ3/jP+92BkYGAlyiBGhm8MjIxJt65e3MQM0vDu9YvLYmISILYZELOBxHABRkaGr0yMzF23r12YDFIDNgDEePv65SEhEXENBkYGFSAXuyGMjF8Z/jOsvX3tYiFIDwgwQSgIaaijnvj/P8M5IO8HsjiY/f//D4b//88A1SQhywG9jQr09PS4v/1mPAeUUPzP8B8cJowMjL+Bqu6xMQmaXL164AuyDgwDQJLa2qYSP//9vARkCoMVMzK8YeVkNbh+9uxzMB+JwGoASF5Vx0jz/98/18BqmZi171w9D2EjaaYKEwAEK00XQLdJuwAAAABJRU5ErkJggg==)",
backgroundPosition:"right 8px center",backgroundRepeat:"no-repeat",backgroundSize:"auto 25%",":hover":{backgroundColor:"#e6ebf1",borderColor:"rgba(27,31,35,.35)"},":active":{backgroundColor:"#e9ecef",borderColor:"rgba(27,31,35,.35)",boxShadow:"inset 0 0.15em 0.3em rgba(27,31,35,.15)"}}},f.map(function(a){return c.jsx("option",{key:a,value:a},a)})))))),c.jsx("div",{css:{maxWidth:940,padding:"0 20px",margin:"0 auto","@media (max-width: 700px)":{padding:0,margin:0}}},"directory"===a.type?c.jsx(ma,{path:a.path,
details:a.details}):"file"===a.type?c.jsx(ra,{path:a.path,details:a.details}):null)),c.jsx("footer",{css:{marginTop:"5rem",background:"black",color:"#aaa"}},c.jsx("div",{css:{maxWidth:940,padding:"10px 20px",margin:"0 auto",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},c.jsx("p",null,"\u00a9 ",(new Date).getFullYear()," UNPKG"),c.jsx("p",{css:{fontSize:"1.5rem"}},c.jsx("a",{title:"Twitter",href:"https://twitter.com/unpkg",css:{color:"#aaa",display:"inline-block",
":hover":{color:"white"}}},c.jsx(ka,null)),c.jsx("a",{title:"GitHub",href:"https://github.com/mjackson/unpkg",css:{color:"#aaa",display:"inline-block",marginLeft:"1rem",":hover":{color:"white"}}},c.jsx(la,null)))))))},window.__DATA__||{}),document.getElementById("root"))})(React,ReactDOM,emotionCore);
</script></body></html>